var gc=Object.defineProperty;var mc=(p,i,t)=>i in p?gc(p,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):p[i]=t;var $=(p,i,t)=>(mc(p,typeof i!="symbol"?i+"":i,t),t);const xc=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))f(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&f(l)}).observe(document,{childList:!0,subtree:!0});function t(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function f(e){if(e.ep)return;e.ep=!0;const s=t(e);fetch(e.href,s)}};xc();var yc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Tc(p){if(p.__esModule)return p;var i=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(p).forEach(function(t){var f=Object.getOwnPropertyDescriptor(p,t);Object.defineProperty(i,t,f.get?f:{enumerable:!0,get:function(){return p[t]}})}),i}function Sc(p){throw new Error('Could not dynamically require "'+p+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ds={exports:{}};(function(p,i){(function(f,e){p.exports=e()})(yc,function(){return function(t){var f={};function e(s){if(f[s])return f[s].exports;var l=f[s]={i:s,l:!1,exports:{}};return t[s].call(l.exports,l,l.exports,e),l.l=!0,l.exports}return e.m=t,e.c=f,e.d=function(s,l,n){e.o(s,l)||Object.defineProperty(s,l,{enumerable:!0,get:n})},e.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},e.t=function(s,l){if(l&1&&(s=e(s)),l&8||l&4&&typeof s=="object"&&s&&s.__esModule)return s;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:s}),l&2&&typeof s!="string")for(var o in s)e.d(n,o,function(h){return s[h]}.bind(null,o));return n},e.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return e.d(l,"a",l),l},e.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},e.p="",e(e.s=1528)}([function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}function s(r,a,v){var u=v?r[a]:Object.getOwnPropertyDescriptor(r,a);return!v&&u.value&&typeof u.value=="object"&&(u=u.value),u&&e(u)?(typeof u.enumerable=="undefined"&&(u.enumerable=!0),typeof u.configurable=="undefined"&&(u.configurable=!0),u):!1}function l(r,a){var v=Object.getOwnPropertyDescriptor(r,a);return v?(v.value&&typeof v.value=="object"&&(v=v.value),v.configurable===!1):!1}function n(r,a,v,u){for(var d in a)if(!!a.hasOwnProperty(d)){var c=s(a,d,v);if(c!==!1){var g=u||r;if(l(g.prototype,d)){if(h.ignoreFinals)continue;throw new Error("cannot override final property '"+d+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(r.prototype,d,c)}else r.prototype[d]=a[d]}}function o(r,a){if(!!a){Array.isArray(a)||(a=[a]);for(var v=0;v<a.length;v++)n(r,a[v].prototype||a[v])}}function h(r){r||(r={});var a,v;if(r.initialize){if(typeof r.initialize!="function")throw new Error("initialize must be a function");a=r.initialize,delete r.initialize}else if(r.Extends){var u=r.Extends;a=function(){u.apply(this,arguments)}}else a=function(){};r.Extends?(a.prototype=Object.create(r.Extends.prototype),a.prototype.constructor=a,v=r.Extends,delete r.Extends):a.prototype.constructor=a;var d=null;return r.Mixins&&(d=r.Mixins,delete r.Mixins),o(a,d),n(a,r,!0,v),a}h.extend=n,h.mixin=o,h.ignoreFinals=!1,t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(){};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=typeof s;return!s||o==="number"||o==="string"?n:s.hasOwnProperty(l)&&s[l]!==void 0?s[l]:n};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(124),n=new s({initialize:function(h,r){this.x=0,this.y=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0):(r===void 0&&(r=h),this.x=h||0,this.y=r||0)},clone:function(){return new n(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,h){return h===void 0&&(h=o),this.x=o,this.y=h,this},setTo:function(o,h){return this.set(o,h)},setToPolar:function(o,h){return h==null&&(h=1),this.x=Math.cos(o)*h,this.y=Math.sin(o)*h,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,h){return l(this.x,o.x,h)&&l(this.y,o.y,h)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var h=o.x-this.x,r=o.y-this.y;return Math.sqrt(h*h+r*r)},distanceSq:function(o){var h=o.x-this.x,r=o.y-this.y;return h*h+r*r},length:function(){var o=this.x,h=this.y;return Math.sqrt(o*o+h*h)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,h=this.y;return o*o+h*h},normalize:function(){var o=this.x,h=this.y,r=o*o+h*h;return r>0&&(r=1/Math.sqrt(r),this.x=o*r,this.y=h*r),this},normalizeRightHand:function(){var o=this.x;return this.x=this.y*-1,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=o*-1,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,h){h===void 0&&(h=0);var r=this.x,a=this.y;return this.x=r+h*(o.x-r),this.y=a+h*(o.y-a),this},transformMat3:function(o){var h=this.x,r=this.y,a=o.val;return this.x=a[0]*h+a[3]*r+a[6],this.y=a[1]*h+a[4]*r+a[7],this},transformMat4:function(o){var h=this.x,r=this.y,a=o.val;return this.x=a[0]*h+a[4]*r+a[12],this.y=a[1]*h+a[5]*r+a[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var h=this.length();return h&&h>o&&this.scale(o/h),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var h=Math.cos(o),r=Math.sin(o);return this.set(h*this.x-r*this.y,r*this.x+h*this.y)}});n.ZERO=new n,n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.UP=new n(0,-1),n.DOWN=new n(0,1),n.ONE=new n(1,1),t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(56),n=new s({initialize:function(h,r){h===void 0&&(h=0),r===void 0&&(r=h),this.type=l.POINT,this.x=h,this.y=r},setTo:function(o,h){return o===void 0&&(o=0),h===void 0&&(h=o),this.x=o,this.y=h,this}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(24),n=e(20),o=new s({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},existing:function(h){return(h.renderCanvas||h.renderWebGL)&&this.displayList.add(h),h.preUpdate&&this.updateList.add(h),h},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(h,r){o.prototype.hasOwnProperty(h)||(o.prototype[h]=r)},o.remove=function(h){o.prototype.hasOwnProperty(h)&&delete o.prototype[h]},l.register("GameObjectFactory",o,"add"),t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){if(!s||typeof s=="number")return n;if(s.hasOwnProperty(l))return s[l];if(l.indexOf(".")!==-1){for(var o=l.split("."),h=s,r=n,a=0;a<o.length;a++)if(h.hasOwnProperty(o[a]))r=h[o[a]],h=h[o[a]];else{r=n;break}return r}else return n};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){if(typeof s!="object"||s.nodeType||s===s.window)return!1;try{if(s.constructor&&!{}.hasOwnProperty.call(s.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={},s={install:function(l){for(var n in e)l[n]=e[n]},register:function(l,n){e[l]=n},destroy:function(){e={}}};t.exports=s},function(t,f,e){var s=Object.prototype.hasOwnProperty,l="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(l=!1));function o(v,u,d){this.fn=v,this.context=u,this.once=d||!1}function h(v,u,d,c,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new o(d,c||v,g),x=l?l+u:u;return v._events[x]?v._events[x].fn?v._events[x]=[v._events[x],m]:v._events[x].push(m):(v._events[x]=m,v._eventsCount++),v}function r(v,u){--v._eventsCount===0?v._events=new n:delete v._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,c;if(this._eventsCount===0)return u;for(c in d=this._events)s.call(d,c)&&u.push(l?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=l?l+u:u,c=this._events[d];if(!c)return[];if(c.fn)return[c.fn];for(var g=0,m=c.length,x=new Array(m);g<m;g++)x[g]=c[g].fn;return x},a.prototype.listenerCount=function(u){var d=l?l+u:u,c=this._events[d];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,d,c,g,m,x){var y=l?l+u:u;if(!this._events[y])return!1;var T=this._events[y],S=arguments.length,C,E;if(T.fn){switch(T.once&&this.removeListener(u,T.fn,void 0,!0),S){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,d),!0;case 3:return T.fn.call(T.context,d,c),!0;case 4:return T.fn.call(T.context,d,c,g),!0;case 5:return T.fn.call(T.context,d,c,g,m),!0;case 6:return T.fn.call(T.context,d,c,g,m,x),!0}for(E=1,C=new Array(S-1);E<S;E++)C[E-1]=arguments[E];T.fn.apply(T.context,C)}else{var P=T.length,M;for(E=0;E<P;E++)switch(T[E].once&&this.removeListener(u,T[E].fn,void 0,!0),S){case 1:T[E].fn.call(T[E].context);break;case 2:T[E].fn.call(T[E].context,d);break;case 3:T[E].fn.call(T[E].context,d,c);break;case 4:T[E].fn.call(T[E].context,d,c,g);break;default:if(!C)for(M=1,C=new Array(S-1);M<S;M++)C[M-1]=arguments[M];T[E].fn.apply(T[E].context,C)}}return!0},a.prototype.on=function(u,d,c){return h(this,u,d,c,!1)},a.prototype.once=function(u,d,c){return h(this,u,d,c,!0)},a.prototype.removeListener=function(u,d,c,g){var m=l?l+u:u;if(!this._events[m])return this;if(!d)return r(this,m),this;var x=this._events[m];if(x.fn)x.fn===d&&(!g||x.once)&&(!c||x.context===c)&&r(this,m);else{for(var y=0,T=[],S=x.length;y<S;y++)(x[y].fn!==d||g&&!x[y].once||c&&x[y].context!==c)&&T.push(x[y]);T.length?this._events[m]=T.length===1?T[0]:T:r(this,m)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=l?l+u:u,this._events[d]&&r(this,d)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=l,a.EventEmitter=a,t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(57),n=e(171),o=e(306),h=e(56),r=e(47),a=e(174),v=new s({initialize:function(d,c,g,m){d===void 0&&(d=0),c===void 0&&(c=0),g===void 0&&(g=0),m===void 0&&(m=0),this.type=h.RECTANGLE,this.x=d,this.y=c,this.width=g,this.height=m},contains:function(u,d){return l(this,u,d)},getPoint:function(u,d){return n(this,u,d)},getPoints:function(u,d,c){return o(this,u,d,c)},getRandomPoint:function(u){return a(this,u)},setTo:function(u,d,c,g){return this.x=u,this.y=d,this.width=c,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(u,d){return d===void 0&&(d=u),this.x=u,this.y=d,this},setSize:function(u,d){return d===void 0&&(d=u),this.width=u,this.height=d,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(u){return u===void 0&&(u=new r),u.setTo(this.x,this.y,this.right,this.y),u},getLineB:function(u){return u===void 0&&(u=new r),u.setTo(this.right,this.y,this.right,this.bottom),u},getLineC:function(u){return u===void 0&&(u=new r),u.setTo(this.right,this.bottom,this.x,this.bottom),u},getLineD:function(u){return u===void 0&&(u=new r),u.setTo(this.x,this.bottom,this.x,this.y),u},left:{get:function(){return this.x},set:function(u){u>=this.right?this.width=0:this.width=this.right-u,this.x=u}},right:{get:function(){return this.x+this.width},set:function(u){u<=this.x?this.width=0:this.width=u-this.x}},top:{get:function(){return this.y},set:function(u){u>=this.bottom?this.height=0:this.height=this.bottom-u,this.y=u}},bottom:{get:function(){return this.y+this.height},set:function(u){u<=this.y?this.height=0:this.height=u-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(u){this.x=u-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(u){this.y=u-this.height/2}}});t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Alpha:e(607),AlphaSingle:e(303),BlendMode:e(304),ComputedSize:e(608),Crop:e(609),Depth:e(305),Flip:e(610),GetBounds:e(611),Mask:e(309),Origin:e(632),PathFollower:e(633),Pipeline:e(167),ScrollFactor:e(312),Size:e(634),Texture:e(635),TextureCrop:e(636),Tint:e(637),ToJSON:e(176),Transform:e(313),TransformMatrix:e(25),Visible:e(314)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(s){for(var l="",n=0;n<s;++n)n>0&&(l+=`
else `),n<s-1&&(l+="if(test == "+n+".0){}");return l}t.exports={getTintFromFloats:function(s,l,n,o){var h=(s*255|0)&255,r=(l*255|0)&255,a=(n*255|0)&255,v=(o*255|0)&255;return(v<<24|h<<16|r<<8|a)>>>0},getTintAppendFloatAlpha:function(s,l){var n=(l*255|0)&255;return(n<<24|s)>>>0},getTintAppendFloatAlphaAndSwap:function(s,l){var n=(s>>16|0)&255,o=(s>>8|0)&255,h=(s|0)&255,r=(l*255|0)&255;return(r<<24|h<<16|o<<8|n)>>>0},getFloatsFromUintRGB:function(s){var l=(s>>16|0)&255,n=(s>>8|0)&255,o=(s|0)&255;return[l/255,n/255,o/255]},checkShaderMax:function(s,l){(!l||l===-1)&&(l=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS));for(var n=s.createShader(s.FRAGMENT_SHADER),o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var h=o.replace(/%forloop%/gi,e(l));if(s.shaderSource(n,h),s.compileShader(n),!s.getShaderParameter(n,s.COMPILE_STATUS))l=l/2|0;else break}return l},parseFragmentShaderMaxTextures:function(s,l){if(!s)return"";for(var n="",o=0;o<l;o++)o>0&&(n+=`
	else `),o<l-1&&(n+="if (outTexId < "+o+".5)"),n+=`
	{`,n+=`
		texture = texture2D(uMainSampler[`+o+"], outTexCoord);",n+=`
	}`;return s=s.replace(/%count%/gi,l.toString()),s.replace(/%forloop%/gi,n)}}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(193),l=e(6),n=function(o,h,r){var a=l(o,h,null);if(a===null)return r;if(Array.isArray(a))return s.RND.pick(a);if(typeof a=="object"){if(a.hasOwnProperty("randInt"))return s.RND.integerInRange(a.randInt[0],a.randInt[1]);if(a.hasOwnProperty("randFloat"))return s.RND.realInRange(a.randFloat[0],a.randFloat[1])}else if(typeof a=="function")return a(h);return a};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(176),n=e(101),o=e(9),h=e(75),r=e(20),a=new s({Extends:o,initialize:function(u,d){o.call(this),this.scene=u,this.displayList=null,this.type=d,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this),u.sys.queueDepthSort()},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},setState:function(v){return this.state=v,this},setDataEnabled:function(){return this.data||(this.data=new n(this)),this},setData:function(v,u){return this.data||(this.data=new n(this)),this.data.set(v,u),this},incData:function(v,u){return this.data||(this.data=new n(this)),this.data.inc(v,u),this},toggleData:function(v){return this.data||(this.data=new n(this)),this.data.toggle(v),this},getData:function(v){return this.data||(this.data=new n(this)),this.data.get(v)},setInteractive:function(v,u,d){return this.scene.sys.input.enable(this,v,u,d),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return l(this)},willRender:function(v){return!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},getIndexList:function(){for(var v=this,u=this.parentContainer,d=[];u&&(d.unshift(u.getIndex(v)),v=u,u.parentContainer);)u=u.parentContainer;return this.displayList?d.unshift(this.displayList.getIndex(v)):d.unshift(this.scene.sys.displayList.getIndex(v)),d},addToDisplayList:function(v){return v===void 0&&(v=this.scene.sys.displayList),this.displayList&&this.displayList!==v&&this.removeFromDisplayList(),v.exists(this)||(this.displayList=v,v.add(this,!0),v.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),v.events.emit(r.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var v=this.displayList||this.scene.sys.displayList;return v.exists(this)&&(v.remove(this,!0),v.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),v.events.emit(r.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(v){!this.scene||this.ignoreDestroy||(v===void 0&&(v=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(h.DESTROY,this,v),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});a.RENDER_MASK=15,t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(24),n=e(20),o=new s({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(h,r){o.prototype.hasOwnProperty(h)||(o.prototype[h]=r)},o.remove=function(h){o.prototype.hasOwnProperty(h)&&delete o.prototype[h]},l.register("GameObjectCreator",o,"make"),t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(7),l=function(){var n,o,h,r,a,v,u=arguments[0]||{},d=1,c=arguments.length,g=!1;for(typeof u=="boolean"&&(g=u,u=arguments[1]||{},d=2),c===d&&(u=this,--d);d<c;d++)if((n=arguments[d])!=null)for(o in n)h=u[o],r=n[o],u!==r&&(g&&r&&(s(r)||(a=Array.isArray(r)))?(a?(a=!1,v=h&&Array.isArray(h)?h:[]):v=h&&s(h)?h:{},u[o]=l(g,v,r)):r!==void 0&&(u[o]=r));return u};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return Math.max(l,Math.min(n,s))};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(25),l=new s,n=new s,o=new s,h={camera:l,sprite:n,calc:o},r=function(a,v,u){var d=l,c=n,g=o;return c.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),d.copyFrom(v.matrix),u?(d.multiplyWithOffset(u,-v.scrollX*a.scrollFactorX,-v.scrollY*a.scrollFactorY),c.e=a.x,c.f=a.y):(c.e-=v.scrollX*a.scrollFactorX,c.f-=v.scrollY*a.scrollFactorY),d.multiply(c,g),h};t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ADDED_TO_SCENE:e(656),BOOT:e(657),CREATE:e(658),DESTROY:e(659),PAUSE:e(660),POST_UPDATE:e(661),PRE_RENDER:e(662),PRE_UPDATE:e(663),READY:e(664),REMOVED_FROM_SCENE:e(665),RENDER:e(666),RESUME:e(667),SHUTDOWN:e(668),SLEEP:e(669),START:e(670),TRANSITION_COMPLETE:e(671),TRANSITION_INIT:e(672),TRANSITION_OUT:e(673),TRANSITION_START:e(674),TRANSITION_WAKE:e(675),UPDATE:e(676),WAKE:e(677)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={BLUR:e(612),BOOT:e(613),CONTEXT_LOST:e(614),CONTEXT_RESTORED:e(615),DESTROY:e(616),FOCUS:e(617),HIDDEN:e(618),PAUSE:e(619),POST_RENDER:e(620),POST_STEP:e(621),PRE_RENDER:e(622),PRE_STEP:e(623),READY:e(624),RESUME:e(625),STEP:e(626),VISIBLE:e(627)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(95),o=e(2),h=e(155),r=e(240),a=e(517),v=e(156),u=new s({initialize:function(c,g){this.loader=c,this.cache=o(g,"cache",!1),this.type=o(g,"type",!1),this.key=o(g,"key",!1);var m=this.key;if(c.prefix&&c.prefix!==""&&(this.key=c.prefix+m),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var x=o(g,"url");x===void 0?x=c.path+m+"."+o(g,"extension",""):typeof x=="string"&&!x.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(x=c.path+x),this.url=x,this.src="",this.xhrSettings=v(o(g,"responseType",void 0)),o(g,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,o(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?l.FILE_POPULATED:l.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(g,"config",{}),this.multiFile,this.linkFile},setLink:function(d){this.linkFile=d,d.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===l.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=l.FILE_LOADING,this.src=h(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=a(this,this.loader.xhr))},onLoad:function(d,c){var g=d.responseURL&&(d.responseURL.indexOf("file://")===0||d.responseURL.indexOf("capacitor://")===0),m=g&&c.target.status===0,x=!(c.target&&c.target.status!==200)||m;d.readyState===4&&d.status>=400&&d.status<=599&&(x=!1),this.state=l.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,x)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(d){d.lengthComputable&&(this.bytesLoaded=d.loaded,this.bytesTotal=d.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=l.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=l.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=l.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(d){d===void 0&&(d=this.data);var c=this.key,g=this.type;this.loader.emit(n.FILE_COMPLETE,c,g,d),this.loader.emit(n.FILE_KEY_COMPLETE+g+"-"+c,c,g,d),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});u.createObjectURL=function(d,c,g){if(typeof URL=="function")d.src=URL.createObjectURL(c);else{var m=new FileReader;m.onload=function(){d.removeAttribute("crossOrigin"),d.src="data:"+(c.type||g)+";base64,"+m.result.split(",")[1]},m.onerror=d.onerror,m.readAsDataURL(c)}},u.revokeObjectURL=function(d){typeof URL=="function"&&URL.revokeObjectURL(d.src)},t.exports=u},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={},s={},l={};l.register=function(n,o,h,r){r===void 0&&(r=!1),e[n]={plugin:o,mapping:h,custom:r}},l.registerCustom=function(n,o,h,r){s[n]={plugin:o,mapping:h,data:r}},l.hasCore=function(n){return e.hasOwnProperty(n)},l.hasCustom=function(n){return s.hasOwnProperty(n)},l.getCore=function(n){return e[n]},l.getCustom=function(n){return s[n]},l.getCustomClass=function(n){return s.hasOwnProperty(n)?s[n].plugin:null},l.remove=function(n){e.hasOwnProperty(n)&&delete e[n]},l.removeCustom=function(n){s.hasOwnProperty(n)&&delete s[n]},l.destroyCorePlugins=function(){for(var n in e)e.hasOwnProperty(n)&&delete e[n]},l.destroyCustomPlugins=function(){for(var n in s)s.hasOwnProperty(n)&&delete s[n]},t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(14),n=e(3),o=new s({initialize:function(r,a,v,u,d,c){r===void 0&&(r=1),a===void 0&&(a=0),v===void 0&&(v=0),u===void 0&&(u=1),d===void 0&&(d=0),c===void 0&&(c=0),this.matrix=new Float32Array([r,a,v,u,d,c,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(h){this.matrix[0]=h}},b:{get:function(){return this.matrix[1]},set:function(h){this.matrix[1]=h}},c:{get:function(){return this.matrix[2]},set:function(h){this.matrix[2]=h}},d:{get:function(){return this.matrix[3]},set:function(h){this.matrix[3]=h}},e:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},f:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},tx:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},ty:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var h=this.matrix,r=h[0],a=h[1],v=h[2],u=h[3];return r||a?a>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):v||u?l.TAU-(u>0?Math.acos(-v/this.scaleY):-Math.acos(v/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var h=this.matrix;return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,this},translate:function(h,r){var a=this.matrix;return a[4]=a[0]*h+a[2]*r+a[4],a[5]=a[1]*h+a[3]*r+a[5],this},scale:function(h,r){var a=this.matrix;return a[0]*=h,a[1]*=h,a[2]*=r,a[3]*=r,this},rotate:function(h){var r=Math.sin(h),a=Math.cos(h),v=this.matrix,u=v[0],d=v[1],c=v[2],g=v[3];return v[0]=u*a+c*r,v[1]=d*a+g*r,v[2]=u*-r+c*a,v[3]=d*-r+g*a,this},multiply:function(h,r){var a=this.matrix,v=h.matrix,u=a[0],d=a[1],c=a[2],g=a[3],m=a[4],x=a[5],y=v[0],T=v[1],S=v[2],C=v[3],E=v[4],P=v[5],M=r===void 0?this:r;return M.a=y*u+T*c,M.b=y*d+T*g,M.c=S*u+C*c,M.d=S*d+C*g,M.e=E*u+P*c+m,M.f=E*d+P*g+x,M},multiplyWithOffset:function(h,r,a){var v=this.matrix,u=h.matrix,d=v[0],c=v[1],g=v[2],m=v[3],x=v[4],y=v[5],T=r*d+a*g+x,S=r*c+a*m+y,C=u[0],E=u[1],P=u[2],M=u[3],R=u[4],A=u[5];return v[0]=C*d+E*g,v[1]=C*c+E*m,v[2]=P*d+M*g,v[3]=P*c+M*m,v[4]=R*d+A*g+T,v[5]=R*c+A*m+S,this},transform:function(h,r,a,v,u,d){var c=this.matrix,g=c[0],m=c[1],x=c[2],y=c[3],T=c[4],S=c[5];return c[0]=h*g+r*x,c[1]=h*m+r*y,c[2]=a*g+v*x,c[3]=a*m+v*y,c[4]=u*g+d*x+T,c[5]=u*m+d*y+S,this},transformPoint:function(h,r,a){a===void 0&&(a={x:0,y:0});var v=this.matrix,u=v[0],d=v[1],c=v[2],g=v[3],m=v[4],x=v[5];return a.x=h*u+r*c+m,a.y=h*d+r*g+x,a},invert:function(){var h=this.matrix,r=h[0],a=h[1],v=h[2],u=h[3],d=h[4],c=h[5],g=r*u-a*v;return h[0]=u/g,h[1]=-a/g,h[2]=-v/g,h[3]=r/g,h[4]=(v*c-u*d)/g,h[5]=-(r*c-a*d)/g,this},copyFrom:function(h){var r=this.matrix;return r[0]=h.a,r[1]=h.b,r[2]=h.c,r[3]=h.d,r[4]=h.e,r[5]=h.f,this},copyFromArray:function(h){var r=this.matrix;return r[0]=h[0],r[1]=h[1],r[2]=h[2],r[3]=h[3],r[4]=h[4],r[5]=h[5],this},copyToContext:function(h){var r=this.matrix;return h.transform(r[0],r[1],r[2],r[3],r[4],r[5]),h},setToContext:function(h){var r=this.matrix;return h.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),h},copyToArray:function(h){var r=this.matrix;return h===void 0?h=[r[0],r[1],r[2],r[3],r[4],r[5]]:(h[0]=r[0],h[1]=r[1],h[2]=r[2],h[3]=r[3],h[4]=r[4],h[5]=r[5]),h},setTransform:function(h,r,a,v,u,d){var c=this.matrix;return c[0]=h,c[1]=r,c[2]=a,c[3]=v,c[4]=u,c[5]=d,this},decomposeMatrix:function(){var h=this.decomposedMatrix,r=this.matrix,a=r[0],v=r[1],u=r[2],d=r[3],c=a*d-v*u;if(h.translateX=r[4],h.translateY=r[5],a||v){var g=Math.sqrt(a*a+v*v);h.rotation=v>0?Math.acos(a/g):-Math.acos(a/g),h.scaleX=g,h.scaleY=c/g}else if(u||d){var m=Math.sqrt(u*u+d*d);h.rotation=Math.PI*.5-(d>0?Math.acos(-u/m):-Math.acos(u/m)),h.scaleX=c/m,h.scaleY=m}else h.rotation=0,h.scaleX=0,h.scaleY=0;return h},applyITRS:function(h,r,a,v,u){var d=this.matrix,c=Math.sin(a),g=Math.cos(a);return d[4]=h,d[5]=r,d[0]=g*v,d[1]=c*v,d[2]=-c*u,d[3]=g*u,this},applyInverse:function(h,r,a){a===void 0&&(a=new n);var v=this.matrix,u=v[0],d=v[1],c=v[2],g=v[3],m=v[4],x=v[5],y=1/(u*g+c*-d);return a.x=g*y*h+-c*y*r+(x*c-m*g)*y,a.y=u*y*r+-d*y*h+(-x*u+m*d)*y,a},getX:function(h,r){return h*this.a+r*this.c+this.e},getY:function(h,r){return h*this.b+r*this.d+this.f},getXRound:function(h,r,a){var v=this.getX(h,r);return a&&(v=Math.round(v)),v},getYRound:function(h,r,a){var v=this.getY(h,r);return a&&(v=Math.round(v)),v},getCSSMatrix:function(){var h=this.matrix;return"matrix("+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(2),l=function(n,o,h,r,a,v){n===void 0&&(n=0),o===void 0&&(o=0),h===void 0&&(h=v.width),r===void 0&&(r=v.height),a||(a={});var u=s(a,"isNotEmpty",!1),d=s(a,"isColliding",!1),c=s(a,"hasInterestingFace",!1);n<0&&(h+=n,n=0),o<0&&(r+=o,o=0),n+h>v.width&&(h=Math.max(v.width-n,0)),o+r>v.height&&(r=Math.max(v.height-o,0));for(var g=[],m=o;m<o+r;m++)for(var x=n;x<n+h;x++){var y=v.data[m][x];if(y!==null){if(u&&y.index===-1||d&&!y.collides||c&&!y.hasInterestingFace)continue;g.push(y)}}return g};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h,r){o===void 0&&(o=0),h===void 0&&(h=0),r===void 0&&(r=1);var a,v=0,u=s.length;if(r===1)for(a=h;a<u;a++)s[a][l]=n+v*o,v++;else for(a=h;a>=0;a--)s[a][l]=n+v*o,v++;return s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(35),l=e(13),n=function(o,h,r){h.x=l(r,"x",0),h.y=l(r,"y",0),h.depth=l(r,"depth",0),h.flipX=l(r,"flipX",!1),h.flipY=l(r,"flipY",!1);var a=l(r,"scale",null);typeof a=="number"?h.setScale(a):a!==null&&(h.scaleX=l(a,"x",1),h.scaleY=l(a,"y",1));var v=l(r,"scrollFactor",null);typeof v=="number"?h.setScrollFactor(v):v!==null&&(h.scrollFactorX=l(v,"x",1),h.scrollFactorY=l(v,"y",1)),h.rotation=l(r,"rotation",0);var u=l(r,"angle",null);u!==null&&(h.angle=u),h.alpha=l(r,"alpha",1);var d=l(r,"origin",null);if(typeof d=="number")h.setOrigin(d);else if(d!==null){var c=l(d,"x",.5),g=l(d,"y",.5);h.setOrigin(c,g)}h.blendMode=l(r,"blendMode",s.NORMAL),h.visible=l(r,"visible",!0);var m=l(r,"add",!0);return m&&o.sys.displayList.add(h),h.preUpdate&&o.sys.updateList.add(h),h};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=function(n,o,h,r,a){var v=r.alpha*h.alpha;if(v<=0)return!1;var u=s(h,r,a).calc;return o.globalCompositeOperation=n.blendModes[h.blendMode],o.globalAlpha=v,o.save(),u.setToContext(o),o.imageSmoothingEnabled=!(!n.antialias||h.frame&&h.frame.source.scaleMode),!0};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(33),l=e(192),n=[],o=!1,h=function(){var r=function(y,T,S,C,E){T===void 0&&(T=1),S===void 0&&(S=1),C===void 0&&(C=s.CANVAS),E===void 0&&(E=!1);var P,M=u(C);return M===null?(M={parent:y,canvas:document.createElement("canvas"),type:C},C===s.CANVAS&&n.push(M),P=M.canvas):(M.parent=y,P=M.canvas),E&&(M.parent=P),P.width=T,P.height=S,o&&C===s.CANVAS&&l.disable(P.getContext("2d")),P},a=function(y,T,S){return r(y,T,S,s.CANVAS)},v=function(y,T,S){return r(y,T,S,s.WEBGL)},u=function(y){if(y===void 0&&(y=s.CANVAS),y===s.WEBGL)return null;for(var T=0;T<n.length;T++){var S=n[T];if(!S.parent&&S.type===y)return S}return null},d=function(y){var T=y instanceof HTMLCanvasElement;n.forEach(function(S){(T&&S.canvas===y||!T&&S.parent===y)&&(S.parent=null,S.canvas.width=1,S.canvas.height=1)})},c=function(){var y=0;return n.forEach(function(T){T.parent&&y++}),y},g=function(){return n.length-c()},m=function(){o=!0},x=function(){o=!1};return{create2D:a,create:r,createWebGL:v,disableSmoothing:m,enableSmoothing:x,first:u,free:g,pool:n,remove:d,total:c}};t.exports=h()},function(t,f){var e={};t.exports=e,function(){e._nextId=0,e._seed=0,e._nowStartTime=+new Date,e.extend=function(l,n){var o,h;typeof n=="boolean"?(o=2,h=n):(o=1,h=!0);for(var r=o;r<arguments.length;r++){var a=arguments[r];if(a)for(var v in a)h&&a[v]&&a[v].constructor===Object&&(!l[v]||l[v].constructor===Object)?(l[v]=l[v]||{},e.extend(l[v],h,a[v])):l[v]=a[v]}return l},e.clone=function(l,n){return e.extend({},n,l)},e.keys=function(l){if(Object.keys)return Object.keys(l);var n=[];for(var o in l)n.push(o);return n},e.values=function(l){var n=[];if(Object.keys){for(var o=Object.keys(l),h=0;h<o.length;h++)n.push(l[o[h]]);return n}for(var r in l)n.push(l[r]);return n},e.get=function(l,n,o,h){n=n.split(".").slice(o,h);for(var r=0;r<n.length;r+=1)l=l[n[r]];return l},e.set=function(l,n,o,h,r){var a=n.split(".").slice(h,r);return e.get(l,n,0,-1)[a[a.length-1]]=o,o},e.shuffle=function(l){for(var n=l.length-1;n>0;n--){var o=Math.floor(e.random()*(n+1)),h=l[n];l[n]=l[o],l[o]=h}return l},e.choose=function(l){return l[Math.floor(e.random()*l.length)]},e.isElement=function(l){return typeof HTMLElement!="undefined"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},e.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},e.isFunction=function(l){return typeof l=="function"},e.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},e.isString=function(l){return Object.prototype.toString.call(l)==="[object String]"},e.clamp=function(l,n,o){return l<n?n:l>o?o:l},e.sign=function(l){return l<0?-1:1},e.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-e._nowStartTime},e.random=function(l,n){return l=typeof l!="undefined"?l:0,n=typeof n!="undefined"?n:1,l+s()*(n-l)};var s=function(){return e._seed=(e._seed*9301+49297)%233280,e._seed/233280};e.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},e.logLevel=1,e.log=function(){console&&e.logLevel>0&&e.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},e.info=function(){console&&e.logLevel>0&&e.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},e.warn=function(){console&&e.logLevel>0&&e.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},e.nextId=function(){return e._nextId++},e.indexOf=function(l,n){if(l.indexOf)return l.indexOf(n);for(var o=0;o<l.length;o++)if(l[o]===n)return o;return-1},e.map=function(l,n){if(l.map)return l.map(n);for(var o=[],h=0;h<l.length;h+=1)o.push(n(l[h]));return o},e.topologicalSort=function(l){var n=[],o=[],h=[];for(var r in l)!o[r]&&!h[r]&&e._topologicalSort(r,o,h,l,n);return n},e._topologicalSort=function(l,n,o,h,r){var a=h[l]||[];o[l]=!0;for(var v=0;v<a.length;v+=1){var u=a[v];o[u]||n[u]||e._topologicalSort(u,n,o,h,r)}o[l]=!1,n[l]=!0,r.push(l)},e.chain=function(){for(var l=[],n=0;n<arguments.length;n+=1){var o=arguments[n];o._chained?l.push.apply(l,o._chained):l.push(o)}var h=function(){for(var r,a=new Array(arguments.length),v=0,u=arguments.length;v<u;v++)a[v]=arguments[v];for(v=0;v<l.length;v+=1){var d=l[v].apply(r,a);typeof d!="undefined"&&(r=d)}return r};return h._chained=l,h},e.chainPathBefore=function(l,n,o){return e.set(l,n,e.chain(o,e.get(l,n)))},e.chainPathAfter=function(l,n,o){return e.set(l,n,e.chain(e.get(l,n),o))}}()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={VERSION:"3.55.2",BlendModes:e(35),ScaleModes:e(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=s},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(11),n=e(15),o=e(47),h=new s({Extends:n,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Transform,l.Visible],initialize:function(a,v,u){v===void 0&&(v="Shape"),n.call(this,a,v),this.geom=u,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(r,a){return a===void 0&&(a=1),r===void 0?this.isFilled=!1:(this.fillColor=r,this.fillAlpha=a,this.isFilled=!0),this},setStrokeStyle:function(r,a,v){return v===void 0&&(v=1),r===void 0?this.isStroked=!1:(this.lineWidth=r,this.strokeColor=a,this.strokeAlpha=v,this.isStroked=!0),this},setClosePath:function(r){return this.closePath=r,this},setSize:function(r,a){return this.width=r,this.height=a,this},setDisplaySize:function(r,a){return this.displayWidth=r,this.displayHeight=a,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}}});t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(14),l=function(n){return n*s.DEG_TO_RAD};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={DESTROY:e(743),FADE_IN_COMPLETE:e(744),FADE_IN_START:e(745),FADE_OUT_COMPLETE:e(746),FADE_OUT_START:e(747),FLASH_COMPLETE:e(748),FLASH_START:e(749),FOLLOW_UPDATE:e(750),PAN_COMPLETE:e(751),PAN_START:e(752),POST_RENDER:e(753),PRE_RENDER:e(754),ROTATE_COMPLETE:e(755),ROTATE_START:e(756),SHAKE_COMPLETE:e(757),SHAKE_START:e(758),ZOOM_COMPLETE:e(759),ZOOM_START:e(760)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(103),n=e(328),o=e(188),h=e(329),r=new s({initialize:function(v,u,d,c){v===void 0&&(v=0),u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(v,u,d,c)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(a,v,u,d,c){return d===void 0&&(d=255),c===void 0&&(c=!0),this._locked=!0,this.red=a,this.green=v,this.blue=u,this.alpha=d,this._locked=!1,this.update(c)},setGLTo:function(a,v,u,d){return d===void 0&&(d=1),this._locked=!0,this.redGL=a,this.greenGL=v,this.blueGL=u,this.alphaGL=d,this._locked=!1,this.update(!0)},setFromRGB:function(a){return this._locked=!0,this.red=a.r,this.green=a.g,this.blue=a.b,a.hasOwnProperty("a")&&(this.alpha=a.a),this._locked=!1,this.update(!0)},setFromHSV:function(a,v,u){return o(a,v,u,this)},update:function(a){if(a===void 0&&(a=!1),this._locked)return this;var v=this.r,u=this.g,d=this.b,c=this.a;return this._color=l(v,u,d),this._color32=n(v,u,d,c),this._rgba="rgba("+v+","+u+","+d+","+c/255+")",a&&h(v,u,d,this),this},updateHSV:function(){var a=this.r,v=this.g,u=this.b;return h(a,v,u,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(a){return this.setTo(a,a,a)},random:function(a,v){a===void 0&&(a=0),v===void 0&&(v=255);var u=Math.floor(a+Math.random()*(v-a)),d=Math.floor(a+Math.random()*(v-a)),c=Math.floor(a+Math.random()*(v-a));return this.setTo(u,d,c)},randomGray:function(a,v){a===void 0&&(a=0),v===void 0&&(v=255);var u=Math.floor(a+Math.random()*(v-a));return this.setTo(u,u,u)},saturate:function(a){return this.s+=a/100,this},desaturate:function(a){return this.s-=a/100,this},lighten:function(a){return this.v+=a/100,this},darken:function(a){return this.v-=a/100,this},brighten:function(a){var v=this.r,u=this.g,d=this.b;return v=Math.max(0,Math.min(255,v-Math.round(255*-(a/100)))),u=Math.max(0,Math.min(255,u-Math.round(255*-(a/100)))),d=Math.max(0,Math.min(255,d-Math.round(255*-(a/100)))),this.setTo(v,u,d)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(a){this.gl[0]=Math.min(Math.abs(a),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(a){this.gl[1]=Math.min(Math.abs(a),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(a){this.gl[2]=Math.min(Math.abs(a),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(a){this.gl[3]=Math.min(Math.abs(a),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(a){a=Math.floor(Math.abs(a)),this.r=Math.min(a,255),this.gl[0]=a/255,this.update(!0)}},green:{get:function(){return this.g},set:function(a){a=Math.floor(Math.abs(a)),this.g=Math.min(a,255),this.gl[1]=a/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(a){a=Math.floor(Math.abs(a)),this.b=Math.min(a,255),this.gl[2]=a/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(a){a=Math.floor(Math.abs(a)),this.a=Math.min(a,255),this.gl[3]=a/255,this.update()}},h:{get:function(){return this._h},set:function(a){this._h=a,o(a,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(a){this._s=a,o(this._h,a,this._v,this)}},v:{get:function(){return this._v},set:function(a){this._v=a,o(this._h,this._s,a,this)}}});t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o,h,r){this.x=0,this.y=0,this.z=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=h||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this},max:function(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this},clone:function(){return new l(this.x,this.y,this.z)},addVectors:function(n,o){return this.x=n.x+o.x,this.y=n.y+o.y,this.z=n.z+o.z,this},crossVectors:function(n,o){var h=n.x,r=n.y,a=n.z,v=o.x,u=o.y,d=o.z;return this.x=r*d-a*u,this.y=a*v-h*d,this.z=h*u-r*v,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this},set:function(n,o,h){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0):(this.x=n||0,this.y=o||0,this.z=h||0),this},setFromMatrixPosition:function(n){return this.fromArray(n.val,12)},setFromMatrixColumn:function(n,o){return this.fromArray(n.val,o*4)},fromArray:function(n,o){return o===void 0&&(o=0),this.x=n[o],this.y=n[o+1],this.z=n[o+2],this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this},addScalar:function(n){return this.x+=n,this.y+=n,this.z+=n,this},addScale:function(n,o){return this.x+=n.x*o,this.y+=n.y*o,this.z+=n.z*o||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this},scale:function(n){return isFinite(n)?(this.x*=n,this.y*=n,this.z*=n):(this.x=0,this.y=0,this.z=0),this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(n){var o=n.x-this.x,h=n.y-this.y,r=n.z-this.z||0;return Math.sqrt(o*o+h*h+r*r)},distanceSq:function(n){var o=n.x-this.x,h=n.y-this.y,r=n.z-this.z||0;return o*o+h*h+r*r},length:function(){var n=this.x,o=this.y,h=this.z;return Math.sqrt(n*n+o*o+h*h)},lengthSq:function(){var n=this.x,o=this.y,h=this.z;return n*n+o*o+h*h},normalize:function(){var n=this.x,o=this.y,h=this.z,r=n*n+o*o+h*h;return r>0&&(r=1/Math.sqrt(r),this.x=n*r,this.y=o*r,this.z=h*r),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z},cross:function(n){var o=this.x,h=this.y,r=this.z,a=n.x,v=n.y,u=n.z;return this.x=h*u-r*v,this.y=r*a-o*u,this.z=o*v-h*a,this},lerp:function(n,o){o===void 0&&(o=0);var h=this.x,r=this.y,a=this.z;return this.x=h+o*(n.x-h),this.y=r+o*(n.y-r),this.z=a+o*(n.z-a),this},applyMatrix3:function(n){var o=this.x,h=this.y,r=this.z,a=n.val;return this.x=a[0]*o+a[3]*h+a[6]*r,this.y=a[1]*o+a[4]*h+a[7]*r,this.z=a[2]*o+a[5]*h+a[8]*r,this},applyMatrix4:function(n){var o=this.x,h=this.y,r=this.z,a=n.val,v=1/(a[3]*o+a[7]*h+a[11]*r+a[15]);return this.x=(a[0]*o+a[4]*h+a[8]*r+a[12])*v,this.y=(a[1]*o+a[5]*h+a[9]*r+a[13])*v,this.z=(a[2]*o+a[6]*h+a[10]*r+a[14])*v,this},transformMat3:function(n){var o=this.x,h=this.y,r=this.z,a=n.val;return this.x=o*a[0]+h*a[3]+r*a[6],this.y=o*a[1]+h*a[4]+r*a[7],this.z=o*a[2]+h*a[5]+r*a[8],this},transformMat4:function(n){var o=this.x,h=this.y,r=this.z,a=n.val;return this.x=a[0]*o+a[4]*h+a[8]*r+a[12],this.y=a[1]*o+a[5]*h+a[9]*r+a[13],this.z=a[2]*o+a[6]*h+a[10]*r+a[14],this},transformCoordinates:function(n){var o=this.x,h=this.y,r=this.z,a=n.val,v=o*a[0]+h*a[4]+r*a[8]+a[12],u=o*a[1]+h*a[5]+r*a[9]+a[13],d=o*a[2]+h*a[6]+r*a[10]+a[14],c=o*a[3]+h*a[7]+r*a[11]+a[15];return this.x=v/c,this.y=u/c,this.z=d/c,this},transformQuat:function(n){var o=this.x,h=this.y,r=this.z,a=n.x,v=n.y,u=n.z,d=n.w,c=d*o+v*r-u*h,g=d*h+u*o-a*r,m=d*r+a*h-v*o,x=-a*o-v*h-u*r;return this.x=c*d+x*-a+g*-u-m*-v,this.y=g*d+x*-v+m*-a-c*-u,this.z=m*d+x*-u+c*-v-g*-a,this},project:function(n){var o=this.x,h=this.y,r=this.z,a=n.val,v=a[0],u=a[1],d=a[2],c=a[3],g=a[4],m=a[5],x=a[6],y=a[7],T=a[8],S=a[9],C=a[10],E=a[11],P=a[12],M=a[13],R=a[14],A=a[15],O=1/(o*c+h*y+r*E+A);return this.x=(o*v+h*g+r*T+P)*O,this.y=(o*u+h*m+r*S+M)*O,this.z=(o*d+h*x+r*C+R)*O,this},projectViewMatrix:function(n,o){return this.applyMatrix4(n).applyMatrix4(o)},unprojectViewMatrix:function(n,o){return this.applyMatrix4(n).applyMatrix4(o)},unproject:function(n,o){var h=n.x,r=n.y,a=n.z,v=n.w,u=this.x-h,d=v-this.y-1-r,c=this.z;return this.x=2*u/a-1,this.y=2*d/v-1,this.z=2*c-1,this.project(o)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});l.ZERO=new l,l.RIGHT=new l(1,0,0),l.LEFT=new l(-1,0,0),l.UP=new l(0,-1,0),l.DOWN=new l(0,1,0),l.FORWARD=new l(0,0,1),l.BACK=new l(0,0,-1),l.ONE=new l(1,1,1),t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(t,f,e){var s={};t.exports=s;var l=e(64),n=e(83),o=e(165),h=e(32),r=e(84),a=e(271);(function(){s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s.create=function(u){var d={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!u.hasOwnProperty("position")&&u.hasOwnProperty("vertices")?u.position=l.centre(u.vertices):u.hasOwnProperty("vertices")||(d.vertices=l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var c=h.extend(d,u);return v(c,u),c.setOnCollideWith=function(g,m){return m?this.onCollideWith[g.id]=m:delete this.onCollideWith[g.id],this},c},s.nextGroup=function(u){return u?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var v=function(u,d){d=d||{},s.set(u,{bounds:u.bounds||r.create(u.vertices),positionPrev:u.positionPrev||n.clone(u.position),anglePrev:u.anglePrev||u.angle,vertices:u.vertices,parts:u.parts||[u],isStatic:u.isStatic,isSleeping:u.isSleeping,parent:u.parent||u});var c=u.bounds;if(l.rotate(u.vertices,u.angle,u.position),a.rotate(u.axes,u.angle),r.update(c,u.vertices,u.velocity),s.set(u,{axes:d.axes||u.axes,area:d.area||u.area,mass:d.mass||u.mass,inertia:d.inertia||u.inertia}),u.parts.length===1){var g=u.centerOfMass,m=u.centerOffset,x=c.max.x-c.min.x,y=c.max.y-c.min.y;g.x=-(c.min.x-u.position.x)/x,g.y=-(c.min.y-u.position.y)/y,m.x=x*g.x,m.y=y*g.y}};s.set=function(u,d,c){var g;typeof d=="string"&&(g=d,d={},d[g]=c);for(g in d)if(!!Object.prototype.hasOwnProperty.call(d,g))switch(c=d[g],g){case"isStatic":s.setStatic(u,c);break;case"isSleeping":o.set(u,c);break;case"mass":s.setMass(u,c);break;case"density":s.setDensity(u,c);break;case"inertia":s.setInertia(u,c);break;case"vertices":s.setVertices(u,c);break;case"position":s.setPosition(u,c);break;case"angle":s.setAngle(u,c);break;case"velocity":s.setVelocity(u,c);break;case"angularVelocity":s.setAngularVelocity(u,c);break;case"parts":s.setParts(u,c);break;case"centre":s.setCentre(u,c);break;default:u[g]=c}},s.setStatic=function(u,d){for(var c=0;c<u.parts.length;c++){var g=u.parts[c];g.isStatic=d,d?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},s.setMass=function(u,d){var c=u.inertia/(u.mass/6);u.inertia=c*(d/6),u.inverseInertia=1/u.inertia,u.mass=d,u.inverseMass=1/u.mass,u.density=u.mass/u.area},s.setDensity=function(u,d){s.setMass(u,d*u.area),u.density=d},s.setInertia=function(u,d){u.inertia=d,u.inverseInertia=1/u.inertia},s.setVertices=function(u,d){d[0].body===u?u.vertices=d:u.vertices=l.create(d,u),u.axes=a.fromVertices(u.vertices),u.area=l.area(u.vertices),s.setMass(u,u.density*u.area);var c=l.centre(u.vertices);l.translate(u.vertices,c,-1),s.setInertia(u,s._inertiaScale*l.inertia(u.vertices,u.mass)),l.translate(u.vertices,u.position),r.update(u.bounds,u.vertices,u.velocity)},s.setParts=function(u,d,c){var g;for(d=d.slice(0),u.parts.length=0,u.parts.push(u),u.parent=u,g=0;g<d.length;g++){var m=d[g];m!==u&&(m.parent=u,u.parts.push(m))}if(u.parts.length!==1){if(c=typeof c!="undefined"?c:!0,c){var x=[];for(g=0;g<d.length;g++)x=x.concat(d[g].vertices);l.clockwiseSort(x);var y=l.hull(x),T=l.centre(y);s.setVertices(u,y),l.translate(u.vertices,T)}var S=s._totalProperties(u),C=S.centre.x,E=S.centre.y,P=u.bounds,M=u.centerOfMass,R=u.centerOffset;r.update(P,u.vertices,u.velocity),M.x=-(P.min.x-C)/(P.max.x-P.min.x),M.y=-(P.min.y-E)/(P.max.y-P.min.y),R.x=C,R.y=E,u.area=S.area,u.parent=u,u.position.x=C,u.position.y=E,u.positionPrev.x=C,u.positionPrev.y=E,s.setMass(u,S.mass),s.setInertia(u,S.inertia),s.setPosition(u,S.centre)}},s.setCentre=function(u,d,c){c?(u.positionPrev.x+=d.x,u.positionPrev.y+=d.y,u.position.x+=d.x,u.position.y+=d.y):(u.positionPrev.x=d.x-(u.position.x-u.positionPrev.x),u.positionPrev.y=d.y-(u.position.y-u.positionPrev.y),u.position.x=d.x,u.position.y=d.y)},s.setPosition=function(u,d){var c=n.sub(d,u.position);u.positionPrev.x+=c.x,u.positionPrev.y+=c.y;for(var g=0;g<u.parts.length;g++){var m=u.parts[g];m.position.x+=c.x,m.position.y+=c.y,l.translate(m.vertices,c),r.update(m.bounds,m.vertices,u.velocity)}},s.setAngle=function(u,d){var c=d-u.angle;u.anglePrev+=c;for(var g=0;g<u.parts.length;g++){var m=u.parts[g];m.angle+=c,l.rotate(m.vertices,c,u.position),a.rotate(m.axes,c),r.update(m.bounds,m.vertices,u.velocity),g>0&&n.rotateAbout(m.position,c,u.position,m.position)}},s.setVelocity=function(u,d){u.positionPrev.x=u.position.x-d.x,u.positionPrev.y=u.position.y-d.y,u.velocity.x=d.x,u.velocity.y=d.y,u.speed=n.magnitude(u.velocity)},s.setAngularVelocity=function(u,d){u.anglePrev=u.angle-d,u.angularVelocity=d,u.angularSpeed=Math.abs(u.angularVelocity)},s.translate=function(u,d){s.setPosition(u,n.add(u.position,d))},s.rotate=function(u,d,c){if(!c)s.setAngle(u,u.angle+d);else{var g=Math.cos(d),m=Math.sin(d),x=u.position.x-c.x,y=u.position.y-c.y;s.setPosition(u,{x:c.x+(x*g-y*m),y:c.y+(x*m+y*g)}),s.setAngle(u,u.angle+d)}},s.scale=function(u,d,c,g){var m=0,x=0;g=g||u.position;for(var y=0;y<u.parts.length;y++){var T=u.parts[y];T.scale.x=d,T.scale.y=c,l.scale(T.vertices,d,c,g),T.axes=a.fromVertices(T.vertices),T.area=l.area(T.vertices),s.setMass(T,u.density*T.area),l.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),s.setInertia(T,s._inertiaScale*l.inertia(T.vertices,T.mass)),l.translate(T.vertices,{x:T.position.x,y:T.position.y}),y>0&&(m+=T.area,x+=T.inertia),T.position.x=g.x+(T.position.x-g.x)*d,T.position.y=g.y+(T.position.y-g.y)*c,r.update(T.bounds,T.vertices,u.velocity)}u.parts.length>1&&(u.area=m,u.isStatic||(s.setMass(u,u.density*m),s.setInertia(u,x))),u.circleRadius&&(d===c?u.circleRadius*=d:u.circleRadius=null)},s.update=function(u,d,c,g){var m=Math.pow(d*c*u.timeScale,2),x=1-u.frictionAir*c*u.timeScale,y=u.position.x-u.positionPrev.x,T=u.position.y-u.positionPrev.y;u.velocity.x=y*x*g+u.force.x/u.mass*m,u.velocity.y=T*x*g+u.force.y/u.mass*m,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.position.x+=u.velocity.x,u.position.y+=u.velocity.y,u.angularVelocity=(u.angle-u.anglePrev)*x*g+u.torque/u.inertia*m,u.anglePrev=u.angle,u.angle+=u.angularVelocity,u.speed=n.magnitude(u.velocity),u.angularSpeed=Math.abs(u.angularVelocity);for(var S=0;S<u.parts.length;S++){var C=u.parts[S];l.translate(C.vertices,u.velocity),S>0&&(C.position.x+=u.velocity.x,C.position.y+=u.velocity.y),u.angularVelocity!==0&&(l.rotate(C.vertices,u.angularVelocity,u.position),a.rotate(C.axes,u.angularVelocity),S>0&&n.rotateAbout(C.position,u.angularVelocity,u.position,C.position)),r.update(C.bounds,C.vertices,u.velocity)}},s.applyForce=function(u,d,c){u.force.x+=c.x,u.force.y+=c.y;var g={x:d.x-u.position.x,y:d.y-u.position.y};u.torque+=g.x*c.y-g.y*c.x},s._totalProperties=function(u){for(var d={mass:0,area:0,inertia:0,centre:{x:0,y:0}},c=u.parts.length===1?0:1;c<u.parts.length;c++){var g=u.parts[c],m=g.mass!==1/0?g.mass:1;d.mass+=m,d.area+=g.area,d.inertia+=g.inertia,d.centre=n.add(d.centre,n.mult(g.position,m))}return d.centre=n.div(d.centre,d.mass),d}})()},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.y+s.height-s.height*s.originY};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.x-s.width*s.originX};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.x+s.width-s.width*s.originX};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.y-s.height*s.originY};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h,r){o===void 0&&(o=0),h===void 0&&(h=0),r===void 0&&(r=1);var a,v=0,u=s.length;if(r===1)for(a=h;a<u;a++)s[a][l]+=n+v*o,v++;else for(a=h;a>=0;a--)s[a][l]+=n+v*o,v++;return s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(307),n=e(172),o=e(56),h=e(173),r=e(3),a=new s({initialize:function(u,d,c,g){u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=0),g===void 0&&(g=0),this.type=o.LINE,this.x1=u,this.y1=d,this.x2=c,this.y2=g},getPoint:function(v,u){return l(this,v,u)},getPoints:function(v,u,d){return n(this,v,u,d)},getRandomPoint:function(v){return h(this,v)},setTo:function(v,u,d,c){return v===void 0&&(v=0),u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=0),this.x1=v,this.y1=u,this.x2=d,this.y2=c,this},getPointA:function(v){return v===void 0&&(v=new r),v.set(this.x1,this.y1),v},getPointB:function(v){return v===void 0&&(v=new r),v.set(this.x2,this.y2),v},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(v){this.x1<=this.x2?this.x1=v:this.x2=v}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(v){this.x1>this.x2?this.x1=v:this.x2=v}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(v){this.y1<=this.y2?this.y1=v:this.y2=v}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(v){this.y1>this.y2?this.y1=v:this.y2=v}}});t.exports=a},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=n||l.fillColor,r=o||l.fillAlpha,a=(h&16711680)>>>16,v=(h&65280)>>>8,u=h&255;s.fillStyle="rgba("+a+","+v+","+u+","+r+")"};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o,h,r,a){var v=[];a.forEach(function(d){d&&v.push(d)}),this.loader=o,this.type=h,this.key=r,this.multiKeyIndex=o.multiKeyIndex++,this.files=v,this.complete=!1,this.pending=v.length,this.failed=0,this.config={},this.baseURL=o.baseURL,this.path=o.path,this.prefix=o.prefix;for(var u=0;u<v.length;u++)v[u].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(n){return this.files.push(n),n.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(n){var o=this.files.indexOf(n);o!==-1&&this.pending--},onFileFailed:function(n){var o=this.files.indexOf(n);o!==-1&&this.failed++}});t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=s-n,r=l-o;return Math.sqrt(h*h+r*r)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={BOOT:e(922),DESTROY:e(923),DRAG_END:e(924),DRAG_ENTER:e(925),DRAG:e(926),DRAG_LEAVE:e(927),DRAG_OVER:e(928),DRAG_START:e(929),DROP:e(930),GAME_OUT:e(931),GAME_OVER:e(932),GAMEOBJECT_DOWN:e(933),GAMEOBJECT_DRAG_END:e(934),GAMEOBJECT_DRAG_ENTER:e(935),GAMEOBJECT_DRAG:e(936),GAMEOBJECT_DRAG_LEAVE:e(937),GAMEOBJECT_DRAG_OVER:e(938),GAMEOBJECT_DRAG_START:e(939),GAMEOBJECT_DROP:e(940),GAMEOBJECT_MOVE:e(941),GAMEOBJECT_OUT:e(942),GAMEOBJECT_OVER:e(943),GAMEOBJECT_POINTER_DOWN:e(944),GAMEOBJECT_POINTER_MOVE:e(945),GAMEOBJECT_POINTER_OUT:e(946),GAMEOBJECT_POINTER_OVER:e(947),GAMEOBJECT_POINTER_UP:e(948),GAMEOBJECT_POINTER_WHEEL:e(949),GAMEOBJECT_UP:e(950),GAMEOBJECT_WHEEL:e(951),MANAGER_BOOT:e(952),MANAGER_PROCESS:e(953),MANAGER_UPDATE:e(954),POINTER_DOWN:e(955),POINTER_DOWN_OUTSIDE:e(956),POINTER_MOVE:e(957),POINTER_OUT:e(958),POINTER_OVER:e(959),POINTER_UP:e(960),POINTER_UP_OUTSIDE:e(961),POINTER_WHEEL:e(962),POINTERLOCK_CHANGE:e(963),PRE_UPDATE:e(964),SHUTDOWN:e(965),START:e(966),UPDATE:e(967)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.y=l+s.height*s.originY,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.x=l+s.width*s.originX,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.x=l-s.width+s.width*s.originX,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.y=l-s.height+s.height*s.originY,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return s.width<=0||s.height<=0?!1:s.x<=l&&s.x+s.width>=l&&s.y<=n&&s.y+s.height>=n};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(175),n=e(9),o=e(374),h=e(2),r=e(69),a=e(91),v=e(141),u=e(12),d=e(375),c=new s({Extends:n,initialize:function(m){n.call(this);var x=m.game,y=x.renderer,T=y.gl;this.name=h(m,"name","WebGLPipeline"),this.game=x,this.renderer=y,this.manager,this.gl=T,this.view=x.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=h(m,"topology",T.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=h(m,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=m,this.glReset=!1},boot:function(){var g,m=this.gl,x=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new r().identity());var T=this.renderTargets,S=h(x,"renderTarget",!1);typeof S=="boolean"&&S&&(S=1);var C=y.width,E=y.height;if(typeof S=="number")for(g=0;g<S;g++)T.push(new v(y,C,E,1,0,!0));else if(Array.isArray(S))for(g=0;g<S.length;g++){var P=h(S[g],"scale",1),M=h(S[g],"minFilter",0),R=h(S[g],"autoClear",1);T.push(new v(y,C,E,P,M,R))}T.length&&(this.currentRenderTarget=T[0]),this.setShadersFromConfig(x);var A=this.shaders,O=0;for(g=0;g<A.length;g++)A[g].vertexSize>O&&(O=A[g].vertexSize);var F=h(x,"batchSize",y.config.batchSize);this.vertexCapacity=F*6;var I=new ArrayBuffer(this.vertexCapacity*O);this.vertexData=I,this.bytes=new Uint8Array(I),this.vertexViewF32=new Float32Array(I),this.vertexViewU32=new Uint32Array(I);var w=h(x,"vertices",null);for(w?(this.vertexViewF32.set(w),this.vertexBuffer=y.createVertexBuffer(I,m.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(I.byteLength,m.DYNAMIC_DRAW),this.setVertexBuffer(),g=A.length-1;g>=0;g--)A[g].rebind();this.hasBooted=!0,y.on(a.RESIZE,this.resize,this),y.on(a.PRE_RENDER,this.onPreRender,this),y.on(a.RENDER,this.onRender,this),y.on(a.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,m){var x=this.renderer;if(g!==this.currentShader||x.currentProgram!==this.currentShader.program){this.flush(),x.resetTextures();var y=this.setVertexBuffer();y&&!m&&(m=!0),g.bind(m,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var m=this.shaders,x=0;x<m.length;x++)if(m[x].name===g)return m[x]},setShadersFromConfig:function(g){var m,x=this.shaders,y=this.renderer;for(m=0;m<x.length;m++)x[m].destroy();var T="vertShader",S="fragShader",C="attributes",E=h(g,T,null),P=u.parseFragmentShaderMaxTextures(h(g,S,null),y.maxTextures),M=h(g,C,null),R=h(g,"shaders",[]),A=R.length;if(A===0)E&&P&&(this.shaders=[new d(this,"default",E,P,l(M))]);else{var O=[];for(m=0;m<A;m++){var F=R[m],I=h(F,"name","default"),w=h(F,T,E),b=u.parseFragmentShaderMaxTextures(h(F,S,P),y.maxTextures),Y=h(F,C,M);w&&b&&O.push(new d(this,I,w,b,l(Y)))}this.shaders=O}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(g,m){return m===void 0&&(m=g.frame),this.currentUnit=this.renderer.setTextureSource(m.source),this.currentUnit},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},resize:function(g,m){(g!==this.width||m!==this.height)&&this.flush(),this.width=g,this.height=m;for(var x=this.renderTargets,y=0;y<x.length;y++)x[y].resize(g,m);return this.setProjectionMatrix(g,m),this.emit(o.RESIZE,g,m,this),this.onResize(g,m),this},setProjectionMatrix:function(g,m){var x=this.projectionMatrix;if(!x)return this;this.projectionWidth=g,this.projectionHeight=m,x.ortho(0,g,m,0,-1e3,1e3);for(var y=this.shaders,T="uProjectionMatrix",S=0;S<y.length;S++){var C=y[S];C.hasUniform(T)&&(C.resetUniform(T),C.setMatrix4fv(T,!1,x.val,C))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,m=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==m)&&this.setProjectionMatrix(g,m)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var m=this.setVertexBuffer();return g.bind(m),this.currentShader=g,this.emit(o.BIND,this,g),this.onActive(g),this},rebind:function(g){this.setVertexBuffer();for(var m=this.shaders,x=m.length-1;x>=0;x--){var y=m[x].rebind();(!g||y===g)&&(this.currentShader=y)}return this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var g=this.gl,m=this.vertexBuffer;return g.getParameter(g.ARRAY_BUFFER_BINDING)!==m?(g.bindBuffer(g.ARRAY_BUFFER,m),!0):!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var m=this.gl,x=this.vertexCount,y=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),x===this.vertexCapacity?m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.DYNAMIC_DRAW):m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,x*y)),m.drawArrays(this.topology,0,x)),this.vertexCount=0,this.emit(o.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,m,x,y,T,S,C){var E=this.vertexViewF32,P=this.vertexViewU32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++M]=g,E[++M]=m,E[++M]=x,E[++M]=y,E[++M]=T,E[++M]=S,P[++M]=C,this.vertexCount++},batchQuad:function(g,m,x,y,T,S,C,E,P,M,R,A,O,F,I,w,b,Y,U,W){W===void 0&&(W=this.currentUnit);var D=!1;return this.shouldFlush(6)&&(this.flush(),D=!0,W=this.setTexture2D(U)),this.batchVert(m,x,M,R,W,Y,F),this.batchVert(y,T,M,O,W,Y,w),this.batchVert(S,C,A,O,W,Y,b),this.batchVert(m,x,M,R,W,Y,F),this.batchVert(S,C,A,O,W,Y,b),this.batchVert(E,P,A,R,W,Y,I),this.onBatch(g),D},batchTri:function(g,m,x,y,T,S,C,E,P,M,R,A,O,F,I,w,b){b===void 0&&(b=this.currentUnit);var Y=!1;return this.shouldFlush(3)&&(this.flush(),Y=!0,b=this.setTexture2D(w)),this.batchVert(m,x,E,P,b,I,A),this.batchVert(y,T,E,R,b,I,O),this.batchVert(S,C,M,R,b,I,F),this.onBatch(g),Y},drawFillRect:function(g,m,x,y,T,S,C,E){C===void 0&&(C=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),g=Math.floor(g),m=Math.floor(m);var P=Math.floor(g+x),M=Math.floor(m+y),R=this.setTexture2D(C),A=u.getTintAppendFloatAlphaAndSwap(T,S),O=0,F=0,I=1,w=1;E&&(F=1,w=0),this.batchQuad(null,g,m,g,M,P,M,P,m,O,F,I,w,A,A,A,A,0,C,R)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(g),this.currentUnit},bindTexture:function(g,m){m===void 0&&(m=0);var x=this.gl;return x.activeTexture(x.TEXTURE0+m),x.bindTexture(x.TEXTURE_2D,g),this},bindRenderTarget:function(g,m){return this.bindTexture(g.texture,m)},setTime:function(g){return this.set1f(g,this.game.loop.getDuration()),this},set1f:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1f(g,m),this},set2f:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2f(g,m,x),this},set3f:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3f(g,m,x,y),this},set4f:function(g,m,x,y,T,S){return S===void 0&&(S=this.currentShader),S.set4f(g,m,x,y,T),this},set1fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1fv(g,m),this},set2fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2fv(g,m),this},set3fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3fv(g,m),this},set4fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4fv(g,m),this},set1iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1iv(g,m),this},set2iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2iv(g,m),this},set3iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3iv(g,m),this},set4iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4iv(g,m),this},set1i:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1i(g,m),this},set2i:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2i(g,m,x),this},set3i:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3i(g,m,x,y),this},set4i:function(g,m,x,y,T,S){return S===void 0&&(S=this.currentShader),S.set4i(g,m,x,y,T),this},setMatrix2fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(g,m,x),this},setMatrix3fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(g,m,x),this},setMatrix4fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(g,m,x),this},destroy:function(){this.emit(o.DESTROY,this);var g,m=this.shaders;for(g=0;g<m.length;g++)m[g].destroy();var x=this.renderTargets;for(g=0;g<x.length;g++)x[g].destroy();this.gl.deleteBuffer(this.vertexBuffer);var y=this.renderer;return y.off(a.RESIZE,this.resize,this),y.off(a.PRE_RENDER,this.onPreRender,this),y.off(a.RENDER,this.onRender,this),y.off(a.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});t.exports=c},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function s(L,B,G){G=G||2;var N=B&&B.length,V=N?B[0]*G:L.length,z=l(L,0,V,G,!0),X=[];if(!z||z.next===z.prev)return X;var H,K,J,Z,Q,q,k;if(N&&(z=u(L,B,z,G)),L.length>80*G){H=J=L[0],K=Z=L[1];for(var _=G;_<V;_+=G)Q=L[_],q=L[_+1],Q<H&&(H=Q),q<K&&(K=q),Q>J&&(J=Q),q>Z&&(Z=q);k=Math.max(J-H,Z-K),k=k!==0?1/k:0}return o(z,X,G,H,K,k),X}function l(L,B,G,N,V){var z,X;if(V===D(L,B,G,N)>0)for(z=B;z<G;z+=N)X=Y(z,L[z],L[z+1],X);else for(z=G-N;z>=B;z-=N)X=Y(z,L[z],L[z+1],X);return X&&M(X,X.next)&&(U(X),X=X.next),X}function n(L,B){if(!L)return L;B||(B=L);var G=L,N;do if(N=!1,!G.steiner&&(M(G,G.next)||P(G.prev,G,G.next)===0)){if(U(G),G=B=G.prev,G===G.next)break;N=!0}else G=G.next;while(N||G!==B);return B}function o(L,B,G,N,V,z,X){if(!!L){!X&&z&&x(L,N,V,z);for(var H=L,K,J;L.prev!==L.next;){if(K=L.prev,J=L.next,z?r(L,N,V,z):h(L)){B.push(K.i/G),B.push(L.i/G),B.push(J.i/G),U(L),L=J.next,H=J.next;continue}if(L=J,L===H){X?X===1?(L=a(n(L),B,G),o(L,B,G,N,V,z,2)):X===2&&v(L,B,G,N,V,z):o(n(L),B,G,N,V,z,1);break}}}}function h(L){var B=L.prev,G=L,N=L.next;if(P(B,G,N)>=0)return!1;for(var V=L.next.next;V!==L.prev;){if(C(B.x,B.y,G.x,G.y,N.x,N.y,V.x,V.y)&&P(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function r(L,B,G,N){var V=L.prev,z=L,X=L.next;if(P(V,z,X)>=0)return!1;for(var H=V.x<z.x?V.x<X.x?V.x:X.x:z.x<X.x?z.x:X.x,K=V.y<z.y?V.y<X.y?V.y:X.y:z.y<X.y?z.y:X.y,J=V.x>z.x?V.x>X.x?V.x:X.x:z.x>X.x?z.x:X.x,Z=V.y>z.y?V.y>X.y?V.y:X.y:z.y>X.y?z.y:X.y,Q=T(H,K,B,G,N),q=T(J,Z,B,G,N),k=L.prevZ,_=L.nextZ;k&&k.z>=Q&&_&&_.z<=q;){if(k!==L.prev&&k!==L.next&&C(V.x,V.y,z.x,z.y,X.x,X.y,k.x,k.y)&&P(k.prev,k,k.next)>=0||(k=k.prevZ,_!==L.prev&&_!==L.next&&C(V.x,V.y,z.x,z.y,X.x,X.y,_.x,_.y)&&P(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;k&&k.z>=Q;){if(k!==L.prev&&k!==L.next&&C(V.x,V.y,z.x,z.y,X.x,X.y,k.x,k.y)&&P(k.prev,k,k.next)>=0)return!1;k=k.prevZ}for(;_&&_.z<=q;){if(_!==L.prev&&_!==L.next&&C(V.x,V.y,z.x,z.y,X.x,X.y,_.x,_.y)&&P(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function a(L,B,G){var N=L;do{var V=N.prev,z=N.next.next;!M(V,z)&&R(V,N,N.next,z)&&I(V,z)&&I(z,V)&&(B.push(V.i/G),B.push(N.i/G),B.push(z.i/G),U(N),U(N.next),N=L=z),N=N.next}while(N!==L);return n(N)}function v(L,B,G,N,V,z){var X=L;do{for(var H=X.next.next;H!==X.prev;){if(X.i!==H.i&&E(X,H)){var K=b(X,H);X=n(X,X.next),K=n(K,K.next),o(X,B,G,N,V,z),o(K,B,G,N,V,z);return}H=H.next}X=X.next}while(X!==L)}function u(L,B,G,N){var V=[],z,X,H,K,J;for(z=0,X=B.length;z<X;z++)H=B[z]*N,K=z<X-1?B[z+1]*N:L.length,J=l(L,H,K,N,!1),J===J.next&&(J.steiner=!0),V.push(S(J));for(V.sort(d),z=0;z<V.length;z++)c(V[z],G),G=n(G,G.next);return G}function d(L,B){return L.x-B.x}function c(L,B){if(B=g(L,B),B){var G=b(B,L);n(B,B.next),n(G,G.next)}}function g(L,B){var G=B,N=L.x,V=L.y,z=-1/0,X;do{if(V<=G.y&&V>=G.next.y&&G.next.y!==G.y){var H=G.x+(V-G.y)*(G.next.x-G.x)/(G.next.y-G.y);if(H<=N&&H>z){if(z=H,H===N){if(V===G.y)return G;if(V===G.next.y)return G.next}X=G.x<G.next.x?G:G.next}}G=G.next}while(G!==B);if(!X)return null;if(N===z)return X;var K=X,J=X.x,Z=X.y,Q=1/0,q;G=X;do N>=G.x&&G.x>=J&&N!==G.x&&C(V<Z?N:z,V,J,Z,V<Z?z:N,V,G.x,G.y)&&(q=Math.abs(V-G.y)/(N-G.x),I(G,L)&&(q<Q||q===Q&&(G.x>X.x||G.x===X.x&&m(X,G)))&&(X=G,Q=q)),G=G.next;while(G!==K);return X}function m(L,B){return P(L.prev,L,B.prev)<0&&P(B.next,L,L.next)<0}function x(L,B,G,N){var V=L;do V.z===null&&(V.z=T(V.x,V.y,B,G,N)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==L);V.prevZ.nextZ=null,V.prevZ=null,y(V)}function y(L){var B,G,N,V,z,X,H,K,J=1;do{for(G=L,L=null,z=null,X=0;G;){for(X++,N=G,H=0,B=0;B<J&&(H++,N=N.nextZ,!!N);B++);for(K=J;H>0||K>0&&N;)H!==0&&(K===0||!N||G.z<=N.z)?(V=G,G=G.nextZ,H--):(V=N,N=N.nextZ,K--),z?z.nextZ=V:L=V,V.prevZ=z,z=V;G=N}z.nextZ=null,J*=2}while(X>1);return L}function T(L,B,G,N,V){return L=32767*(L-G)*V,B=32767*(B-N)*V,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,L|B<<1}function S(L){var B=L,G=L;do(B.x<G.x||B.x===G.x&&B.y<G.y)&&(G=B),B=B.next;while(B!==L);return G}function C(L,B,G,N,V,z,X,H){return(V-X)*(B-H)-(L-X)*(z-H)>=0&&(L-X)*(N-H)-(G-X)*(B-H)>=0&&(G-X)*(z-H)-(V-X)*(N-H)>=0}function E(L,B){return L.next.i!==B.i&&L.prev.i!==B.i&&!F(L,B)&&(I(L,B)&&I(B,L)&&w(L,B)&&(P(L.prev,L,B.prev)||P(L,B.prev,B))||M(L,B)&&P(L.prev,L,L.next)>0&&P(B.prev,B,B.next)>0)}function P(L,B,G){return(B.y-L.y)*(G.x-B.x)-(B.x-L.x)*(G.y-B.y)}function M(L,B){return L.x===B.x&&L.y===B.y}function R(L,B,G,N){var V=O(P(L,B,G)),z=O(P(L,B,N)),X=O(P(G,N,L)),H=O(P(G,N,B));return!!(V!==z&&X!==H||V===0&&A(L,G,B)||z===0&&A(L,N,B)||X===0&&A(G,L,N)||H===0&&A(G,B,N))}function A(L,B,G){return B.x<=Math.max(L.x,G.x)&&B.x>=Math.min(L.x,G.x)&&B.y<=Math.max(L.y,G.y)&&B.y>=Math.min(L.y,G.y)}function O(L){return L>0?1:L<0?-1:0}function F(L,B){var G=L;do{if(G.i!==L.i&&G.next.i!==L.i&&G.i!==B.i&&G.next.i!==B.i&&R(G,G.next,L,B))return!0;G=G.next}while(G!==L);return!1}function I(L,B){return P(L.prev,L,L.next)<0?P(L,B,L.next)>=0&&P(L,L.prev,B)>=0:P(L,B,L.prev)<0||P(L,L.next,B)<0}function w(L,B){var G=L,N=!1,V=(L.x+B.x)/2,z=(L.y+B.y)/2;do G.y>z!=G.next.y>z&&G.next.y!==G.y&&V<(G.next.x-G.x)*(z-G.y)/(G.next.y-G.y)+G.x&&(N=!N),G=G.next;while(G!==L);return N}function b(L,B){var G=new W(L.i,L.x,L.y),N=new W(B.i,B.x,B.y),V=L.next,z=B.prev;return L.next=B,B.prev=L,G.next=V,V.prev=G,N.next=G,G.prev=N,z.next=N,N.prev=z,N}function Y(L,B,G,N){var V=new W(L,B,G);return N?(V.next=N.next,V.prev=N,N.next.prev=V,N.next=V):(V.prev=V,V.next=V),V}function U(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function W(L,B,G){this.i=L,this.x=B,this.y=G,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}s.deviation=function(L,B,G,N){var V=B&&B.length,z=V?B[0]*G:L.length,X=Math.abs(D(L,0,z,G));if(V)for(var H=0,K=B.length;H<K;H++){var J=B[H]*G,Z=H<K-1?B[H+1]*G:L.length;X-=Math.abs(D(L,J,Z,G))}var Q=0;for(H=0;H<N.length;H+=3){var q=N[H]*G,k=N[H+1]*G,_=N[H+2]*G;Q+=Math.abs((L[q]-L[_])*(L[k+1]-L[q+1])-(L[q]-L[k])*(L[_+1]-L[q+1]))}return X===0&&Q===0?0:Math.abs((Q-X)/X)};function D(L,B,G,N){for(var V=0,z=B,X=G-N;z<G;z+=N)V+=(L[X]-L[z])*(L[z+1]+L[X+1]),X=z;return V}s.flatten=function(L){for(var B=L[0][0].length,G={vertices:[],holes:[],dimensions:B},N=0,V=0;V<L.length;V++){for(var z=0;z<L[V].length;z++)for(var X=0;X<B;X++)G.vertices.push(L[V][z][X]);V>0&&(N+=L[V-1].length,G.holes.push(N))}return G},t.exports=s},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=n||l.strokeColor,r=o||l.strokeAlpha,a=(h&16711680)>>>16,v=(h&65280)>>>8,u=h&255;s.strokeStyle="rgba("+a+","+v+","+u+","+r+")",s.lineWidth=l.lineWidth};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(6),a=e(7),v=new s({Extends:n,initialize:function(d,c,g,m,x){var y="json";if(a(c)){var T=c;c=h(T,"key"),g=h(T,"url"),m=h(T,"xhrSettings"),y=h(T,"extension",y),x=h(T,"dataKey",x)}var S={type:"json",cache:d.cacheManager.json,extension:y,responseType:"text",key:c,url:g,xhrSettings:m,config:x};n.call(this,d,S),a(g)&&(x?this.data=r(g,x):this.data=g,this.state=l.FILE_POPULATED)},onProcess:function(){if(this.state!==l.FILE_POPULATED){this.state=l.FILE_PROCESSING;try{var u=JSON.parse(this.xhrLoader.responseText)}catch(c){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),c}var d=this.config;typeof d=="string"?this.data=r(u,d,u):this.data=u}this.onProcessComplete()}});o.register("json",function(u,d,c,g){if(Array.isArray(u))for(var m=0;m<u.length;m++)this.addFile(new v(this,u[m]));else this.addFile(new v(this,u,d,g,c));return this}),t.exports=v},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(158),l=e(26),n=function(o,h,r,a,v){for(var u=null,d=null,c=null,g=null,m=l(o,h,r,a,null,v),x=0;x<m.length;x++){var y=m[x];y&&(y.collides?(u=s(y.x,y.y-1,!0,v),d=s(y.x,y.y+1,!0,v),c=s(y.x-1,y.y,!0,v),g=s(y.x+1,y.y,!0,v),y.faceTop=!(u&&u.collides),y.faceBottom=!(d&&d.collides),y.faceLeft=!(c&&c.collides),y.faceRight=!(g&&g.collides)):y.resetFaces())}};t.exports=n},function(t,f,e){var s={};t.exports=s;var l=e(83),n=e(32);(function(){s.create=function(o,h){for(var r=[],a=0;a<o.length;a++){var v=o[a],u={x:v.x,y:v.y,index:a,body:h,isInternal:!1,contact:null,offset:null};u.contact={vertex:u,normalImpulse:0,tangentImpulse:0},r.push(u)}return r},s.fromPath=function(o,h){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,a=[];return o.replace(r,function(v,u,d){a.push({x:parseFloat(u),y:parseFloat(d)})}),s.create(a,h)},s.centre=function(o){for(var h=s.area(o,!0),r={x:0,y:0},a,v,u,d=0;d<o.length;d++)u=(d+1)%o.length,a=l.cross(o[d],o[u]),v=l.mult(l.add(o[d],o[u]),a),r=l.add(r,v);return l.div(r,6*h)},s.mean=function(o){for(var h={x:0,y:0},r=0;r<o.length;r++)h.x+=o[r].x,h.y+=o[r].y;return l.div(h,o.length)},s.area=function(o,h){for(var r=0,a=o.length-1,v=0;v<o.length;v++)r+=(o[a].x-o[v].x)*(o[a].y+o[v].y),a=v;return h?r/2:Math.abs(r)/2},s.inertia=function(o,h){for(var r=0,a=0,v=o,u,d,c=0;c<v.length;c++)d=(c+1)%v.length,u=Math.abs(l.cross(v[d],v[c])),r+=u*(l.dot(v[d],v[d])+l.dot(v[d],v[c])+l.dot(v[c],v[c])),a+=u;return h/6*(r/a)},s.translate=function(o,h,r){var a;if(r)for(a=0;a<o.length;a++)o[a].x+=h.x*r,o[a].y+=h.y*r;else for(a=0;a<o.length;a++)o[a].x+=h.x,o[a].y+=h.y;return o},s.rotate=function(o,h,r){if(h!==0){for(var a=Math.cos(h),v=Math.sin(h),u=0;u<o.length;u++){var d=o[u],c=d.x-r.x,g=d.y-r.y;d.x=r.x+(c*a-g*v),d.y=r.y+(c*v+g*a)}return o}},s.contains=function(o,h){for(var r=0;r<o.length;r++){var a=o[r],v=o[(r+1)%o.length];if((h.x-a.x)*(v.y-a.y)+(h.y-a.y)*(a.x-v.x)>0)return!1}return!0},s.scale=function(o,h,r,a){if(h===1&&r===1)return o;a=a||s.centre(o);for(var v,u,d=0;d<o.length;d++)v=o[d],u=l.sub(v,a),o[d].x=a.x+u.x*h,o[d].y=a.y+u.y*r;return o},s.chamfer=function(o,h,r,a,v){typeof h=="number"?h=[h]:h=h||[8],r=typeof r!="undefined"?r:-1,a=a||2,v=v||14;for(var u=[],d=0;d<o.length;d++){var c=o[d-1>=0?d-1:o.length-1],g=o[d],m=o[(d+1)%o.length],x=h[d<h.length?d:h.length-1];if(x===0){u.push(g);continue}var y=l.normalise({x:g.y-c.y,y:c.x-g.x}),T=l.normalise({x:m.y-g.y,y:g.x-m.x}),S=Math.sqrt(2*Math.pow(x,2)),C=l.mult(n.clone(y),x),E=l.normalise(l.mult(l.add(y,T),.5)),P=l.sub(g,l.mult(E,S)),M=r;r===-1&&(M=Math.pow(x,.32)*1.75),M=n.clamp(M,a,v),M%2===1&&(M+=1);for(var R=Math.acos(l.dot(y,T)),A=R/M,O=0;O<M;O++)u.push(l.add(l.rotate(C,A*O),P))}return u},s.clockwiseSort=function(o){var h=s.mean(o);return o.sort(function(r,a){return l.angle(h,r)-l.angle(h,a)}),o},s.isConvex=function(o){var h=0,r=o.length,a,v,u,d;if(r<3)return null;for(a=0;a<r;a++)if(v=(a+1)%r,u=(a+2)%r,d=(o[v].x-o[a].x)*(o[u].y-o[v].y),d-=(o[v].y-o[a].y)*(o[u].x-o[v].x),d<0?h|=1:d>0&&(h|=2),h===3)return!1;return h!==0?!0:null},s.hull=function(o){var h=[],r=[],a,v;for(o=o.slice(0),o.sort(function(u,d){var c=u.x-d.x;return c!==0?c:u.y-d.y}),v=0;v<o.length;v+=1){for(a=o[v];r.length>=2&&l.cross3(r[r.length-2],r[r.length-1],a)<=0;)r.pop();r.push(a)}for(v=o.length-1;v>=0;v-=1){for(a=o[v];h.length>=2&&l.cross3(h[h.length-2],h[h.length-1],a)<=0;)h.pop();h.push(a)}return h.pop(),r.pop(),h.concat(r)}})()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(66),n=e(300),o=e(301),h=e(56),r=e(170),a=new s({initialize:function(u,d,c){u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=0),this.type=h.CIRCLE,this.x=u,this.y=d,this._radius=c,this._diameter=c*2},contains:function(v,u){return l(this,v,u)},getPoint:function(v,u){return n(this,v,u)},getPoints:function(v,u,d){return o(this,v,u,d)},getRandomPoint:function(v){return r(this,v)},setTo:function(v,u,d){return this.x=v,this.y=u,this._radius=d,this._diameter=d*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(v,u){return u===void 0&&(u=v),this.x=v,this.y=u,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this._diameter=v*2}},diameter:{get:function(){return this._diameter},set:function(v){this._diameter=v,this._radius=v*.5}},left:{get:function(){return this.x-this._radius},set:function(v){this.x=v+this._radius}},right:{get:function(){return this.x+this._radius},set:function(v){this.x=v-this._radius}},top:{get:function(){return this.y-this._radius},set:function(v){this.y=v+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(v){this.y=v-this._radius}}});t.exports=a},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){if(s.radius>0&&l>=s.left&&l<=s.right&&n>=s.top&&n<=s.bottom){var o=(s.x-l)*(s.x-l),h=(s.y-n)*(s.y-n);return o+h<=s.radius*s.radius}else return!1};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return Math.sqrt((s.x2-s.x1)*(s.x2-s.x1)+(s.y2-s.y1)*(s.y2-s.y1))};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=n-l;return l+((s-l)%o+o)%o};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(39),n=1e-6,o=new s({initialize:function(c){this.val=new Float32Array(16),c?this.copy(c):this.identity()},clone:function(){return new o(this)},set:function(d){return this.copy(d)},setValues:function(d,c,g,m,x,y,T,S,C,E,P,M,R,A,O,F){var I=this.val;return I[0]=d,I[1]=c,I[2]=g,I[3]=m,I[4]=x,I[5]=y,I[6]=T,I[7]=S,I[8]=C,I[9]=E,I[10]=P,I[11]=M,I[12]=R,I[13]=A,I[14]=O,I[15]=F,this},copy:function(d){var c=d.val;return this.setValues(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])},fromArray:function(d){return this.setValues(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(d,c,g){var m=h.fromQuat(g),x=m.val,y=c.x,T=c.y,S=c.z;return this.setValues(x[0]*y,x[1]*y,x[2]*y,0,x[4]*T,x[5]*T,x[6]*T,0,x[8]*S,x[9]*S,x[10]*S,0,d.x,d.y,d.z,1)},xyz:function(d,c,g){this.identity();var m=this.val;return m[12]=d,m[13]=c,m[14]=g,this},scaling:function(d,c,g){this.zero();var m=this.val;return m[0]=d,m[5]=c,m[10]=g,m[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var d=this.val,c=d[1],g=d[2],m=d[3],x=d[6],y=d[7],T=d[11];return d[1]=d[4],d[2]=d[8],d[3]=d[12],d[4]=c,d[6]=d[9],d[7]=d[13],d[8]=g,d[9]=x,d[11]=d[14],d[12]=m,d[13]=y,d[14]=T,this},getInverse:function(d){return this.copy(d),this.invert()},invert:function(){var d=this.val,c=d[0],g=d[1],m=d[2],x=d[3],y=d[4],T=d[5],S=d[6],C=d[7],E=d[8],P=d[9],M=d[10],R=d[11],A=d[12],O=d[13],F=d[14],I=d[15],w=c*T-g*y,b=c*S-m*y,Y=c*C-x*y,U=g*S-m*T,W=g*C-x*T,D=m*C-x*S,L=E*O-P*A,B=E*F-M*A,G=E*I-R*A,N=P*F-M*O,V=P*I-R*O,z=M*I-R*F,X=w*z-b*V+Y*N+U*G-W*B+D*L;return X?(X=1/X,this.setValues((T*z-S*V+C*N)*X,(m*V-g*z-x*N)*X,(O*D-F*W+I*U)*X,(M*W-P*D-R*U)*X,(S*G-y*z-C*B)*X,(c*z-m*G+x*B)*X,(F*Y-A*D-I*b)*X,(E*D-M*Y+R*b)*X,(y*V-T*G+C*L)*X,(g*G-c*V-x*L)*X,(A*W-O*Y+I*w)*X,(P*Y-E*W-R*w)*X,(T*B-y*N-S*L)*X,(c*N-g*B+m*L)*X,(O*b-A*U-F*w)*X,(E*U-P*b+M*w)*X)):this},adjoint:function(){var d=this.val,c=d[0],g=d[1],m=d[2],x=d[3],y=d[4],T=d[5],S=d[6],C=d[7],E=d[8],P=d[9],M=d[10],R=d[11],A=d[12],O=d[13],F=d[14],I=d[15];return this.setValues(T*(M*I-R*F)-P*(S*I-C*F)+O*(S*R-C*M),-(g*(M*I-R*F)-P*(m*I-x*F)+O*(m*R-x*M)),g*(S*I-C*F)-T*(m*I-x*F)+O*(m*C-x*S),-(g*(S*R-C*M)-T*(m*R-x*M)+P*(m*C-x*S)),-(y*(M*I-R*F)-E*(S*I-C*F)+A*(S*R-C*M)),c*(M*I-R*F)-E*(m*I-x*F)+A*(m*R-x*M),-(c*(S*I-C*F)-y*(m*I-x*F)+A*(m*C-x*S)),c*(S*R-C*M)-y*(m*R-x*M)+E*(m*C-x*S),y*(P*I-R*O)-E*(T*I-C*O)+A*(T*R-C*P),-(c*(P*I-R*O)-E*(g*I-x*O)+A*(g*R-x*P)),c*(T*I-C*O)-y*(g*I-x*O)+A*(g*C-x*T),-(c*(T*R-C*P)-y*(g*R-x*P)+E*(g*C-x*T)),-(y*(P*F-M*O)-E*(T*F-S*O)+A*(T*M-S*P)),c*(P*F-M*O)-E*(g*F-m*O)+A*(g*M-m*P),-(c*(T*F-S*O)-y*(g*F-m*O)+A*(g*S-m*T)),c*(T*M-S*P)-y*(g*M-m*P)+E*(g*S-m*T))},determinant:function(){var d=this.val,c=d[0],g=d[1],m=d[2],x=d[3],y=d[4],T=d[5],S=d[6],C=d[7],E=d[8],P=d[9],M=d[10],R=d[11],A=d[12],O=d[13],F=d[14],I=d[15],w=c*T-g*y,b=c*S-m*y,Y=c*C-x*y,U=g*S-m*T,W=g*C-x*T,D=m*C-x*S,L=E*O-P*A,B=E*F-M*A,G=E*I-R*A,N=P*F-M*O,V=P*I-R*O,z=M*I-R*F;return w*z-b*V+Y*N+U*G-W*B+D*L},multiply:function(d){var c=this.val,g=c[0],m=c[1],x=c[2],y=c[3],T=c[4],S=c[5],C=c[6],E=c[7],P=c[8],M=c[9],R=c[10],A=c[11],O=c[12],F=c[13],I=c[14],w=c[15],b=d.val,Y=b[0],U=b[1],W=b[2],D=b[3];return c[0]=Y*g+U*T+W*P+D*O,c[1]=Y*m+U*S+W*M+D*F,c[2]=Y*x+U*C+W*R+D*I,c[3]=Y*y+U*E+W*A+D*w,Y=b[4],U=b[5],W=b[6],D=b[7],c[4]=Y*g+U*T+W*P+D*O,c[5]=Y*m+U*S+W*M+D*F,c[6]=Y*x+U*C+W*R+D*I,c[7]=Y*y+U*E+W*A+D*w,Y=b[8],U=b[9],W=b[10],D=b[11],c[8]=Y*g+U*T+W*P+D*O,c[9]=Y*m+U*S+W*M+D*F,c[10]=Y*x+U*C+W*R+D*I,c[11]=Y*y+U*E+W*A+D*w,Y=b[12],U=b[13],W=b[14],D=b[15],c[12]=Y*g+U*T+W*P+D*O,c[13]=Y*m+U*S+W*M+D*F,c[14]=Y*x+U*C+W*R+D*I,c[15]=Y*y+U*E+W*A+D*w,this},multiplyLocal:function(d){var c=this.val,g=d.val;return this.setValues(c[0]*g[0]+c[1]*g[4]+c[2]*g[8]+c[3]*g[12],c[0]*g[1]+c[1]*g[5]+c[2]*g[9]+c[3]*g[13],c[0]*g[2]+c[1]*g[6]+c[2]*g[10]+c[3]*g[14],c[0]*g[3]+c[1]*g[7]+c[2]*g[11]+c[3]*g[15],c[4]*g[0]+c[5]*g[4]+c[6]*g[8]+c[7]*g[12],c[4]*g[1]+c[5]*g[5]+c[6]*g[9]+c[7]*g[13],c[4]*g[2]+c[5]*g[6]+c[6]*g[10]+c[7]*g[14],c[4]*g[3]+c[5]*g[7]+c[6]*g[11]+c[7]*g[15],c[8]*g[0]+c[9]*g[4]+c[10]*g[8]+c[11]*g[12],c[8]*g[1]+c[9]*g[5]+c[10]*g[9]+c[11]*g[13],c[8]*g[2]+c[9]*g[6]+c[10]*g[10]+c[11]*g[14],c[8]*g[3]+c[9]*g[7]+c[10]*g[11]+c[11]*g[15],c[12]*g[0]+c[13]*g[4]+c[14]*g[8]+c[15]*g[12],c[12]*g[1]+c[13]*g[5]+c[14]*g[9]+c[15]*g[13],c[12]*g[2]+c[13]*g[6]+c[14]*g[10]+c[15]*g[14],c[12]*g[3]+c[13]*g[7]+c[14]*g[11]+c[15]*g[15])},premultiply:function(d){return this.multiplyMatrices(d,this)},multiplyMatrices:function(d,c){var g=d.val,m=c.val,x=g[0],y=g[4],T=g[8],S=g[12],C=g[1],E=g[5],P=g[9],M=g[13],R=g[2],A=g[6],O=g[10],F=g[14],I=g[3],w=g[7],b=g[11],Y=g[15],U=m[0],W=m[4],D=m[8],L=m[12],B=m[1],G=m[5],N=m[9],V=m[13],z=m[2],X=m[6],H=m[10],K=m[14],J=m[3],Z=m[7],Q=m[11],q=m[15];return this.setValues(x*U+y*B+T*z+S*J,C*U+E*B+P*z+M*J,R*U+A*B+O*z+F*J,I*U+w*B+b*z+Y*J,x*W+y*G+T*X+S*Z,C*W+E*G+P*X+M*Z,R*W+A*G+O*X+F*Z,I*W+w*G+b*X+Y*Z,x*D+y*N+T*H+S*Q,C*D+E*N+P*H+M*Q,R*D+A*N+O*H+F*Q,I*D+w*N+b*H+Y*Q,x*L+y*V+T*K+S*q,C*L+E*V+P*K+M*q,R*L+A*V+O*K+F*q,I*L+w*V+b*K+Y*q)},translate:function(d){return this.translateXYZ(d.x,d.y,d.z)},translateXYZ:function(d,c,g){var m=this.val;return m[12]=m[0]*d+m[4]*c+m[8]*g+m[12],m[13]=m[1]*d+m[5]*c+m[9]*g+m[13],m[14]=m[2]*d+m[6]*c+m[10]*g+m[14],m[15]=m[3]*d+m[7]*c+m[11]*g+m[15],this},scale:function(d){return this.scaleXYZ(d.x,d.y,d.z)},scaleXYZ:function(d,c,g){var m=this.val;return m[0]=m[0]*d,m[1]=m[1]*d,m[2]=m[2]*d,m[3]=m[3]*d,m[4]=m[4]*c,m[5]=m[5]*c,m[6]=m[6]*c,m[7]=m[7]*c,m[8]=m[8]*g,m[9]=m[9]*g,m[10]=m[10]*g,m[11]=m[11]*g,this},makeRotationAxis:function(d,c){var g=Math.cos(c),m=Math.sin(c),x=1-g,y=d.x,T=d.y,S=d.z,C=x*y,E=x*T;return this.setValues(C*y+g,C*T-m*S,C*S+m*T,0,C*T+m*S,E*T+g,E*S-m*y,0,C*S-m*T,E*S+m*y,x*S*S+g,0,0,0,0,1)},rotate:function(d,c){var g=this.val,m=c.x,x=c.y,y=c.z,T=Math.sqrt(m*m+x*x+y*y);if(Math.abs(T)<n)return this;T=1/T,m*=T,x*=T,y*=T;var S=Math.sin(d),C=Math.cos(d),E=1-C,P=g[0],M=g[1],R=g[2],A=g[3],O=g[4],F=g[5],I=g[6],w=g[7],b=g[8],Y=g[9],U=g[10],W=g[11],D=g[12],L=g[13],B=g[14],G=g[15],N=m*m*E+C,V=x*m*E+y*S,z=y*m*E-x*S,X=m*x*E-y*S,H=x*x*E+C,K=y*x*E+m*S,J=m*y*E+x*S,Z=x*y*E-m*S,Q=y*y*E+C;return this.setValues(P*N+O*V+b*z,M*N+F*V+Y*z,R*N+I*V+U*z,A*N+w*V+W*z,P*X+O*H+b*K,M*X+F*H+Y*K,R*X+I*H+U*K,A*X+w*H+W*K,P*J+O*Z+b*Q,M*J+F*Z+Y*Q,R*J+I*Z+U*Q,A*J+w*Z+W*Q,D,L,B,G)},rotateX:function(d){var c=this.val,g=Math.sin(d),m=Math.cos(d),x=c[4],y=c[5],T=c[6],S=c[7],C=c[8],E=c[9],P=c[10],M=c[11];return c[4]=x*m+C*g,c[5]=y*m+E*g,c[6]=T*m+P*g,c[7]=S*m+M*g,c[8]=C*m-x*g,c[9]=E*m-y*g,c[10]=P*m-T*g,c[11]=M*m-S*g,this},rotateY:function(d){var c=this.val,g=Math.sin(d),m=Math.cos(d),x=c[0],y=c[1],T=c[2],S=c[3],C=c[8],E=c[9],P=c[10],M=c[11];return c[0]=x*m-C*g,c[1]=y*m-E*g,c[2]=T*m-P*g,c[3]=S*m-M*g,c[8]=x*g+C*m,c[9]=y*g+E*m,c[10]=T*g+P*m,c[11]=S*g+M*m,this},rotateZ:function(d){var c=this.val,g=Math.sin(d),m=Math.cos(d),x=c[0],y=c[1],T=c[2],S=c[3],C=c[4],E=c[5],P=c[6],M=c[7];return c[0]=x*m+C*g,c[1]=y*m+E*g,c[2]=T*m+P*g,c[3]=S*m+M*g,c[4]=C*m-x*g,c[5]=E*m-y*g,c[6]=P*m-T*g,c[7]=M*m-S*g,this},fromRotationTranslation:function(d,c){var g=d.x,m=d.y,x=d.z,y=d.w,T=g+g,S=m+m,C=x+x,E=g*T,P=g*S,M=g*C,R=m*S,A=m*C,O=x*C,F=y*T,I=y*S,w=y*C;return this.setValues(1-(R+O),P+w,M-I,0,P-w,1-(E+O),A+F,0,M+I,A-F,1-(E+R),0,c.x,c.y,c.z,1)},fromQuat:function(d){var c=d.x,g=d.y,m=d.z,x=d.w,y=c+c,T=g+g,S=m+m,C=c*y,E=c*T,P=c*S,M=g*T,R=g*S,A=m*S,O=x*y,F=x*T,I=x*S;return this.setValues(1-(M+A),E+I,P-F,0,E-I,1-(C+A),R+O,0,P+F,R-O,1-(C+M),0,0,0,0,1)},frustum:function(d,c,g,m,x,y){var T=1/(c-d),S=1/(m-g),C=1/(x-y);return this.setValues(x*2*T,0,0,0,0,x*2*S,0,0,(c+d)*T,(m+g)*S,(y+x)*C,-1,0,0,y*x*2*C,0)},perspective:function(d,c,g,m){var x=1/Math.tan(d/2),y=1/(g-m);return this.setValues(x/c,0,0,0,0,x,0,0,0,0,(m+g)*y,-1,0,0,2*m*g*y,0)},perspectiveLH:function(d,c,g,m){return this.setValues(2*g/d,0,0,0,0,2*g/c,0,0,0,0,-m/(g-m),1,0,0,g*m/(g-m),0)},ortho:function(d,c,g,m,x,y){var T=d-c,S=g-m,C=x-y;return T=T===0?T:1/T,S=S===0?S:1/S,C=C===0?C:1/C,this.setValues(-2*T,0,0,0,0,-2*S,0,0,0,0,2*C,0,(d+c)*T,(m+g)*S,(y+x)*C,1)},lookAtRH:function(d,c,g){var m=this.val;return u.subVectors(d,c),u.getLengthSquared()===0&&(u.z=1),u.normalize(),a.crossVectors(g,u),a.getLengthSquared()===0&&(Math.abs(g.z)===1?u.x+=1e-4:u.z+=1e-4,u.normalize(),a.crossVectors(g,u)),a.normalize(),v.crossVectors(u,a),m[0]=a.x,m[1]=a.y,m[2]=a.z,m[4]=v.x,m[5]=v.y,m[6]=v.z,m[8]=u.x,m[9]=u.y,m[10]=u.z,this},lookAt:function(d,c,g){var m=d.x,x=d.y,y=d.z,T=g.x,S=g.y,C=g.z,E=c.x,P=c.y,M=c.z;if(Math.abs(m-E)<n&&Math.abs(x-P)<n&&Math.abs(y-M)<n)return this.identity();var R=m-E,A=x-P,O=y-M,F=1/Math.sqrt(R*R+A*A+O*O);R*=F,A*=F,O*=F;var I=S*O-C*A,w=C*R-T*O,b=T*A-S*R;F=Math.sqrt(I*I+w*w+b*b),F?(F=1/F,I*=F,w*=F,b*=F):(I=0,w=0,b=0);var Y=A*b-O*w,U=O*I-R*b,W=R*w-A*I;return F=Math.sqrt(Y*Y+U*U+W*W),F?(F=1/F,Y*=F,U*=F,W*=F):(Y=0,U=0,W=0),this.setValues(I,Y,R,0,w,U,A,0,b,W,O,0,-(I*m+w*x+b*y),-(Y*m+U*x+W*y),-(R*m+A*x+O*y),1)},yawPitchRoll:function(d,c,g){this.zero(),h.zero(),r.zero();var m=this.val,x=h.val,y=r.val,T=Math.sin(g),S=Math.cos(g);return m[10]=1,m[15]=1,m[0]=S,m[1]=T,m[4]=-T,m[5]=S,T=Math.sin(c),S=Math.cos(c),x[0]=1,x[15]=1,x[5]=S,x[10]=S,x[9]=-T,x[6]=T,T=Math.sin(d),S=Math.cos(d),y[5]=1,y[15]=1,y[0]=S,y[2]=-T,y[8]=T,y[10]=S,this.multiplyLocal(h),this.multiplyLocal(r),this},setWorldMatrix:function(d,c,g,m,x){return this.yawPitchRoll(d.y,d.x,d.z),h.scaling(g.x,g.y,g.z),r.xyz(c.x,c.y,c.z),this.multiplyLocal(h),this.multiplyLocal(r),m&&this.multiplyLocal(m),x&&this.multiplyLocal(x),this},multiplyToMat4:function(d,c){var g=this.val,m=d.val,x=g[0],y=g[1],T=g[2],S=g[3],C=g[4],E=g[5],P=g[6],M=g[7],R=g[8],A=g[9],O=g[10],F=g[11],I=g[12],w=g[13],b=g[14],Y=g[15],U=m[0],W=m[1],D=m[2],L=m[3],B=m[4],G=m[5],N=m[6],V=m[7],z=m[8],X=m[9],H=m[10],K=m[11],J=m[12],Z=m[13],Q=m[14],q=m[15];return c.setValues(U*x+W*C+D*R+L*I,W*y+W*E+D*A+L*w,D*T+W*P+D*O+L*b,L*S+W*M+D*F+L*Y,B*x+G*C+N*R+V*I,B*y+G*E+N*A+V*w,B*T+G*P+N*O+V*b,B*S+G*M+N*F+V*Y,z*x+X*C+H*R+K*I,z*y+X*E+H*A+K*w,z*T+X*P+H*O+K*b,z*S+X*M+H*F+K*Y,J*x+Z*C+Q*R+q*I,J*y+Z*E+Q*A+q*w,J*T+Z*P+Q*O+q*b,J*S+Z*M+Q*F+q*Y)},fromRotationXYTranslation:function(d,c,g){var m=c.x,x=c.y,y=c.z,T=Math.sin(d.x),S=Math.cos(d.x),C=Math.sin(d.y),E=Math.cos(d.y),P=m,M=x,R=y,A=-T,O=0-A*C,F=0-S*C,I=A*E,w=S*E;return g||(P=E*m+C*y,M=O*m+S*x+I*y,R=F*m+T*x+w*y),this.setValues(E,O,F,0,0,S,T,0,C,I,w,0,P,M,R,1)},getMaxScaleOnAxis:function(){var d=this.val,c=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],g=d[4]*d[4]+d[5]*d[5]+d[6]*d[6],m=d[8]*d[8]+d[9]*d[9]+d[10]*d[10];return Math.sqrt(Math.max(c,g,m))}}),h=new o,r=new o,a=new l,v=new l,u=new l;t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={COMPLETE:e(987),DECODED:e(988),DECODED_ALL:e(989),DESTROY:e(990),DETUNE:e(991),GLOBAL_DETUNE:e(992),GLOBAL_MUTE:e(993),GLOBAL_RATE:e(994),GLOBAL_VOLUME:e(995),LOOP:e(996),LOOPED:e(997),MUTE:e(998),PAN:e(999),PAUSE_ALL:e(1e3),PAUSE:e(1001),PLAY:e(1002),RATE:e(1003),RESUME_ALL:e(1004),RESUME:e(1005),SEEK:e(1006),STOP_ALL:e(1007),STOP:e(1008),UNLOCKED:e(1009),VOLUME:e(1010)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=new s({Extends:n,initialize:function v(u,d,c,g,m){var x="png",y;if(r(d)){var T=d;d=h(T,"key"),c=h(T,"url"),y=h(T,"normalMap"),g=h(T,"xhrSettings"),x=h(T,"extension",x),m=h(T,"frameConfig")}Array.isArray(c)&&(y=c[1],c=c[0]);var S={type:"image",cache:u.textureManager,extension:x,responseType:"blob",key:d,url:c,xhrSettings:g,config:m};if(n.call(this,u,S),y){var C=new v(u,this.key,y,g,m);C.type="normalMap",this.setLink(C),u.addFile(C)}},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var v=this;this.data.onload=function(){n.revokeObjectURL(v.data),v.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(v.data),v.onProcessError()},n.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var v,u=this.linkFile;u&&u.state===l.FILE_COMPLETE?(this.type==="image"?v=this.cache.addImage(this.key,this.data,u.data):v=this.cache.addImage(u.key,u.data,this.data),this.pendingDestroy(v),u.pendingDestroy(v)):u||(v=this.cache.addImage(this.key,this.data),this.pendingDestroy(v))}});o.register("image",function(v,u,d){if(Array.isArray(v))for(var c=0;c<v.length;c++)this.addFile(new a(this,v[c]));else this.addFile(new a(this,v,u,d));return this}),t.exports=a},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){l?s.setCollision(!0,!0,!0,!0,!1):s.resetCollision(!1)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(164),l=e(0),n=e(11),o=e(15),h=e(1065),r=new l({Extends:o,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,h],initialize:function(v,u,d,c,g){o.call(this,v,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(c,g),this.setPosition(u,d),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(a,v){this.anims.update(a,v)},play:function(a,v){return this.anims.play(a,v)},playReverse:function(a,v){return this.anims.playReverse(a,v)},playAfterDelay:function(a,v){return this.anims.playAfterDelay(a,v)},playAfterRepeat:function(a,v){return this.anims.playAfterRepeat(a,v)},chain:function(a){return this.anims.chain(a)},stop:function(){return this.anims.stop()},stopAfterDelay:function(a){return this.anims.stopAfterDelay(a)},stopAfterRepeat:function(a){return this.anims.stopAfterRepeat(a)},stopOnFrame:function(a){return this.anims.stopOnFrame(a)},toJSON:function(){return n.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});t.exports=r},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){if(!(l>=s.length)){for(var n=s.length-1,o=s[l],h=l;h<n;h++)s[h]=s[h+1];return s.length=n,o}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ADDED_TO_SCENE:e(643),DESTROY:e(644),REMOVED_FROM_SCENE:e(645),VIDEO_COMPLETE:e(646),VIDEO_CREATED:e(647),VIDEO_ERROR:e(648),VIDEO_LOOP:e(649),VIDEO_PLAY:e(650),VIDEO_SEEKED:e(651),VIDEO_SEEKING:e(652),VIDEO_STOP:e(653),VIDEO_TIMEOUT:e(654),VIDEO_UNLOCKED:e(655)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){return n===void 0&&(n=0),l===0?s:(s-=n,s=l*Math.floor(s/l),o?(n+s)/l:n+s)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l={};for(var n in s)Array.isArray(s[n])?l[n]=s[n].slice(0):l[n]=s[n];return l};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=s.length;if(l<0||l>h||l>=n||n>h||l+n>h){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(o,h){return String(o).localeCompare(h)}function s(o,h){var r=o.length;if(r<=1)return o;for(var a=new Array(r),v=1;v<r;v*=2){l(o,h,v,a);var u=o;o=a,a=u}return o}function l(o,h,r,a){var v=o.length,u=0,d=r*2,c,g,m,x,y;for(c=0;c<v;c+=d)for(g=c+r,m=g+r,g>v&&(g=v),m>v&&(m=v),x=c,y=g;;)if(x<g&&y<m)h(o[x],o[y])<=0?a[u++]=o[x++]:a[u++]=o[y++];else if(x<g)a[u++]=o[x++];else if(y<m)a[u++]=o[y++];else break}var n=function(o,h){h===void 0&&(h=e);var r=s(o,h);return r!==o&&l(r,null,o.length,o),o};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(134),l=e(205),n=function(o,h){var r=s.Power0;if(typeof o=="string")if(s.hasOwnProperty(o))r=s[o];else{var a="";o.indexOf(".")&&(a=o.substr(o.indexOf(".")+1),a.toLowerCase()==="in"?a="easeIn":a.toLowerCase()==="out"?a="easeOut":a.toLowerCase()==="inout"&&(a="easeInOut")),o=l(o.substr(0,o.indexOf(".")+1)+a),s.hasOwnProperty(o)&&(r=s[o])}else typeof o=="function"?r=o:Array.isArray(o)&&o.length;if(!h)return r;var v=h.slice(0);return v.unshift(0),function(u){return v[0]=u,r.apply(this,v)}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(12),l=function(n,o,h,r,a){var v=n.strokeTint,u=s.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*h);v.TL=u,v.TR=u,v.BL=u,v.BR=u;var d=o.pathData,c=d.length-1,g=o.lineWidth,m=g/2,x=d[0]-r,y=d[1]-a;o.closePath||(c-=2);for(var T=2;T<c;T+=2){var S=d[T]-r,C=d[T+1]-a;n.batchLine(x,y,S,C,m,m,g,T-2,o.closePath?T===c-1:!1),x=S,y=C}};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(115),n=e(476),o=e(477),h=e(56),r=e(47),a=e(181),v=new s({initialize:function(d,c,g,m,x,y){d===void 0&&(d=0),c===void 0&&(c=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),this.type=h.TRIANGLE,this.x1=d,this.y1=c,this.x2=g,this.y2=m,this.x3=x,this.y3=y},contains:function(u,d){return l(this,u,d)},getPoint:function(u,d){return n(this,u,d)},getPoints:function(u,d,c){return o(this,u,d,c)},getRandomPoint:function(u){return a(this,u)},setTo:function(u,d,c,g,m,x){return u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),this.x1=u,this.y1=d,this.x2=c,this.y2=g,this.x3=m,this.y3=x,this},getLineA:function(u){return u===void 0&&(u=new r),u.setTo(this.x1,this.y1,this.x2,this.y2),u},getLineB:function(u){return u===void 0&&(u=new r),u.setTo(this.x2,this.y2,this.x3,this.y3),u},getLineC:function(u){return u===void 0&&(u=new r),u.setTo(this.x3,this.y3,this.x1,this.y1),u},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(u){var d=0;this.x1<=this.x2&&this.x1<=this.x3?d=this.x1-u:this.x2<=this.x1&&this.x2<=this.x3?d=this.x2-u:d=this.x3-u,this.x1-=d,this.x2-=d,this.x3-=d}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(u){var d=0;this.x1>=this.x2&&this.x1>=this.x3?d=this.x1-u:this.x2>=this.x1&&this.x2>=this.x3?d=this.x2-u:d=this.x3-u,this.x1-=d,this.x2-=d,this.x3-=d}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(u){var d=0;this.y1<=this.y2&&this.y1<=this.y3?d=this.y1-u:this.y2<=this.y1&&this.y2<=this.y3?d=this.y2-u:d=this.y3-u,this.y1-=d,this.y2-=d,this.y3-=d}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(u){var d=0;this.y1>=this.y2&&this.y1>=this.y3?d=this.y1-u:this.y2>=this.y1&&this.y2>=this.y3?d=this.y2-u:d=this.y3-u,this.y1-=d,this.y2-=d,this.y3-=d}}});t.exports=v},function(t,f){var e={};t.exports=e,function(){e.create=function(s,l){return{x:s||0,y:l||0}},e.clone=function(s){return{x:s.x,y:s.y}},e.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},e.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},e.rotate=function(s,l,n){var o=Math.cos(l),h=Math.sin(l);n||(n={});var r=s.x*o-s.y*h;return n.y=s.x*h+s.y*o,n.x=r,n},e.rotateAbout=function(s,l,n,o){var h=Math.cos(l),r=Math.sin(l);o||(o={});var a=n.x+((s.x-n.x)*h-(s.y-n.y)*r);return o.y=n.y+((s.x-n.x)*r+(s.y-n.y)*h),o.x=a,o},e.normalise=function(s){var l=e.magnitude(s);return l===0?{x:0,y:0}:{x:s.x/l,y:s.y/l}},e.dot=function(s,l){return s.x*l.x+s.y*l.y},e.cross=function(s,l){return s.x*l.y-s.y*l.x},e.cross3=function(s,l,n){return(l.x-s.x)*(n.y-s.y)-(l.y-s.y)*(n.x-s.x)},e.add=function(s,l,n){return n||(n={}),n.x=s.x+l.x,n.y=s.y+l.y,n},e.sub=function(s,l,n){return n||(n={}),n.x=s.x-l.x,n.y=s.y-l.y,n},e.mult=function(s,l){return{x:s.x*l,y:s.y*l}},e.div=function(s,l){return{x:s.x/l,y:s.y/l}},e.perp=function(s,l){return l=l===!0?-1:1,{x:l*-s.y,y:l*s.x}},e.neg=function(s){return{x:-s.x,y:-s.y}},e.angle=function(s,l){return Math.atan2(l.y-s.y,l.x-s.x)},e._temp=[e.create(),e.create(),e.create(),e.create(),e.create(),e.create()]}()},function(t,f){var e={};t.exports=e,function(){e.create=function(s){var l={min:{x:0,y:0},max:{x:0,y:0}};return s&&e.update(l,s),l},e.update=function(s,l,n){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var o=0;o<l.length;o++){var h=l[o];h.x>s.max.x&&(s.max.x=h.x),h.x<s.min.x&&(s.min.x=h.x),h.y>s.max.y&&(s.max.y=h.y),h.y<s.min.y&&(s.min.y=h.y)}n&&(n.x>0?s.max.x+=n.x:s.min.x+=n.x,n.y>0?s.max.y+=n.y:s.min.y+=n.y)},e.contains=function(s,l){return l.x>=s.min.x&&l.x<=s.max.x&&l.y>=s.min.y&&l.y<=s.max.y},e.overlaps=function(s,l){return s.min.x<=l.max.x&&s.max.x>=l.min.x&&s.max.y>=l.min.y&&s.min.y<=l.max.y},e.translate=function(s,l){s.min.x+=l.x,s.max.x+=l.x,s.min.y+=l.y,s.max.y+=l.y},e.shift=function(s,l){var n=s.max.x-s.min.x,o=s.max.y-s.min.y;s.min.x=l.x,s.max.x=l.x+n,s.min.y=l.y,s.max.y=l.y+o}}()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(29),l=e(0),n=e(11),o=e(502),h=new l({Mixins:[n.Alpha,n.Flip,n.Visible],initialize:function(a,v,u,d,c,g,m,x){this.layer=a,this.index=v,this.x=u,this.y=d,this.width=c,this.height=g,this.right,this.bottom,this.baseWidth=m!==void 0?m:c,this.baseHeight=x!==void 0?x:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(r,a){return!(r<this.pixelX||a<this.pixelY||r>this.right||a>this.bottom)},copy:function(r){return this.index=r.index,this.alpha=r.alpha,this.properties=r.properties,this.visible=r.visible,this.setFlip(r.flipX,r.flipY),this.tint=r.tint,this.rotation=r.rotation,this.collideUp=r.collideUp,this.collideDown=r.collideDown,this.collideLeft=r.collideLeft,this.collideRight=r.collideRight,this.collisionCallback=r.collisionCallback,this.collisionCallbackContext=r.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(r){var a=this.tilemapLayer;return a?a.tileToWorldX(this.x,r):this.x*this.baseWidth},getRight:function(r){var a=this.tilemapLayer;return a?this.getLeft(r)+this.width*a.scaleX:this.getLeft(r)+this.width},getTop:function(r){var a=this.tilemapLayer;return a?a.tileToWorldY(this.y,r)-(this.height-this.baseHeight)*a.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(r){var a=this.tilemapLayer;return a?this.getTop(r)+this.height*a.scaleY:this.getTop(r)+this.height},getBounds:function(r,a){return a===void 0&&(a=new o),a.x=this.getLeft(),a.y=this.getTop(),a.width=this.getRight()-a.x,a.height=this.getBottom()-a.y,a},getCenterX:function(r){return(this.getLeft(r)+this.getRight(r))/2},getCenterY:function(r){return(this.getTop(r)+this.getBottom(r))/2},intersects:function(r,a,v,u){return!(v<=this.pixelX||u<=this.pixelY||r>=this.right||a>=this.bottom)},isInteresting:function(r,a){return r&&a?this.canCollide||this.hasInterestingFace:r?this.collides:a?this.hasInterestingFace:!1},resetCollision:function(r){if(r===void 0&&(r=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,r){var a=this.tilemapLayer;a&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(r,a,v,u,d){if(a===void 0&&(a=r),v===void 0&&(v=r),u===void 0&&(u=r),d===void 0&&(d=!0),this.collideLeft=r,this.collideRight=a,this.collideUp=v,this.collideDown=u,this.faceLeft=r,this.faceRight=a,this.faceTop=v,this.faceBottom=u,d){var c=this.tilemapLayer;c&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(r,a){return r===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=r,this.collisionCallbackContext=a),this},setSize:function(r,a,v,u){return r!==void 0&&(this.width=r),a!==void 0&&(this.height=a),v!==void 0&&(this.baseWidth=v),u!==void 0&&(this.baseHeight=u),this.updatePixelXY(),this},updatePixelXY:function(){var r=this.layer.orientation;if(r===s.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(r===s.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(r===s.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(r===s.HEXAGONAL){var a=this.layer.hexSideLength,v=(this.baseHeight-a)/2+a;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*v}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var r=this.layer.tilemapLayer;if(r){var a=r.gidMap[this.index];if(a)return a}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var r=this.tilemapLayer;return r?r.tilemap:null}}});t.exports=h},function(t,f,e){var s={};t.exports=s;var l=e(64),n=e(32),o=e(41),h=e(84),r=e(83),a=e(1393);(function(){s.rectangle=function(v,u,d,c,g){g=g||{};var m={label:"Rectangle Body",position:{x:v,y:u},vertices:l.fromPath("L 0 0 L "+d+" 0 L "+d+" "+c+" L 0 "+c)};if(g.chamfer){var x=g.chamfer;m.vertices=l.chamfer(m.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete g.chamfer}return o.create(n.extend({},m,g))},s.trapezoid=function(v,u,d,c,g,m){m=m||{},g*=.5;var x=(1-g*2)*d,y=d*g,T=y+x,S=T+y,C;g<.5?C="L 0 0 L "+y+" "+-c+" L "+T+" "+-c+" L "+S+" 0":C="L 0 0 L "+T+" "+-c+" L "+S+" 0";var E={label:"Trapezoid Body",position:{x:v,y:u},vertices:l.fromPath(C)};if(m.chamfer){var P=m.chamfer;E.vertices=l.chamfer(E.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete m.chamfer}return o.create(n.extend({},E,m))},s.circle=function(v,u,d,c,g){c=c||{};var m={label:"Circle Body",circleRadius:d};g=g||25;var x=Math.ceil(Math.max(10,Math.min(g,d)));return x%2===1&&(x+=1),s.polygon(v,u,x,d,n.extend({},m,c))},s.polygon=function(v,u,d,c,g){if(g=g||{},d<3)return s.circle(v,u,c,g);for(var m=2*Math.PI/d,x="",y=m*.5,T=0;T<d;T+=1){var S=y+T*m,C=Math.cos(S)*c,E=Math.sin(S)*c;x+="L "+C.toFixed(3)+" "+E.toFixed(3)+" "}var P={label:"Polygon Body",position:{x:v,y:u},vertices:l.fromPath(x)};if(g.chamfer){var M=g.chamfer;P.vertices=l.chamfer(P.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete g.chamfer}return o.create(n.extend({},P,g))},s.fromVertices=function(v,u,d,c,g,m,x){var y,T,S,C,E,P;for(c=c||{},T=[],g=typeof g!="undefined"?g:!1,m=typeof m!="undefined"?m:.01,x=typeof x!="undefined"?x:10,a||n.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),n.isArray(d[0])||(d=[d]),P=0;P<d.length;P+=1)if(C=d[P],S=l.isConvex(C),S||!a)S?C=l.clockwiseSort(C):C=l.hull(C),T.push({position:{x:v,y:u},vertices:C});else{var M=C.map(function(F){return[F.x,F.y]});a.makeCCW(M),m!==!1&&a.removeCollinearPoints(M,m);var R=a.quickDecomp(M);for(E=0;E<R.length;E++){var A=R[E],O=A.map(function(F){return{x:F[0],y:F[1]}});x>0&&l.area(O)<x||T.push({position:l.centre(O),vertices:O})}}for(E=0;E<T.length;E++)T[E]=o.create(n.extend(T[E],c));return g&&s.flagCoincidentParts(T,5),T.length>1?(y=o.create(n.extend({parts:T.slice(0)},c)),o.setPosition(y,{x:v,y:u}),y):T[0]},s.flagCoincidentParts=function(v,u){u===void 0&&(u=5);for(var d=0;d<v.length;d++)for(var c=v[d],g=d+1;g<v.length;g++){var m=v[g];if(h.overlaps(c.bounds,m.bounds))for(var x=c.vertices,y=m.vertices,T=0;T<c.vertices.length;T++)for(var S=0;S<m.vertices.length;S++){var C=r.magnitudeSquared(r.sub(x[(T+1)%x.length],y[S])),E=r.magnitudeSquared(r.sub(x[T],y[(S+1)%y.length]));C<u&&E<u&&(x[T].isInternal=!0,y[S].isInternal=!0)}}return v}})()},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.x-s.width*s.originX+s.width*.5};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.width*s.originX;return s.x=l+n-s.width*.5,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.y-s.height*s.originY+s.height*.5};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.height*s.originY;return s.y=l+n-s.height*.5,s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={POST_RENDER:e(628),PRE_RENDER:e(629),RENDER:e(630),RESIZE:e(631)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(74),l=function(n,o,h,r){r===void 0&&(r=n);var a;if(!Array.isArray(o))return a=n.indexOf(o),a!==-1?(s(n,a),h&&h.call(r,o),o):null;for(var v=o.length-1,u=[];v>=0;){var d=o[v];a=n.indexOf(d),a!==-1&&(s(n,a),u.push(d),h&&h.call(r,d)),v--}return u};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(199),n=e(10),o=e(3),h=new s({initialize:function(a){this.type=a,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(r,a){return a===void 0&&(a=32),r.strokePoints(this.getPoints(a))},getBounds:function(r,a){r||(r=new n),a===void 0&&(a=16);var v=this.getLength();a>v&&(a=v/2);var u=Math.max(1,Math.round(v/a));return l(this.getSpacedPoints(u),r)},getDistancePoints:function(r){var a=this.getLength(),v=Math.max(1,a/r);return this.getSpacedPoints(v)},getEndPoint:function(r){return r===void 0&&(r=new o),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(r===void 0&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var a=[],v,u=this.getPoint(0,this._tmpVec2A),d=0;a.push(0);for(var c=1;c<=r;c++)v=this.getPoint(c/r,this._tmpVec2B),d+=v.distance(u),a.push(d),u.copy(v);return this.cacheArcLengths=a,a},getPointAt:function(r,a){var v=this.getUtoTmapping(r);return this.getPoint(v,a)},getPoints:function(r,a,v){v===void 0&&(v=[]),r||(a?r=this.getLength()/a:r=this.defaultDivisions);for(var u=0;u<=r;u++)v.push(this.getPoint(u/r));return v},getRandomPoint:function(r){return r===void 0&&(r=new o),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,a,v){v===void 0&&(v=[]),r||(a?r=this.getLength()/a:r=this.defaultDivisions);for(var u=0;u<=r;u++){var d=this.getUtoTmapping(u/r,null,r);v.push(this.getPoint(d))}return v},getStartPoint:function(r){return r===void 0&&(r=new o),this.getPointAt(0,r)},getTangent:function(r,a){a===void 0&&(a=new o);var v=1e-4,u=r-v,d=r+v;return u<0&&(u=0),d>1&&(d=1),this.getPoint(u,this._tmpVec2A),this.getPoint(d,a),a.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,a){var v=this.getUtoTmapping(r);return this.getTangent(v,a)},getTFromDistance:function(r,a){return r<=0?0:this.getUtoTmapping(0,r,a)},getUtoTmapping:function(r,a,v){var u=this.getLengths(v),d=0,c=u.length,g;a?g=Math.min(a,u[c-1]):g=r*u[c-1];for(var m=0,x=c-1,y;m<=x;)if(d=Math.floor(m+(x-m)/2),y=u[d]-g,y<0)m=d+1;else if(y>0)x=d-1;else{x=d;break}if(d=x,u[d]===g)return d/(c-1);var T=u[d],S=u[d+1],C=S-T,E=(g-T)/C;return(d+E)/(c-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ADD:e(968),COMPLETE:e(969),FILE_COMPLETE:e(970),FILE_KEY_COMPLETE:e(971),FILE_LOAD_ERROR:e(972),FILE_LOAD:e(973),FILE_PROGRESS:e(974),POST_PROCESS:e(975),PROGRESS:e(976),START:e(977)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o,h){h===void 0&&(h=new s);var r=n.x1,a=n.y1,v=n.x2,u=n.y2,d=o.x1,c=o.y1,g=o.x2,m=o.y2,x=(g-d)*(a-c)-(m-c)*(r-d),y=(v-r)*(a-c)-(u-a)*(r-d),T=(m-c)*(v-r)-(g-d)*(u-a);if(T===0)return!1;var S=x/T,C=y/T;return S>=0&&S<=1&&C>=0&&C<=1?(h.x=r+S*(v-r),h.y=a+S*(u-a),!0):!1};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return Math.atan2(s.y2-s.y1,s.x2-s.x1)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(18),l=function(n,o,h){return n=s(n,0,1),(h-o)*n+o};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return s&&s.hasOwnProperty(l)?s[l]:n};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(315),n=new s({initialize:function(h,r){this.parent=h,this.events=r,r||(this.events=h.events?h.events:h),this.list={},this.values={},this._frozen=!1,!h.hasOwnProperty("sys")&&this.events&&this.events.once(l.DESTROY,this.destroy,this)},get:function(o){var h=this.list;if(Array.isArray(o)){for(var r=[],a=0;a<o.length;a++)r.push(h[o[a]]);return r}else return h[o]},getAll:function(){var o={};for(var h in this.list)this.list.hasOwnProperty(h)&&(o[h]=this.list[h]);return o},query:function(o){var h={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(o)&&(h[r]=this.list[r]);return h},set:function(o,h){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,h);for(var r in o)this.setValue(r,o[r]);return this},inc:function(o,h){if(this._frozen)return this;h===void 0&&(h=1);var r=this.get(o);return r===void 0&&(r=0),this.set(o,r+h),this},toggle:function(o){return this._frozen?this:(this.set(o,!this.get(o)),this)},setValue:function(o,h){if(this._frozen)return this;if(this.has(o))this.values[o]=h;else{var r=this,a=this.list,v=this.events,u=this.parent;Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return a[o]},set:function(d){if(!r._frozen){var c=a[o];a[o]=d,v.emit(l.CHANGE_DATA,u,o,d,c),v.emit(l.CHANGE_DATA_KEY+o,u,d,c)}}}),a[o]=h,v.emit(l.SET_DATA,u,o,h)}return this},each:function(o,h){for(var r=[this.parent,null,void 0],a=1;a<arguments.length;a++)r.push(arguments[a]);for(var v in this.list)r[1]=v,r[2]=this.list[v],o.apply(h,r);return this},merge:function(o,h){h===void 0&&(h=!0);for(var r in o)o.hasOwnProperty(r)&&(h||!h&&!this.has(r))&&this.setValue(r,o[r]);return this},remove:function(o){if(this._frozen)return this;if(Array.isArray(o))for(var h=0;h<o.length;h++)this.removeValue(o[h]);else return this.removeValue(o);return this},removeValue:function(o){if(this.has(o)){var h=this.list[o];delete this.list[o],delete this.values[o],this.events.emit(l.REMOVE_DATA,this.parent,o,h)}return this},pop:function(o){var h=void 0;return!this._frozen&&this.has(o)&&(h=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(l.REMOVE_DATA,this.parent,o,h)),h},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(l.CHANGE_DATA),this.events.off(l.SET_DATA),this.events.off(l.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var h in this.list)this.list[h]!==void 0&&o++;return o}}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o){if(this.entries={},this.size=0,Array.isArray(o))for(var h=0;h<o.length;h++)this.set(o[h][0],o[h][1])},set:function(n,o){return this.has(n)||this.size++,this.entries[n]=o,this},get:function(n){if(this.has(n))return this.entries[n]},getArray:function(){var n=[],o=this.entries;for(var h in o)n.push(o[h]);return n},has:function(n){return this.entries.hasOwnProperty(n)},delete:function(n){return this.has(n)&&(delete this.entries[n],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(n){delete this.entries[n]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var n=[],o=this.entries;for(var h in o)n.push(o[h]);return n},dump:function(){var n=this.entries;console.group("Map");for(var o in n)console.log(o,n[o]);console.groupEnd()},each:function(n){var o=this.entries;for(var h in o)if(n(h,o[h])===!1)break;return this},contains:function(n){var o=this.entries;for(var h in o)if(o[h]===n)return!0;return!1},merge:function(n,o){o===void 0&&(o=!1);var h=this.entries,r=n.entries;for(var a in r)h.hasOwnProperty(a)&&o?h[a]=r[a]:this.set(a,r[a]);return this}});t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return s<<16|l<<8|n};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ENTER_FULLSCREEN:e(800),FULLSCREEN_FAILED:e(801),FULLSCREEN_UNSUPPORTED:e(802),LEAVE_FULLSCREEN:e(803),ORIENTATION_CHANGE:e(804),RESIZE:e(805)}},function(t,f,e){(function(s){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var l={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function n(){if(typeof importScripts=="function")return l;var o=navigator.userAgent;/Windows/.test(o)?l.windows=!0:/Mac OS/.test(o)&&!/like Mac OS/.test(o)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(l.iOS=!0,l.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),l.iOSVersion=parseInt(RegExp.$1,10)):l.macOS=!0:/Android/.test(o)?l.android=!0:/Linux/.test(o)?l.linux=!0:/iP[ao]d|iPhone/i.test(o)?(l.iOS=!0,navigator.appVersion.match(/OS (\d+)/),l.iOSVersion=parseInt(RegExp.$1,10),l.iPhone=o.toLowerCase().indexOf("iphone")!==-1,l.iPad=o.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(o)||/\bKF[A-Z][A-Z]+/.test(o)||/Silk.*Mobile Safari/.test(o)?l.kindle=!0:/CrOS/.test(o)&&(l.chromeOS=!0),(/Windows Phone/i.test(o)||/IEMobile/i.test(o))&&(l.android=!1,l.iOS=!1,l.macOS=!1,l.windows=!0,l.windowsPhone=!0);var h=/Silk/.test(o);return(l.windows||l.macOS||l.linux&&!h||l.chromeOS)&&(l.desktop=!0),(l.windowsPhone||/Windows NT/i.test(o)&&/Touch/i.test(o))&&(l.desktop=!1),navigator.standalone&&(l.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(l.cordova=!0),window.ejecta!==void 0&&(l.ejecta=!0)),typeof s!="undefined"&&s.versions&&s.versions.node&&(l.node=!0),l.node&&typeof s.versions=="object"&&(l.nodeWebkit=!!s.versions["node-webkit"],l.electron=!!s.versions.electron),/Crosswalk/.test(o)&&(l.crosswalk=!0),l.pixelRatio=window.devicePixelRatio||1,l}t.exports=n()}).call(this,e(807))},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ADD:e(861),ERROR:e(862),LOAD:e(863),READY:e(864),REMOVE:e(865)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(59),n=e(2),o=e(878),h=e(879),r=e(25),a=e(12),v=e(107),u=e(58),d=new s({Extends:u,initialize:function(g){var m=g.game.renderer,x=n(g,"fragShader",o);g.fragShader=a.parseFragmentShaderMaxTextures(x,m.maxTextures),g.vertShader=n(g,"vertShader",h),g.attributes=n(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:v.UNSIGNED_BYTE,normalized:!0}]),u.call(this,g),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){u.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(c,g,m){this.manager.set(this,c);var x=this._tempMatrix1,y=this._tempMatrix2,T=this._tempMatrix3,S=c.frame,C=S.glTexture,E=S.u0,P=S.v0,M=S.u1,R=S.v1,A=S.x,O=S.y,F=S.cutWidth,I=S.cutHeight,w=S.customPivot,b=c.displayOriginX,Y=c.displayOriginY,U=-b+A,W=-Y+O;if(c.isCropped){var D=c._crop;(D.flipX!==c.flipX||D.flipY!==c.flipY)&&S.updateCropUVs(D,c.flipX,c.flipY),E=D.u0,P=D.v0,M=D.u1,R=D.v1,F=D.width,I=D.height,A=D.x,O=D.y,U=-b+A,W=-Y+O}var L=1,B=1;c.flipX&&(w||(U+=-S.realWidth+b*2),L=-1),(c.flipY||S.source.isGLTexture&&!C.flipY)&&(w||(W+=-S.realHeight+Y*2),B=-1),y.applyITRS(c.x,c.y,c.rotation,c.scaleX*L,c.scaleY*B),x.copyFrom(g.matrix),m?(x.multiplyWithOffset(m,-g.scrollX*c.scrollFactorX,-g.scrollY*c.scrollFactorY),y.e=c.x,y.f=c.y):(y.e-=g.scrollX*c.scrollFactorX,y.f-=g.scrollY*c.scrollFactorY),x.multiply(y,T);var G=U+F,N=W+I,V=g.roundPixels,z=T.getXRound(U,W,V),X=T.getYRound(U,W,V),H=T.getXRound(U,N,V),K=T.getYRound(U,N,V),J=T.getXRound(G,N,V),Z=T.getYRound(G,N,V),Q=T.getXRound(G,W,V),q=T.getYRound(G,W,V),k=a.getTintAppendFloatAlpha,_=g.alpha,ot=k(c.tintTopLeft,_*c._alphaTL),nt=k(c.tintTopRight,_*c._alphaTR),et=k(c.tintBottomLeft,_*c._alphaBL),j=k(c.tintBottomRight,_*c._alphaBR);this.shouldFlush(6)&&this.flush();var ht=this.setGameObject(c,S);this.manager.preBatch(c),this.batchQuad(c,z,X,H,K,J,Z,Q,q,E,P,M,R,ot,nt,et,j,c.tintFill,C,ht),this.manager.postBatch(c)},batchTexture:function(c,g,m,x,y,T,S,C,E,P,M,R,A,O,F,I,w,b,Y,U,W,D,L,B,G,N,V,z,X,H,K,J){this.manager.set(this,c);var Z=this._tempMatrix1,Q=this._tempMatrix2,q=this._tempMatrix3,k=b/m+V,_=Y/x+z,ot=(b+U)/m+V,nt=(Y+W)/x+z,et=S,j=C,ht=-I,it=-w;if(c.isCropped){var at=c._crop,Kt=at.width,Jt=at.height;et=Kt,j=Jt,S=Kt,C=Jt,b=at.x,Y=at.y;var Tt=b,dt=Y;R&&(Tt=U-at.x-Kt),A&&(dt=W-at.y-Jt),k=Tt/m+V,_=dt/x+z,ot=(Tt+Kt)/m+V,nt=(dt+Jt)/x+z,ht=-I+b,it=-w+Y}A=A^(!K&&g.isRenderTexture?1:0),R&&(et*=-1,ht+=S),A&&(j*=-1,it+=C);var At=ht+et,Mt=it+j;Q.applyITRS(y,T,M,E,P),Z.copyFrom(X.matrix),H?(Z.multiplyWithOffset(H,-X.scrollX*O,-X.scrollY*F),Q.e=y,Q.f=T):(Q.e-=X.scrollX*O,Q.f-=X.scrollY*F),Z.multiply(Q,q);var Et=X.roundPixels,Zt=q.getXRound(ht,it,Et),Xe=q.getYRound(ht,it,Et),We=q.getXRound(ht,Mt,Et),He=q.getYRound(ht,Mt,Et),$e=q.getXRound(At,Mt,Et),Ke=q.getYRound(At,Mt,Et),Je=q.getXRound(At,it,Et),pc=q.getYRound(At,it,Et);J===void 0&&(J=this.renderer.setTexture2D(g)),c&&this.manager.preBatch(c),this.batchQuad(c,Zt,Xe,We,He,$e,Ke,Je,pc,k,_,ot,nt,D,L,B,G,N,g,J),c&&this.manager.postBatch(c)},batchTextureFrame:function(c,g,m,x,y,T,S){this.manager.set(this);var C=this._tempMatrix1.copyFrom(T),E=this._tempMatrix2,P=g+c.width,M=m+c.height;S?C.multiply(S,E):E=C;var R=E.getX(g,m),A=E.getY(g,m),O=E.getX(g,M),F=E.getY(g,M),I=E.getX(P,M),w=E.getY(P,M),b=E.getX(P,m),Y=E.getY(P,m),U=this.renderer.setTextureSource(c.source);x=a.getTintAppendFloatAlpha(x,y),this.batchQuad(null,R,A,O,F,I,w,b,Y,c.u0,c.v0,c.u1,c.v1,x,x,x,x,0,c.glTexture,U)},batchFillRect:function(c,g,m,x,y,T){this.renderer.pipelines.set(this);var S=this.calcMatrix;T&&T.multiply(y,S);var C=c+m,E=g+x,P=S.getX(c,g),M=S.getY(c,g),R=S.getX(c,E),A=S.getY(c,E),O=S.getX(C,E),F=S.getY(C,E),I=S.getX(C,g),w=S.getY(C,g),b=this.fillTint;this.batchQuad(null,P,M,R,A,O,F,I,w,0,0,1,1,b.TL,b.TR,b.BL,b.BR,2)},batchFillTriangle:function(c,g,m,x,y,T,S,C){this.renderer.pipelines.set(this);var E=this.calcMatrix;C&&C.multiply(S,E);var P=E.getX(c,g),M=E.getY(c,g),R=E.getX(m,x),A=E.getY(m,x),O=E.getX(y,T),F=E.getY(y,T),I=this.fillTint;this.batchTri(null,P,M,R,A,O,F,0,0,1,1,I.TL,I.TR,I.BL,2)},batchStrokeTriangle:function(c,g,m,x,y,T,S,C,E){var P=this.tempTriangle;P[0].x=c,P[0].y=g,P[0].width=S,P[1].x=m,P[1].y=x,P[1].width=S,P[2].x=y,P[2].y=T,P[2].width=S,P[3].x=c,P[3].y=g,P[3].width=S,this.batchStrokePath(P,S,!1,C,E)},batchFillPath:function(c,g,m){this.renderer.pipelines.set(this);var x=this.calcMatrix;m&&m.multiply(g,x);for(var y=c.length,T=this.polygonCache,S,C,E=this.fillTint.TL,P=this.fillTint.TR,M=this.fillTint.BL,R=0;R<y;++R)C=c[R],T.push(C.x,C.y);S=l(T),y=S.length;for(var A=0;A<y;A+=3){var O=S[A+0]*2,F=S[A+1]*2,I=S[A+2]*2,w=T[O+0],b=T[O+1],Y=T[F+0],U=T[F+1],W=T[I+0],D=T[I+1],L=x.getX(w,b),B=x.getY(w,b),G=x.getX(Y,U),N=x.getY(Y,U),V=x.getX(W,D),z=x.getY(W,D);this.batchTri(null,L,B,G,N,V,z,0,0,1,1,E,P,M,2)}T.length=0},batchStrokePath:function(c,g,m,x,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=c.length-1,S=0;S<T;S++){var C=c[S],E=c[S+1];this.batchLine(C.x,C.y,E.x,E.y,C.width/2,E.width/2,g,S,!m&&S===T-1,x,y)}},batchLine:function(c,g,m,x,y,T,S,C,E,P,M){this.renderer.pipelines.set(this);var R=this.calcMatrix;M&&M.multiply(P,R);var A=m-c,O=x-g,F=Math.sqrt(A*A+O*O),I=y*(x-g)/F,w=y*(c-m)/F,b=T*(x-g)/F,Y=T*(c-m)/F,U=m-b,W=x-Y,D=c-I,L=g-w,B=m+b,G=x+Y,N=c+I,V=g+w,z=R.getX(U,W),X=R.getY(U,W),H=R.getX(D,L),K=R.getY(D,L),J=R.getX(B,G),Z=R.getY(B,G),Q=R.getX(N,V),q=R.getY(N,V),k=this.strokeTint,_=k.TL,ot=k.TR,nt=k.BL,et=k.BR;if(this.batchQuad(null,Q,q,H,K,z,X,J,Z,0,0,1,1,_,ot,nt,et,2),!(S<=2)){var j=this.prevQuad,ht=this.firstQuad;C>0&&j[4]?this.batchQuad(null,Q,q,H,K,j[0],j[1],j[2],j[3],0,0,1,1,_,ot,nt,et,2):(ht[0]=Q,ht[1]=q,ht[2]=H,ht[3]=K,ht[4]=1),E&&ht[4]?this.batchQuad(null,z,X,J,Z,ht[0],ht[1],ht[2],ht[3],0,0,1,1,_,ot,nt,et,2):(j[0]=z,j[1]=X,j[2]=J,j[3]=Z,j[4]=1)}}});t.exports=d},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(18),n=e(17),o=new s({initialize:function(r,a,v,u,d,c,g){this.texture=r,this.name=a,this.source=r.source[v],this.sourceIndex=v,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(c,g,u,d)},setSize:function(h,r,a,v){a===void 0&&(a=0),v===void 0&&(v=0),this.cutX=a,this.cutY=v,this.cutWidth=h,this.cutHeight=r,this.width=h,this.height=r,this.halfWidth=Math.floor(h*.5),this.halfHeight=Math.floor(r*.5),this.centerX=Math.floor(h/2),this.centerY=Math.floor(r/2);var u=this.data,d=u.cut;d.x=a,d.y=v,d.w=h,d.h=r,d.r=a+h,d.b=v+r,u.sourceSize.w=h,u.sourceSize.h=r,u.spriteSourceSize.w=h,u.spriteSourceSize.h=r,u.radius=.5*Math.sqrt(h*h+r*r);var c=u.drawImage;return c.x=a,c.y=v,c.width=h,c.height=r,this.updateUVs()},setTrim:function(h,r,a,v,u,d){var c=this.data,g=c.spriteSourceSize;return c.trim=!0,c.sourceSize.w=h,c.sourceSize.h=r,g.x=a,g.y=v,g.w=u,g.h=d,g.r=a+u,g.b=v+d,this.x=a,this.y=v,this.width=u,this.height=d,this.halfWidth=u*.5,this.halfHeight=d*.5,this.centerX=Math.floor(u/2),this.centerY=Math.floor(d/2),this.updateUVs()},setCropUVs:function(h,r,a,v,u,d,c){var g=this.cutX,m=this.cutY,x=this.cutWidth,y=this.cutHeight,T=this.realWidth,S=this.realHeight;r=l(r,0,T),a=l(a,0,S),v=l(v,0,T-r),u=l(u,0,S-a);var C=g+r,E=m+a,P=v,M=u,R=this.data;if(R.trim){var A=R.spriteSourceSize;v=l(v,0,x-r),u=l(u,0,y-a);var O=r+v,F=a+u,I=!(A.r<r||A.b<a||A.x>O||A.y>F);if(I){var w=Math.max(A.x,r),b=Math.max(A.y,a),Y=Math.min(A.r,O)-w,U=Math.min(A.b,F)-b;P=Y,M=U,d?C=g+(x-(w-A.x)-Y):C=g+(w-A.x),c?E=m+(y-(b-A.y)-U):E=m+(b-A.y),r=w,a=b,v=Y,u=U}else C=0,E=0,P=0,M=0}else d&&(C=g+(x-r-v)),c&&(E=m+(y-a-u));var W=this.source.width,D=this.source.height;return h.u0=Math.max(0,C/W),h.v0=Math.max(0,E/D),h.u1=Math.min(1,(C+P)/W),h.v1=Math.min(1,(E+M)/D),h.x=r,h.y=a,h.cx=C,h.cy=E,h.cw=P,h.ch=M,h.width=v,h.height=u,h.flipX=d,h.flipY=c,h},updateCropUVs:function(h,r,a){return this.setCropUVs(h,h.x,h.y,h.width,h.height,r,a)},setUVs:function(h,r,a,v,u,d){var c=this.data.drawImage;return c.width=h,c.height=r,this.u0=a,this.v0=v,this.u1=u,this.v1=d,this},updateUVs:function(){var h=this.cutX,r=this.cutY,a=this.cutWidth,v=this.cutHeight,u=this.data.drawImage;u.width=a,u.height=v;var d=this.source.width,c=this.source.height;return this.u0=h/d,this.v0=r/c,this.u1=(h+a)/d,this.v1=(r+v)/c,this},updateUVsInverted:function(){var h=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/h,this.v0=this.cutY/r,this.u1=this.cutX/h,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var h=new o(this.texture,this.name,this.sourceIndex);return h.cutX=this.cutX,h.cutY=this.cutY,h.cutWidth=this.cutWidth,h.cutHeight=this.cutHeight,h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h.halfWidth=this.halfWidth,h.halfHeight=this.halfHeight,h.centerX=this.centerX,h.centerY=this.centerY,h.rotated=this.rotated,h.data=n(!0,h.data,this.data),h.updateUVs(),h},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(208),l=e(0),n=e(1),o=e(79),h=new l({initialize:function(a){this.parent=a,this.list=[],this.position=0,this.addCallback=n,this.removeCallback=n,this._sortKey=""},add:function(r,a){return a?s.Add(this.list,r):s.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,a,v){return v?s.AddAt(this.list,r,a):s.AddAt(this.list,r,a,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,a){return r?(a===void 0&&(a=function(v,u){return v[r]-u[r]}),o(this.list,a),this):this},getByName:function(r){return s.GetFirst(this.list,"name",r)},getRandom:function(r,a){return s.GetRandom(this.list,r,a)},getFirst:function(r,a,v,u){return s.GetFirst(this.list,r,a,v,u)},getAll:function(r,a,v,u){return s.GetAll(this.list,r,a,v,u)},count:function(r,a){return s.CountAllMatching(this.list,r,a)},swap:function(r,a){s.Swap(this.list,r,a)},moveTo:function(r,a){return s.MoveTo(this.list,r,a)},moveAbove:function(r,a){return s.MoveAbove(this.list,r,a)},moveBelow:function(r,a){return s.MoveBelow(this.list,r,a)},remove:function(r,a){return a?s.Remove(this.list,r):s.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,a){return a?s.RemoveAt(this.list,r):s.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,a,v){return v?s.RemoveBetween(this.list,r,a):s.RemoveBetween(this.list,r,a,this.removeCallback,this)},removeAll:function(r){for(var a=this.list.length;a--;)this.remove(this.list[a],r);return this},bringToTop:function(r){return s.BringToTop(this.list,r)},sendToBack:function(r){return s.SendToBack(this.list,r)},moveUp:function(r){return s.MoveUp(this.list,r),r},moveDown:function(r){return s.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(r,a){return s.Replace(this.list,r,a)},exists:function(r){return this.list.indexOf(r)>-1},setAll:function(r,a,v,u){return s.SetAll(this.list,r,a,v,u),this},each:function(r,a){for(var v=[null],u=2;u<arguments.length;u++)v.push(arguments[u]);for(u=0;u<this.list.length;u++)v[0]=this.list[u],r.apply(a,v)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(112),n=e(445),o=e(446),h=e(56),r=e(180),a=new s({initialize:function(u,d,c,g){u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=0),g===void 0&&(g=0),this.type=h.ELLIPSE,this.x=u,this.y=d,this.width=c,this.height=g},contains:function(v,u){return l(this,v,u)},getPoint:function(v,u){return n(this,v,u)},getPoints:function(v,u,d){return o(this,v,u,d)},getRandomPoint:function(v){return r(this,v)},setTo:function(v,u,d,c){return this.x=v,this.y=u,this.width=d,this.height=c,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(v,u){return u===void 0&&(u=v),this.x=v,this.y=u,this},setSize:function(v,u){return u===void 0&&(u=v),this.width=v,this.height=u,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(v){this.x=v+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(v){this.x=v-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(v){this.y=v+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(v){this.y=v-this.height/2}}});t.exports=a},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){if(s.width<=0||s.height<=0)return!1;var o=(l-s.x)/s.width,h=(n-s.y)/s.height;return o*=o,h*=h,o+h<.25};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(275),l=e(0),n=e(75),o=e(9),h=e(207),r=e(2),a=e(6),v=e(7),u=e(437),d=e(149),c=e(73),g=new l({Extends:o,initialize:function(x,y,T){o.call(this),T?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?v(y[0])&&(T=y,y=null):v(y)&&(T=y,y=null),this.scene=x,this.children=new d,this.isParent=!0,this.type="Group",this.classType=r(T,"classType",c),this.name=r(T,"name",""),this.active=r(T,"active",!0),this.maxSize=r(T,"maxSize",-1),this.defaultKey=r(T,"defaultKey",null),this.defaultFrame=r(T,"defaultFrame",null),this.runChildUpdate=r(T,"runChildUpdate",!1),this.createCallback=r(T,"createCallback",null),this.removeCallback=r(T,"removeCallback",null),this.createMultipleCallback=r(T,"createMultipleCallback",null),this.internalCreateCallback=r(T,"internalCreateCallback",null),this.internalRemoveCallback=r(T,"internalRemoveCallback",null),y&&this.addMultiple(y),T&&this.createMultiple(T),this.on(n.ADDED_TO_SCENE,this.addedToScene,this),this.on(n.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(m,x,y,T,S,C){if(m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.defaultKey),T===void 0&&(T=this.defaultFrame),S===void 0&&(S=!0),C===void 0&&(C=!0),this.isFull())return null;var E=new this.classType(this.scene,m,x,y,T);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=S,E.setActive(C),this.add(E),E},createMultiple:function(m){if(this.isFull())return[];Array.isArray(m)||(m=[m]);var x=[];if(m[0].key)for(var y=0;y<m.length;y++){var T=this.createFromConfig(m[y]);x=x.concat(T)}return x},createFromConfig:function(m){if(this.isFull())return[];this.classType=r(m,"classType",this.classType);var x=r(m,"key",void 0),y=r(m,"frame",null),T=r(m,"visible",!0),S=r(m,"active",!0),C=[];if(x===void 0)return C;Array.isArray(x)||(x=[x]),Array.isArray(y)||(y=[y]);var E=r(m,"repeat",0),P=r(m,"randomKey",!1),M=r(m,"randomFrame",!1),R=r(m,"yoyo",!1),A=r(m,"quantity",!1),O=r(m,"frameQuantity",1),F=r(m,"max",0),I=u(x,y,{max:F,qty:A||O,random:P,randomB:M,repeat:E,yoyo:R});m.createCallback&&(this.createCallback=m.createCallback),m.removeCallback&&(this.removeCallback=m.removeCallback);for(var w=0;w<I.length;w++){var b=this.create(0,0,I[w].a,I[w].b,T,S);if(!b)break;C.push(b)}var Y=a(m,"setXY.x",0),U=a(m,"setXY.y",0),W=a(m,"setXY.stepX",0),D=a(m,"setXY.stepY",0);s.SetXY(C,Y,U,W,D);var L=a(m,"setRotation.value",0),B=a(m,"setRotation.step",0);s.SetRotation(C,L,B);var G=a(m,"setScale.x",1),N=a(m,"setScale.y",G),V=a(m,"setScale.stepX",0),z=a(m,"setScale.stepY",0);s.SetScale(C,G,N,V,z);var X=a(m,"setOrigin.x",.5),H=a(m,"setOrigin.y",X),K=a(m,"setOrigin.stepX",0),J=a(m,"setOrigin.stepY",0);s.SetOrigin(C,X,H,K,J);var Z=a(m,"setAlpha.value",1),Q=a(m,"setAlpha.step",0);s.SetAlpha(C,Z,Q);var q=a(m,"setDepth.value",0),k=a(m,"setDepth.step",0);s.SetDepth(C,q,k);var _=a(m,"setScrollFactor.x",1),ot=a(m,"setScrollFactor.y",_),nt=a(m,"setScrollFactor.stepX",0),et=a(m,"setScrollFactor.stepY",0);s.SetScrollFactor(C,_,ot,nt,et);var j=r(m,"hitArea",null),ht=r(m,"hitAreaCallback",null);j&&s.SetHitArea(C,j,ht);var it=r(m,"gridAlign",!1);return it&&s.GridAlign(C,it),this.createMultipleCallback&&this.createMultipleCallback.call(this,C),C},preUpdate:function(m,x){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),T=0;T<y.length;T++){var S=y[T];S.active&&S.update(m,x)}},add:function(m,x){return x===void 0&&(x=!1),this.isFull()?this:(this.children.set(m),this.internalCreateCallback&&this.internalCreateCallback.call(this,m),this.createCallback&&this.createCallback.call(this,m),x&&(m.addToDisplayList(this.scene.sys.displayList),m.addToUpdateList()),m.on(n.DESTROY,this.remove,this),this)},addMultiple:function(m,x){if(x===void 0&&(x=!1),Array.isArray(m))for(var y=0;y<m.length;y++)this.add(m[y],x);return this},remove:function(m,x,y){return x===void 0&&(x=!1),y===void 0&&(y=!1),this.children.contains(m)?(this.children.delete(m),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,m),this.removeCallback&&this.removeCallback.call(this,m),m.off(n.DESTROY,this.remove,this),y?m.destroy():x&&(m.removeFromDisplayList(),m.removeFromUpdateList()),this):this},clear:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1);for(var y=this.children,T=0;T<y.size;T++){var S=y.entries[T];S.off(n.DESTROY,this.remove,this),x?S.destroy():m&&(S.removeFromDisplayList(),S.removeFromUpdateList())}return this.children.clear(),this},contains:function(m){return this.children.contains(m)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(m,x,y,T){return h(this.children.entries,m,x,y,T)},getFirst:function(m,x,y,T,S,C,E){return this.getHandler(!0,1,m,x,y,T,S,C,E)},getFirstNth:function(m,x,y,T,S,C,E,P){return this.getHandler(!0,m,x,y,T,S,C,E,P)},getLast:function(m,x,y,T,S,C,E){return this.getHandler(!1,1,m,x,y,T,S,C,E)},getLastNth:function(m,x,y,T,S,C,E,P){return this.getHandler(!1,m,x,y,T,S,C,E,P)},getHandler:function(m,x,y,T,S,C,E,P,M){y===void 0&&(y=!1),T===void 0&&(T=!1);var R,A,O=0,F=this.children.entries;if(m)for(A=0;A<F.length;A++)if(R=F[A],R.active===y){if(O++,O===x)break}else R=null;else for(A=F.length-1;A>=0;A--)if(R=F[A],R.active===y){if(O++,O===x)break}else R=null;return R?(typeof S=="number"&&(R.x=S),typeof C=="number"&&(R.y=C),R):T?this.create(S,C,E,P,M):null},get:function(m,x,y,T,S){return this.getFirst(!1,!0,m,x,y,T,S)},getFirstAlive:function(m,x,y,T,S,C){return this.getFirst(!0,m,x,y,T,S,C)},getFirstDead:function(m,x,y,T,S,C){return this.getFirst(!1,m,x,y,T,S,C)},playAnimation:function(m,x){return s.PlayAnimation(this.children.entries,m,x),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(m){m===void 0&&(m=!0);for(var x=0,y=0;y<this.children.size;y++)this.children.entries[y].active===m&&x++;return x},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var m=this.getTotalUsed(),x=this.maxSize===-1?999999999999:this.maxSize;return x-m},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},propertyValueSet:function(m,x,y,T,S){return s.PropertyValueSet(this.children.entries,m,x,y,T,S),this},propertyValueInc:function(m,x,y,T,S){return s.PropertyValueInc(this.children.entries,m,x,y,T,S),this},setX:function(m,x){return s.SetX(this.children.entries,m,x),this},setY:function(m,x){return s.SetY(this.children.entries,m,x),this},setXY:function(m,x,y,T){return s.SetXY(this.children.entries,m,x,y,T),this},incX:function(m,x){return s.IncX(this.children.entries,m,x),this},incY:function(m,x){return s.IncY(this.children.entries,m,x),this},incXY:function(m,x,y,T){return s.IncXY(this.children.entries,m,x,y,T),this},shiftPosition:function(m,x,y){return s.ShiftPosition(this.children.entries,m,x,y),this},angle:function(m,x){return s.Angle(this.children.entries,m,x),this},rotate:function(m,x){return s.Rotate(this.children.entries,m,x),this},rotateAround:function(m,x){return s.RotateAround(this.children.entries,m,x),this},rotateAroundDistance:function(m,x,y){return s.RotateAroundDistance(this.children.entries,m,x,y),this},setAlpha:function(m,x){return s.SetAlpha(this.children.entries,m,x),this},setTint:function(m,x,y,T){return s.SetTint(this.children.entries,m,x,y,T),this},setOrigin:function(m,x,y,T){return s.SetOrigin(this.children.entries,m,x,y,T),this},scaleX:function(m,x){return s.ScaleX(this.children.entries,m,x),this},scaleY:function(m,x){return s.ScaleY(this.children.entries,m,x),this},scaleXY:function(m,x,y,T){return s.ScaleXY(this.children.entries,m,x,y,T),this},setDepth:function(m,x){return s.SetDepth(this.children.entries,m,x),this},setBlendMode:function(m){return s.SetBlendMode(this.children.entries,m),this},setHitArea:function(m,x){return s.SetHitArea(this.children.entries,m,x),this},shuffle:function(){return s.Shuffle(this.children.entries),this},kill:function(m){this.children.contains(m)&&m.setActive(!1)},killAndHide:function(m){this.children.contains(m)&&(m.setActive(!1),m.setVisible(!1))},setVisible:function(m,x,y){return s.SetVisible(this.children.entries,m,x,y),this},toggleVisible:function(){return s.ToggleVisible(this.children.entries),this},destroy:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(n.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(x,m),this.scene=void 0,this.children=void 0)}});t.exports=g},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(12),l=function(n,o,h,r,a,v){for(var u=s.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*r),d=h.pathData,c=h.pathIndexes,g=0;g<c.length;g+=3){var m=c[g]*2,x=c[g+1]*2,y=c[g+2]*2,T=d[m+0]-a,S=d[m+1]-v,C=d[x+0]-a,E=d[x+1]-v,P=d[y+0]-a,M=d[y+1]-v,R=o.getX(T,S),A=o.getY(T,S),O=o.getX(C,E),F=o.getY(C,E),I=o.getX(P,M),w=o.getY(P,M);n.batchTri(h,R,A,O,F,I,w,0,0,1,1,u,u,u,2)}};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=s.x3-s.x1,h=s.y3-s.y1,r=s.x2-s.x1,a=s.y2-s.y1,v=l-s.x1,u=n-s.y1,d=o*o+h*h,c=o*r+h*a,g=o*v+h*u,m=r*r+a*a,x=r*v+a*u,y=d*m-c*c,T=y===0?0:1/y,S=(m*g-c*x)*T,C=(d*x-c*g)*T;return S>=0&&C>=0&&S+C<1};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(10),n=e(3);function o(r,a,v,u){var d=r-v,c=a-u,g=d*d+c*c;return Math.sqrt(g)}var h=new s({initialize:function(a,v,u){this.vertex1=a,this.vertex2=v,this.vertex3=u,this.bounds=new l,this._inCenter=new n},getInCenter:function(r){r===void 0&&(r=!0);var a=this.vertex1,v=this.vertex2,u=this.vertex3,d,c,g,m,x,y;r?(d=a.x,c=a.y,g=v.x,m=v.y,x=u.x,y=u.y):(d=a.vx,c=a.vy,g=v.vx,m=v.vy,x=u.vx,y=u.vy);var T=o(x,y,g,m),S=o(d,c,x,y),C=o(g,m,d,c),E=T+S+C;return this._inCenter.set((d*T+g*S+x*C)/E,(c*T+m*S+y*C)/E)},contains:function(r,a,v){var u=this.vertex1,d=this.vertex2,c=this.vertex3,g=u.vx,m=u.vy,x=d.vx,y=d.vy,T=c.vx,S=c.vy;if(v){var C=v.a,E=v.b,P=v.c,M=v.d,R=v.e,A=v.f;g=u.vx*C+u.vy*P+R,m=u.vx*E+u.vy*M+A,x=d.vx*C+d.vy*P+R,y=d.vx*E+d.vy*M+A,T=c.vx*C+c.vy*P+R,S=c.vx*E+c.vy*M+A}var O=T-g,F=S-m,I=x-g,w=y-m,b=r-g,Y=a-m,U=O*O+F*F,W=O*I+F*w,D=O*b+F*Y,L=I*I+w*w,B=I*b+w*Y,G=U*L-W*W,N=G===0?0:1/G,V=(L*D-W*B)*N,z=(U*B-W*D)*N;return V>=0&&z>=0&&V+z<1},isCounterClockwise:function(r){var a=this.vertex1,v=this.vertex2,u=this.vertex3,d=(v.vx-a.vx)*(u.vy-a.vy)-(v.vy-a.vy)*(u.vx-a.vx);return r<=0?d>=0:d<0},load:function(r,a,v,u,d){return v=this.vertex1.load(r,a,v,u,d),v=this.vertex2.load(r,a,v,u,d),v=this.vertex3.load(r,a,v,u,d),v},transformCoordinatesLocal:function(r,a,v,u){return this.vertex1.transformCoordinatesLocal(r,a,v,u),this.vertex2.transformCoordinatesLocal(r,a,v,u),this.vertex3.transformCoordinatesLocal(r,a,v,u),this},updateBounds:function(){var r=this.vertex1,a=this.vertex2,v=this.vertex3,u=this.bounds;return u.x=Math.min(r.vx,a.vx,v.vx),u.y=Math.min(r.vy,a.vy,v.vy),u.width=Math.max(r.vx,a.vx,v.vx)-u.x,u.height=Math.max(r.vy,a.vy,v.vy)-u.y,this},isInView:function(r,a,v,u,d,c,g,m,x,y,T){var S=this.vertex1.update(d,c,g,m,x,y,T,u),C=this.vertex2.update(d,c,g,m,x,y,T,u),E=this.vertex3.update(d,c,g,m,x,y,T,u);if(S.ta<=0&&C.ta<=0&&E.ta<=0||a&&!this.isCounterClockwise(v))return!1;var P=this.bounds;P.x=Math.min(S.tx,C.tx,E.tx),P.y=Math.min(S.ty,C.ty,E.ty),P.width=Math.max(S.tx,C.tx,E.tx)-P.x,P.height=Math.max(S.ty,C.ty,E.ty)-P.y;var M=r.x+r.width,R=r.y+r.height;return P.width<=0||P.height<=0||r.width<=0||r.height<=0?!1:!(P.right<r.x||P.bottom<r.y||P.x>M||P.y>R)},translate:function(r,a){a===void 0&&(a=0);var v=this.vertex1,u=this.vertex2,d=this.vertex3;return v.x+=r,v.y+=a,u.x+=r,u.y+=a,d.x+=r,d.y+=a,this},x:{get:function(){return this.getInCenter().x},set:function(r){var a=this.getInCenter();this.translate(r-a.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(r){var a=this.getInCenter();this.translate(0,r-a.y)}},alpha:{get:function(){var r=this.vertex1,a=this.vertex2,v=this.vertex3;return(r.alpha+a.alpha+v.alpha)/3},set:function(r){this.vertex1.alpha=r,this.vertex2.alpha=r,this.vertex3.alpha=r}},depth:{get:function(){var r=this.vertex1,a=this.vertex2,v=this.vertex3;return(r.vz+a.vz+v.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(12),n=e(39),o=new s({Extends:n,initialize:function(r,a,v,u,d,c,g,m,x,y){c===void 0&&(c=16777215),g===void 0&&(g=1),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),n.call(this,r,a,v),this.vx=0,this.vy=0,this.vz=0,this.nx=m,this.ny=x,this.nz=y,this.u=u,this.v=d,this.color=c,this.alpha=g,this.tx=0,this.ty=0,this.ta=0},setUVs:function(h,r){return this.u=h,this.v=r,this},transformCoordinatesLocal:function(h,r,a,v){var u=this.x,d=this.y,c=this.z,g=h.val,m=u*g[0]+d*g[4]+c*g[8]+g[12],x=u*g[1]+d*g[5]+c*g[9]+g[13],y=u*g[2]+d*g[6]+c*g[10]+g[14],T=u*g[3]+d*g[7]+c*g[11]+g[15];this.vx=m/T*r,this.vy=-(x/T)*a,v<=0?this.vz=y/T:this.vz=-(y/T)},update:function(h,r,a,v,u,d,c,g){var m=this.vx*h+this.vy*a+u,x=this.vx*r+this.vy*v+d;return c&&(m=Math.round(m),x=Math.round(x)),this.tx=m,this.ty=x,this.ta=this.alpha*g,this},load:function(h,r,a,v,u){return h[++a]=this.tx,h[++a]=this.ty,h[++a]=this.u,h[++a]=this.v,h[++a]=v,h[++a]=u,r[++a]=l.getTintAppendFloatAlpha(this.color,this.ta),a}});t.exports=o},function(t,f,e){var s={};t.exports=s;var l=e(166),n=e(32),o=e(84),h=e(41);(function(){s.create=function(r){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},r)},s.setModified=function(r,a,v,u){if(l.trigger(r,"compositeModified",r),r.isModified=a,v&&r.parent&&s.setModified(r.parent,a,v,u),u)for(var d=0;d<r.composites.length;d++){var c=r.composites[d];s.setModified(c,a,v,u)}},s.add=function(r,a){var v=[].concat(a);l.trigger(r,"beforeAdd",{object:a});for(var u=0;u<v.length;u++){var d=v[u];switch(d.type){case"body":if(d.parent!==d){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(r,d);break;case"constraint":s.addConstraint(r,d);break;case"composite":s.addComposite(r,d);break;case"mouseConstraint":s.addConstraint(r,d.constraint);break}}return l.trigger(r,"afterAdd",{object:a}),r},s.remove=function(r,a,v){var u=[].concat(a);l.trigger(r,"beforeRemove",{object:a});for(var d=0;d<u.length;d++){var c=u[d];switch(c.type){case"body":s.removeBody(r,c,v);break;case"constraint":s.removeConstraint(r,c,v);break;case"composite":s.removeComposite(r,c,v);break;case"mouseConstraint":s.removeConstraint(r,c.constraint);break}}return l.trigger(r,"afterRemove",{object:a}),r},s.addComposite=function(r,a){return r.composites.push(a),a.parent=r,s.setModified(r,!0,!0,!1),r},s.removeComposite=function(r,a,v){var u=r.composites.indexOf(a);if(u!==-1&&(s.removeCompositeAt(r,u),s.setModified(r,!0,!0,!1)),v)for(var d=0;d<r.composites.length;d++)s.removeComposite(r.composites[d],a,!0);return r},s.removeCompositeAt=function(r,a){return r.composites.splice(a,1),s.setModified(r,!0,!0,!1),r},s.addBody=function(r,a){return r.bodies.push(a),s.setModified(r,!0,!0,!1),r},s.removeBody=function(r,a,v){var u=r.bodies.indexOf(a);if(u!==-1&&(s.removeBodyAt(r,u),s.setModified(r,!0,!0,!1)),v)for(var d=0;d<r.composites.length;d++)s.removeBody(r.composites[d],a,!0);return r},s.removeBodyAt=function(r,a){return r.bodies.splice(a,1),s.setModified(r,!0,!0,!1),r},s.addConstraint=function(r,a){return r.constraints.push(a),s.setModified(r,!0,!0,!1),r},s.removeConstraint=function(r,a,v){var u=r.constraints.indexOf(a);if(u!==-1&&s.removeConstraintAt(r,u),v)for(var d=0;d<r.composites.length;d++)s.removeConstraint(r.composites[d],a,!0);return r},s.removeConstraintAt=function(r,a){return r.constraints.splice(a,1),s.setModified(r,!0,!0,!1),r},s.clear=function(r,a,v){if(v)for(var u=0;u<r.composites.length;u++)s.clear(r.composites[u],a,!0);return a?r.bodies=r.bodies.filter(function(d){return d.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,s.setModified(r,!0,!0,!1),r},s.allBodies=function(r){for(var a=[].concat(r.bodies),v=0;v<r.composites.length;v++)a=a.concat(s.allBodies(r.composites[v]));return a},s.allConstraints=function(r){for(var a=[].concat(r.constraints),v=0;v<r.composites.length;v++)a=a.concat(s.allConstraints(r.composites[v]));return a},s.allComposites=function(r){for(var a=[].concat(r.composites),v=0;v<r.composites.length;v++)a=a.concat(s.allComposites(r.composites[v]));return a},s.get=function(r,a,v){var u,d;switch(v){case"body":u=s.allBodies(r);break;case"constraint":u=s.allConstraints(r);break;case"composite":u=s.allComposites(r).concat(r);break}return u?(d=u.filter(function(c){return c.id.toString()===a.toString()}),d.length===0?null:d[0]):null},s.move=function(r,a,v){return s.remove(r,a),s.add(v,a),r},s.rebase=function(r){for(var a=s.allBodies(r).concat(s.allConstraints(r)).concat(s.allComposites(r)),v=0;v<a.length;v++)a[v].id=n.nextId();return s.setModified(r,!0,!0,!1),r},s.translate=function(r,a,v){for(var u=v?s.allBodies(r):r.bodies,d=0;d<u.length;d++)h.translate(u[d],a);return s.setModified(r,!0,!0,!1),r},s.rotate=function(r,a,v,u){for(var d=Math.cos(a),c=Math.sin(a),g=u?s.allBodies(r):r.bodies,m=0;m<g.length;m++){var x=g[m],y=x.position.x-v.x,T=x.position.y-v.y;h.setPosition(x,{x:v.x+(y*d-T*c),y:v.y+(y*c+T*d)}),h.rotate(x,a)}return s.setModified(r,!0,!0,!1),r},s.scale=function(r,a,v,u,d){for(var c=d?s.allBodies(r):r.bodies,g=0;g<c.length;g++){var m=c[g],x=m.position.x-u.x,y=m.position.y-u.y;h.setPosition(m,{x:u.x+x*a,y:u.y+y*v}),h.scale(m,a,v)}return s.setModified(r,!0,!0,!1),r},s.bounds=function(r){for(var a=s.allBodies(r),v=[],u=0;u<a.length;u+=1){var d=a[u];v.push(d.bounds.min,d.bounds.max)}return o.create(v)}})()},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return s>=0&&s<n.width&&l>=0&&l<n.height};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(29),n=e(2),o=new s({initialize:function(r){r===void 0&&(r={}),this.name=n(r,"name","layer"),this.x=n(r,"x",0),this.y=n(r,"y",0),this.width=n(r,"width",0),this.height=n(r,"height",0),this.tileWidth=n(r,"tileWidth",0),this.tileHeight=n(r,"tileHeight",0),this.baseTileWidth=n(r,"baseTileWidth",this.tileWidth),this.baseTileHeight=n(r,"baseTileHeight",this.tileHeight),this.orientation=n(r,"orientation",l.ORTHOGONAL),this.widthInPixels=n(r,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=n(r,"heightInPixels",this.height*this.baseTileHeight),this.alpha=n(r,"alpha",1),this.visible=n(r,"visible",!0),this.properties=n(r,"properties",[]),this.indexes=n(r,"indexes",[]),this.collideIndexes=n(r,"collideIndexes",[]),this.callbacks=n(r,"callbacks",[]),this.bodies=n(r,"bodies",[]),this.data=n(r,"data",[]),this.tilemapLayer=n(r,"tilemapLayer",null),this.hexSideLength=n(r,"hexSideLength",0)}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(29),n=e(2),o=new s({initialize:function(r){r===void 0&&(r={}),this.name=n(r,"name","map"),this.width=n(r,"width",0),this.height=n(r,"height",0),this.infinite=n(r,"infinite",!1),this.tileWidth=n(r,"tileWidth",0),this.tileHeight=n(r,"tileHeight",0),this.widthInPixels=n(r,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=n(r,"heightInPixels",this.height*this.tileHeight),this.format=n(r,"format",null),this.orientation=n(r,"orientation",l.ORTHOGONAL),this.renderOrder=n(r,"renderOrder","right-down"),this.version=n(r,"version","1"),this.properties=n(r,"properties",{}),this.layers=n(r,"layers",[]),this.images=n(r,"images",[]),this.objects=n(r,"objects",{}),this.collision=n(r,"collision",{}),this.tilesets=n(r,"tilesets",[]),this.imageCollections=n(r,"imageCollections",[]),this.tiles=n(r,"tiles",[]),this.hexSideLength=n(r,"hexSideLength",0)}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o,h,r,a,v,u,d,c){(r===void 0||r<=0)&&(r=32),(a===void 0||a<=0)&&(a=32),v===void 0&&(v=0),u===void 0&&(u=0),d===void 0&&(d={}),c===void 0&&(c={}),this.name=o,this.firstgid=h,this.tileWidth=r,this.tileHeight=a,this.tileMargin=v,this.tileSpacing=u,this.tileProperties=d,this.tileData=c,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(n){return this.containsTileIndex(n)?this.tileProperties[n-this.firstgid]:null},getTileData:function(n){return this.containsTileIndex(n)?this.tileData[n-this.firstgid]:null},getTileCollisionGroup:function(n){var o=this.getTileData(n);return o&&o.objectgroup?o.objectgroup:null},containsTileIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},getTileTextureCoordinates:function(n){return this.containsTileIndex(n)?this.texCoordinates[n-this.firstgid]:null},setImage:function(n){return this.image=n,this.glTexture=n.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(n,o){return n!==void 0&&(this.tileWidth=n),o!==void 0&&(this.tileHeight=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(n,o){return n!==void 0&&(this.tileMargin=n),o!==void 0&&(this.tileSpacing=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(n,o){var h=(o-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(n-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(h%1!==0||r%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),h=Math.floor(h),r=Math.floor(r),this.rows=h,this.columns=r,this.total=h*r,this.texCoordinates.length=0;for(var a=this.tileMargin,v=this.tileMargin,u=0;u<this.rows;u++){for(var d=0;d<this.columns;d++)this.texCoordinates.push({x:a,y:v}),a+=this.tileWidth+this.tileSpacing;a=this.tileMargin,v+=this.tileHeight+this.tileSpacing}return this}});t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return n===void 0&&(n=1e-4),Math.abs(s-l)<n};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(11),n=e(15),o=e(1068),h=new s({Extends:n,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Size,l.TextureCrop,l.Tint,l.Transform,l.Visible,o],initialize:function(a,v,u,d,c){n.call(this,a,"Image"),this._crop=this.resetCropObject(),this.setTexture(d,c),this.setPosition(v,u),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.hasOwnProperty(l)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(77),l=function(n,o){var h=s(n);for(var r in o)h.hasOwnProperty(r)||(h[r]=o[r]);return h};t.exports=l},function(t,f,e){var s={};t.exports=s;var l=e(64),n=e(83),o=e(165),h=e(84),r=e(271),a=e(32);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(v){var u=v;u.bodyA&&!u.pointA&&(u.pointA={x:0,y:0}),u.bodyB&&!u.pointB&&(u.pointB={x:0,y:0});var d=u.bodyA?n.add(u.bodyA.position,u.pointA):u.pointA,c=u.bodyB?n.add(u.bodyB.position,u.pointB):u.pointB,g=n.magnitude(n.sub(d,c));u.length=typeof u.length!="undefined"?u.length:g,u.id=u.id||a.nextId(),u.label=u.label||"Constraint",u.type="constraint",u.stiffness=u.stiffness||(u.length>0?1:.7),u.damping=u.damping||0,u.angularStiffness=u.angularStiffness||0,u.angleA=u.bodyA?u.bodyA.angle:u.angleA,u.angleB=u.bodyB?u.bodyB.angle:u.angleB,u.plugin={};var m={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return u.length===0&&u.stiffness>.1?(m.type="pin",m.anchors=!1):u.stiffness<.9&&(m.type="spring"),u.render=a.extend(m,u.render),u},s.preSolveAll=function(v){for(var u=0;u<v.length;u+=1){var d=v[u],c=d.constraintImpulse;d.isStatic||c.x===0&&c.y===0&&c.angle===0||(d.position.x+=c.x,d.position.y+=c.y,d.angle+=c.angle)}},s.solveAll=function(v,u){for(var d=0;d<v.length;d+=1){var c=v[d],g=!c.bodyA||c.bodyA&&c.bodyA.isStatic,m=!c.bodyB||c.bodyB&&c.bodyB.isStatic;(g||m)&&s.solve(v[d],u)}for(d=0;d<v.length;d+=1)c=v[d],g=!c.bodyA||c.bodyA&&c.bodyA.isStatic,m=!c.bodyB||c.bodyB&&c.bodyB.isStatic,!g&&!m&&s.solve(v[d],u)},s.solve=function(v,u){var d=v.bodyA,c=v.bodyB,g=v.pointA,m=v.pointB;if(!(!d&&!c)){d&&!d.isStatic&&(n.rotate(g,d.angle-v.angleA,g),v.angleA=d.angle),c&&!c.isStatic&&(n.rotate(m,c.angle-v.angleB,m),v.angleB=c.angle);var x=g,y=m;if(d&&(x=n.add(d.position,g)),c&&(y=n.add(c.position,m)),!(!x||!y)){var T=n.sub(x,y),S=n.magnitude(T);S<s._minLength&&(S=s._minLength);var C=(S-v.length)/S,E=v.stiffness<1?v.stiffness*u:v.stiffness,P=n.mult(T,C*E),M=(d?d.inverseMass:0)+(c?c.inverseMass:0),R=(d?d.inverseInertia:0)+(c?c.inverseInertia:0),A=M+R,O,F,I,w,b;if(v.damping){var Y=n.create();I=n.div(T,S),b=n.sub(c&&n.sub(c.position,c.positionPrev)||Y,d&&n.sub(d.position,d.positionPrev)||Y),w=n.dot(I,b)}d&&!d.isStatic&&(F=d.inverseMass/M,d.constraintImpulse.x-=P.x*F,d.constraintImpulse.y-=P.y*F,d.position.x-=P.x*F,d.position.y-=P.y*F,v.damping&&(d.positionPrev.x-=v.damping*I.x*w*F,d.positionPrev.y-=v.damping*I.y*w*F),O=n.cross(g,P)/A*s._torqueDampen*d.inverseInertia*(1-v.angularStiffness),d.constraintImpulse.angle-=O,d.angle-=O),c&&!c.isStatic&&(F=c.inverseMass/M,c.constraintImpulse.x+=P.x*F,c.constraintImpulse.y+=P.y*F,c.position.x+=P.x*F,c.position.y+=P.y*F,v.damping&&(c.positionPrev.x+=v.damping*I.x*w*F,c.positionPrev.y+=v.damping*I.y*w*F),O=n.cross(m,P)/A*s._torqueDampen*c.inverseInertia*(1-v.angularStiffness),c.constraintImpulse.angle+=O,c.angle+=O)}}},s.postSolveAll=function(v){for(var u=0;u<v.length;u++){var d=v[u],c=d.constraintImpulse;if(!(d.isStatic||c.x===0&&c.y===0&&c.angle===0)){o.set(d,!1);for(var g=0;g<d.parts.length;g++){var m=d.parts[g];l.translate(m.vertices,c),g>0&&(m.position.x+=c.x,m.position.y+=c.y),c.angle!==0&&(l.rotate(m.vertices,c.angle,d.position),r.rotate(m.axes,c.angle),g>0&&n.rotateAbout(m.position,c.angle,d.position,m.position)),h.update(m.bounds,m.vertices,d.velocity)}c.angle*=s._warming,c.x*=s._warming,c.y*=s._warming}}},s.pointAWorld=function(v){return{x:(v.bodyA?v.bodyA.position.x:0)+v.pointA.x,y:(v.bodyA?v.bodyA.position.y:0)+v.pointA.y}},s.pointBWorld=function(v){return{x:(v.bodyB?v.bodyB.position.x:0)+v.pointB.x,y:(v.bodyB?v.bodyB.position.y:0)+v.pointB.y}}})()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(35),l=e(65),n=e(66),o=e(0),h=e(11),r=e(15),a=e(10),v=e(57),u=new o({Extends:r,Mixins:[h.Depth,h.GetBounds,h.Origin,h.Transform,h.ScrollFactor,h.Visible],initialize:function(c,g,m,x,y){x===void 0&&(x=1),y===void 0&&(y=x),r.call(this,c,"Zone"),this.setPosition(g,m),this.width=x,this.height=y,this.blendMode=s.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(d){this.scaleX=d/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(d){this.scaleY=d/this.height}},setSize:function(d,c,g){g===void 0&&(g=!0),this.width=d,this.height=c,this.updateDisplayOrigin();var m=this.input;return g&&m&&!m.customHitArea&&(m.hitArea.width=d,m.hitArea.height=c),this},setDisplaySize:function(d,c){return this.displayWidth=d,this.displayHeight=c,this},setCircleDropZone:function(d){return this.setDropZone(new l(0,0,d),n)},setRectangleDropZone:function(d,c){return this.setDropZone(new a(0,0,d,c),v)},setDropZone:function(d,c){return d===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(d,c,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(d,c,g){g.addToRenderList(c)},renderWebGL:function(d,c,g){g.addToRenderList(c)}});t.exports=u},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return 2*(s.width+s.height)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){for(var l=s.length-1;l>0;l--){var n=Math.floor(Math.random()*(l+1)),o=s[l];s[l]=s[n],s[n]=o}return s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ADD_ANIMATION:e(724),ANIMATION_COMPLETE:e(725),ANIMATION_COMPLETE_KEY:e(726),ANIMATION_REPEAT:e(727),ANIMATION_RESTART:e(728),ANIMATION_START:e(729),ANIMATION_STOP:e(730),ANIMATION_UPDATE:e(731),PAUSE_ALL:e(732),REMOVE_ANIMATION:e(733),RESUME_ALL:e(734)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(11),n=e(36),o=e(9),h=e(37),r=e(10),a=e(25),v=e(187),u=e(3),d=new s({Extends:o,Mixins:[l.Alpha,l.Visible],initialize:function(g,m,x,y){g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=g,this._y=m,this._width=x,this._height=y,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new a,this.transparent=!0,this.backgroundColor=v("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new u(x/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(c){this.renderList.push(c)},setOrigin:function(c,g){return c===void 0&&(c=.5),g===void 0&&(g=c),this.originX=c,this.originY=g,this},getScroll:function(c,g,m){m===void 0&&(m=new u);var x=this.width*.5,y=this.height*.5;return m.x=c-x,m.y=g-y,this.useBounds&&(m.x=this.clampX(m.x),m.y=this.clampY(m.y)),m},centerOnX:function(c){var g=this.width*.5;return this.midPoint.x=c,this.scrollX=c-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(c){var g=this.height*.5;return this.midPoint.y=c,this.scrollY=c-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(c,g){return this.centerOnX(c),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var c=this._bounds,g=this.width*.5,m=this.height*.5;this.midPoint.set(c.centerX,c.centerY),this.scrollX=c.centerX-g,this.scrollY=c.centerY-m}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(c){if(this.disableCull)return c;var g=this.matrix.matrix,m=g[0],x=g[1],y=g[2],T=g[3],S=m*T-x*y;if(!S)return c;var C=g[4],E=g[5],P=this.scrollX,M=this.scrollY,R=this.width,A=this.height,O=this.y,F=O+A,I=this.x,w=I+R,b=this.culledObjects,Y=c.length;S=1/S,b.length=0;for(var U=0;U<Y;++U){var W=c[U];if(!W.hasOwnProperty("width")||W.parentContainer){b.push(W);continue}var D=W.width,L=W.height,B=W.x-P*W.scrollFactorX-D*W.originX,G=W.y-M*W.scrollFactorY-L*W.originY,N=B*m+G*y+C,V=B*x+G*T+E,z=(B+D)*m+(G+L)*y+C,X=(B+D)*x+(G+L)*T+E;z>I&&N<w&&X>O&&V<F&&b.push(W)}return b},getWorldPoint:function(c,g,m){m===void 0&&(m=new u);var x=this.matrix.matrix,y=x[0],T=x[1],S=x[2],C=x[3],E=x[4],P=x[5],M=y*C-T*S;if(!M)return m.x=c,m.y=g,m;M=1/M;var R=C*M,A=-T*M,O=-S*M,F=y*M,I=(S*P-C*E)*M,w=(T*E-y*P)*M,b=Math.cos(this.rotation),Y=Math.sin(this.rotation),U=this.zoomX,W=this.zoomY,D=this.scrollX,L=this.scrollY,B=c+(D*b-L*Y)*U,G=g+(D*Y+L*b)*W;return m.x=B*R+G*O+I,m.y=B*A+G*F+w,m},ignore:function(c){var g=this.id;Array.isArray(c)||(c=[c]);for(var m=0;m<c.length;m++){var x=c[m];Array.isArray(x)?this.ignore(x):x.isParent?this.ignore(x.getChildren()):x.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var c=this.width,g=this.height,m=c*.5,x=g*.5,y=this.zoomX,T=this.zoomY,S=this.matrix,C=c*this.originX,E=g*this.originY,P=this.scrollX,M=this.scrollY;this.useBounds&&(P=this.clampX(P),M=this.clampY(M)),this.roundPixels&&(C=Math.round(C),E=Math.round(E)),this.scrollX=P,this.scrollY=M;var R=P+m,A=M+x;this.midPoint.set(R,A);var O=c/y,F=g/T;this.worldView.setTo(R-O/2,A-F/2,O,F),S.applyITRS(this.x+C,this.y+E,this.rotation,y,T),S.translate(-C,-E)},clampX:function(c){var g=this._bounds,m=this.displayWidth,x=g.x+(m-this.width)/2,y=Math.max(x,x+g.width-m);return c<x?c=x:c>y&&(c=y),c},clampY:function(c){var g=this._bounds,m=this.displayHeight,x=g.y+(m-this.height)/2,y=Math.max(x,x+g.height-m);return c<x?c=x:c>y&&(c=y),c},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(c){return c===void 0&&(c=0),this.rotation=n(c),this},setBackgroundColor:function(c){return c===void 0&&(c="rgba(0,0,0,0)"),this.backgroundColor=v(c),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(c,g,m,x,y){return y===void 0&&(y=!1),this._bounds.setTo(c,g,m,x),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(c){c===void 0&&(c=new r);var g=this._bounds;return c.setTo(g.x,g.y,g.width,g.height),c},setName:function(c){return c===void 0&&(c=""),this.name=c,this},setPosition:function(c,g){return g===void 0&&(g=c),this.x=c,this.y=g,this},setRotation:function(c){return c===void 0&&(c=0),this.rotation=c,this},setRoundPixels:function(c){return this.roundPixels=c,this},setScene:function(c){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=c;var g=c.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(c,g){return g===void 0&&(g=c),this.scrollX=c,this.scrollY=g,this},setSize:function(c,g){return g===void 0&&(g=c),this.width=c,this.height=g,this},setViewport:function(c,g,m,x){return this.x=c,this.y=g,this.width=m,this.height=x,this},setZoom:function(c,g){return c===void 0&&(c=1),g===void 0&&(g=c),c===0&&(c=.001),g===0&&(g=.001),this.zoomX=c,this.zoomY=g,this},setMask:function(c,g){return g===void 0&&(g=!0),this.mask=c,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(c){return c===void 0&&(c=!1),c&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var c={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(c.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),c},update:function(){},updateSystem:function(){if(!!this.scaleManager){var c=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;c&&!this._customViewport?g.customViewports++:!c&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=c}},destroy:function(){this.emit(h.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(c){this._x=c,this.updateSystem()}},y:{get:function(){return this._y},set:function(c){this._y=c,this.updateSystem()}},width:{get:function(){return this._width},set:function(c){this._width=c,this.updateSystem()}},height:{get:function(){return this._height},set:function(c){this._height=c,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(c){this._scrollX=c,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(c){this._scrollY=c,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(c){this._zoomX=c,this._zoomY=c,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(c){this._zoomX=c,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(c){this._zoomY=c,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});t.exports=d},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(334),l=e(335),n=e(336),o=e(337),h=e(338),r=e(339),a=e(340),v=e(341),u=e(342),d=e(343),c=e(344),g=e(345);t.exports={Power0:a,Power1:v.Out,Power2:o.Out,Power3:u.Out,Power4:d.Out,Linear:a,Quad:v.Out,Cubic:o.Out,Quart:u.Out,Quint:d.Out,Sine:c.Out,Expo:r.Out,Circ:n.Out,Elastic:h.Out,Back:s.Out,Bounce:l.Out,Stepped:g,"Quad.easeIn":v.In,"Cubic.easeIn":o.In,"Quart.easeIn":u.In,"Quint.easeIn":d.In,"Sine.easeIn":c.In,"Expo.easeIn":r.In,"Circ.easeIn":n.In,"Elastic.easeIn":h.In,"Back.easeIn":s.In,"Bounce.easeIn":l.In,"Quad.easeOut":v.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":u.Out,"Quint.easeOut":d.Out,"Sine.easeOut":c.Out,"Expo.easeOut":r.Out,"Circ.easeOut":n.Out,"Elastic.easeOut":h.Out,"Back.easeOut":s.Out,"Bounce.easeOut":l.Out,"Quad.easeInOut":v.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":u.InOut,"Quint.easeInOut":d.InOut,"Sine.easeInOut":c.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":n.InOut,"Elastic.easeInOut":h.InOut,"Back.easeInOut":s.InOut,"Bounce.easeInOut":l.InOut}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return(l-s)*n+s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(105),l={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function n(){var o=navigator.userAgent;return/Edge\/\d+/.test(o)?l.edge=!0:/Chrome\/(\d+)/.test(o)&&!s.windowsPhone?(l.chrome=!0,l.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(o)?(l.firefox=!0,l.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(o)&&s.iOS?l.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(o)?(l.ie=!0,l.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(o)?l.opera=!0:/Safari/.test(o)&&!s.windowsPhone?l.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(o)&&(l.ie=!0,l.trident=!0,l.tridentVersion=parseInt(RegExp.$1,10),l.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(o)&&(l.silk=!0),l}t.exports=n()},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return Math.random()*(l-s)+s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s>0&&(s&s-1)===0&&l>0&&(l&l-1)===0};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){return n===void 0&&(n=0),l===0?s:(s-=n,s=l*Math.ceil(s/l),o?(n+s)/l:n+s)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o,h,r,a){this.x=0,this.y=0,this.z=0,this.w=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=h||0,this.z=r||0,this.w=a||0)},clone:function(){return new l(this.x,this.y,this.z,this.w)},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this.w=n.w||0,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z&&this.w===n.w},set:function(n,o,h,r){return typeof n=="object"?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=n.w||0):(this.x=n||0,this.y=o||0,this.z=h||0,this.w=r||0),this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this.w+=n.w||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this.w-=n.w||0,this},scale:function(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this},length:function(){var n=this.x,o=this.y,h=this.z,r=this.w;return Math.sqrt(n*n+o*o+h*h+r*r)},lengthSq:function(){var n=this.x,o=this.y,h=this.z,r=this.w;return n*n+o*o+h*h+r*r},normalize:function(){var n=this.x,o=this.y,h=this.z,r=this.w,a=n*n+o*o+h*h+r*r;return a>0&&(a=1/Math.sqrt(a),this.x=n*a,this.y=o*a,this.z=h*a,this.w=r*a),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w},lerp:function(n,o){o===void 0&&(o=0);var h=this.x,r=this.y,a=this.z,v=this.w;return this.x=h+o*(n.x-h),this.y=r+o*(n.y-r),this.z=a+o*(n.z-a),this.w=v+o*(n.w-v),this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this.w*=n.w||1,this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this.w/=n.w||1,this},distance:function(n){var o=n.x-this.x,h=n.y-this.y,r=n.z-this.z||0,a=n.w-this.w||0;return Math.sqrt(o*o+h*h+r*r+a*a)},distanceSq:function(n){var o=n.x-this.x,h=n.y-this.y,r=n.z-this.z||0,a=n.w-this.w||0;return o*o+h*h+r*r+a*a},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(n){var o=this.x,h=this.y,r=this.z,a=this.w,v=n.val;return this.x=v[0]*o+v[4]*h+v[8]*r+v[12]*a,this.y=v[1]*o+v[5]*h+v[9]*r+v[13]*a,this.z=v[2]*o+v[6]*h+v[10]*r+v[14]*a,this.w=v[3]*o+v[7]*h+v[11]*r+v[15]*a,this},transformQuat:function(n){var o=this.x,h=this.y,r=this.z,a=n.x,v=n.y,u=n.z,d=n.w,c=d*o+v*r-u*h,g=d*h+u*o-a*r,m=d*r+a*h-v*o,x=-a*o-v*h-u*r;return this.x=c*d+x*-a+g*-u-m*-v,this.y=g*d+x*-v+m*-a-c*-u,this.z=m*d+x*-u+c*-v-g*-a,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});l.prototype.sub=l.prototype.subtract,l.prototype.mul=l.prototype.multiply,l.prototype.div=l.prototype.divide,l.prototype.dist=l.prototype.distance,l.prototype.distSq=l.prototype.distanceSq,l.prototype.len=l.prototype.length,l.prototype.lenSq=l.prototype.lengthSq,t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(91),n=new s({initialize:function(h,r,a,v,u,d,c){v===void 0&&(v=1),u===void 0&&(u=0),d===void 0&&(d=!0),c===void 0&&(c=!1),this.renderer=h,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=v,this.minFilter=u,this.autoClear=d,this.autoResize=!1,this.resize(r,a),c&&this.setAutoResize(!0)},setAutoResize:function(o){return o&&!this.autoResize?(this.renderer.on(l.RESIZE,this.resize,this),this.autoResize=!0):!o&&this.autoResize&&(this.renderer.off(l.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(o,h){var r=o*this.scale,a=h*this.scale;if(r!==this.width||a!==this.height){var v=this.renderer;v.deleteFramebuffer(this.framebuffer),v.deleteTexture(this.texture),o*=this.scale,h*=this.scale,o=Math.round(o),h=Math.round(h),o<=0&&(o=1),h<=0&&(h=1),this.texture=v.createTextureFromSource(null,o,h,this.minFilter),this.framebuffer=v.createFramebuffer(o,h,this.texture,!1),this.width=o,this.height=h}return this},bind:function(o,h,r){if(o===void 0&&(o=!1),o&&this.renderer.flush(),h&&r&&this.resize(h,r),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),o&&this.adjustViewport(),this.autoClear){var a=this.renderer.gl;a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)}},adjustViewport:function(){var o=this.renderer.gl;o.viewport(0,0,this.width,this.height),o.disable(o.SCISSOR_TEST)},clear:function(){var o=this.renderer,h=o.gl;o.pushFramebuffer(this.framebuffer),h.disable(h.SCISSOR_TEST),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),o.popFramebuffer(),o.resetScissor()},unbind:function(o){o===void 0&&(o=!1);var h=this.renderer;return o&&h.flush(),h.popFramebuffer()},destroy:function(){var o=this.renderer;o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),o.off(l.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n;if(l)typeof l=="string"?n=document.getElementById(l):typeof l=="object"&&l.nodeType===1&&(n=l);else if(s.parentElement||l===null)return s;return n||(n=document.body),n.appendChild(s),s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(77),n=e(9),o=e(70),h=e(22),r=e(1),a=e(207),v=e(428),u=new s({Extends:n,initialize:function(c){n.call(this),this.game=c,this.jsonCache=c.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,c.events.on(h.BLUR,this.onGameBlur,this),c.events.on(h.FOCUS,this.onGameFocus,this),c.events.on(h.PRE_STEP,this.update,this),c.events.once(h.DESTROY,this.destroy,this)},add:r,addAudioSprite:function(d,c){c===void 0&&(c={});var g=this.add(d,c);g.spritemap=this.jsonCache.get(d).spritemap;for(var m in g.spritemap)if(!!g.spritemap.hasOwnProperty(m)){var x=l(c),y=g.spritemap[m];x.loop=y.hasOwnProperty("loop")?y.loop:!1,g.addMarker({name:m,start:y.start,duration:y.end-y.start,config:x})}return g},get:function(d){return v(this.sounds,"key",d)},getAll:function(d){return a(this.sounds,"key",d)},play:function(d,c){var g=this.add(d);return g.once(o.COMPLETE,g.destroy,g),c?c.name?(g.addMarker(c),g.play(c.name)):g.play(c):g.play()},playAudioSprite:function(d,c,g){var m=this.addAudioSprite(d);return m.once(o.COMPLETE,m.destroy,m),m.play(c,g)},remove:function(d){var c=this.sounds.indexOf(d);return c!==-1?(d.destroy(),this.sounds.splice(c,1),!0):!1},removeAll:function(){this.sounds.forEach(function(d){d.destroy()}),this.sounds.length=0},removeByKey:function(d){for(var c=0,g=this.sounds.length-1;g>=0;g--){var m=this.sounds[g];m.key===d&&(m.destroy(),this.sounds.splice(g,1),c++)}return c},pauseAll:function(){this.forEachActiveSound(function(d){d.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(d){d.resume()}),this.emit(o.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(d){d.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(d){var c=0;return this.getAll(d).forEach(function(g){g.stop()&&c++}),c},unlock:r,onBlur:r,onFocus:r,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(d,c){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(m){m.update(d,c)})},destroy:function(){this.game.events.off(h.BLUR,this.onGameBlur,this),this.game.events.off(h.FOCUS,this.onGameFocus,this),this.game.events.off(h.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(d,c){var g=this;this.sounds.forEach(function(m,x){m&&!m.pendingRemove&&d.call(c||g,m,x,g.sounds)})},setRate:function(d){return this.rate=d,this},rate:{get:function(){return this._rate},set:function(d){this._rate=d,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(o.GLOBAL_RATE,this,d)}},setDetune:function(d){return this.detune=d,this},detune:{get:function(){return this._detune},set:function(d){this._detune=d,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,d)}}});t.exports=u},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(9),n=e(70),o=e(17),h=e(1),r=new s({Extends:l,initialize:function(v,u,d){l.call(this),this.manager=v,this.key=u,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,d),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(a){return!a||!a.name||typeof a.name!="string"?!1:this.markers[a.name]?(console.error("addMarker "+a.name+" already exists in Sound"),!1):(a=o(!0,{name:"",start:0,duration:this.totalDuration-(a.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},a),this.markers[a.name]=a,!0)},updateMarker:function(a){return!a||!a.name||typeof a.name!="string"?!1:this.markers[a.name]?(this.markers[a.name]=o(!0,this.markers[a.name],a),!0):(console.warn("Audio Marker: "+a.name+" missing in Sound: "+this.key),!1)},removeMarker:function(a){var v=this.markers[a];return v?(this.markers[a]=null,v):null},play:function(a,v){if(a===void 0&&(a=""),typeof a=="object"&&(v=a,a=""),typeof a!="string")return!1;if(!a)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[a])return console.warn("Marker: "+a+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[a],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=o(this.currentConfig,v),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:h,calculateRate:function(){var a=1.0005777895065548,v=this.currentConfig.detune+this.manager.detune,u=Math.pow(a,v);this.totalRate=this.currentConfig.rate*this.manager.rate*u},destroy:function(){this.pendingRemove||(this.emit(n.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(209),l=e(435),n=function(o,h){if(h===void 0&&(h=90),!s(o))return null;if(typeof h!="string"&&(h=(h%360+360)%360),h===90||h===-270||h==="rotateLeft")o=l(o),o.reverse();else if(h===-90||h===270||h==="rotateRight")o.reverse(),o=l(o);else if(Math.abs(h)===180||h==="rotate180"){for(var r=0;r<o.length;r++)o[r].reverse();o.reverse()}return o};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(18),n=e(11),o=e(15),h=e(1043),r=e(1044),a=e(212),v=e(10),u=e(1045),d=new s({Extends:o,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Texture,n.Tint,n.Transform,n.Visible,u],initialize:function(g,m,x,y,T,S,C){T===void 0&&(T=""),C===void 0&&(C=0),o.call(this,g,"BitmapText"),this.font=y;var E=this.scene.sys.cache.bitmapFont.get(y);E||console.warn("Invalid BitmapText key: "+y),this.fontData=E.data,this._text="",this._fontSize=S||this.fontData.size,this._letterSpacing=0,this._align=C,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(m,x),this.setOrigin(0,0),this.initPipeline(),this.setText(T)},setLeftAlign:function(){return this._align=d.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=d.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=d.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(c){return this._fontSize=c,this._dirty=!0,this},setLetterSpacing:function(c){return c===void 0&&(c=0),this._letterSpacing=c,this._dirty=!0,this},setText:function(c){return!c&&c!==0&&(c=""),Array.isArray(c)&&(c=c.join(`
`)),c!==this.text&&(this._text=c.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(c,g,m,x){return c===void 0&&(c=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=.5),this.dropShadowX=c,this.dropShadowY=g,this.dropShadowColor=m,this.dropShadowAlpha=x,this},setCharacterTint:function(c,g,m,x,y,T,S){c===void 0&&(c=0),g===void 0&&(g=1),m===void 0&&(m=!1),x===void 0&&(x=-1),y===void 0&&(y=x,T=x,S=x);var C=this.text.length;g===-1&&(g=C),c<0&&(c=C+c),c=l(c,0,C-1);for(var E=l(c+g,c,C),P=this.charColors,M=c;M<E;M++){var R=P[M];if(x===-1)P[M]=null;else{var A=m?1:0;R?(R.tintEffect=A,R.tintTL=x,R.tintTR=y,R.tintBL=T,R.tintBR=S):P[M]={tintEffect:A,tintTL:x,tintTR:y,tintBL:T,tintBR:S}}}return this},setWordTint:function(c,g,m,x,y,T,S){g===void 0&&(g=1);for(var C=this.getTextBounds(),E=C.words,P=typeof c=="number",M=0,R=0;R<E.length;R++){var A=E[R];if((P&&R===c||!P&&A.word===c)&&(this.setCharacterTint(A.i,A.word.length,m,x,y,T,S),M++,M===g))return this}return this},getTextBounds:function(c){var g=this._bounds;return(this._dirty||c||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(h(this,c,!0,g),this._dirty=!1),g},getCharacterAt:function(c,g,m){for(var x=this.getLocalPoint(c,g,null,m),y=this.getTextBounds(),T=y.characters,S=new v,C=0;C<T.length;C++){var E=T[C];if(S.setTo(E.x,E.t,E.r-E.x,E.b),S.contains(x.x,x.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(c,g,m){if(g===void 0&&(g=this._fontSize),m===void 0&&(m=this._align),c!==this.font){var x=this.scene.sys.cache.bitmapFont.get(c);x&&(this.font=c,this.fontData=x.data,this._fontSize=g,this._align=m,this.fromAtlas=x.fromAtlas===!0,this.setTexture(x.texture,x.frame),h(this,!1,!0,this._bounds))}return this},setMaxWidth:function(c,g){return this._maxWidth=c,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(c){this._align=c,this._dirty=!0},get:function(){return this._align}},text:{set:function(c){this.setText(c)},get:function(){return this._text}},fontSize:{set:function(c){this._fontSize=c,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(c){this._letterSpacing=c,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(c){this._maxWidth=c,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var c=n.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return c.data=g,c},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});d.ALIGN_LEFT=0,d.ALIGN_CENTER=1,d.ALIGN_RIGHT=2,d.ParseFromAtlas=r,d.ParseXMLBitmapFont=a,t.exports=d},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o){if(this.entries=[],Array.isArray(o))for(var h=0;h<o.length;h++)this.set(o[h])},set:function(n){return this.entries.indexOf(n)===-1&&this.entries.push(n),this},get:function(n,o){for(var h=0;h<this.entries.length;h++){var r=this.entries[h];if(r[n]===o)return r}},getArray:function(){return this.entries.slice(0)},delete:function(n){var o=this.entries.indexOf(n);return o>-1&&this.entries.splice(o,1),this},dump:function(){console.group("Set");for(var n=0;n<this.entries.length;n++){var o=this.entries[n];console.log(o)}console.groupEnd()},each:function(n,o){var h,r=this.entries.slice(),a=r.length;if(o)for(h=0;h<a&&n.call(o,r[h],h)!==!1;h++);else for(h=0;h<a&&n(r[h],h)!==!1;h++);return this},iterate:function(n,o){var h,r=this.entries.length;if(o)for(h=0;h<r&&n.call(o,this.entries[h],h)!==!1;h++);else for(h=0;h<r&&n(this.entries[h],h)!==!1;h++);return this},iterateLocal:function(n){var o,h=[];for(o=1;o<arguments.length;o++)h.push(arguments[o]);var r=this.entries.length;for(o=0;o<r;o++){var a=this.entries[o];a[n].apply(a,h)}return this},clear:function(){return this.entries.length=0,this},contains:function(n){return this.entries.indexOf(n)>-1},union:function(n){var o=new l;return n.entries.forEach(function(h){o.set(h)}),this.entries.forEach(function(h){o.set(h)}),o},intersect:function(n){var o=new l;return this.entries.forEach(function(h){n.contains(h)&&o.set(h)}),o},difference:function(n){var o=new l;return this.entries.forEach(function(h){n.contains(h)||o.set(h)}),o},size:{get:function(){return this.entries.length},set:function(n){return n<this.entries.length?this.entries.length=n:this.entries.length}}});t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(11),n=e(15),o=e(189),h=e(92),r=e(1182),a=new s({Extends:n,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.GetBounds,l.Mask,l.Pipeline,l.ScrollFactor,l.Transform,l.Visible,r],initialize:function(u,d,c,g,m,x,y){g===void 0&&(g=16777215),m===void 0&&(m=128),x===void 0&&(x=1),y===void 0&&(y=.1),n.call(this,u,"PointLight"),this.initPipeline(h.POINTLIGHT_PIPELINE),this.setPosition(d,c),this.color=o(g),this.intensity=x,this.attenuation=y,this.width=m*2,this.height=m*2,this._radius=m},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this.width=v*2,this.height=v*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});t.exports=a},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=l.width/2,o=l.height/2,h=Math.abs(s.x-l.x-n),r=Math.abs(s.y-l.y-o),a=n+s.radius,v=o+s.radius;if(h>a||r>v)return!1;if(h<=n||r<=o)return!0;var u=h-n,d=r-o,c=u*u,g=d*d,m=s.radius*s.radius;return c+g<=m};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.width<=0||s.height<=0||l.width<=0||l.height<=0?!1:!(s.right<l.x||s.bottom<l.y||s.x>l.right||s.y>l.bottom)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(6),l={},n={};n.register=function(o,h,r,a,v){l[o]={plugin:h,mapping:r,settingsKey:a,configKey:v}},n.getPlugin=function(o){return l[o]},n.install=function(o){var h=o.scene.sys,r=h.settings.input,a=h.game.config;for(var v in l){var u=l[v].plugin,d=l[v].mapping,c=l[v].settingsKey,g=l[v].configKey;s(r,c,a[g])&&(o[d]=new u(o))}},n.remove=function(o){l.hasOwnProperty(o)&&delete l[o]},t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ANY_KEY_DOWN:e(1323),ANY_KEY_UP:e(1324),COMBO_MATCH:e(1325),DOWN:e(1326),KEY_DOWN:e(1327),KEY_UP:e(1328),UP:e(1329)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.url?s.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?s.url:l+s.url:!1};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h,r){return s===void 0&&(s=""),l===void 0&&(l=!0),n===void 0&&(n=""),o===void 0&&(o=""),h===void 0&&(h=0),r===void 0&&(r=!1),{responseType:s,async:l,user:n,password:o,timeout:h,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:r}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(243),n=e(73),o=new s({Extends:n,Mixins:[l.Acceleration,l.Angular,l.Bounce,l.Debug,l.Drag,l.Enable,l.Friction,l.Gravity,l.Immovable,l.Mass,l.Pushable,l.Size,l.Velocity],initialize:function(r,a,v,u,d){n.call(this,r,a,v,u,d),this.body=null}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(119),l=function(n,o,h,r){if(h===void 0&&(h=!1),s(n,o,r)){var a=r.data[o][n]||null;return a?a.index===-1?h?a:null:a:null}else return null};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=s.data,r=s.width,a=s.height,v=s.tilemapLayer,u=Math.max(0,l.left),d=Math.min(r,l.right),c=Math.max(0,l.top),g=Math.min(a,l.bottom),m,x,y;if(n===0)for(x=c;x<g;x++)for(m=u;h[x]&&m<d;m++)y=h[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(n===1)for(x=c;x<g;x++)for(m=d;h[x]&&m>=u;m--)y=h[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(n===2)for(x=g;x>=c;x--)for(m=u;h[x]&&m<d;m++)y=h[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(n===3)for(x=g;x>=c;x--)for(m=d;h[x]&&m>=u;m--)y=h[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);return v.tilesDrawn=o.length,v.tilesTotal=r*a,o};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=n.collideIndexes.indexOf(s);l&&o===-1?n.collideIndexes.push(s):!l&&o!==-1&&n.collideIndexes.splice(o,1)};t.exports=e},function(t,f,e){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(2),l=function(n,o,h){if(!o)return{i:0,layers:n.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=o.x+s(o,"startx",0)*n.tilewidth+s(o,"offsetx",0),a=o.y+s(o,"starty",0)*n.tileheight+s(o,"offsety",0);return{i:0,layers:o.layers,name:h.name+o.name+"/",opacity:h.opacity*o.opacity,visible:h.visible&&o.visible,x:h.x+r,y:h.y+a}};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o;if(s.hasOwnProperty(l)){var h=typeof s[l];h==="function"?o=function(r,a,v,u,d,c){return s[l](r,a,v,u,d,c)}:o=function(){return s[l]}}else typeof n=="function"?o=n:o=function(){return n};return o};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(265),l=e(13),n=e(99),o=e(80),h=e(162),r=e(583),a=e(263),v=e(6),u=e(264),d=e(266),c=e(268),g=function(m,x,y){y===void 0&&(y=s);for(var T=y.targets?y.targets:a(x),S=r(x),C=h(x,"delay",y.delay),E=h(x,"duration",y.duration),P=v(x,"easeParams",y.easeParams),M=o(v(x,"ease",y.ease),P),R=h(x,"hold",y.hold),A=h(x,"repeat",y.repeat),O=h(x,"repeatDelay",y.repeatDelay),F=n(x,"yoyo",y.yoyo),I=n(x,"flipX",y.flipX),w=n(x,"flipY",y.flipY),b=[],Y=0;Y<S.length;Y++)for(var U=S[Y].key,W=S[Y].value,D=0;D<T.length;D++){var L=u(U,W),B=c(T[D],D,U,L.getEnd,L.getStart,L.getActive,o(v(W,"ease",M),v(W,"easeParams",P)),h(W,"delay",C),h(W,"duration",E),n(W,"yoyo",F),h(W,"hold",R),h(W,"repeat",A),h(W,"repeatDelay",O),n(W,"flipX",I),n(W,"flipY",w));b.push(B)}var G=new d(m,b,T);G.offset=l(x,"offset",null),G.completeDelay=l(x,"completeDelay",0),G.loop=Math.round(l(x,"loop",0)),G.loopDelay=Math.round(l(x,"loopDelay",0)),G.paused=n(x,"paused",!1),G.useFrames=n(x,"useFrames",!1);for(var N=v(x,"callbackScope",G),V=[G,null],z=d.TYPES,X=0;X<z.length;X++){var H=z[X],K=v(x,H,!1);if(K){var J=v(x,H+"Scope",N),Z=v(x,H+"Params",[]);G.setCallback(H,K,V.concat(Z),J)}}return G};t.exports=g},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(102),n=e(2),o=e(132),h=e(185),r=new s({initialize:function(v){this.parent=v,this.animationManager=v.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(a){var v=this.parent;if(a===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,v;Array.isArray(a)||(a=[a]);for(var u=0;u<a.length;u++){var d=a[u];this.nextAnim===null?this.nextAnim=d:this.nextAnimsQueue.push(d)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(a){this.isPlaying&&this.stop();var v=this.animationManager,u=typeof a=="string"?a:n(a,"key",null),d=this.exists(u)?this.get(u):v.get(u);if(!d)console.warn("Missing animation: "+u);else{this.currentAnim=d;var c=d.getTotalFrames(),g=n(a,"frameRate",d.frameRate),m=n(a,"duration",d.duration);d.calculateDuration(this,c,m,g),this.delay=n(a,"delay",d.delay),this.repeat=n(a,"repeat",d.repeat),this.repeatDelay=n(a,"repeatDelay",d.repeatDelay),this.yoyo=n(a,"yoyo",d.yoyo),this.showOnStart=n(a,"showOnStart",d.showOnStart),this.hideOnComplete=n(a,"hideOnComplete",d.hideOnComplete),this.skipMissedFrames=n(a,"skipMissedFrames",d.skipMissedFrames),this.timeScale=n(a,"timeScale",this.timeScale);var x=n(a,"startFrame",0);x>d.getTotalFrames()&&(x=0);var y=d.frames[x];x===0&&!this.forward&&(y=d.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(a){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),a!==void 0&&this.setCurrentFrame(a),this.parent},resume:function(a){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),a!==void 0&&this.setCurrentFrame(a),this.parent},playAfterDelay:function(a,v){if(!this.isPlaying)this.delayCounter=v,this.play(a,!0);else{var u=this.nextAnim,d=this.nextAnimsQueue;u&&d.unshift(u),this.nextAnim=a,this._pendingStop=1,this._pendingStopValue=v}return this.parent},playAfterRepeat:function(a,v){if(v===void 0&&(v=1),!this.isPlaying)this.play(a);else{var u=this.nextAnim,d=this.nextAnimsQueue;u&&d.unshift(u),this.repeatCounter!==-1&&v>this.repeatCounter&&(v=this.repeatCounter),this.nextAnim=a,this._pendingStop=2,this._pendingStopValue=v}return this.parent},play:function(a,v){v===void 0&&(v=!1);var u=this.currentAnim,d=this.parent,c=typeof a=="string"?a:a.key;if(v&&this.isPlaying&&u.key===c)return d;if(u&&this.isPlaying){var g=this.animationManager.getMix(u.key,a);if(g>0)return this.playAfterDelay(a,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(a)},playReverse:function(a,v){v===void 0&&(v=!1);var u=typeof a=="string"?a:a.key;return v&&this.isPlaying&&this.currentAnim.key===u?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(a))},startAnimation:function(a){this.load(a);var v=this.currentAnim,u=this.parent;return v&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,v.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),u},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(a,v){var u=this.currentAnim,d=this.currentFrame,c=this.parent,g=d.textureFrame;c.emit(a,u,d,c,g),v&&c.emit(v+u.key,u,d,c,g)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var a=this.currentFrame;if(!a)return 0;var v=a.progress;return this.inReverse&&(v*=-1),v},setProgress:function(a){return this.forward||(a=1-a),this.setCurrentFrame(this.currentAnim.getFrameByProgress(a)),this.parent},setRepeat:function(a){return this.repeatCounter=a===-1?Number.MAX_VALUE:a,this.parent},globalRemove:function(a,v){v===void 0&&(v=this.currentAnim),this.isPlaying&&v.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(a,v){a===void 0&&(a=!1),v===void 0&&(v=!1);var u=this.currentAnim,d=this.parent;return u?(v&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),u.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!a,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(u.frames[0]),this.parent):d},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var a=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(a)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var a=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(a)}return this.parent},stopAfterDelay:function(a){return this._pendingStop=1,this._pendingStopValue=a,this.parent},stopAfterRepeat:function(a){return a===void 0&&(a=1),this.repeatCounter!==-1&&a>this.repeatCounter&&(a=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=a,this.parent},stopOnFrame:function(a){return this._pendingStop=3,this._pendingStopValue=a,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(a,v){var u=this.currentAnim;if(!(!this.isPlaying||!u||u.paused)){if(this.accumulator+=v*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=v,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?u.nextFrame(this):u.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var d=0;do this.forward?u.nextFrame(this):u.previousFrame(this),d++;while(this.isPlaying&&this.accumulator>this.nextTick&&d<60)}}},setCurrentFrame:function(a){var v=this.parent;return this.currentFrame=a,v.texture=a.frame.texture,v.frame=a.frame,v.isCropped&&v.frame.updateCropUVs(v._crop,v.flipX,v.flipY),a.setAlpha&&(v.alpha=a.alpha),v.setSizeToFrame(),v._originComponent&&(a.frame.customPivot?v.setOrigin(a.frame.pivotX,a.frame.pivotY):v.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===a&&this.stop()),v},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(a){return this.anims?this.anims.get(a):null},exists:function(a){return this.anims?this.anims.has(a):!1},create:function(a){var v=a.key,u=!1;return v&&(u=this.get(v),u||(u=new h(this,v,a),this.anims||(this.anims=new l),this.anims.set(v,u))),u},generateFrameNames:function(a,v){return this.animationManager.generateFrameNames(a,v)},generateFrameNumbers:function(a,v){return this.animationManager.generateFrameNumbers(a,v)},remove:function(a){var v=this.get(a);return v&&(this.currentAnim===v&&this.stop(),this.anims.delete(a)),v},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});t.exports=r},function(t,f,e){var s={};t.exports=s;var l=e(166);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(n,o){for(var h=o*o*o,r=0;r<n.length;r++){var a=n[r],v=a.speed*a.speed+a.angularSpeed*a.angularSpeed;if(a.force.x!==0||a.force.y!==0){s.set(a,!1);continue}var u=Math.min(a.motion,v),d=Math.max(a.motion,v);a.motion=s._minBias*u+(1-s._minBias)*d,a.sleepThreshold>0&&a.motion<s._motionSleepThreshold*h?(a.sleepCounter+=1,a.sleepCounter>=a.sleepThreshold&&s.set(a,!0)):a.sleepCounter>0&&(a.sleepCounter-=1)}},s.afterCollisions=function(n,o){for(var h=o*o*o,r=0;r<n.length;r++){var a=n[r];if(!!a.isActive){var v=a.collision,u=v.bodyA.parent,d=v.bodyB.parent;if(!(u.isSleeping&&d.isSleeping||u.isStatic||d.isStatic)&&(u.isSleeping||d.isSleeping)){var c=u.isSleeping&&!u.isStatic?u:d,g=c===u?d:u;!c.isStatic&&g.motion>s._motionWakeThreshold*h&&s.set(c,!1)}}}},s.set=function(n,o){var h=n.isSleeping;o?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,h||l.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,h&&l.trigger(n,"sleepEnd"))}})()},function(t,f,e){var s={};t.exports=s;var l=e(32);(function(){s.on=function(n,o,h){for(var r=o.split(" "),a,v=0;v<r.length;v++)a=r[v],n.events=n.events||{},n.events[a]=n.events[a]||[],n.events[a].push(h);return h},s.off=function(n,o,h){if(!o){n.events={};return}typeof o=="function"&&(h=o,o=l.keys(n.events).join(" "));for(var r=o.split(" "),a=0;a<r.length;a++){var v=n.events[r[a]],u=[];if(h&&v)for(var d=0;d<v.length;d++)v[d]!==h&&u.push(v[d]);n.events[r[a]]=u}},s.trigger=function(n,o,h){var r,a,v,u,d=n.events;if(d&&l.keys(d).length>0){h||(h={}),r=o.split(" ");for(var c=0;c<r.length;c++)if(a=r[c],v=d[a],v){u=l.clone(h,!1),u.name=a,u.source=n;for(var g=0;g<v.length;g++)v[g].apply(n,[u])}}}})()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(175),l=e(92),n=e(74),o={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(h){h===void 0&&(h=l.MULTI_PIPELINE);var r=this.scene.sys.renderer;if(!r)return!1;var a=r.pipelines;if(this.postPipelines=[],this.pipelineData={},a){var v=a.get(h);if(v)return this.defaultPipeline=v,this.pipeline=v,!0}return!1},setPipeline:function(h,r,a){var v=this.scene.sys.renderer;if(!v)return this;var u=v.pipelines;if(u){var d=u.get(h);d&&(this.pipeline=d),r&&(this.pipelineData=a?s(r):r)}return this},setPostPipeline:function(h,r,a){var v=this.scene.sys.renderer;if(!v)return this;var u=v.pipelines;if(u){Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var c=u.getPostPipeline(h[d],this);c&&this.postPipelines.push(c)}r&&(this.pipelineData=a?s(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(h,r){var a=this.pipelineData;return r===void 0?delete a[h]:a[h]=r,this},getPostPipeline:function(h){for(var r=this.postPipelines,a=[],v=0;v<r.length;v++){var u=r[v];(typeof h=="string"&&u.name===h||u instanceof h)&&a.push(u)}return a.length===1?a[0]:a},resetPipeline:function(h,r){return h===void 0&&(h=!1),r===void 0&&(r=!1),this.pipeline=this.defaultPipeline,h&&(this.postPipelines=[],this.hasPostPipeline=!1),r&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(h){h===void 0&&(h=!1);for(var r=this.postPipelines,a=0;a<r.length;a++)r[a].destroy();this.postPipelines=[],this.hasPostPipeline=!1,h&&(this.pipelineData={})},removePostPipeline:function(h){for(var r=this.postPipelines,a=r.length-1;a>=0;a--){var v=r[a];(typeof h=="string"&&v.name===h||typeof h!="string"&&v instanceof h)&&(v.destroy(),n(r,a))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={DEFAULT:0,LINEAR:0,NEAREST:1};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o,h){return h===void 0&&(h=new s),h.x=n.x+n.radius*Math.cos(o),h.y=n.y+n.radius*Math.sin(o),h};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o){o===void 0&&(o=new s);var h=2*Math.PI*Math.random(),r=Math.random()+Math.random(),a=r>1?2-r:r,v=a*Math.cos(h),u=a*Math.sin(h);return o.x=n.x+v*n.radius,o.y=n.y+u*n.radius,o};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(130),l=e(4),n=function(o,h,r){if(r===void 0&&(r=new l),h<=0||h>=1)return r.x=o.x,r.y=o.y,r;var a=s(o)*h;return h>.5?(a-=o.width+o.height,a<=o.width?(r.x=o.right-a,r.y=o.bottom):(r.x=o.x,r.y=o.bottom-(a-o.width))):a<=o.width?(r.x=o.x+a,r.y=o.y):(r.x=o.right,r.y=o.y+(a-o.width)),r};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(67),l=e(4),n=function(o,h,r,a){a===void 0&&(a=[]),!h&&r>0&&(h=s(o)/r);for(var v=o.x1,u=o.y1,d=o.x2,c=o.y2,g=0;g<h;g++){var m=g/h,x=v+(d-v)*m,y=u+(c-u)*m;a.push(new l(x,y))}return a};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o){o===void 0&&(o=new s);var h=Math.random();return o.x=n.x1+h*(n.x2-n.x1),o.y=n.y1+h*(n.y2-n.y1),o};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o){return o===void 0&&(o=new s),o.x=n.x+Math.random()*n.width,o.y=n.y+Math.random()*n.height,o};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l,n,o;if(typeof s!="object"||s===null)return s;l=Array.isArray(s)?[]:{};for(o in s)n=s[o],l[o]=e(n);return l};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l={name:s.name,type:s.type,x:s.x,y:s.y,depth:s.depth,scale:{x:s.scaleX,y:s.scaleY},origin:{x:s.originX,y:s.originY},flipX:s.flipX,flipY:s.flipY,rotation:s.rotation,alpha:s.alpha,visible:s.visible,blendMode:s.blendMode,textureKey:"",frameKey:"",data:{}};return s.texture&&(l.textureKey=s.texture.key,l.frameKey=s.frame.name),l};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(3),l=function(n,o,h,r,a,v,u,d){d===void 0&&(d=new s);var c=Math.sin(a),g=Math.cos(a),m=g*v,x=c*v,y=-c*u,T=g*u,S=1/(m*T+y*-x);return d.x=T*S*n+-y*S*o+(r*y-h*T)*S,d.y=m*S*o+-x*S*n+(-r*m+h*x)*S,d};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){l===void 0&&(l=1);for(var n=null,o=0;o<l;o++)n=s.shift(),s.push(n);return n};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){l===void 0&&(l=1);for(var n=null,o=0;o<l;o++)n=s.pop(),s.unshift(n);return n};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o){o===void 0&&(o=new s);var h=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return o.x=n.x+r*Math.cos(h)*n.width/2,o.y=n.y+r*Math.sin(h)*n.height/2,o};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o){o===void 0&&(o=new s);var h=n.x2-n.x1,r=n.y2-n.y1,a=n.x3-n.x1,v=n.y3-n.y1,u=Math.random(),d=Math.random();return u+d>=1&&(u=1-u,d=1-d),o.x=n.x1+(h*u+a*d),o.y=n.y1+(r*u+v*d),o};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h){var r=o+Math.atan2(s.y-n,s.x-l);return s.x=l+h*Math.cos(r),s.y=n+h*Math.sin(r),s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return s=Math.max(0,Math.min(1,(s-l)/(n-l))),s*s*s*(s*(s*6-15)+10)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return s<=l?0:s>=n?1:(s=(s-l)/(n-l),s*s*(3-2*s))};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(18),l=e(0),n=e(132),o=e(318),h=e(319),r=e(6),a=e(320),v=new l({initialize:function(d,c,g){this.manager=d,this.key=c,this.type="frame",this.frames=this.getFrames(d.textureManager,r(g,"frames",[]),r(g,"defaultTextureKey",null),r(g,"sortFrames",!0)),this.frameRate=r(g,"frameRate",null),this.duration=r(g,"duration",null),this.msPerFrame,this.skipMissedFrames=r(g,"skipMissedFrames",!0),this.delay=r(g,"delay",0),this.repeat=r(g,"repeat",0),this.repeatDelay=r(g,"repeatDelay",0),this.yoyo=r(g,"yoyo",!1),this.showOnStart=r(g,"showOnStart",!1),this.hideOnComplete=r(g,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(n.PAUSE_ALL,this.pause,this),this.manager.on(n.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(u,d,c,g){c===null&&g===null?(u.frameRate=24,u.duration=24/d*1e3):c&&g===null?(u.duration=c,u.frameRate=d/(c/1e3)):(u.frameRate=g,u.duration=d/g*1e3),u.msPerFrame=1e3/u.frameRate},addFrame:function(u){return this.addFrameAt(this.frames.length,u)},addFrameAt:function(u,d){var c=this.getFrames(this.manager.textureManager,d);if(c.length>0){if(u===0)this.frames=c.concat(this.frames);else if(u===this.frames.length)this.frames=this.frames.concat(c);else{var g=this.frames.slice(0,u),m=this.frames.slice(u);this.frames=g.concat(c,m)}this.updateFrameSequence()}return this},checkFrame:function(u){return u>=0&&u<this.frames.length},getFirstTick:function(u){u.accumulator=0,u.nextTick=u.msPerFrame+u.currentFrame.duration},getFrameAt:function(u){return this.frames[u]},getFrames:function(u,d,c,g){g===void 0&&(g=!0);var m=[],x,y,T=1,S,C;if(typeof d=="string"){C=d;var E=u.get(C),P=E.getFrameNames();g&&a(P),d=[],P.forEach(function(I){d.push({key:C,frame:I})})}if(!Array.isArray(d)||d.length===0)return m;for(S=0;S<d.length;S++){var M=d[S],R=r(M,"key",c);if(!!R){var A=r(M,"frame",0),O=u.getFrame(R,A);y=new h(R,A,T,O),y.duration=r(M,"duration",0),y.isFirst=!x,x&&(x.nextFrame=y,y.prevFrame=x),m.push(y),x=y,T++}}if(m.length>0){y.isLast=!0,y.nextFrame=m[0],m[0].prevFrame=y;var F=1/(m.length-1);for(S=0;S<m.length;S++)m[S].progress=S*F}return m},getNextTick:function(u){u.accumulator-=u.nextTick,u.nextTick=u.msPerFrame+u.currentFrame.duration},getFrameByProgress:function(u){return u=s(u,0,1),o(u,this.frames,"progress")},nextFrame:function(u){var d=u.currentFrame;d.isLast?u.yoyo?this.handleYoyoFrame(u,!1):u.repeatCounter>0?u.inReverse&&u.forward?u.forward=!1:this.repeatAnimation(u):u.complete():this.updateAndGetNextTick(u,d.nextFrame)},handleYoyoFrame:function(u,d){if(d||(d=!1),u.inReverse===!d&&u.repeatCounter>0){(u.repeatDelay===0||u.pendingRepeat)&&(u.forward=d),this.repeatAnimation(u);return}if(u.inReverse!==d&&u.repeatCounter===0){u.complete();return}u.forward=d;var c=d?u.currentFrame.nextFrame:u.currentFrame.prevFrame;this.updateAndGetNextTick(u,c)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(u){var d=u.currentFrame;d.isFirst?u.yoyo?this.handleYoyoFrame(u,!0):u.repeatCounter>0?u.inReverse&&!u.forward?this.repeatAnimation(u):(u.forward=!0,this.repeatAnimation(u)):u.complete():this.updateAndGetNextTick(u,d.prevFrame)},updateAndGetNextTick:function(u,d){u.setCurrentFrame(d),this.getNextTick(u)},removeFrame:function(u){var d=this.frames.indexOf(u);return d!==-1&&this.removeFrameAt(d),this},removeFrameAt:function(u){return this.frames.splice(u,1),this.updateFrameSequence(),this},repeatAnimation:function(u){if(u._pendingStop===2){if(u._pendingStopValue===0)return u.stop();u._pendingStopValue--}u.repeatDelay>0&&!u.pendingRepeat?(u.pendingRepeat=!0,u.accumulator-=u.nextTick,u.nextTick+=u.repeatDelay):(u.repeatCounter--,u.forward?u.setCurrentFrame(u.currentFrame.nextFrame):u.setCurrentFrame(u.currentFrame.prevFrame),u.isPlaying&&(this.getNextTick(u),u.handleRepeat()))},toJSON:function(){var u={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(d){u.frames.push(d.toJSON())}),u},updateFrameSequence:function(){for(var u=this.frames.length,d=1/(u-1),c,g=0;g<u;g++)c=this.frames[g],c.index=g+1,c.isFirst=!1,c.isLast=!1,c.progress=g*d,g===0?(c.isFirst=!0,u===1?(c.isLast=!0,c.nextFrame=c,c.prevFrame=c):(c.isLast=!1,c.prevFrame=this.frames[u-1],c.nextFrame=this.frames[g+1])):g===u-1&&u>1?(c.isLast=!0,c.prevFrame=this.frames[u-2],c.nextFrame=this.frames[0]):u>1&&(c.prevFrame=this.frames[g-1],c.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(n.PAUSE_ALL,this.pause,this),this.manager.off(n.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var u=0;u<this.frames.length;u++)this.frames[u].destroy();this.frames=[],this.manager=null}});t.exports=v},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){l===void 0&&(l=0),n===void 0&&(n=" "),o===void 0&&(o=3),s=s.toString();var h=0;if(l+1>=s.length)switch(o){case 1:s=new Array(l+1-s.length).join(n)+s;break;case 3:var r=Math.ceil((h=l-s.length)/2),a=h-r;s=new Array(a+1).join(n)+s+new Array(r+1).join(n);break;default:s=s+new Array(l+1-s.length).join(n);break}return s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(327),l=e(189),n=e(331),o=e(332),h=function(r){var a=typeof r;switch(a){case"string":return r.substr(0,3).toLowerCase()==="rgb"?o(r):s(r);case"number":return l(r);case"object":return n(r)}};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(103);function l(o,h,r,a){var v=(o+h*6)%6,u=Math.min(v,4-v,1);return Math.round(255*(a-a*r*Math.max(0,u)))}var n=function(o,h,r,a){h===void 0&&(h=1),r===void 0&&(r=1);var v=l(5,o,h,r),u=l(3,o,h,r),d=l(1,o,h,r);return a?a.setTo?a.setTo(v,u,d,a.alpha,!1):(a.r=v,a.g=u,a.b=d,a.color=s(v,u,d),a):{r:v,g:u,b:d,color:s(v,u,d)}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(38),l=e(330),n=function(o){var h=l(o);return new s(h.r,h.g,h.b,h.a)};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return s.x=l-s.width/2,s.y=n-s.height/2,s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(105),l=e(136),n=e(31),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function h(){var a=new ArrayBuffer(4),v=new Uint8Array(a),u=new Uint32Array(a);return v[0]=161,v[1]=178,v[2]=195,v[3]=212,u[0]===3569595041?!0:u[0]===2712847316?!1:null}function r(){if(typeof importScripts=="function")return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch{o.localStorage=!1}o.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,o.fileSystem=!!window.requestFileSystem;var a=!1,v=function(){if(window.WebGLRenderingContext)try{var u=n.createWebGL(this),d=u.getContext("webgl")||u.getContext("experimental-webgl"),c=n.create2D(this),g=c.getContext("2d"),m=g.createImageData(1,1);return a=m.data instanceof Uint8ClampedArray,n.remove(u),n.remove(c),!!d}catch{return!1}return!1};return o.webGL=v(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,l.firefox&&l.firefoxVersion<21&&(o.getUserMedia=!1),!s.iOS&&(l.ie||l.firefox||l.chrome)&&(o.canvasBitBltShift=!0),(l.safari||l.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(o.littleEndian=h()),o.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&o.littleEndian!==null&&a,o}t.exports=r()},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e="",s=function(){var l=function(r){for(var a=["i","webkitI","msI","mozI","oI"],v=0;v<a.length;v++){var u=a[v]+"mageSmoothingEnabled";if(u in r)return u}return null},n=function(r){return e===""&&(e=l(r)),e&&(r[e]=!0),r},o=function(r){return e===""&&(e=l(r)),e&&(r[e]=!1),r},h=function(r){return e!==null?r[e]:null};return{disable:o,enable:n,getPrefix:l,isEnabled:h}};t.exports=s()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(14),l=e(17),n={Angle:e(812),Distance:e(821),Easing:e(826),Fuzzy:e(827),Interpolation:e(830),Pow2:e(835),Snap:e(837),RandomDataGenerator:e(839),Average:e(840),Bernstein:e(356),Between:e(195),CatmullRom:e(194),CeilTo:e(841),Clamp:e(18),DegToRad:e(36),Difference:e(842),Euler:e(843),Factorial:e(357),FloatBetween:e(137),FloorTo:e(844),FromPercent:e(98),GetSpeed:e(845),IsEven:e(846),IsEvenStrict:e(847),Linear:e(135),MaxAdd:e(848),Median:e(849),MinSub:e(850),Percent:e(851),RadToDeg:e(196),RandomXY:e(852),RandomXYZ:e(853),RandomXYZW:e(854),Rotate:e(362),RotateAround:e(308),RotateAroundDistance:e(182),RotateTo:e(855),RoundAwayFromZero:e(363),RoundTo:e(856),SinCosTableGenerator:e(857),SmootherStep:e(183),SmoothStep:e(184),ToXY:e(858),TransformXY:e(177),Within:e(859),Wrap:e(68),Vector2:e(3),Vector3:e(39),Vector4:e(140),Matrix3:e(364),Matrix4:e(69),Quaternion:e(365),RotateVec3:e(860)};n=l(!1,n,s),t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h){var r=(o-l)*.5,a=(h-n)*.5,v=s*s,u=s*v;return(2*n-2*o+r+a)*u+(-3*n+3*o-2*r-a)*v+r*s+n};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return Math.floor(Math.random()*(l-s+1)+s)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(14),l=function(n){return n*s.RAD_TO_DEG};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};t.exports=s},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(n){return this._matrix=n,this._dirty=!0,this},reset:function(){var n=this._matrix;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=1,n[7]=0,n[8]=0,n[9]=0,n[10]=0,n[11]=0,n[12]=1,n[13]=0,n[14]=0,n[15]=0,n[16]=0,n[17]=0,n[18]=1,n[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var n=new Float32Array(this._matrix);n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,this._data=n,this._dirty=!1}return this._data},brightness:function(n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var h=n;return this.multiply([h,0,0,0,0,0,h,0,0,0,0,0,h,0,0,0,0,0,1,0],o)},saturate:function(n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var h=n*2/3+1,r=(h-1)*-.5;return this.multiply([h,r,r,0,0,r,h,r,0,0,r,r,h,0,0,0,0,0,1,0],o)},desaturate:function(n){return n===void 0&&(n=!1),this.saturate(-1,n)},hue:function(n,o){n===void 0&&(n=0),o===void 0&&(o=!1),n=n/180*Math.PI;var h=Math.cos(n),r=Math.sin(n),a=.213,v=.715,u=.072;return this.multiply([a+h*(1-a)+r*-a,v+h*-v+r*-v,u+h*-u+r*(1-u),0,0,a+h*-a+r*.143,v+h*(1-v)+r*.14,u+h*-u+r*-.283,0,0,a+h*-a+r*-(1-a),v+h*-v+r*v,u+h*(1-u)+r*u,0,0,0,0,0,1,0],o)},grayscale:function(n,o){return n===void 0&&(n=1),o===void 0&&(o=!1),this.saturate(-n,o)},blackWhite:function(n){return n===void 0&&(n=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],n)},contrast:function(n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var h=n+1,r=-.5*(h-1);return this.multiply([h,0,0,0,r,0,h,0,0,r,0,0,h,0,r,0,0,0,1,0],o)},negative:function(n){return n===void 0&&(n=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],n)},desaturateLuminance:function(n){return n===void 0&&(n=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],n)},sepia:function(n){return n===void 0&&(n=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],n)},night:function(n,o){return n===void 0&&(n=.1),o===void 0&&(o=!1),this.multiply([n*-2,-n,0,0,0,-n,0,n,0,0,0,n,n*2,0,0,0,0,0,1,0],o)},lsd:function(n){return n===void 0&&(n=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],n)},brown:function(n){return n===void 0&&(n=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],n)},vintagePinhole:function(n){return n===void 0&&(n=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],n)},kodachrome:function(n){return n===void 0&&(n=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],n)},technicolor:function(n){return n===void 0&&(n=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],n)},polaroid:function(n){return n===void 0&&(n=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],n)},shiftToBGR:function(n){return n===void 0&&(n=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],n)},multiply:function(n,o){o||this.reset();for(var h=this._matrix,r=[],a=0;a<20;a++)r[a]=h[a];return h[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],h[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],h[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],h[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],h[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],h[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],h[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],h[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],h[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],h[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],h[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],h[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],h[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],h[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],h[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],h[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],h[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],h[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],h[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],h[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],this._dirty=!0,this}});t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10),l=e(14),n=function(o,h){if(h===void 0&&(h=new s),o.length===0)return h;for(var r=Number.MAX_VALUE,a=Number.MAX_VALUE,v=l.MIN_SAFE_INTEGER,u=l.MIN_SAFE_INTEGER,d,c,g,m=0;m<o.length;m++)d=o[m],Array.isArray(d)?(c=d[0],g=d[1]):(c=d.x,g=d.y),r=Math.min(r,c),a=Math.min(a,g),v=Math.max(v,c),u=Math.max(u,g);return h.x=r,h.y=a,h.width=v-r,h.height=u-a,h};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(1),n=new s({initialize:function(h,r,a){this._rgb=[0,0,0],this.onChangeCallback=l,this.dirty=!1,this.set(h,r,a)},set:function(o,h,r){return o===void 0&&(o=0),h===void 0&&(h=0),r===void 0&&(r=0),this._rgb=[o,h,r],this.onChange(),this},equals:function(o,h,r){var a=this._rgb;return a.r===o&&a.g===h&&a.b===r},onChange:function(){this.dirty=!0;var o=this._rgb;this.onChangeCallback.call(this,o[0],o[1],o[2])},r:{get:function(){return this._rgb[0]},set:function(o){this._rgb[0]=o,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(o){this._rgb[1]=o,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(o){this._rgb[2]=o,this.onChange()}},destroy:function(){this.onChangeCallback=null}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={CENTER:e(403),ORIENTATION:e(404),SCALE_MODE:e(405),ZOOM:e(406)};t.exports=s},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){s.parentNode&&s.parentNode.removeChild(s)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(144),n=e(197),o=e(20),h=e(419),r=e(420),a=e(33),v=e(1),u=e(421),d=new s({initialize:function(g,m){this.scene=g,this.game,this.renderer,this.config=m,this.settings=u.create(m),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=v},init:function(c){this.settings.status=l.INIT,this.sceneUpdate=v,this.game=c,this.renderer=c.renderer,this.canvas=c.canvas,this.context=c.context;var g=c.plugins;this.plugins=g,g.addToScene(this,n.Global,[n.CoreScene,r(this),h(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(c,g){var m=this.events;m.emit(o.PRE_UPDATE,c,g),m.emit(o.UPDATE,c,g),this.sceneUpdate.call(this.scene,c,g),m.emit(o.POST_UPDATE,c,g)},render:function(c){var g=this.displayList;g.depthSort(),this.events.emit(o.PRE_RENDER,c),this.cameras.render(c,g),this.events.emit(o.RENDER,c)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(c){var g=this.events,m=this.settings;return this.settings.active&&(m.status=l.PAUSED,m.active=!1,g.emit(o.PAUSE,this,c)),this},resume:function(c){var g=this.events,m=this.settings;return this.settings.active||(m.status=l.RUNNING,m.active=!0,g.emit(o.RESUME,this,c)),this},sleep:function(c){var g=this.events,m=this.settings;return m.status=l.SLEEPING,m.active=!1,m.visible=!1,g.emit(o.SLEEP,this,c),this},wake:function(c){var g=this.events,m=this.settings;return m.status=l.RUNNING,m.active=!0,m.visible=!0,g.emit(o.WAKE,this,c),m.isTransition&&g.emit(o.TRANSITION_WAKE,m.transitionFrom,m.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===l.SLEEPING},isActive:function(){return this.settings.status===l.RUNNING},isPaused:function(){return this.settings.status===l.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(c){return this.settings.visible=c,this},setActive:function(c,g){return c?this.resume(g):this.pause(g)},start:function(c){var g=this.events,m=this.settings;c&&(m.data=c),m.status=l.START,m.active=!0,m.visible=!0,g.emit(o.START,this),g.emit(o.READY,this,c)},shutdown:function(c){var g=this.events,m=this.settings;g.off(o.TRANSITION_INIT),g.off(o.TRANSITION_START),g.off(o.TRANSITION_COMPLETE),g.off(o.TRANSITION_OUT),m.status=l.SHUTDOWN,m.active=!1,m.visible=!1,this.renderer===a.WEBGL&&this.renderer.resetTextures(!0),g.emit(o.SHUTDOWN,this,c)},destroy:function(){var c=this.events,g=this.settings;g.status=l.DESTROYED,g.active=!1,g.visible=!1,c.emit(o.DESTROY,this),c.removeAllListeners();for(var m=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<m.length;x++)this[m[x]]=null}});t.exports=d},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s&&s[0].toUpperCase()+s.slice(1)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(33),l=e(0),n=e(109),o=e(424),h="Texture.frame missing: ",r=new l({initialize:function(v,u,d,c,g){Array.isArray(d)||(d=[d]),this.manager=v,this.key=u,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var m=0;m<d.length;m++)this.source.push(new o(this,d[m],c,g))},add:function(a,v,u,d,c,g){if(this.has(a))return null;var m=new n(this,a,v,u,d,c,g);return this.frames[a]=m,this.firstFrame==="__BASE"&&(this.firstFrame=a),this.frameTotal++,m},remove:function(a){if(this.has(a)){var v=this.get(a);return v.destroy(),delete this.frames[a],!0}return!1},has:function(a){return this.frames[a]},get:function(a){a||(a=this.firstFrame);var v=this.frames[a];return v||(console.warn(h+a),v=this.frames[this.firstFrame]),v},getTextureSourceIndex:function(a){for(var v=0;v<this.source.length;v++)if(this.source[v]===a)return v;return-1},getFramesFromTextureSource:function(a,v){v===void 0&&(v=!1);var u=[];for(var d in this.frames)if(!(d==="__BASE"&&!v)){var c=this.frames[d];c.sourceIndex===a&&u.push(c)}return u},getFrameNames:function(a){a===void 0&&(a=!1);var v=Object.keys(this.frames);if(!a){var u=v.indexOf("__BASE");u!==-1&&v.splice(u,1)}return v},getSourceImage:function(a){(a==null||this.frameTotal===1)&&(a="__BASE");var v=this.frames[a];return v?v.source.image:(console.warn(h+a),this.frames.__BASE.source.image)},getDataSourceImage:function(a){(a==null||this.frameTotal===1)&&(a="__BASE");var v=this.frames[a],u;return v?u=v.sourceIndex:(console.warn(h+a),u=this.frames.__BASE.sourceIndex),this.dataSource[u].image},setDataSource:function(a){Array.isArray(a)||(a=[a]);for(var v=0;v<a.length;v++){var u=this.source[v];this.dataSource.push(new o(this,a[v],u.width,u.height))}},setFilter:function(a){var v;for(v=0;v<this.source.length;v++)this.source[v].setFilter(a);for(v=0;v<this.dataSource.length;v++)this.dataSource[v].setFilter(a)},destroy:function(){var a;for(a=0;a<this.source.length;a++)this.source[a].destroy();for(a=0;a<this.dataSource.length;a++)this.dataSource[a].destroy();for(var v in this.frames){var u=this.frames[v];u.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var d=this.manager.game.renderer;d&&d.type===s.WEBGL&&d.resetTextures(!0),this.manager=null}});t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(78),l=function(n,o,h,r,a){r===void 0&&(r=0),a===void 0&&(a=n.length);var v=[];if(s(n,r,a))for(var u=r;u<a;u++){var d=n[u];(!o||o&&h===void 0&&d.hasOwnProperty(o)||o&&h!==void 0&&d[o]===h)&&v.push(d)}return v};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Matrix:e(1013),Add:e(1021),AddAt:e(1022),BringToTop:e(1023),CountAllMatching:e(1024),Each:e(1025),EachInRange:e(1026),FindClosestInSorted:e(318),GetAll:e(207),GetFirst:e(428),GetRandom:e(210),MoveDown:e(1027),MoveTo:e(1028),MoveUp:e(1029),MoveAbove:e(1030),MoveBelow:e(1031),NumberArray:e(322),NumberArrayStep:e(1032),QuickSelect:e(436),Range:e(437),Remove:e(93),RemoveAt:e(1033),RemoveBetween:e(1034),RemoveRandomElement:e(1035),Replace:e(1036),RotateLeft:e(178),RotateRight:e(179),SafeRange:e(78),SendToBack:e(1037),SetAll:e(1038),Shuffle:e(131),SortByDigits:e(320),SpliceOne:e(74),StableSort:e(79),Swap:e(1039)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){if(!Array.isArray(s)||s.length<2||!Array.isArray(s[0]))return!1;for(var l=s[0].length,n=1;n<s.length;n++)if(s[n].length!==l)return!1;return!0};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){l===void 0&&(l=0),n===void 0&&(n=s.length);var o=l+Math.floor(Math.random()*n);return s[o]===void 0?null:s[o]};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(9),n=e(438),o=new s({Extends:l,initialize:function(){l.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(h){return this._pending.push(h),this._toProcess++,h},remove:function(h){return this._destroy.push(h),this._toProcess++,h},removeAll:function(){for(var h=this._active,r=this._destroy,a=h.length;a--;)r.push(h[a]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var h=this._destroy,r=this._active,a,v;for(a=0;a<h.length;a++){v=h[a];var u=r.indexOf(v);u!==-1&&(r.splice(u,1),this.emit(n.PROCESS_QUEUE_REMOVE,v))}for(h.length=0,h=this._pending,a=0;a<h.length;a++)v=h[a],(!this.checkQueue||this.checkQueue&&r.indexOf(v)===-1)&&(r.push(v),this.emit(n.PROCESS_QUEUE_ADD,v));return h.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(l,n){return parseInt(l.getAttribute(n),10)}var s=function(l,n,o,h,r){o===void 0&&(o=0),h===void 0&&(h=0);var a=n.cutX,v=n.cutY,u=n.source.width,d=n.source.height,c=n.sourceIndex,g={},m=l.getElementsByTagName("info")[0],x=l.getElementsByTagName("common")[0];g.font=m.getAttribute("face"),g.size=e(m,"size"),g.lineHeight=e(x,"lineHeight")+h,g.chars={};var y=l.getElementsByTagName("char"),T=n!==void 0&&n.trimmed;if(T)var S=n.height,C=n.width;for(var E=0;E<y.length;E++){var P=y[E],M=e(P,"id"),R=String.fromCharCode(M),A=e(P,"x"),O=e(P,"y"),F=e(P,"width"),I=e(P,"height");T&&(A<C&&(C=A),O<S&&(S=O)),T&&S!==0&&C!==0&&(A-=n.x,O-=n.y);var w=(a+A)/u,b=(v+O)/d,Y=(a+A+F)/u,U=(v+O+I)/d;if(g.chars[M]={x:A,y:O,width:F,height:I,centerX:Math.floor(F/2),centerY:Math.floor(I/2),xOffset:e(P,"xoffset"),yOffset:e(P,"yoffset"),xAdvance:e(P,"xadvance")+o,data:{},kerning:{},u0:w,v0:b,u1:Y,v1:U},r&&F!==0&&I!==0){var W=r.add(R,c,A,O,F,I);W&&W.setUVs(F,I,w,b,Y,U)}}var D=l.getElementsByTagName("kerning");for(E=0;E<D.length;E++){var L=D[E],B=e(L,"first"),G=e(L,"second"),N=e(L,"amount");g.chars[G].kerning[B]=N}return g};t.exports=s},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1049),l=e(440),n=e(0),o=e(11),h=e(109),r=e(15),a=e(110),v=new n({Extends:r,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,s],initialize:function(d,c,g,m,x){r.call(this,d,"Blitter"),this.setTexture(m,x),this.setPosition(c,g),this.initPipeline(),this.children=new a,this.renderList=[],this.dirty=!1},create:function(u,d,c,g,m){g===void 0&&(g=!0),m===void 0&&(m=this.children.length),c===void 0?c=this.frame:c instanceof h||(c=this.texture.get(c));var x=new l(this,u,d,c,g);return this.children.addAt(x,m,!1),this.dirty=!0,x},createFromCallback:function(u,d,c,g){for(var m=this.createMultiple(d,c,g),x=0;x<m.length;x++){var y=m[x];u.call(this,y,x)}return m},createMultiple:function(u,d,c){d===void 0&&(d=this.frame.name),c===void 0&&(c=!0),Array.isArray(d)||(d=[d]);var g=[],m=this;return d.forEach(function(x){for(var y=0;y<u;y++)g.push(m.create(0,0,x,c))}),g},childCanRender:function(u){return u.visible&&u.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(208),l=e(35),n=e(0),o=e(11),h=e(75),r=e(15),a=e(10),v=e(1052),u=e(441),d=e(3),c=new n({Extends:r,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,v],initialize:function(m,x,y,T){r.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(x,y),this.clearAlpha(),this.setBlendMode(l.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new a),g.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),x=m.transformPoint(this.x,this.y);g.setTo(x.x,x.y,0,0)}if(this.list.length>0){var y=this.list,T=new a,S=!1;g.setEmpty();for(var C=0;C<y.length;C++){var E=y[C];E.getBounds&&(E.getBounds(T),S?u(T,g,g):(g.setTo(T.x,T.y,T.width,T.height),S=!0))}}return g},addHandler:function(g){g.once(h.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.removeFromDisplayList(),g.parentContainer=this)},removeHandler:function(g){g.off(h.DESTROY,this.remove),this.exclusive&&(g.parentContainer=null,g.addToDisplayList())},pointToContainer:function(g,m){m===void 0&&(m=new d),this.parentContainer?this.parentContainer.pointToContainer(g,m):m=new d(g.x,g.y);var x=this.tempTransformMatrix;return x.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),x.invert(),x.transformPoint(g.x,g.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return s.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,m){return s.AddAt(this.list,g,m,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,m){return g?(m===void 0&&(m=function(x,y){return x[g]-y[g]}),s.StableSort(this.list,m),this):this},getByName:function(g){return s.GetFirst(this.list,"name",g)},getRandom:function(g,m){return s.GetRandom(this.list,g,m)},getFirst:function(g,m,x,y){return s.GetFirst(this.list,g,m,x,y)},getAll:function(g,m,x,y){return s.GetAll(this.list,g,m,x,y)},count:function(g,m,x,y){return s.CountAllMatching(this.list,g,m,x,y)},swap:function(g,m){return s.Swap(this.list,g,m),this},moveTo:function(g,m){return s.MoveTo(this.list,g,m),this},moveAbove:function(g,m){return s.MoveAbove(this.list,g,m),this},moveBelow:function(g,m){return s.MoveBelow(this.list,g,m),this},remove:function(g,m){var x=s.Remove(this.list,g,this.removeHandler,this);if(m&&x){Array.isArray(x)||(x=[x]);for(var y=0;y<x.length;y++)x[y].destroy()}return this},removeAt:function(g,m){var x=s.RemoveAt(this.list,g,this.removeHandler,this);return m&&x&&x.destroy(),this},removeBetween:function(g,m,x){var y=s.RemoveBetween(this.list,g,m,this.removeHandler,this);if(x)for(var T=0;T<y.length;T++)y[T].destroy();return this},removeAll:function(g){var m=s.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(g)for(var x=0;x<m.length;x++)m[x].destroy();return this},bringToTop:function(g){return s.BringToTop(this.list,g),this},sendToBack:function(g){return s.SendToBack(this.list,g),this},moveUp:function(g){return s.MoveUp(this.list,g),this},moveDown:function(g){return s.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(g,m,x){var y=s.Replace(this.list,g,m);return y&&(this.addHandler(m),this.removeHandler(g),x&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,m,x,y){return s.SetAll(this.list,g,m,x,y),this},each:function(g,m){var x=[null],y,T=this.list.slice(),S=T.length;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<S;y++)x[0]=T[y],g.apply(m,x);return this},iterate:function(g,m){var x=[null],y;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<this.list.length;y++)x[0]=this.list[y],g.apply(m,x);return this},setScrollFactor:function(g,m,x){return m===void 0&&(m=g),x===void 0&&(x=!1),this.scrollFactorX=g,this.scrollFactorY=m,x&&(s.SetAll(this.list,"scrollFactorX",g),s.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=c},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(148),l=e(0),n=e(1057),o=new l({Extends:s,Mixins:[n],initialize:function(r,a,v,u,d,c,g){s.call(this,r,a,v,u,d,c,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(h,r){return this.cropWidth=h,this.cropHeight=r,this},setDisplayCallback:function(h){return this.displayCallback=h,this},setScrollX:function(h){return this.scrollX=h,this},setScrollY:function(h){return this.scrollY=h,this}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(133),l=e(0),n=e(217),o=e(303),h=e(304),r=e(305),a=e(309),v=e(167),u=e(312),d=e(313),c=e(314),g=e(111),m=e(15),x=e(2),y=e(6),T=e(14),S=e(1063),C=new l({Extends:m,Mixins:[o,h,r,a,v,d,c,u,S],initialize:function(P,M){var R=y(M,"x",0),A=y(M,"y",0);m.call(this,P,"Graphics"),this.setPosition(R,A),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(M)},setDefaultStyles:function(E){return y(E,"lineStyle",null)&&(this.defaultStrokeWidth=y(E,"lineStyle.width",1),this.defaultStrokeColor=y(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=y(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),y(E,"fillStyle",null)&&(this.defaultFillColor=y(E,"fillStyle.color",16777215),this.defaultFillAlpha=y(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,P,M){return M===void 0&&(M=1),this.commandBuffer.push(n.LINE_STYLE,E,P,M),this._lineWidth=E,this},fillStyle:function(E,P){return P===void 0&&(P=1),this.commandBuffer.push(n.FILL_STYLE,E,P),this},fillGradientStyle:function(E,P,M,R,A,O,F,I){return A===void 0&&(A=1),O===void 0&&(O=A),F===void 0&&(F=A),I===void 0&&(I=A),this.commandBuffer.push(n.GRADIENT_FILL_STYLE,A,O,F,I,E,P,M,R),this},lineGradientStyle:function(E,P,M,R,A,O){return O===void 0&&(O=1),this.commandBuffer.push(n.GRADIENT_LINE_STYLE,E,O,P,M,R,A),this},beginPath:function(){return this.commandBuffer.push(n.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(n.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(n.FILL_PATH),this},fill:function(){return this.commandBuffer.push(n.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(n.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(n.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,P,M){return this.beginPath(),this.arc(E,P,M,0,T.PI2),this.fillPath(),this},strokeCircle:function(E,P,M){return this.beginPath(),this.arc(E,P,M,0,T.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,P,M,R){return this.commandBuffer.push(n.FILL_RECT,E,P,M,R),this},strokeRect:function(E,P,M,R){var A=this._lineWidth/2,O=E-A,F=E+A;return this.beginPath(),this.moveTo(E,P),this.lineTo(E,P+R),this.strokePath(),this.beginPath(),this.moveTo(E+M,P),this.lineTo(E+M,P+R),this.strokePath(),this.beginPath(),this.moveTo(O,P),this.lineTo(F+M,P),this.strokePath(),this.beginPath(),this.moveTo(O,P+R),this.lineTo(F+M,P+R),this.strokePath(),this},fillRoundedRect:function(E,P,M,R,A){A===void 0&&(A=20);var O=A,F=A,I=A,w=A;return typeof A!="number"&&(O=x(A,"tl",20),F=x(A,"tr",20),I=x(A,"bl",20),w=x(A,"br",20)),this.beginPath(),this.moveTo(E+O,P),this.lineTo(E+M-F,P),this.arc(E+M-F,P+F,F,-T.TAU,0),this.lineTo(E+M,P+R-w),this.arc(E+M-w,P+R-w,w,0,T.TAU),this.lineTo(E+I,P+R),this.arc(E+I,P+R-I,I,T.TAU,Math.PI),this.lineTo(E,P+O),this.arc(E+O,P+O,O,-Math.PI,-T.TAU),this.fillPath(),this},strokeRoundedRect:function(E,P,M,R,A){A===void 0&&(A=20);var O=A,F=A,I=A,w=A;return typeof A!="number"&&(O=x(A,"tl",20),F=x(A,"tr",20),I=x(A,"bl",20),w=x(A,"br",20)),this.beginPath(),this.moveTo(E+O,P),this.lineTo(E+M-F,P),this.moveTo(E+M-F,P),this.arc(E+M-F,P+F,F,-T.TAU,0),this.lineTo(E+M,P+R-w),this.moveTo(E+M,P+R-w),this.arc(E+M-w,P+R-w,w,0,T.TAU),this.lineTo(E+I,P+R),this.moveTo(E+I,P+R),this.arc(E+I,P+R-I,I,T.TAU,Math.PI),this.lineTo(E,P+O),this.moveTo(E,P+O),this.arc(E+O,P+O,O,-Math.PI,-T.TAU),this.strokePath(),this},fillPointShape:function(E,P){return this.fillPoint(E.x,E.y,P)},fillPoint:function(E,P,M){return!M||M<1?M=1:(E-=M/2,P-=M/2),this.commandBuffer.push(n.FILL_RECT,E,P,M,M),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,P,M,R,A,O){return this.commandBuffer.push(n.FILL_TRIANGLE,E,P,M,R,A,O),this},strokeTriangle:function(E,P,M,R,A,O){return this.commandBuffer.push(n.STROKE_TRIANGLE,E,P,M,R,A,O),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,P,M,R){return this.beginPath(),this.moveTo(E,P),this.lineTo(M,R),this.strokePath(),this},lineTo:function(E,P){return this.commandBuffer.push(n.LINE_TO,E,P),this},moveTo:function(E,P){return this.commandBuffer.push(n.MOVE_TO,E,P),this},strokePoints:function(E,P,M,R){P===void 0&&(P=!1),M===void 0&&(M=!1),R===void 0&&(R=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var A=1;A<R;A++)this.lineTo(E[A].x,E[A].y);return P&&this.lineTo(E[0].x,E[0].y),M&&this.closePath(),this.strokePath(),this},fillPoints:function(E,P,M,R){P===void 0&&(P=!1),M===void 0&&(M=!1),R===void 0&&(R=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var A=1;A<R;A++)this.lineTo(E[A].x,E[A].y);return P&&this.lineTo(E[0].x,E[0].y),M&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,P){P===void 0&&(P=32);var M=E.getPoints(P);return this.strokePoints(M,!0)},strokeEllipse:function(E,P,M,R,A){A===void 0&&(A=32);var O=new g(E,P,M,R),F=O.getPoints(A);return this.strokePoints(F,!0)},fillEllipseShape:function(E,P){P===void 0&&(P=32);var M=E.getPoints(P);return this.fillPoints(M,!0)},fillEllipse:function(E,P,M,R,A){A===void 0&&(A=32);var O=new g(E,P,M,R),F=O.getPoints(A);return this.fillPoints(F,!0)},arc:function(E,P,M,R,A,O,F){return O===void 0&&(O=!1),F===void 0&&(F=0),this.commandBuffer.push(n.ARC,E,P,M,R,A,O,F),this},slice:function(E,P,M,R,A,O,F){return O===void 0&&(O=!1),F===void 0&&(F=0),this.commandBuffer.push(n.BEGIN_PATH),this.commandBuffer.push(n.MOVE_TO,E,P),this.commandBuffer.push(n.ARC,E,P,M,R,A,O,F),this.commandBuffer.push(n.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(n.SAVE),this},restore:function(){return this.commandBuffer.push(n.RESTORE),this},translateCanvas:function(E,P){return this.commandBuffer.push(n.TRANSLATE,E,P),this},scaleCanvas:function(E,P){return this.commandBuffer.push(n.SCALE,E,P),this},rotateCanvas:function(E){return this.commandBuffer.push(n.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,P,M){var R=this.scene.sys,A=R.game.renderer;P===void 0&&(P=R.scale.width),M===void 0&&(M=R.scale.height),C.TargetCamera.setScene(this.scene),C.TargetCamera.setViewport(0,0,P,M),C.TargetCamera.scrollX=this.x,C.TargetCamera.scrollY=this.y;var O,F;if(typeof E=="string")if(R.textures.exists(E)){O=R.textures.get(E);var I=O.getSourceImage();I instanceof HTMLCanvasElement&&(F=I.getContext("2d"))}else O=R.textures.createCanvas(E,P,M),F=O.getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(F=E.getContext("2d"));return F&&(this.renderCanvas(A,this,C.TargetCamera,null,F,!1),O&&O.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});C.TargetCamera=new s,t.exports=C},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o,h){h===void 0&&(h=new s);var r=n.width/2,a=n.height/2;return h.x=n.x+r*Math.cos(o),h.y=n.y+a*Math.sin(o),h};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(35),l=e(0),n=e(11),o=e(176),h=e(101),r=e(9),a=e(75),v=e(110),u=e(1071),d=e(20),c=e(79),g=new l({Extends:v,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.Visible,r,u],initialize:function(x,y){v.call(this,x),r.call(this),this.scene=x,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=x.sys,this.events=x.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(s.SKIP_CHECK),y&&this.add(y),x.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(m,x){return this.data||(this.data=new h(this)),this.data.set(m,x),this},incData:function(m,x){return this.data||(this.data=new h(this)),this.data.inc(m,x),this},toggleData:function(m){return this.data||(this.data=new h(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new h(this)),this.data.get(m)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(m){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,x=this.parentContainer,y=[];x&&(y.unshift(x.getIndex(m)),m=x,x.parentContainer);)x=x.parentContainer;return y.unshift(this.displayList.getIndex(m)),y},addChildCallback:function(m){m.displayList&&m.displayList!==this&&m.removeFromDisplayList(),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(a.ADDED_TO_SCENE,m,this.scene),this.events.emit(d.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(a.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(d.REMOVED_FROM_SCENE,m,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(c(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,x){return m._depth-x._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(a.DESTROY,this);for(var m=this.list.length;m--;)this.list[m].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=g},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(11),n=e(15),o=e(450),h=e(110),r=e(452),a=e(1075),v=new s({Extends:n,Mixins:[l.Depth,l.Mask,l.Pipeline,l.Transform,l.Visible,a],initialize:function(d,c,g,m){if(n.call(this,d,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],g!==null&&(typeof g=="object"||Array.isArray(g))&&(m=g,g=null),this.setTexture(c,g),this.initPipeline(),this.emitters=new h(this),this.wells=new h(this),m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this.createEmitter(m[x])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(u,d){return this.texture=this.scene.sys.textures.get(u),this.setFrame(d)},setFrame:function(u){this.frame=this.texture.get(u);var d=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),c=[];return d.forEach(function(g){c.push(g.name)}),this.frameNames=c,this.defaultFrame=this.frame,this},setEmitterFrames:function(u,d){Array.isArray(u)||(u=[u]);var c=d.frames;c.length=0;for(var g=0;g<u.length;g++){var m=u[g];this.frameNames.indexOf(m)!==-1&&c.push(this.texture.get(m))}return c.length>0?d.defaultFrame=c[0]:d.defaultFrame=this.defaultFrame,this},addEmitter:function(u){return this.emitters.add(u)},createEmitter:function(u){return this.addEmitter(new r(this,u))},removeEmitter:function(u){return this.emitters.remove(u,!0)},addGravityWell:function(u){return this.wells.add(u)},createGravityWell:function(u){return this.addGravityWell(new o(u))},emitParticle:function(u,d,c){for(var g=this.emitters.list,m=0;m<g.length;m++){var x=g[m];x.active&&x.emitParticle(u,d,c)}return this},emitParticleAt:function(u,d,c){return this.emitParticle(c,u,d)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(u,d){d*=this.timeScale;for(var c=this.emitters.list,g=0;g<c.length;g++){var m=c[g];m.active&&m.preUpdate(u,d)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(35),l=e(133),n=e(31),o=e(0),h=e(11),r=e(33),a=e(109),v=e(15),u=e(1),d=e(92),c=e(1079),g=e(141),m=e(12),x=e(222),y=new o({Extends:v,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,c],initialize:function(S,C,E,P,M,R,A){C===void 0&&(C=0),E===void 0&&(E=0),P===void 0&&(P=32),M===void 0&&(M=32),v.call(this,S,"RenderTexture"),this.renderer=S.sys.renderer,this.textureManager=S.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,R===void 0?(this.canvas=n.create2D(this,P,M),this.texture=S.sys.textures.addCanvas(x(),this.canvas),this.frame=this.texture.get()):(this.texture=S.sys.textures.get(R),this.frame=this.texture.get(A),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new l(0,0,P,M),this.renderTarget=null;var O=this.renderer;O?O.type===r.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new g(O,P,M,1,0,!1)):O.type===r.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=u,this.camera.setScene(S),this.setPosition(C,E),R===void 0&&this.setSize(P,M),this.setOrigin(0,0),this.initPipeline(d.SINGLE_PIPELINE)},setSize:function(T,S){return this.resize(T,S)},resize:function(T,S){S===void 0&&(S=T);var C=this.frame;if(T!==this.width||S!==this.height){if(C.name==="__BASE"){this.canvas.width=T,this.canvas.height=S,this.texture.width=T,this.texture.height=S;var E=this.renderTarget;E&&(E.resize(T,S),C.glTexture=E.texture,C.source.isRenderTexture=!0,C.source.isGLTexture=!0,C.source.glTexture=E.texture),this.camera.setSize(T,S),C.source.width=T,C.source.height=S,C.setSize(T,S),this.width=T,this.height=S}}else{var P=this.texture.getSourceImage();C.cutX+T>P.width&&(T=P.width-C.cutX),C.cutY+S>P.height&&(S=P.height-C.cutY),C.setSize(T,S,C.cutX,C.cutY)}this.updateDisplayOrigin();var M=this.input;return M&&!M.customHitArea&&(M.hitArea.width=T,M.hitArea.height=S),this},setGlobalTint:function(T){return this.globalTint=T,this},setGlobalAlpha:function(T){return this.globalAlpha=T,this},saveTexture:function(T){return this.textureManager.renameTexture(this.texture.key,T),this._saved=!0,this.texture},fill:function(T,S,C,E,P,M){var R=this.frame,A=this.camera,O=this.renderer;S===void 0&&(S=1),C===void 0&&(C=0),E===void 0&&(E=0),P===void 0&&(P=R.cutWidth),M===void 0&&(M=R.cutHeight);var F=(T>>16&255)/255,I=(T>>8&255)/255,w=(T&255)/255,b=this.renderTarget;if(A.preRender(),b){b.bind(!0);var Y=this.pipeline;Y.manager.set(Y);var U=b.width,W=b.height,D=O.width,L=O.height,B=D/U,G=L/W;Y.drawFillRect(C*B,E*G,P*B,M*G,m.getTintFromFloats(w,I,F,1),S),b.unbind(!0)}else{var N=this.context;O.setContext(N),N.fillStyle="rgba("+F+","+I+","+w+","+S+")",N.fillRect(C+R.cutX,E+R.cutY,P,M),O.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.renderTarget;if(T)T.clear();else{var S=this.context;S.save(),S.setTransform(1,0,0,1,0,0),S.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),S.restore()}this.dirty=!1}return this},erase:function(T,S,C){return this._eraseMode=!0,this.draw(T,S,C,1,16777215),this._eraseMode=!1,this},draw:function(T,S,C,E,P){return this.beginDraw(),this.batchDraw(T,S,C,E,P),this.endDraw(),this},drawFrame:function(T,S,C,E,P,M){return this.beginDraw(),this.batchDrawFrame(T,S,C,E,P,M),this.endDraw(),this},beginDraw:function(){var T=this.camera,S=this.renderer,C=this.renderTarget;return T.preRender(),C?S.beginCapture(C.width,C.height):S.setContext(this.context),this},batchDraw:function(T,S,C,E,P){return E===void 0&&(E=this.globalAlpha),P===void 0?P=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):P=(P>>16)+(P&65280)+((P&255)<<16),Array.isArray(T)||(T=[T]),this.batchList(T,S,C,E,P),this},batchDrawFrame:function(T,S,C,E,P,M){C===void 0&&(C=0),E===void 0&&(E=0),P===void 0&&(P=this.globalAlpha),M===void 0?M=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):M=(M>>16)+(M&65280)+((M&255)<<16);var R=this.textureManager.getFrame(T,S);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,C,E,M,P,this.camera.matrix,null):this.batchTextureFrame(R,C+this.frame.cutX,E+this.frame.cutY,P,M)),this},endDraw:function(T){T===void 0&&(T=this._eraseMode);var S=this.renderer,C=this.renderTarget;if(C){var E=S.endCapture(),P=S.pipelines.setUtility();P.blitFrame(E,C,1,!1,!1,T),S.resetScissor(),S.resetViewport()}else S.setContext();return this.dirty=!0,this},batchList:function(T,S,C,E,P){for(var M=0;M<T.length;M++){var R=T[M];!R||R===this||(R.renderWebGL||R.renderCanvas?this.drawGameObject(R,S,C):R.isParent||R.list?this.batchGroup(R.getChildren(),S,C):typeof R=="string"?this.batchTextureFrameKey(R,null,S,C,E,P):R instanceof a?this.batchTextureFrame(R,S,C,E,P):Array.isArray(R)&&this.batchList(R,S,C,E,P))}},batchGroup:function(T,S,C){S===void 0&&(S=0),C===void 0&&(C=0),S+=this.frame.cutX,C+=this.frame.cutY;for(var E=0;E<T.length;E++){var P=T[E];if(P.willRender(this.camera)){var M=P.x+S,R=P.y+C;this.drawGameObject(P,M,R)}}},batchGameObjectWebGL:function(T,S,C){S===void 0&&(S=T.x),C===void 0&&(C=T.y);var E=T.x,P=T.y;T.setPosition(S+this.frame.cutX,C+this.frame.cutY),T.renderDirect?T.renderDirect(this.renderer,T,this.camera):T.renderWebGL(this.renderer,T,this.camera),T.setPosition(E,P)},batchGameObjectCanvas:function(T,S,C){S===void 0&&(S=T.x),C===void 0&&(C=T.y);var E=T.x,P=T.y;if(this._eraseMode){var M=T.blendMode;T.blendMode=s.ERASE}T.setPosition(S+this.frame.cutX,C+this.frame.cutY),T.renderCanvas(this.renderer,T,this.camera,null),T.setPosition(E,P),this._eraseMode&&(T.blendMode=M)},batchTextureFrameKey:function(T,S,C,E,P,M){var R=this.textureManager.getFrame(T,S);R&&this.batchTextureFrame(R,C,E,P,M)},batchTextureFrame:function(T,S,C,E,P){S===void 0&&(S=0),C===void 0&&(C=0),S+=this.frame.cutX,C+=this.frame.cutY;var M=this.renderTarget;if(M)this.pipeline.batchTextureFrame(T,S,C,P,E,this.camera.matrix,null);else{var R=this.context,A=T.canvasData,O=T.source.image,F=this.camera.matrix;R.save(),R.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",R.globalAlpha=E,F.setToContext(R),R.drawImage(O,A.x,A.y,A.width,A.height,S,C,A.width,A.height),R.restore()}},snapshotArea:function(T,S,C,E,P,M,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,P,!1,T,S,C,E,M,R):this.renderer.snapshotCanvas(this.canvas,P,!1,T,S,C,E,M,R),this},snapshot:function(T,S,C){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,0,0,this.width,this.height,S,C):this.renderer.snapshotCanvas(this.canvas,T,!1,0,0,this.width,this.height,S,C),this},snapshotPixel:function(T,S,C){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,C,!0,T,S):this.renderer.snapshotCanvas(this.canvas,C,!0,T,S),this},preDestroy:function(){this._saved||(n.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});t.exports=y},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var l=Math.random()*16|0,n=s==="x"?l:l&3|8;return n.toString(16)})};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(164),l=e(0),n=e(11),o=e(15),h=e(92),r=e(1085),a=e(3),v=new l({Extends:o,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Flip,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,r],initialize:function(d,c,g,m,x,y,T,S,C){m===void 0&&(m="__DEFAULT"),y===void 0&&(y=2),T===void 0&&(T=!0),o.call(this,d,"Rope"),this.anims=new s(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=m==="__DEFAULT",this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new a,this.debugCallback=null,this.debugGraphic=null,this.setTexture(m,x),this.setPosition(c,g),this.setSizeToFrame(),this.initPipeline(h.ROPE_PIPELINE),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,S,C),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(u,d){var c=this.anims.currentFrame;this.anims.update(u,d),this.anims.currentFrame!==c&&(this.updateUVs(),this.updateVertices())},play:function(u,d,c){return this.anims.play(u,d,c),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(u,d,c){return u===void 0&&(u=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(u,d,c))},setVertical:function(u,d,c){return u===void 0&&(u=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(u,d,c)):this},setTintFill:function(u){return u===void 0&&(u=!1),this.tintFill=u,this},setAlphas:function(u,d){var c=this.points.length;if(c<1)return this;var g=this.alphas;u===void 0?u=[1]:!Array.isArray(u)&&d===void 0&&(u=[u]);var m,x=0;if(d!==void 0)for(m=0;m<c;m++)x=m*2,g[x]=u,g[x+1]=d;else if(u.length===c)for(m=0;m<c;m++)x=m*2,g[x]=u[m],g[x+1]=u[m];else{var y=u[0];for(m=0;m<c;m++)x=m*2,u.length>x&&(y=u[x]),g[x]=y,u.length>x+1&&(y=u[x+1]),g[x+1]=y}return this},setColors:function(u){var d=this.points.length;if(d<1)return this;var c=this.colors;u===void 0?u=[16777215]:Array.isArray(u)||(u=[u]);var g,m=0;if(u.length===d)for(g=0;g<d;g++)m=g*2,c[m]=u[g],c[m+1]=u[g];else{var x=u[0];for(g=0;g<d;g++)m=g*2,u.length>m&&(x=u[m]),c[m]=x,u.length>m+1&&(x=u[m+1]),c[m+1]=x}return this},setPoints:function(u,d,c){if(u===void 0&&(u=2),typeof u=="number"){var g=u;g<2&&(g=2),u=[];var m,x,y;if(this.horizontal)for(y=-this.frame.halfWidth,x=this.frame.width/(g-1),m=0;m<g;m++)u.push({x:y+m*x,y:0});else for(y=-this.frame.halfHeight,x=this.frame.height/(g-1),m=0;m<g;m++)u.push({x:0,y:y+m*x})}var T=u.length,S=this.points.length;return T<1?(console.warn("Rope: Not enough points given"),this):(T===1&&(u.unshift({x:0,y:0}),T++),S!==T&&this.resizeArrays(T),this.points=u,this.updateUVs(),d!=null&&this.setColors(d),c!=null&&this.setAlphas(c),this)},updateUVs:function(){for(var u=this.uv,d=this.points.length,c=this.frame.u0,g=this.frame.v0,m=this.frame.u1,x=this.frame.v1,y=(m-c)/(d-1),T=(x-g)/(d-1),S=0;S<d;S++){var C=S*4,E,P,M,R;this.horizontal?(this._flipX?(E=m-S*y,M=m-S*y):(E=c+S*y,M=c+S*y),this._flipY?(P=x,R=g):(P=g,R=x)):(this._flipX?(E=c,M=m):(E=m,M=c),this._flipY?(P=x-S*T,R=x-S*T):(P=g+S*T,R=g+S*T)),u[C+0]=E,u[C+1]=P,u[C+2]=M,u[C+3]=R}return this},resizeArrays:function(u){var d=this.colors,c=this.alphas;this.vertices=new Float32Array(u*4),this.uv=new Float32Array(u*4),d=new Uint32Array(u*2),c=new Float32Array(u*2);for(var g=0;g<u*2;g++)d[g]=16777215,c[g]=1;return this.colors=d,this.alphas=c,this.dirty=!0,this},updateVertices:function(){var u=this._perp,d=this.points,c=this.vertices,g=d.length;if(this.dirty=!1,!(g<1)){for(var m,x=d[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,T=0;T<g;T++){var S=d[T],C=T*4;T<g-1?m=d[T+1]:m=S,u.x=m.y-x.y,u.y=-(m.x-x.x);var E=u.length();u.x/=E,u.y/=E,u.x*=y,u.y*=y,c[C]=S.x+u.x,c[C+1]=S.y+u.y,c[C+2]=S.x-u.x,c[C+3]=S.y-u.y,x=S}return this}},setDebug:function(u,d){return this.debugGraphic=u,!u&&!d?this.debugCallback=null:d?this.debugCallback=d:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(u,d,c){var g=u.debugGraphic,m=c[0],x=c[1],y=c[2],T=c[3];g.lineBetween(m,x,y,T);for(var S=4;S<d;S+=4){var C=c[S+0],E=c[S+1],P=c[S+2],M=c[S+3];g.lineBetween(m,x,C,E),g.lineBetween(y,T,P,M),g.lineBetween(y,T,C,E),g.lineBetween(C,E,P,M),m=C,x=E,y=P,T=M}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(u){return this._flipX=u,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(u){return this._flipY=u,this.updateUVs()}}});t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(142),l=e(31),n=e(0),o=e(11),h=e(22),r=e(15),a=e(458),v=e(6),u=e(202),d=e(1088),c=e(459),g=new n({Extends:r,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,d],initialize:function(x,y,T,S,C){y===void 0&&(y=0),T===void 0&&(T=0),r.call(this,x,"Text"),this.renderer=x.sys.renderer,this.setPosition(y,T),this.setOrigin(0,0),this.initPipeline(),this.canvas=l.create(this),this.context=this.canvas.getContext("2d"),this.style=new c(this,C),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(S),C&&C.padding&&this.setPadding(C.padding),C&&C.lineSpacing&&this.setLineSpacing(C.lineSpacing),x.sys.game.events.on(h.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",s(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(m){var x=this.style;if(x.wordWrapCallback){var y=x.wordWrapCallback.call(x.wordWrapCallbackScope,m,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(m,this.context,this.style.wordWrapWidth):this.basicWordWrap(m,this.context,this.style.wordWrapWidth):m},advancedWordWrap:function(m,x,y){for(var T="",S=m.replace(/ +/gi," ").split(this.splitRegExp),C=S.length,E=0;E<C;E++){var P=S[E],M="";P=P.replace(/^ *|\s*$/gi,"");var R=x.measureText(P).width;if(R<y){T+=P+`
`;continue}for(var A=y,O=P.split(" "),F=0;F<O.length;F++){var I=O[F],w=I+" ",b=x.measureText(w).width;if(b>A){if(F===0){for(var Y=w;Y.length&&(Y=Y.slice(0,-1),b=x.measureText(Y).width,!(b<=A)););if(!Y.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var U=I.substr(Y.length);O[F]=U,M+=Y}var W=O[F].length?F:F+1,D=O.slice(W).join(" ").replace(/[ \n]*$/gi,"");S[E+1]=D+" "+(S[E+1]||""),C=S.length;break}else M+=w,A-=b}T+=M.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(m,x,y){for(var T="",S=m.split(this.splitRegExp),C=S.length-1,E=x.measureText(" ").width,P=0;P<=C;P++){for(var M=y,R=S[P].split(" "),A=R.length-1,O=0;O<=A;O++){var F=R[O],I=x.measureText(F).width,w=I;O<A&&(w+=E),w>M&&O>0&&(T+=`
`,M=y),T+=F,O<A?(T+=" ",M-=w):M-=I}P<C&&(T+=`
`)}return T},getWrappedText:function(m){m===void 0&&(m=this._text),this.style.syncFont(this.canvas,this.context);var x=this.runWordWrap(m);return x.split(this.splitRegExp)},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this._text&&(this._text=m.toString(),this.updateText()),this},setStyle:function(m){return this.style.setStyle(m)},setFont:function(m){return this.style.setFont(m)},setFontFamily:function(m){return this.style.setFontFamily(m)},setFontSize:function(m){return this.style.setFontSize(m)},setFontStyle:function(m){return this.style.setFontStyle(m)},setFixedSize:function(m,x){return this.style.setFixedSize(m,x)},setBackgroundColor:function(m){return this.style.setBackgroundColor(m)},setFill:function(m){return this.style.setFill(m)},setColor:function(m){return this.style.setColor(m)},setStroke:function(m,x){return this.style.setStroke(m,x)},setShadow:function(m,x,y,T,S,C){return this.style.setShadow(m,x,y,T,S,C)},setShadowOffset:function(m,x){return this.style.setShadowOffset(m,x)},setShadowColor:function(m){return this.style.setShadowColor(m)},setShadowBlur:function(m){return this.style.setShadowBlur(m)},setShadowStroke:function(m){return this.style.setShadowStroke(m)},setShadowFill:function(m){return this.style.setShadowFill(m)},setWordWrapWidth:function(m,x){return this.style.setWordWrapWidth(m,x)},setWordWrapCallback:function(m,x){return this.style.setWordWrapCallback(m,x)},setAlign:function(m){return this.style.setAlign(m)},setResolution:function(m){return this.style.setResolution(m)},setLineSpacing:function(m){return this.lineSpacing=m,this.updateText()},setPadding:function(m,x,y,T){if(typeof m=="object"){var S=m,C=v(S,"x",null);C!==null?(m=C,y=C):(m=v(S,"left",0),y=v(S,"right",m));var E=v(S,"y",null);E!==null?(x=E,T=E):(x=v(S,"top",0),T=v(S,"bottom",x))}else m===void 0&&(m=0),x===void 0&&(x=m),y===void 0&&(y=m),T===void 0&&(T=x);return this.padding.left=m,this.padding.top=x,this.padding.right=y,this.padding.bottom=T,this.updateText()},setMaxLines:function(m){return this.style.setMaxLines(m)},updateText:function(){var m=this.canvas,x=this.context,y=this.style,T=y.resolution,S=y.metrics;y.syncFont(m,x);var C=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(C=this.runWordWrap(this._text));var E=C.split(this.splitRegExp),P=a(this,S,E),M=this.padding,R;y.fixedWidth===0?(this.width=P.width+M.left+M.right,R=P.width):(this.width=y.fixedWidth,R=this.width-M.left-M.right,R<P.width&&(R=P.width)),y.fixedHeight===0?this.height=P.height+M.top+M.bottom:this.height=y.fixedHeight;var A=this.width,O=this.height;this.updateDisplayOrigin(),A*=T,O*=T,A=Math.max(A,1),O=Math.max(O,1),m.width!==A||m.height!==O?(m.width=A,m.height=O,this.frame.setSize(A,O),y.syncFont(m,x)):x.clearRect(0,0,A,O),x.save(),x.scale(T,T),y.backgroundColor&&(x.fillStyle=y.backgroundColor,x.fillRect(0,0,A,O)),y.syncStyle(m,x),x.textBaseline="alphabetic",x.translate(M.left,M.top);for(var F,I,w=0;w<P.lines;w++){if(F=y.strokeThickness/2,I=y.strokeThickness/2+w*P.lineHeight+S.ascent,w>0&&(I+=P.lineSpacing*w),y.rtl)F=A-F;else if(y.align==="right")F+=R-P.lineWidths[w];else if(y.align==="center")F+=(R-P.lineWidths[w])/2;else if(y.align==="justify"){var b=.85;if(P.lineWidths[w]/P.width>=b){var Y=P.width-P.lineWidths[w],U=x.measureText(" ").width,W=E[w].trim(),D=W.split(" ");Y+=(E[w].length-W.length)*U;for(var L=Math.floor(Y/U),B=0;L>0;)D[B]+=" ",B=(B+1)%(D.length-1||1),--L;E[w]=D.join(" ")}}this.autoRound&&(F=Math.round(F),I=Math.round(I)),y.strokeThickness&&(this.style.syncShadow(x,y.shadowStroke),x.strokeText(E[w],F,I)),y.color&&(this.style.syncShadow(x,y.shadowFill),x.fillText(E[w],F,I))}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(m,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var G=this.input;return G&&!G.customHitArea&&(G.hitArea.width=this.width,G.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(m){this.setText(m)}},toJSON:function(){var m=o.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return m.data=x,m},preDestroy:function(){this.style.rtl&&u(this.canvas),l.remove(this.canvas),this.texture.destroy()}});t.exports=g},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(31),l=e(0),n=e(11),o=e(22),h=e(15),r=e(361),a=e(192),v=e(1091),u=e(3),d=8,c=new l({Extends:h,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Crop,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Tint,n.Transform,n.Visible,v],initialize:function(m,x,y,T,S,C,E){var P=m.sys.renderer;h.call(this,m,"TileSprite");var M=m.sys.textures.get(C),R=M.get(E);!T||!S?(T=R.width,S=R.height):(T=Math.floor(T),S=Math.floor(S)),this._tilePosition=new u,this._tileScale=new u(1,1),this.dirty=!1,this.renderer=P,this.canvas=s.create(this,T,S),this.context=this.canvas.getContext("2d"),this.displayTexture=M,this.displayFrame=R,this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=r(R.width),this.potHeight=r(R.height),this.fillCanvas=s.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(x,y),this.setSize(T,S),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),m.sys.game.events.on(o.CONTEXT_RESTORED,function(A){if(!!A){var O=A.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=A.createTexture2D(0,O.LINEAR,O.LINEAR,O.REPEAT,O.REPEAT,O.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(g,m){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(m)},setFrame:function(g){var m=this.displayTexture.get(g);return this.potWidth=r(m.width),this.potHeight=r(m.height),this.canvas.width=0,!m.cutWidth||!m.cutHeight?this.renderFlags&=~d:this.renderFlags|=d,this.displayFrame=m,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,m){return g!==void 0&&(this.tilePositionX=g),m!==void 0&&(this.tilePositionY=m),this},setTileScale:function(g,m){return g===void 0&&(g=this.tileScaleX),m===void 0&&(m=g),this.tileScaleX=g,this.tileScaleY=m,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var m=this.fillContext,x=this.fillCanvas,y=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=g.cutWidth,T=g.cutHeight),m.clearRect(0,0,y,T),x.width=y,x.height=T,m.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,y,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(x,this.fillPattern):this.fillPattern=m.createPattern(x,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var m=this.context;this.scene.sys.game.config.antialias||a.disable(m);var x=this._tileScale.x,y=this._tileScale.y,T=this._tilePosition.x,S=this._tilePosition.y;m.clearRect(0,0,this.width,this.height),m.save(),m.scale(x,y),m.translate(-T,-S),m.fillStyle=this.fillPattern,m.fillRect(T,S,this.width/x,this.height/y),m.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),s.remove(this.canvas),s.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});t.exports=c},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(18),n=e(11),o=e(75),h=e(22),r=e(51),a=e(15),v=e(70),u=e(222),d=e(1094),c=e(14),g=new s({Extends:a,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,d],initialize:function(x,y,T,S){a.call(this,x,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=u(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=c.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(y,T),this.initPipeline(),S&&this.changeSource(S,!1);var C=x.sys.game.events;C.on(h.PAUSE,this.globalPause,this),C.on(h.RESUME,this.globalResume,this);var E=x.sys.sound;E&&E.on(v.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(m,x,y){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var T=this.video;if(!T)return console.warn("Video not loaded"),this;m===void 0&&(m=T.loop);var S=this.scene.sys.sound;S&&S.mute&&this.setMute(!0),isNaN(x)||(this._markerIn=x),!isNaN(y)&&y>x&&(this._markerOut=y),T.loop=m;var C=this._callbacks,E=T.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(T.addEventListener("playing",C.play,!0),T.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),T.addEventListener("ended",C.end,!0),T.addEventListener("timeupdate",C.time,!0),T.addEventListener("seeking",C.seeking,!0),T.addEventListener("seeked",C.seeked,!0),this},changeSource:function(m,x,y,T,S){x===void 0&&(x=!0);var C=this.video;C&&this.stop();var E=this.scene.sys.cache.video.get(m);return E?(this.video=E,this._cacheKey=m,this._codePaused=E.paused,this._codeMuted=E.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,E,E.videoWidth,E.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,E.videoWidth,E.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,E.videoWidth,E.videoHeight)):this.updateTexture(),E.currentTime=0,this._lastUpdate=0,x&&this.play(y,T,S)):this.video=null,this},addMarker:function(m,x,y){return!isNaN(x)&&x>=0&&!isNaN(y)&&(this.markers[m]=[x,y]),this},playMarker:function(m,x){var y=this.markers[m];return y&&this.play(x,y[0],y[1]),this},removeMarker:function(m){return delete this.markers[m],this},snapshot:function(m,x){return m===void 0&&(m=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,m,x)},snapshotArea:function(m,x,y,T,S,C){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.width),T===void 0&&(T=this.height),S===void 0&&(S=y),C===void 0&&(C=T);var E=this.video,P=this.snapshotTexture;return P?(P.setSize(S,C),E&&P.context.drawImage(E,m,x,y,T,0,0,S,C)):(P=this.scene.sys.textures.createCanvas(u(),S,C),this.snapshotTexture=P,E&&P.context.drawImage(E,m,x,y,T,0,0,S,C)),P.update()},saveSnapshotTexture:function(m){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,m):this.snapshotTexture=this.scene.sys.textures.createCanvas(m,this.width,this.height),this.snapshotTexture},loadURL:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");return T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0),T.src=m,T.load(),this.video=T,this},loadMediaStream:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0);try{T.srcObject=m}catch{T.src=window.URL.createObjectURL(m)}return T.load(),this.video=T,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(m){this.scene.sys.input.once(r.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(o.VIDEO_ERROR,this,m)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(m){this.stop(),this.emit(o.VIDEO_ERROR,this,m)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(o.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(o.VIDEO_PLAY,this)},completeHandler:function(){this.emit(o.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(o.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var m=this.video;if(m){var x=m.currentTime;x!==this._lastUpdate&&(this._lastUpdate=x,this.updateTexture(),x>=this._markerOut&&(m.loop?(m.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=x,this.emit(o.VIDEO_LOOP,this)):(this.emit(o.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(o.VIDEO_TIMEOUT,this))},updateTexture:function(){var m=this.video,x=m.videoWidth,y=m.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,m,x,y),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,x,y),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,x,y);else{var T=this.videoTextureSource;T.source!==m&&(T.source=m,T.width=x,T.height=y),T.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(m){var x=this.video;if(x){var y=x.duration;if(y!==1/0&&!isNaN(y)){var T=y*m;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(m){var x=this.video;if(x){if(typeof m=="string"){var y=m[0],T=parseFloat(m.substr(1));y==="+"?m=x.currentTime+T:y==="-"&&(m=x.currentTime-T)}x.currentTime=m,this._lastUpdate=m}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(o.VIDEO_SEEKED,this);var m=this.video;m&&this.updateTexture()},getProgress:function(){var m=this.video;if(m){var x=m.currentTime,y=m.duration;if(y!==1/0&&!isNaN(y))return x/y}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(m){m===void 0&&(m=!0),this._codeMuted=m;var x=this.video;return x&&(x.muted=this._systemMuted?!0:m),this},isMuted:function(){return this._codeMuted},globalMute:function(m,x){this._systemMuted=x;var y=this.video;y&&(y.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(m){m===void 0&&(m=!0);var x=this.video;return this._codePaused=m,x&&(m?x.paused||x.pause():m||x.paused&&!this._systemPaused&&x.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(m){return m===void 0&&(m=1),this.video&&(this.video.volume=l(m,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(m){return this.video&&(this.video.playbackRate=m),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(m){return m===void 0&&(m=!0),this.video&&(this.video.loop=m),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(m,x){return x===void 0&&(x=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,m),this._key=m,this.flipY=x,this.videoTextureSource&&this.videoTextureSource.setFlipY(x),this.videoTexture},stop:function(){var m=this.video;if(m){var x=this._callbacks;for(var y in x)m.removeEventListener(y,x[y],!0);m.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var m=this.video;if(!!m){for(m.parentNode&&m.parentNode.removeChild(m);m.hasChildNodes();)m.removeChild(m.firstChild);m.removeAttribute("autoplay"),m.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var m=this.scene.sys.game.events;m.off(h.PAUSE,this.globalPause,this),m.off(h.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(v.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=g},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(228),n=e(470),o=e(56),h=new s({initialize:function(a){this.type=o.POLYGON,this.area=0,this.points=[],a&&this.setTo(a)},contains:function(r,a){return l(this,r,a)},setTo:function(r){if(this.area=0,this.points=[],typeof r=="string"&&(r=r.split(" ")),!Array.isArray(r))return this;for(var a,v=Number.MAX_VALUE,u=0;u<r.length;u++)a={x:0,y:0},typeof r[u]=="number"||typeof r[u]=="string"?(a.x=parseFloat(r[u]),a.y=parseFloat(r[u+1]),u++):Array.isArray(r[u])?(a.x=r[u][0],a.y=r[u][1]):(a.x=r[u].x,a.y=r[u].y),this.points.push(a),a.y<v&&(v=a.y);return this.calculateArea(v),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r=0,a,v,u=0;u<this.points.length-1;u++)a=this.points[u],v=this.points[u+1],r+=(v.x-a.x)*(a.y+v.y);return a=this.points[0],v=this.points[this.points.length-1],r+=(a.x-v.x)*(v.y+a.y),this.area=-r*.5,this.area},getPoints:function(r,a,v){return n(this,r,a,v)}});t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){for(var o=!1,h=-1,r=s.points.length-1;++h<s.points.length;r=h){var a=s.points[h].x,v=s.points[h].y,u=s.points[r].x,d=s.points[r].y;(v<=n&&n<d||d<=n&&n<v)&&l<(u-a)*(n-v)/(d-v)+a&&(o=!o)}return o};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(11),n=e(15),o=e(2),h=e(17),r=e(478),a=e(1176),v=e(25),u=new s({Extends:n,Mixins:[l.ComputedSize,l.Depth,l.GetBounds,l.Mask,l.Origin,l.ScrollFactor,l.Transform,l.Visible,a],initialize:function(c,g,m,x,y,T,S,C){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=128),T===void 0&&(T=128),n.call(this,c,"Shader"),this.blendMode=-1,this.shader;var E=c.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(m,x),this.setSize(y,T),this.setOrigin(.5,.5),this.setShader(g,S,C)},willRender:function(d){return this.renderToTexture?!0:!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},setRenderToTexture:function(d,c){if(c===void 0&&(c=!1),!this.renderToTexture){var g=this.width,m=this.height,x=this.renderer;this.glTexture=x.createTextureFromSource(null,g,m,0),this.glTexture.flipY=c,this.framebuffer=x.createFramebuffer(g,m,this.glTexture,!1),this._rendererWidth=g,this._rendererHeight=m,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),d&&(this.texture=this.scene.sys.textures.addGLTexture(d,this.glTexture,g,m))}return this.shader&&(x.pipelines.clear(),this.load(),this.flush(),x.pipelines.rebind()),this},setShader:function(d,c,g){if(c===void 0&&(c=[]),typeof d=="string"){var m=this.scene.sys.cache.shader;if(!m.has(d))return console.warn("Shader missing: "+d),this;this.shader=m.get(d)}else this.shader=d;var x=this.gl,y=this.renderer;this.program&&x.deleteProgram(this.program);var T=y.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);x.uniformMatrix4fv(x.getUniformLocation(T,"uViewMatrix"),!1,this.viewMatrix),x.uniformMatrix4fv(x.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),x.uniform2f(x.getUniformLocation(T,"uResolution"),this.width,this.height),this.program=T;var S=new Date,C={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[S.getFullYear(),S.getMonth(),S.getDate(),S.getHours()*60*60+S.getMinutes()*60+S.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=h(!0,{},this.shader.uniforms,C):this.uniforms=C;for(var E=0;E<4;E++)c[E]&&this.setSampler2D("iChannel"+E,c[E],E,g);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(d){return this.pointer=d,this},projOrtho:function(d,c,g,m){var x=-1e3,y=1e3,T=1/(d-c),S=1/(g-m),C=1/(x-y),E=this.projectionMatrix;E[0]=-2*T,E[5]=-2*S,E[10]=2*C,E[12]=(d+c)*T,E[13]=(m+g)*S,E[14]=(y+x)*C;var P=this.program,M=this.gl,R=this.renderer;R.setProgram(P),M.uniformMatrix4fv(M.getUniformLocation(P,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=c,this._rendererHeight=g},initUniforms:function(){var d=this.gl,c=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var m in this.uniforms){var x=this.uniforms[m],y=x.type,T=c[y];x.uniformLocation=d.getUniformLocation(g,m),y!=="sampler2D"&&(x.glMatrix=T.matrix,x.glValueLength=T.length,x.glFunc=T.func)}},setSampler2DBuffer:function(d,c,g,m,x,y){x===void 0&&(x=0),y===void 0&&(y={});var T=this.uniforms[d];return T.value=c,y.width=g,y.height=m,T.textureData=y,this._textureCount=x,this.initSampler2D(T),this},setSampler2D:function(d,c,g,m){g===void 0&&(g=0);var x=this.scene.sys.textures;if(x.exists(c)){var y=x.getFrame(c);if(y.glTexture&&y.glTexture.isRenderTexture)return this.setSampler2DBuffer(d,y.glTexture,y.width,y.height,g,m);var T=this.uniforms[d],S=y.source;T.textureKey=c,T.source=S.image,T.value=y.glTexture,S.isGLTexture&&(m||(m={}),m.width=S.width,m.height=S.height),m&&(T.textureData=m),this._textureCount=g,this.initSampler2D(T)}return this},setUniform:function(d,c){return r(this.uniforms,d,c),this},getUniform:function(d){return o(this.uniforms,d,null)},setChannel0:function(d,c){return this.setSampler2D("iChannel0",d,0,c)},setChannel1:function(d,c){return this.setSampler2D("iChannel1",d,1,c)},setChannel2:function(d,c){return this.setSampler2D("iChannel2",d,2,c)},setChannel3:function(d,c){return this.setSampler2D("iChannel3",d,3,c)},initSampler2D:function(d){if(!!d.value){var c=this.gl;c.activeTexture(c.TEXTURE0+this._textureCount),c.bindTexture(c.TEXTURE_2D,d.value);var g=d.textureData;if(g&&!d.value.isRenderTexture){var m=c[o(g,"magFilter","linear").toUpperCase()],x=c[o(g,"minFilter","linear").toUpperCase()],y=c[o(g,"wrapS","repeat").toUpperCase()],T=c[o(g,"wrapT","repeat").toUpperCase()],S=c[o(g,"format","rgba").toUpperCase()];if(g.repeat&&(y=c.REPEAT,T=c.REPEAT),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!!g.flipY),g.width){var C=o(g,"width",512),E=o(g,"height",2),P=o(g,"border",0);c.texImage2D(c.TEXTURE_2D,0,S,C,E,P,S,c.UNSIGNED_BYTE,null)}else c.texImage2D(c.TEXTURE_2D,0,S,c.RGBA,c.UNSIGNED_BYTE,d.source);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,m),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,x),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,y),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,T)}this.renderer.setProgram(this.program),c.uniform1i(d.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var d=this.gl,c=this.uniforms,g,m,x,y,T,S=0;for(var C in c)g=c[C],x=g.glFunc,m=g.glValueLength,y=g.uniformLocation,T=g.value,T!==null&&(m===1?g.glMatrix?x.call(d,y,g.transpose,T):x.call(d,y,T):m===2?x.call(d,y,T.x,T.y):m===3?x.call(d,y,T.x,T.y,T.z):m===4?x.call(d,y,T.x,T.y,T.z,T.w):g.type==="sampler2D"&&(d.activeTexture(d.TEXTURE0+S),d.bindTexture(d.TEXTURE_2D,T),d.uniform1i(y,S),S++))},load:function(d){var c=this.gl,g=this.width,m=this.height,x=this.renderer,y=this.program,T=this.viewMatrix;if(!this.renderToTexture){var S=-this._displayOriginX,C=-this._displayOriginY;T[0]=d[0],T[1]=d[1],T[4]=d[2],T[5]=d[3],T[8]=d[4],T[9]=d[5],T[12]=T[0]*S+T[4]*C,T[13]=T[1]*S+T[5]*C}c.useProgram(y),c.uniformMatrix4fv(c.getUniformLocation(y,"uViewMatrix"),!1,T),c.uniform2f(c.getUniformLocation(y,"uResolution"),this.width,this.height);var E=this.uniforms,P=E.resolution;P.value.x=g,P.value.y=m,E.time.value=x.game.loop.getDuration();var M=this.pointer;if(M){var R=E.mouse,A=M.x/g,O=1-M.y/m;R.value.x=A.toFixed(2),R.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var d=this.width,c=this.height,g=this.program,m=this.gl,x=this.vertexBuffer,y=this.renderer,T=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(y.setFramebuffer(this.framebuffer),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)),m.bindBuffer(m.ARRAY_BUFFER,x);var S=m.getAttribLocation(g,"inPosition");S!==-1&&(m.enableVertexAttribArray(S),m.vertexAttribPointer(S,2,m.FLOAT,!1,T,0));var C=this.vertexViewF32;C[3]=c,C[4]=d,C[5]=c,C[8]=d,C[9]=c,C[10]=d;var E=6;m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,E*T)),m.drawArrays(m.TRIANGLES,0,E),this.renderToTexture&&y.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var d=this.gl;d.deleteProgram(this.program),d.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=u},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(11),n=e(36),o=e(116),h=e(15),r=e(479),a=e(480),v=e(19),u=e(69),d=e(1179),c=e(79),g=e(39),m=e(117),x=new s({Extends:h,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.Size,l.Texture,l.Transform,l.Visible,l.ScrollFactor,d],initialize:function(T,S,C,E,P,M,R,A,O,F,I,w){S===void 0&&(S=0),C===void 0&&(C=0),E===void 0&&(E="__WHITE"),h.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new u,this.viewPosition=new g,this.viewMatrix=new u,this.projectionMatrix=new u,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var b=T.sys.renderer;this.setPosition(S,C),this.setTexture(E,P),this.setSize(b.width,b.height),this.initPipeline(),this.setPerspective(b.width,b.height),M&&this.addVertices(M,R,A,O,F,I,w)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(g.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=g.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,T,S,C,E){return S===void 0&&(S=45),C===void 0&&(C=.01),E===void 0&&(E=1e3),this.projectionMatrix.perspective(n(S),y/T,C,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,T,S,C){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),S===void 0&&(S=-1e3),C===void 0&&(C=1e3),this.projectionMatrix.ortho(-y,y,-T,T,S,C),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,T,S,C,E,P,M,R,A){var O=this.scene.sys.cache.obj.get(y);return O&&a(O,this,T,S,C,E,P,M,R,A),this},sortByDepth:function(y,T){return y.depth-T.depth},depthSort:function(){return c(this.faces,this.sortByDepth),this},addVertex:function(y,T,S,C,E,P,M){var R=new m(y,T,S,C,E,P,M);return this.vertices.push(R),R},addFace:function(y,T,S){var C=new o(y,T,S);return this.faces.push(C),this.dirtyCache[9]=-1,C},addVertices:function(y,T,S,C,E,P,M){var R=r(y,T,S,C,E,P,M);return R&&(this.faces=this.faces.concat(R.faces),this.vertices=this.vertices.concat(R.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},getFaceAt:function(y,T,S){S===void 0&&(S=this.scene.sys.cameras.main);for(var C=v(this,S).calc,E=this.faces,P=[],M=0;M<E.length;M++){var R=E[M];R.contains(y,T,C)&&P.push(R)}return c(P,this.sortByDepth)},setDebug:function(y,T){return this.debugGraphic=y,!y&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,T=this.modelRotation,S=this.modelScale,C=this.dirtyCache,E=y.x,P=y.y,M=y.z,R=T.x,A=T.y,O=T.z,F=S.x,I=S.y,w=S.z,b=this.getFaceCount(),Y=C[0],U=C[1],W=C[2],D=C[3],L=C[4],B=C[5],G=C[6],N=C[7],V=C[8],z=C[9];return C[0]=E,C[1]=P,C[2]=M,C[3]=R,C[4]=A,C[5]=O,C[6]=F,C[7]=I,C[8]=w,C[9]=b,Y!==E||U!==P||W!==M||D!==R||L!==A||B!==O||G!==F||N!==I||V!==w||z!==b},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var T=this.width,S=this.height,C=this.viewMatrix,E=this.viewPosition;y[10]&&(C.identity(),C.translate(E),C.invert(),y[10]=0);var P=this.transformMatrix;P.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var M=E.z,R=this.faces,A=0;A<R.length;A++)R[A].transformCoordinatesLocal(P,T,S,M);this.depthSort()}},renderDebug:function(y,T){for(var S=y.debugGraphic,C=0;C<T.length;C++){var E=T[C],P=E.vertex1.tx,M=E.vertex1.ty,R=E.vertex2.tx,A=E.vertex2.ty,O=E.vertex3.tx,F=E.vertex3.ty;S.strokeTriangle(P,M,R,A,O,F)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});t.exports=x},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(50),l=function(n,o){return s(n.x,n.y,o.x,o.y)<=n.radius+o.radius};t.exports=l},function(t,f,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=e(233),n=function(o,h,r){if(r===void 0&&(r=[]),l(o,h)){var a=o.x1,v=o.y1,u=o.x2,d=o.y2,c=h.x,g=h.y,m=h.radius,x=u-a,y=d-v,T=a-c,S=v-g,C=x*x+y*y,E=2*(x*T+y*S),P=T*T+S*S-m*m,M=E*E-4*C*P,R,A;if(M===0){var O=-E/(2*C);R=a+O*x,A=v+O*y,O>=0&&O<=1&&r.push(new s(R,A))}else if(M>0){var F=(-E-Math.sqrt(M))/(2*C);R=a+F*x,A=v+F*y,F>=0&&F<=1&&r.push(new s(R,A));var I=(-E+Math.sqrt(M))/(2*C);R=a+I*x,A=v+I*y,I>=0&&I<=1&&r.push(new s(R,A))}}return r};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(66),l=e(4),n=new l,o=function(h,r,a){if(a===void 0&&(a=n),s(r,h.x1,h.y1))return a.x=h.x1,a.y=h.y1,!0;if(s(r,h.x2,h.y2))return a.x=h.x2,a.y=h.y2,!0;var v=h.x2-h.x1,u=h.y2-h.y1,d=r.x-h.x1,c=r.y-h.y1,g=v*v+u*u,m=v,x=u;if(g>0){var y=(d*v+c*u)/g;m*=y,x*=y}a.x=h.x1+m,a.y=h.y1+x;var T=m*m+x*x;return T<=g&&m*v+x*u>=0&&s(r,a.x,a.y)};t.exports=o},function(t,f,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=e(96),n=e(488),o=function(h,r,a){if(a===void 0&&(a=[]),n(h,r))for(var v=r.getLineA(),u=r.getLineB(),d=r.getLineC(),c=r.getLineD(),g=[new s,new s,new s,new s],m=[l(v,h,g[0]),l(u,h,g[1]),l(d,h,g[2]),l(c,h,g[3])],x=0;x<4;x++)m[x]&&a.push(g[x]);return a};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){n===void 0&&(n=!1),o===void 0&&(o=[]);for(var h=s.x3-s.x1,r=s.y3-s.y1,a=s.x2-s.x1,v=s.y2-s.y1,u=h*h+r*r,d=h*a+r*v,c=a*a+v*v,g=u*c-d*d,m=g===0?0:1/g,x,y,T,S,C,E,P=s.x1,M=s.y1,R=0;R<l.length&&(T=l[R].x-P,S=l[R].y-M,C=h*T+r*S,E=a*T+v*S,x=(c*C-d*E)*m,y=(u*E-d*C)*m,!(x>=0&&y>=0&&x+y<1&&(o.push({x:l[R].x,y:l[R].y}),n)));R++);return o};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=Math.cos(o),r=Math.sin(o),a=s.x1-l,v=s.y1-n;return s.x1=a*h-v*r+l,s.y1=a*r+v*h+n,a=s.x2-l,v=s.y2-n,s.x2=a*h-v*r+l,s.y2=a*r+v*h+n,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.height===0?NaN:s.width/s.height};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=Math.cos(o),r=Math.sin(o),a=s.x1-l,v=s.y1-n;return s.x1=a*h-v*r+l,s.y1=a*r+v*h+n,a=s.x2-l,v=s.y2-n,s.x2=a*h-v*r+l,s.y2=a*r+v*h+n,a=s.x3-l,v=s.y3-n,s.x3=a*h-v*r+l,s.y3=a*r+v*h+n,s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={BUTTON_DOWN:e(1310),BUTTON_UP:e(1311),CONNECTED:e(1312),DISCONNECTED:e(1313),GAMEPAD_BUTTON_DOWN:e(1314),GAMEPAD_BUTTON_UP:e(1315)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(17),l=e(156),n=function(o,h){var r=o===void 0?l():s({},o);if(h)for(var a in h)h[a]!==void 0&&(r[a]=h[a]);return r};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=e(408),v=new s({Extends:n,initialize:function(d,c,g,m){var x="xml";if(r(c)){var y=c;c=h(y,"key"),g=h(y,"url"),m=h(y,"xhrSettings"),x=h(y,"extension",x)}var T={type:"xml",cache:d.cacheManager.xml,extension:x,responseType:"text",key:c,url:g,xhrSettings:m};n.call(this,d,T)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=a(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});o.register("xml",function(u,d,c){if(Array.isArray(u))for(var g=0;g<u.length;g++)this.addFile(new v(this,u[g]));else this.addFile(new v(this,u,d,c));return this}),t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=new s({Extends:n,initialize:function(u,d,c,g){var m="text",x="txt",y=u.cacheManager.text;if(r(d)){var T=d;d=h(T,"key"),c=h(T,"url"),g=h(T,"xhrSettings"),x=h(T,"extension",x),m=h(T,"type",m),y=h(T,"cache",y)}var S={type:m,cache:y,extension:x,responseType:"text",key:d,url:c,xhrSettings:g};n.call(this,u,S)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",function(v,u,d){if(Array.isArray(v))for(var c=0;c<v.length;c++)this.addFile(new a(this,v[c]));else this.addFile(new a(this,v,u,d));return this}),t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Acceleration:e(1368),Angular:e(1369),Bounce:e(1370),Debug:e(1371),Drag:e(1372),Enable:e(1373),Friction:e(1374),Gravity:e(1375),Immovable:e(1376),Mass:e(1377),OverlapCirc:e(523),OverlapRect:e(244),Pushable:e(1378),Size:e(1379),Velocity:e(1380)}},function(t,f){var e=function(s,l,n,o,h,r,a){r===void 0&&(r=!0),a===void 0&&(a=!1);var v=[],u=[],d=s.treeMinMax;if(d.minX=l,d.minY=n,d.maxX=l+o,d.maxY=n+h,a&&(u=s.staticTree.search(d)),r&&s.useTree)v=s.tree.search(d);else if(r){var c=s.bodies,g={position:{x:l,y:n},left:l,top:n,right:l+o,bottom:n+h,isCircle:!1},m=s.intersects;c.iterate(function(x){m(x,g)&&v.push(x)})}return u.concat(v)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={COLLIDE:e(1381),OVERLAP:e(1382),PAUSE:e(1383),RESUME:e(1384),TILE_COLLIDE:e(1385),TILE_OVERLAP:e(1386),WORLD_BOUNDS:e(1387),WORLD_STEP:e(1388)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(62),l=function(n,o,h,r){var a=0,v=n.deltaAbsX()+o.deltaAbsX()+r;return n._dx===0&&o._dx===0?(n.embedded=!0,o.embedded=!0):n._dx>o._dx?(a=n.right-o.x,a>v&&!h||n.checkCollision.right===!1||o.checkCollision.left===!1?a=0:(n.touching.none=!1,n.touching.right=!0,o.touching.none=!1,o.touching.left=!0,o.physicsType===s.STATIC_BODY&&!h&&(n.blocked.none=!1,n.blocked.right=!0),n.physicsType===s.STATIC_BODY&&!h&&(o.blocked.none=!1,o.blocked.left=!0))):n._dx<o._dx&&(a=n.x-o.width-o.x,-a>v&&!h||n.checkCollision.left===!1||o.checkCollision.right===!1?a=0:(n.touching.none=!1,n.touching.left=!0,o.touching.none=!1,o.touching.right=!0,o.physicsType===s.STATIC_BODY&&!h&&(n.blocked.none=!1,n.blocked.left=!0),n.physicsType===s.STATIC_BODY&&!h&&(o.blocked.none=!1,o.blocked.right=!0))),n.overlapX=a,o.overlapX=a,a};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(62),l=function(n,o,h,r){var a=0,v=n.deltaAbsY()+o.deltaAbsY()+r;return n._dy===0&&o._dy===0?(n.embedded=!0,o.embedded=!0):n._dy>o._dy?(a=n.bottom-o.y,a>v&&!h||n.checkCollision.down===!1||o.checkCollision.up===!1?a=0:(n.touching.none=!1,n.touching.down=!0,o.touching.none=!1,o.touching.up=!0,o.physicsType===s.STATIC_BODY&&!h&&(n.blocked.none=!1,n.blocked.down=!0),n.physicsType===s.STATIC_BODY&&!h&&(o.blocked.none=!1,o.blocked.up=!0))):n._dy<o._dy&&(a=n.y-o.bottom,-a>v&&!h||n.checkCollision.up===!1||o.checkCollision.down===!1?a=0:(n.touching.none=!1,n.touching.up=!0,o.touching.none=!1,o.touching.down=!0,o.physicsType===s.STATIC_BODY&&!h&&(n.blocked.none=!1,n.blocked.up=!0),n.physicsType===s.STATIC_BODY&&!h&&(o.blocked.none=!1,o.blocked.down=!0))),n.overlapY=a,o.overlapY=a,a};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return!(l.right<=s.left||l.bottom<=s.top||l.position.x>=s.right||l.position.y>=s.bottom)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Bounce:e(1495),Collision:e(1496),Force:e(1497),Friction:e(1498),Gravity:e(1499),Mass:e(1500),Sensor:e(1501),SetBody:e(1502),Sleep:e(1503),Static:e(1520),Transform:e(1521),Velocity:e(1522)}},function(t,f){var e={};t.exports=e,function(){e.create=function(s,l){var n=s.bodyA,o=s.bodyB,h={id:e.id(n,o),bodyA:n,bodyB:o,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:n.isSensor||o.isSensor,timeCreated:l,timeUpdated:l,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(h,s,l),h},e.update=function(s,l,n){if(s.collision=l,l.collided){var o=l.supports,h=s.activeContacts,r=l.parentA,a=l.parentB;s.inverseMass=r.inverseMass+a.inverseMass,s.friction=Math.min(r.friction,a.friction),s.frictionStatic=Math.max(r.frictionStatic,a.frictionStatic),s.restitution=Math.max(r.restitution,a.restitution),s.slop=Math.max(r.slop,a.slop);for(var v=0;v<o.length;v++)h[v]=o[v].contact;var u=o.length;u<h.length&&(h.length=u),s.separation=l.depth,e.setActive(s,!0,n)}else s.isActive===!0&&e.setActive(s,!1,n)},e.setActive=function(s,l,n){l?(s.isActive=!0,s.timeUpdated=n):(s.isActive=!1,s.activeContacts.length=0)},e.id=function(s,l){return s.id<l.id?"A"+s.id+"B"+l.id:"A"+l.id+"B"+s.id}}()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={CalculateFacesAt:e(252),CalculateFacesWithin:e(63),CheckIsoBounds:e(541),Copy:e(1420),CreateFromTiles:e(1421),CullBounds:e(543),CullTiles:e(544),Fill:e(1422),FilterTiles:e(1423),FindByIndex:e(1424),FindTile:e(1425),ForEachTile:e(1426),GetCullTilesFunction:e(1427),GetTileAt:e(158),GetTileAtWorldXY:e(1428),GetTilesWithin:e(26),GetTilesWithinShape:e(1429),GetTilesWithinWorldXY:e(529),GetTileToWorldXFunction:e(1430),GetTileToWorldXYFunction:e(1431),GetTileToWorldYFunction:e(1432),GetWorldToTileXFunction:e(1433),GetWorldToTileXYFunction:e(1434),GetWorldToTileYFunction:e(1435),HasTileAt:e(562),HasTileAtWorldXY:e(1436),HexagonalCullBounds:e(546),HexagonalCullTiles:e(545),HexagonalTileToWorldXY:e(550),HexagonalTileToWorldY:e(554),HexagonalWorldToTileXY:e(556),HexagonalWorldToTileY:e(560),IsInLayerBounds:e(119),IsometricCullTiles:e(547),IsometricTileToWorldXY:e(551),IsometricWorldToTileXY:e(557),PutTileAt:e(257),PutTileAtWorldXY:e(1437),PutTilesAt:e(1438),Randomize:e(1439),RemoveTileAt:e(563),RemoveTileAtWorldXY:e(1440),RenderDebug:e(1441),ReplaceByIndex:e(542),RunCull:e(159),SetCollision:e(1442),SetCollisionBetween:e(1443),SetCollisionByExclusion:e(1444),SetCollisionByProperty:e(1445),SetCollisionFromCollisionGroup:e(1446),SetLayerCollisionIndex:e(160),SetTileCollision:e(72),SetTileIndexCallback:e(1447),SetTileLocationCallback:e(1448),Shuffle:e(1449),StaggeredCullBounds:e(549),StaggeredCullTiles:e(548),StaggeredTileToWorldXY:e(552),StaggeredTileToWorldY:e(555),StaggeredWorldToTileXY:e(558),StaggeredWorldToTileY:e(561),SwapByIndex:e(1450),TileToWorldX:e(253),TileToWorldXY:e(553),TileToWorldY:e(254),WeightedRandomize:e(1451),WorldToTileX:e(255),WorldToTileXY:e(559),WorldToTileY:e(256)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(158),l=function(n,o,h){var r=s(n,o,!0,h),a=s(n,o-1,!0,h),v=s(n,o+1,!0,h),u=s(n-1,o,!0,h),d=s(n+1,o,!0,h),c=r&&r.collides;return c&&(r.faceTop=!0,r.faceBottom=!0,r.faceLeft=!0,r.faceRight=!0),a&&a.collides&&(c&&(r.faceTop=!1),a.faceBottom=!c),v&&v.collides&&(c&&(r.faceBottom=!1),v.faceTop=!c),u&&u.collides&&(c&&(r.faceLeft=!1),u.faceRight=!c),d&&d.collides&&(c&&(r.faceRight=!1),d.faceLeft=!c),r&&!r.collides&&r.resetFaces(),r};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=n.baseTileWidth,h=n.tilemapLayer,r=0;return h&&(l||(l=h.scene.cameras.main),r=h.x+l.scrollX*(1-h.scrollFactorX),o*=h.scaleX),r+s*o};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=n.baseTileHeight,h=n.tilemapLayer,r=0;return h&&(l||(l=h.scene.cameras.main),r=h.y+l.scrollY*(1-h.scrollFactorY),o*=h.scaleY),r+s*o};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){l===void 0&&(l=!0);var h=o.baseTileWidth,r=o.tilemapLayer;return r&&(n||(n=r.scene.cameras.main),s=s-(r.x+n.scrollX*(1-r.scrollFactorX)),h*=r.scaleX),l?Math.floor(s/h):s/h};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){l===void 0&&(l=!0);var h=o.baseTileHeight,r=o.tilemapLayer;return r&&(n||(n=r.scene.cameras.main),s=s-(r.y+n.scrollY*(1-r.scrollFactorY)),h*=r.scaleY),l?Math.floor(s/h):s/h};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(85),l=e(119),n=e(252),o=e(72),h=function(r,a,v,u,d){if(u===void 0&&(u=!0),!l(a,v,d))return null;var c=d.data[v][a],g=c&&c.collides;if(r instanceof s)d.data[v][a]===null&&(d.data[v][a]=new s(d,r.index,a,v,d.tileWidth,d.tileHeight)),d.data[v][a].copy(r);else{var m=r;d.data[v][a]===null?d.data[v][a]=new s(d,m,a,v,d.tileWidth,d.tileHeight):d.data[v][a].index=m}var x=d.data[v][a],y=d.collideIndexes.indexOf(x.index)!==-1;return o(x,y),u&&g!==x.collides&&n(a,v,d),x};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(29),l=function(n){return n=n.toLowerCase(),n==="isometric"?s.ISOMETRIC:n==="staggered"?s.STAGGERED:n==="hexagonal"?s.HEXAGONAL:s.ORTHOGONAL};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(40),l=e(120),n=e(121),o=e(85),h=function(r,a,v,u,d){for(var c=new l({tileWidth:v,tileHeight:u}),g=new n({name:r,tileWidth:v,tileHeight:u,format:s.ARRAY_2D,layers:[c]}),m=[],x=a.length,y=0,T=0;T<a.length;T++){m[T]=[];for(var S=a[T],C=0;C<S.length;C++){var E=parseInt(S[C],10);isNaN(E)||E===-1?m[T][C]=d?null:new o(c,-1,C,T,v,u):m[T][C]=new o(c,E,C,T,v,u)}y===0&&(y=S.length)}return g.width=c.width=y,g.height=c.height=x,g.widthInPixels=c.widthInPixels=y*v,g.heightInPixels=c.heightInPixels=x*u,c.data=m,g};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(571),l=e(261),n=function(r){return{x:r.x,y:r.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"],h=function(r,a,v){a===void 0&&(a=0),v===void 0&&(v=0);var u=s(r,o);if(u.x+=a,u.y+=v,r.gid){var d=l(r.gid);u.gid=d.gid,u.flippedHorizontal=d.flippedHorizontal,u.flippedVertical=d.flippedVertical,u.flippedAntiDiagonal=d.flippedAntiDiagonal}else r.polyline?u.polyline=r.polyline.map(n):r.polygon?u.polygon=r.polygon.map(n):r.ellipse?u.ellipse=r.ellipse:r.text?u.text=r.text:r.point?u.point=!0:u.rectangle=!0;return u};t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=2147483648,s=1073741824,l=536870912,n=function(o){var h=Boolean(o&e),r=Boolean(o&s),a=Boolean(o&l);o=o&~(e|s|l);var v=0,u=!1;return h&&r&&a?(v=Math.PI/2,u=!0):h&&r&&!a?(v=Math.PI,u=!1):h&&!r&&a?(v=Math.PI/2,u=!1):h&&!r&&!a?(v=0,u=!0):!h&&r&&a?(v=3*Math.PI/2,u=!1):!h&&r&&!a?(v=Math.PI,u=!0):!h&&!r&&a?(v=3*Math.PI/2,u=!0):!h&&!r&&!a&&(v=0,u=!1),{gid:o,flippedHorizontal:h,flippedVertical:r,flippedAntiDiagonal:a,rotation:v,flipped:u}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(40),l=e(121),n=e(564),o=e(580),h=function(r,a,v,u,d,c,g,m){v===void 0&&(v=32),u===void 0&&(u=32),d===void 0&&(d=10),c===void 0&&(c=10),m===void 0&&(m=!1);var x=null;if(Array.isArray(g)){var y=a!==void 0?a:"map";x=n(y,s.ARRAY_2D,g,v,u,m)}else if(a!==void 0){var T=r.cache.tilemap.get(a);T?x=n(a,T.format,T.data,v,u,m):console.warn("No map data found for key "+a)}return x===null&&(x=new l({tileWidth:v,tileHeight:u,width:d,height:c})),new o(r,x)};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(6),l=function(n){var o=s(n,"targets",null);return o===null||(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o])),o};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(h){return!!h.getActive&&typeof h.getActive=="function"}function s(h){return!!h.getStart&&typeof h.getStart=="function"}function l(h){return!!h.getEnd&&typeof h.getEnd=="function"}function n(h){return s(h)||l(h)||e(h)}var o=function(h,r){var a,v=function(E,P,M){return M},u=function(E,P,M){return M},d=null,c=typeof r;if(c==="number")v=function(){return r};else if(c==="string"){var g=r[0],m=parseFloat(r.substr(2));switch(g){case"+":v=function(E,P,M){return M+m};break;case"-":v=function(E,P,M){return M-m};break;case"*":v=function(E,P,M){return M*m};break;case"/":v=function(E,P,M){return M/m};break;default:v=function(){return parseFloat(r)}}}else if(c==="function")v=r;else if(c==="object")if(n(r))e(r)&&(d=r.getActive),l(r)&&(v=r.getEnd),s(r)&&(u=r.getStart);else if(r.hasOwnProperty("value"))a=o(h,r.value);else{var x=r.hasOwnProperty("to"),y=r.hasOwnProperty("from"),T=r.hasOwnProperty("start");if(x&&(y||T)){if(a=o(h,r.to),T){var S=o(h,r.start);a.getActive=S.getEnd}if(y){var C=o(h,r.from);a.getStart=C.getEnd}}}return a||(a={getActive:d,getEnd:v,getStart:u}),a};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(9),n=e(267),o=e(16),h=e(5),r=e(100),a=e(14),v=new s({Extends:l,initialize:function(d,c,g){l.call(this),this.parent=d,this.parentIsTimeline=d.hasOwnProperty("isTimeline"),this.data=c,this.totalData=c.length,this.targets=g,this.totalTargets=g.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=r.PENDING_ADD,this._pausedState=r.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(u){return u===void 0&&(u=0),this.data[u].current},setTimeScale:function(u){return this.timeScale=u,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===r.ACTIVE},isPaused:function(){return this.state===r.PAUSED},hasTarget:function(u){return this.targets.indexOf(u)!==-1},updateTo:function(u,d,c){c===void 0&&(c=!1);for(var g=0;g<this.totalData;g++){var m=this.data[g];m.key===u&&(m.end=d,c&&(m.start=m.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===r.ACTIVE?this.seek(0):this.state===r.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===r.PENDING_ADD?this:this.play()},calcDuration:function(){for(var u=0,d=a.MAX_SAFE_INTEGER,c=this.data,g=0;g<this.totalData;g++){var m=c[g];m.t1=m.duration+m.hold,m.yoyo&&(m.t1+=m.duration),m.t2=m.t1+m.repeatDelay,m.totalDuration=m.delay+m.t1,m.repeat===-1?m.totalDuration+=m.t2*999999999999:m.repeat>0&&(m.totalDuration+=m.t2*m.repeat),m.totalDuration>u&&(u=m.totalDuration),m.delay<d&&(d=m.delay)}this.duration=Math.max(u,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=d},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=r.PENDING_ADD,this._pausedState=r.INIT,!1;for(var u=this.data,d=this.totalTargets,c=0;c<this.totalData;c++){var g=u[c],m=g.target,x=g.gen,y=g.key,T=g.index;g.delay=x.delay(m,y,0,T,d,this),g.duration=Math.max(x.duration(m,y,0,T,d,this),.001),g.hold=x.hold(m,y,0,T,d,this),g.repeat=x.repeat(m,y,0,T,d,this),g.repeatDelay=x.repeatDelay(m,y,0,T,d,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=r.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(n.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=r.LOOP_DELAY):(this.state=r.ACTIVE,this.dispatchTweenEvent(n.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=r.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===r.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=r.PAUSED,this)},play:function(u){u===void 0&&(u=!1);var d=this.state;return d===r.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=r.ACTIVE,this):d===r.ACTIVE||d===r.PENDING_ADD&&this._pausedState===r.PENDING_ADD?this:!this.parentIsTimeline&&(d===r.PENDING_REMOVE||d===r.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(u),this.calculatedOffset===0?this.state=r.ACTIVE:(this.countdown=this.calculatedOffset,this.state=r.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(u),this.state=r.ACTIVE,this.makeActive()),this)},resetTweenData:function(u){for(var d=this.data,c=this.totalData,g=this.totalTargets,m=0;m<c;m++){var x=d[m],y=x.target,T=x.key,S=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,u?(x.start=x.getStartValue(y,T,x.start,S,g,this),x.end=x.getEndValue(y,T,x.end,S,g,this),x.current=x.start,x.state=r.PLAYING_FORWARD):x.state=r.PENDING_RENDER,x.delay>0&&(x.elapsed=x.delay,x.state=r.DELAY),x.getActiveValue&&(y[T]=x.getActiveValue(x.target,x.key,x.start))}},resume:function(){return this.state===r.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(u,d){d===void 0&&(d=16.6),this.state===r.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var c=this.data,g=this.totalTargets,m=0;m<this.totalData;m++){var x=c[m],y=x.target,T=x.gen,S=x.key,C=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,x.delay=T.delay(y,S,0,C,g,this),x.duration=Math.max(T.duration(y,S,0,C,g,this),.001),x.hold=T.hold(y,S,0,C,g,this),x.repeat=T.repeat(y,S,0,C,g,this),x.repeatDelay=T.repeatDelay(y,S,0,C,g,this),x.current=x.start,x.state=r.PLAYING_FORWARD,this.updateTweenData(this,x,0,C,g),x.delay>0&&(x.elapsed=x.delay,x.state=r.DELAY)}this.calcDuration();var E=!1;this.state===r.PAUSED&&(E=!0,this.state=r.ACTIVE),this.isSeeking=!0;do this.update(0,d);while(this.totalProgress<u);return this.isSeeking=!1,E&&(this.state=r.PAUSED),this},setCallback:function(u,d,c,g){return this.callbacks[u]={func:d,scope:g,params:c},this},complete:function(u){return u===void 0&&(u=0),u?(this.state=r.COMPLETE_DELAY,this.countdown=u):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(u){return this.state===r.ACTIVE&&u!==void 0&&this.seek(u),this.state!==r.REMOVED&&((this.state===r.PAUSED||this.state===r.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(n.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=r.PENDING_REMOVE),this},update:function(u,d){if(this.state===r.PAUSED)return!1;switch(this.useFrames&&(d=1*this.parent.timeScale),d*=this.timeScale,this.elapsed+=d,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=d,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case r.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=d,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(n.TWEEN_START,this.callbacks.onStart)));for(var c=!1,g=0;g<this.totalData;g++){var m=this.data[g];this.updateTweenData(this,m,d)&&(c=!0)}c||this.nextState();break;case r.LOOP_DELAY:this.countdown-=d,this.countdown<=0&&(this.state=r.ACTIVE,this.dispatchTweenEvent(n.TWEEN_LOOP,this.callbacks.onLoop));break;case r.OFFSET_DELAY:this.countdown-=d,this.countdown<=0&&(this.state=r.ACTIVE);break;case r.COMPLETE_DELAY:this.countdown-=d,this.countdown<=0&&(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===r.PENDING_REMOVE},dispatchTweenDataEvent:function(u,d,c){this.isSeeking||(this.emit(u,this,c.key,c.target,c.current,c.previous),d&&(d.params[1]=c.target,d.func.apply(d.scope,d.params)))},dispatchTweenEvent:function(u,d){this.isSeeking||(this.emit(u,this,this.targets),d&&(d.params[1]=this.targets,d.func.apply(d.scope,d.params)))},setStateFromEnd:function(u,d,c){return d.yoyo?(d.elapsed=c,d.progress=c/d.duration,d.flipX&&d.target.toggleFlipX(),d.flipY&&d.target.toggleFlipY(),this.dispatchTweenDataEvent(n.TWEEN_YOYO,u.callbacks.onYoyo,d),d.start=d.getStartValue(d.target,d.key,d.start,d.index,u.totalTargets,u),r.PLAYING_BACKWARD):d.repeatCounter>0?(d.repeatCounter--,d.elapsed=c,d.progress=c/d.duration,d.flipX&&d.target.toggleFlipX(),d.flipY&&d.target.toggleFlipY(),d.start=d.getStartValue(d.target,d.key,d.start,d.index,u.totalTargets,u),d.end=d.getEndValue(d.target,d.key,d.start,d.index,u.totalTargets,u),d.repeatDelay>0?(d.elapsed=d.repeatDelay-c,d.current=d.start,d.target[d.key]=d.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(n.TWEEN_REPEAT,u.callbacks.onRepeat,d),r.PLAYING_FORWARD)):r.COMPLETE},setStateFromStart:function(u,d,c){return d.repeatCounter>0?(d.repeatCounter--,d.elapsed=c,d.progress=c/d.duration,d.flipX&&d.target.toggleFlipX(),d.flipY&&d.target.toggleFlipY(),d.end=d.getEndValue(d.target,d.key,d.start,d.index,u.totalTargets,u),d.repeatDelay>0?(d.elapsed=d.repeatDelay-c,d.current=d.start,d.target[d.key]=d.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(n.TWEEN_REPEAT,u.callbacks.onRepeat,d),r.PLAYING_FORWARD)):r.COMPLETE},updateTweenData:function(u,d,c){var g=d.target;switch(d.state){case r.PLAYING_FORWARD:case r.PLAYING_BACKWARD:if(!g){d.state=r.COMPLETE;break}var m=d.elapsed,x=d.duration,y=0;m+=c,m>x&&(y=m-x,m=x);var T=d.state===r.PLAYING_FORWARD,S=m/x;if(d.elapsed=m,d.progress=S,d.previous=d.current,S===1)T?(d.current=d.end,g[d.key]=d.end,d.hold>0?(d.elapsed=d.hold-y,d.state=r.HOLD_DELAY):d.state=this.setStateFromEnd(u,d,y)):(d.current=d.start,g[d.key]=d.start,d.state=this.setStateFromStart(u,d,y));else{var C=T?d.ease(S):d.ease(1-S);d.current=d.start+(d.end-d.start)*C,g[d.key]=d.current}this.dispatchTweenDataEvent(n.TWEEN_UPDATE,u.callbacks.onUpdate,d);break;case r.DELAY:d.elapsed-=c,d.elapsed<=0&&(d.elapsed=Math.abs(d.elapsed),d.state=r.PENDING_RENDER);break;case r.REPEAT_DELAY:d.elapsed-=c,d.elapsed<=0&&(d.elapsed=Math.abs(d.elapsed),d.state=r.PLAYING_FORWARD,this.dispatchTweenDataEvent(n.TWEEN_REPEAT,u.callbacks.onRepeat,d));break;case r.HOLD_DELAY:d.elapsed-=c,d.elapsed<=0&&(d.state=this.setStateFromEnd(u,d,Math.abs(d.elapsed)));break;case r.PENDING_RENDER:g?(d.start=d.getStartValue(g,d.key,g[d.key],d.index,u.totalTargets,u),d.end=d.getEndValue(g,d.key,d.start,d.index,u.totalTargets,u),d.current=d.start,g[d.key]=d.start,d.state=r.PLAYING_FORWARD):d.state=r.COMPLETE;break}return d.state!==r.COMPLETE}});v.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],h.register("tween",function(u){return this.scene.sys.tweens.add(u)}),o.register("tween",function(u){return this.scene.sys.tweens.create(u)}),t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={TIMELINE_COMPLETE:e(1466),TIMELINE_LOOP:e(1467),TIMELINE_PAUSE:e(1468),TIMELINE_RESUME:e(1469),TIMELINE_START:e(1470),TIMELINE_UPDATE:e(1471),TWEEN_ACTIVE:e(1472),TWEEN_COMPLETE:e(1473),TWEEN_LOOP:e(1474),TWEEN_REPEAT:e(1475),TWEEN_START:e(1476),TWEEN_STOP:e(1477),TWEEN_UPDATE:e(1478),TWEEN_YOYO:e(1479)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h,r,a,v,u,d,c,g,m,x,y){return{target:s,index:l,key:n,getActiveValue:r,getEndValue:o,getStartValue:h,ease:a,duration:0,totalDuration:0,delay:0,yoyo:d,hold:0,repeat:0,repeatDelay:0,flipX:x,flipY:y,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:v,duration:u,hold:c,repeat:g,repeatDelay:m},state:0}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(68),l=function(n){return s(n,-Math.PI,Math.PI)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(68),l=function(n){return s(n,-180,180)};t.exports=l},function(t,f,e){var s={};t.exports=s;var l=e(83),n=e(32);(function(){s.fromVertices=function(o){for(var h={},r=0;r<o.length;r++){var a=(r+1)%o.length,v=l.normalise({x:o[a].y-o[r].y,y:o[r].x-o[a].x}),u=v.y===0?1/0:v.x/v.y;u=u.toFixed(3).toString(),h[u]=v}return n.values(h)},s.rotate=function(o,h){if(h!==0)for(var r=Math.cos(h),a=Math.sin(h),v=0;v<o.length;v++){var u=o[v],d;d=u.x*r-u.y*a,u.y=u.x*a+u.y*r,u.x=d}}})()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={AFTER_ADD:e(1504),AFTER_REMOVE:e(1505),AFTER_UPDATE:e(1506),BEFORE_ADD:e(1507),BEFORE_REMOVE:e(1508),BEFORE_UPDATE:e(1509),COLLISION_ACTIVE:e(1510),COLLISION_END:e(1511),COLLISION_START:e(1512),DRAG_END:e(1513),DRAG:e(1514),DRAG_START:e(1515),PAUSE:e(1516),RESUME:e(1517),SLEEP_END:e(1518),SLEEP_START:e(1519)}},function(t,f,e){var s={};t.exports=s;var l=e(274),n=e(250),o=e(84);(function(){s.collisions=function(h,r){for(var a=[],v=r.pairs.table,u=r.metrics,d=0;d<h.length;d++){var c=h[d][0],g=h[d][1];if(!((c.isStatic||c.isSleeping)&&(g.isStatic||g.isSleeping))&&!!s.canCollide(c.collisionFilter,g.collisionFilter)&&(u.midphaseTests+=1,o.overlaps(c.bounds,g.bounds)))for(var m=c.parts.length>1?1:0;m<c.parts.length;m++)for(var x=c.parts[m],y=g.parts.length>1?1:0;y<g.parts.length;y++){var T=g.parts[y];if(x===c&&T===g||o.overlaps(x.bounds,T.bounds)){var S=n.id(x,T),C=v[S],E;C&&C.isActive?E=C.collision:E=null;var P=l.collides(x,T,E);u.narrowphaseTests+=1,P.reused&&(u.narrowReuseCount+=1),P.collided&&(a.push(P),u.narrowDetections+=1)}}}return a},s.canCollide=function(h,r){return h.group===r.group&&h.group!==0?h.group>0:(h.mask&r.category)!==0&&(r.mask&h.category)!==0}})()},function(t,f,e){var s={};t.exports=s;var l=e(64),n=e(83);(function(){s.collides=function(o,h,r){var a,v,u,d,c=!1;if(r){var g=o.parent,m=h.parent,x=g.speed*g.speed+g.angularSpeed*g.angularSpeed+m.speed*m.speed+m.angularSpeed*m.angularSpeed;c=r&&r.collided&&x<.2,d=r}else d={collided:!1,bodyA:o,bodyB:h};if(r&&c){var y=d.axisBody,T=y===o?h:o,S=[y.axes[r.axisNumber]];if(u=s._overlapAxes(y.vertices,T.vertices,S),d.reused=!0,u.overlap<=0)return d.collided=!1,d}else{if(a=s._overlapAxes(o.vertices,h.vertices,o.axes),a.overlap<=0||(v=s._overlapAxes(h.vertices,o.vertices,h.axes),v.overlap<=0))return d.collided=!1,d;a.overlap<v.overlap?(u=a,d.axisBody=o):(u=v,d.axisBody=h),d.axisNumber=u.axisNumber}d.bodyA=o.id<h.id?o:h,d.bodyB=o.id<h.id?h:o,d.collided=!0,d.depth=u.overlap,d.parentA=d.bodyA.parent,d.parentB=d.bodyB.parent,o=d.bodyA,h=d.bodyB,n.dot(u.axis,n.sub(h.position,o.position))<0?d.normal={x:u.axis.x,y:u.axis.y}:d.normal={x:-u.axis.x,y:-u.axis.y},d.tangent=n.perp(d.normal),d.penetration=d.penetration||{},d.penetration.x=d.normal.x*d.depth,d.penetration.y=d.normal.y*d.depth;var C=s._findSupports(o,h,d.normal),E=[];if(l.contains(o.vertices,C[0])&&E.push(C[0]),l.contains(o.vertices,C[1])&&E.push(C[1]),E.length<2){var P=s._findSupports(h,o,n.neg(d.normal));l.contains(h.vertices,P[0])&&E.push(P[0]),E.length<2&&l.contains(h.vertices,P[1])&&E.push(P[1])}return E.length<1&&(E=[C[0]]),d.supports=E,d},s._overlapAxes=function(o,h,r){for(var a=n._temp[0],v=n._temp[1],u={overlap:Number.MAX_VALUE},d,c,g=0;g<r.length;g++){if(c=r[g],s._projectToAxis(a,o,c),s._projectToAxis(v,h,c),d=Math.min(a.max-v.min,v.max-a.min),d<=0)return u.overlap=d,u;d<u.overlap&&(u.overlap=d,u.axis=c,u.axisNumber=g)}return u},s._projectToAxis=function(o,h,r){for(var a=n.dot(h[0],r),v=a,u=1;u<h.length;u+=1){var d=n.dot(h[u],r);d>v?v=d:d<a&&(a=d)}o.min=a,o.max=v},s._findSupports=function(o,h,r){for(var a=Number.MAX_VALUE,v=n._temp[0],u=h.vertices,d=o.position,c,g,m,x,y=0;y<u.length;y++)g=u[y],v.x=g.x-d.x,v.y=g.y-d.y,c=-n.dot(r,v),c<a&&(a=c,m=g);var T=m.index-1>=0?m.index-1:u.length-1;g=u[T],v.x=g.x-d.x,v.y=g.y-d.y,a=-n.dot(r,v),x=g;var S=(m.index+1)%u.length;return g=u[S],v.x=g.x-d.x,v.y=g.y-d.y,c=-n.dot(r,v),c<a&&(x=g),[m,x]}})()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={AlignTo:e(601),Angle:e(602),Call:e(603),GetFirst:e(604),GetLast:e(605),GridAlign:e(606),IncAlpha:e(678),IncX:e(679),IncXY:e(680),IncY:e(681),PlaceOnCircle:e(682),PlaceOnEllipse:e(683),PlaceOnLine:e(684),PlaceOnRectangle:e(685),PlaceOnTriangle:e(686),PlayAnimation:e(687),PropertyValueInc:e(46),PropertyValueSet:e(27),RandomCircle:e(688),RandomEllipse:e(689),RandomLine:e(690),RandomRectangle:e(691),RandomTriangle:e(692),Rotate:e(693),RotateAround:e(694),RotateAroundDistance:e(695),ScaleX:e(696),ScaleXY:e(697),ScaleY:e(698),SetAlpha:e(699),SetBlendMode:e(700),SetDepth:e(701),SetHitArea:e(702),SetOrigin:e(703),SetRotation:e(704),SetScale:e(705),SetScaleX:e(706),SetScaleY:e(707),SetScrollFactor:e(708),SetScrollFactorX:e(709),SetScrollFactorY:e(710),SetTint:e(711),SetVisible:e(712),SetX:e(713),SetXY:e(714),SetY:e(715),ShiftPosition:e(716),Shuffle:e(717),SmootherStep:e(718),SmoothStep:e(719),Spread:e(720),ToggleVisible:e(721),WrapInRectangle:e(722)}},function(t,f,e){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(123),l=[];l[s.BOTTOM_CENTER]=e(277),l[s.BOTTOM_LEFT]=e(278),l[s.BOTTOM_RIGHT]=e(279),l[s.LEFT_BOTTOM]=e(280),l[s.LEFT_CENTER]=e(281),l[s.LEFT_TOP]=e(282),l[s.RIGHT_BOTTOM]=e(283),l[s.RIGHT_CENTER]=e(284),l[s.RIGHT_TOP]=e(285),l[s.TOP_CENTER]=e(286),l[s.TOP_LEFT]=e(287),l[s.TOP_RIGHT]=e(288);var n=function(o,h,r,a,v){return l[r](o,h,a,v)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(42),l=e(87),n=e(88),o=e(52),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),n(r,l(a)+v),o(r,s(a)+u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(42),l=e(43),n=e(53),o=e(52),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),n(r,l(a)-v),o(r,s(a)+u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(42),l=e(44),n=e(54),o=e(52),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),n(r,l(a)+v),o(r,s(a)+u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(42),l=e(43),n=e(55),o=e(54),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),o(r,l(a)-v),n(r,s(a)+u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(89),l=e(43),n=e(90),o=e(54),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),o(r,l(a)-v),n(r,s(a)+u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(43),l=e(45),n=e(54),o=e(52),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),n(r,s(a)-v),o(r,l(a)-u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(42),l=e(44),n=e(55),o=e(53),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),o(r,l(a)+v),n(r,s(a)+u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(89),l=e(44),n=e(90),o=e(53),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),o(r,l(a)+v),n(r,s(a)+u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(44),l=e(45),n=e(53),o=e(52),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),n(r,s(a)+v),o(r,l(a)-u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(87),l=e(45),n=e(55),o=e(88),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),o(r,s(a)+v),n(r,l(a)-u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(43),l=e(45),n=e(55),o=e(53),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),o(r,s(a)-v),n(r,l(a)-u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(44),l=e(45),n=e(55),o=e(54),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),o(r,s(a)+v),n(r,l(a)-u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(123),l=[];l[s.BOTTOM_CENTER]=e(290),l[s.BOTTOM_LEFT]=e(291),l[s.BOTTOM_RIGHT]=e(292),l[s.CENTER]=e(293),l[s.LEFT_CENTER]=e(295),l[s.RIGHT_CENTER]=e(296),l[s.TOP_CENTER]=e(297),l[s.TOP_LEFT]=e(298),l[s.TOP_RIGHT]=e(299),l[s.LEFT_BOTTOM]=l[s.BOTTOM_LEFT],l[s.LEFT_TOP]=l[s.TOP_LEFT],l[s.RIGHT_BOTTOM]=l[s.BOTTOM_RIGHT],l[s.RIGHT_TOP]=l[s.TOP_RIGHT];var n=function(o,h,r,a,v){return l[r](o,h,a,v)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(42),l=e(87),n=e(55),o=e(88),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),o(r,l(a)+v),n(r,s(a)+u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(42),l=e(43),n=e(55),o=e(53),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),o(r,l(a)-v),n(r,s(a)+u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(42),l=e(44),n=e(55),o=e(54),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),o(r,l(a)+v),n(r,s(a)+u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(294),l=e(87),n=e(89),o=function(h,r,a,v){return a===void 0&&(a=0),v===void 0&&(v=0),s(h,l(r)+a,n(r)+v),h};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(88),l=e(90),n=function(o,h,r){return s(o,h),l(o,r)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(89),l=e(43),n=e(90),o=e(53),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),o(r,l(a)-v),n(r,s(a)+u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(89),l=e(44),n=e(90),o=e(54),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),o(r,l(a)+v),n(r,s(a)+u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(87),l=e(45),n=e(88),o=e(52),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),n(r,s(a)+v),o(r,l(a)-u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(43),l=e(45),n=e(53),o=e(52),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),n(r,s(a)-v),o(r,l(a)-u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(44),l=e(45),n=e(54),o=e(52),h=function(r,a,v,u){return v===void 0&&(v=0),u===void 0&&(u=0),n(r,s(a)+v),o(r,l(a)-u),r};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(169),l=e(98),n=e(14),o=e(4),h=function(r,a,v){v===void 0&&(v=new o);var u=l(a,0,n.PI2);return s(r,u,v)};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(302),l=e(169),n=e(98),o=e(14),h=function(r,a,v,u){u===void 0&&(u=[]),!a&&v>0&&(a=s(r)/v);for(var d=0;d<a;d++){var c=n(d/a,0,o.PI2);u.push(l(r,c))}return u};t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return 2*(Math.PI*s.radius)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(18),l=2,n={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o){return o===void 0&&(o=1),this.alpha=o,this},alpha:{get:function(){return this._alpha},set:function(o){var h=s(o,0,1);this._alpha=h,h===0?this.renderFlags&=~l:this.renderFlags|=l}}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(35),l={_blendMode:s.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(n){typeof n=="string"&&(n=s[n]),n|=0,n>=-1&&(this._blendMode=n)}},setBlendMode:function(n){return this.blendMode=n,this}};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={_depth:0,depth:{get:function(){return this._depth},set:function(s){this.displayList&&this.displayList.queueDepthSort(),this._depth=s}},setDepth:function(s){return s===void 0&&(s=0),this.depth=s,this}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(171),l=e(130),n=function(o,h,r,a){a===void 0&&(a=[]),!h&&r>0&&(h=l(o)/r);for(var v=0;v<h;v++){var u=v/h;a.push(s(o,u))}return a};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o,h){return h===void 0&&(h=new s),h.x=n.x1+(n.x2-n.x1)*o,h.y=n.y1+(n.y2-n.y1)*o,h};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=Math.cos(o),r=Math.sin(o),a=s.x-l,v=s.y-n;return s.x=a*h-v*r+l,s.y=a*r+v*h+n,s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(310),l=e(311),n={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o){return o===void 0&&(this.texture||this.shader)&&(o=this),new s(this.scene,o)},createGeometryMask:function(o){return o===void 0&&this.type==="Graphics"&&(o=this),new l(this.scene,o)}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(22),n=e(91),o=new s({initialize:function(r,a){var v=r.sys.renderer;this.renderer=v,this.bitmapMask=a,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),r.sys.game.events.on(l.CONTEXT_RESTORED,this.createMask,this),v&&v.on(n.RESIZE,this.createMask,this)},createMask:function(){var h=this.renderer;if(!(!h||!h.gl)){this.mainTexture&&this.clearMask();var r=h.width,a=h.height,v=(r&r-1)===0&&(a&a-1)===0,u=h.gl,d=v?u.REPEAT:u.CLAMP_TO_EDGE,c=u.LINEAR;this.mainTexture=h.createTexture2D(0,c,c,d,d,u.RGBA,null,r,a),this.maskTexture=h.createTexture2D(0,c,c,d,d,u.RGBA,null,r,a),this.mainFramebuffer=h.createFramebuffer(r,a,this.mainTexture,!0),this.maskFramebuffer=h.createFramebuffer(r,a,this.maskTexture,!0)}},clearMask:function(){var h=this.renderer;!h||!h.gl||!this.mainTexture||(h.deleteTexture(this.mainTexture),h.deleteTexture(this.maskTexture),h.deleteFramebuffer(this.mainFramebuffer),h.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(h){this.bitmapMask=h},preRenderWebGL:function(h,r,a){h.pipelines.BITMAPMASK_PIPELINE.beginMask(this,r,a)},postRenderWebGL:function(h,r){h.pipelines.BITMAPMASK_PIPELINE.endMask(this,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(n.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o,h){this.geometryMask=h,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(n){return this.geometryMask=n,this},setInvertAlpha:function(n){return n===void 0&&(n=!0),this.invertAlpha=n,this},preRenderWebGL:function(n,o,h){var r=n.gl;n.flush(),n.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),n.maskCount=0),n.currentCameraMask.mask!==this&&(n.currentMask.mask=this),n.maskStack.push({mask:this,camera:h}),this.applyStencil(n,h,!0),n.maskCount++},applyStencil:function(n,o,h){var r=n.gl,a=this.geometryMask,v=n.maskCount;r.colorMask(!1,!1,!1,!1),h?(r.stencilFunc(r.EQUAL,v,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,v+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),a.renderWebGL(n,a,o),n.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),h?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,v+1,255):r.stencilFunc(r.EQUAL,v+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,v,255):r.stencilFunc(r.EQUAL,v,255)},postRenderWebGL:function(n){var o=n.gl;n.maskStack.pop(),n.maskCount--,n.flush();var h=n.currentMask;if(n.maskStack.length===0)h.mask=null,o.disable(o.STENCIL_TEST);else{var r=n.maskStack[n.maskStack.length-1];r.mask.applyStencil(n,r.camera,!1),n.currentCameraMask.mask!==r.mask?(h.mask=r.mask,h.camera=r.camera):h.mask=null}},preRenderCanvas:function(n,o,h){var r=this.geometryMask;n.currentContext.save(),r.renderCanvas(n,r,h,null,null,!0),n.currentContext.clip()},postRenderCanvas:function(n){n.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(s,l){return l===void 0&&(l=s),this.scrollFactorX=s,this.scrollFactorY=l,this}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(14),l=e(25),n=e(177),o=e(269),h=e(270),r=e(3),a=4,v={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(u){this._scaleX=u,this._scaleY=u,u===0?this.renderFlags&=~a:this.renderFlags|=a}},scaleX:{get:function(){return this._scaleX},set:function(u){this._scaleX=u,u===0?this.renderFlags&=~a:this.renderFlags|=a}},scaleY:{get:function(){return this._scaleY},set:function(u){this._scaleY=u,u===0?this.renderFlags&=~a:this.renderFlags|=a}},angle:{get:function(){return h(this._rotation*s.RAD_TO_DEG)},set:function(u){this.rotation=h(u)*s.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=o(u)}},setPosition:function(u,d,c,g){return u===void 0&&(u=0),d===void 0&&(d=u),c===void 0&&(c=0),g===void 0&&(g=0),this.x=u,this.y=d,this.z=c,this.w=g,this},copyPosition:function(u){return u.x!==void 0&&(this.x=u.x),u.y!==void 0&&(this.y=u.y),u.z!==void 0&&(this.z=u.z),u.w!==void 0&&(this.w=u.w),this},setRandomPosition:function(u,d,c,g){return u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=u+Math.random()*c,this.y=d+Math.random()*g,this},setRotation:function(u){return u===void 0&&(u=0),this.rotation=u,this},setAngle:function(u){return u===void 0&&(u=0),this.angle=u,this},setScale:function(u,d){return u===void 0&&(u=1),d===void 0&&(d=u),this.scaleX=u,this.scaleY=d,this},setX:function(u){return u===void 0&&(u=0),this.x=u,this},setY:function(u){return u===void 0&&(u=0),this.y=u,this},setZ:function(u){return u===void 0&&(u=0),this.z=u,this},setW:function(u){return u===void 0&&(u=0),this.w=u,this},getLocalTransformMatrix:function(u){return u===void 0&&(u=new l),u.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(u,d){u===void 0&&(u=new l),d===void 0&&(d=new l);var c=this.parentContainer;if(!c)return this.getLocalTransformMatrix(u);for(u.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);c;)d.applyITRS(c.x,c.y,c._rotation,c._scaleX,c._scaleY),d.multiply(u,u),c=c.parentContainer;return u},getLocalPoint:function(u,d,c,g){c||(c=new r),g||(g=this.scene.sys.cameras.main);var m=g.scrollX,x=g.scrollY,y=u+m*this.scrollFactorX-m,T=d+x*this.scrollFactorY-x;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,T,c):n(y,T,this.x,this.y,this.rotation,this.scaleX,this.scaleY,c),this._originComponent&&(c.x+=this._displayOriginX,c.y+=this._displayOriginY),c},getParentRotation:function(){for(var u=0,d=this.parentContainer;d;)u+=d.rotation,d=d.parentContainer;return u}};t.exports=v},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=1,s={_visible:!0,visible:{get:function(){return this._visible},set:function(l){l?(this._visible=!0,this.renderFlags|=e):(this._visible=!1,this.renderFlags&=~e)}},setVisible:function(l){return this.visible=l,this}};t.exports=s},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={CHANGE_DATA:e(638),CHANGE_DATA_KEY:e(639),DESTROY:e(640),REMOVE_DATA:e(641),SET_DATA:e(642)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(130),l=e(4),n=function(o,h,r,a){if(a===void 0&&(a=[]),!h&&!r)return a;h?r=Math.round(s(o)/h):h=s(o)/r;for(var v=o.x,u=o.y,d=0,c=0;c<r;c++)switch(a.push(new l(v,u)),d){case 0:v+=h,v>=o.right&&(d=1,u+=v-o.right,v=o.right);break;case 1:u+=h,u>=o.bottom&&(d=2,v-=u-o.bottom,u=o.bottom);break;case 2:v-=h,v<=o.left&&(d=3,u-=o.left-v,v=o.left);break;case 3:u-=h,u<=o.top&&(d=0,u=o.top);break}return a};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){l===void 0&&(l=1),n===void 0&&(n=[]);var o=Math.round(s.x1),h=Math.round(s.y1),r=Math.round(s.x2),a=Math.round(s.y2),v=Math.abs(r-o),u=Math.abs(a-h),d=o<r?1:-1,c=h<a?1:-1,g=v-u;n.push({x:o,y:h});for(var m=1;!(o===r&&h===a);){var x=g<<1;x>-u&&(g-=u,o+=d),x<v&&(g+=v,h+=c),m%l===0&&n.push({x:o,y:h}),m++}return n};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){if(l.length){if(l.length===1)return l[0]}else return NaN;var o=1,h,r;if(n){if(s<l[0][n])return l[0];for(;l[o][n]<s;)o++}else for(;l[o]<s;)o++;return o>l.length&&(o=l.length),n?(h=l[o-1][n],r=l[o][n],r-s<=s-h?l[o]:l[o-1]):(h=l[o-1],r=l[o],r-s<=s-h?r:h)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o,h,r,a,v){v===void 0&&(v=!1),this.textureKey=o,this.textureFrame=h,this.index=r,this.frame=a,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=v},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l=/\D/g;return s.sort(function(n,o){return parseInt(n.replace(l,""),10)-parseInt(o.replace(l,""),10)}),s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(185),l=e(0),n=e(102),o=e(9),h=e(132),r=e(22),a=e(2),v=e(6),u=e(186),d=e(322),c=new l({Extends:o,initialize:function(m){o.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new n,this.mixes=new n,this.paused=!1,this.name="AnimationManager",m.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(g,m,x){var y=this.anims,T=this.mixes,S=typeof g=="string"?g:g.key,C=typeof m=="string"?m:m.key;if(y.has(S)&&y.has(C)){var E=T.get(S);E||(E={}),E[C]=x,T.set(S,E)}return this},removeMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=x.get(y);if(T)if(m){var S=typeof m=="string"?m:m.key;T.hasOwnProperty(S)&&delete T[S]}else m||x.delete(y);return this},getMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=typeof m=="string"?m:m.key,S=x.get(y);return S&&S.hasOwnProperty(T)?S[T]:0},add:function(g,m){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(m.key=g,this.anims.set(g,m),this.emit(h.ADD_ANIMATION,g,m),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,m){var x=[],y=this.game.cache.json.get(g);if(!y)return x;var T=this,S=v(y,"meta",null),C=v(y,"frames",null);if(S&&C){var E=v(S,"frameTags",[]);E.forEach(function(P){var M=[],R=a(P,"name",null),A=a(P,"from",0),O=a(P,"to",0),F=a(P,"direction","forward");if(!!R&&(!m||m&&m.indexOf(R)>-1)){for(var I=[],w=Number.MAX_SAFE_INTEGER,b=A;b<=O;b++){var Y=b.toString(),U=C[Y];if(U){var W=a(U,"duration",Number.MAX_SAFE_INTEGER);W<w&&(w=W),I.push({frame:Y,duration:W})}}I.forEach(function(G){M.push({key:g,frame:G.frame,duration:w-G.duration})});var D=w*M.length;F==="reverse"&&(M=M.reverse());var L={key:R,frames:M,duration:D,yoyo:F==="pingpong"},B=T.create(L);B&&x.push(B)}})}return x},create:function(g){var m=g.key,x=!1;return m&&(x=this.get(m),x||(x=new s(this,m,g),this.anims.set(m,x),this.emit(h.ADD_ANIMATION,m,x))),x},fromJSON:function(g,m){m===void 0&&(m=!1),m&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var x=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var y=0;y<g.anims.length;y++)x.push(this.create(g.anims[y]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&x.push(this.create(g));return x},generateFrameNames:function(g,m){var x=v(m,"prefix",""),y=v(m,"start",0),T=v(m,"end",0),S=v(m,"suffix",""),C=v(m,"zeroPad",0),E=v(m,"outputArray",[]),P=v(m,"frames",!1),M=this.textureManager.get(g);if(!M)return E;var R;if(m)for(P||(P=d(y,T)),R=0;R<P.length;R++){var A=x+u(P[R],C,"0",1)+S;M.has(A)?E.push({key:g,frame:A}):console.warn("generateFrameNames: Frame missing: "+A+" from texture: "+g)}else for(P=M.getFrameNames(),R=0;R<P.length;R++)E.push({key:g,frame:P[R]});return E},generateFrameNumbers:function(g,m){var x=v(m,"start",0),y=v(m,"end",-1),T=v(m,"first",!1),S=v(m,"outputArray",[]),C=v(m,"frames",!1),E=this.textureManager.get(g);if(!E)return S;T&&E.has(T)&&S.push({key:g,frame:T}),C||(y===-1&&(y=E.frameTotal-2),C=d(x,y));for(var P=0;P<C.length;P++)E.has(C[P])?S.push({key:g,frame:C[P]}):console.warn("generateFrameNumbers: Frame "+P+" missing from texture: "+g);return S},get:function(g){return this.anims.get(g)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(h.PAUSE_ALL)),this},play:function(g,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)m[x].anims.play(g);return this},staggerPlay:function(g,m,x,y){x===void 0&&(x=0),y===void 0&&(y=!0),Array.isArray(m)||(m=[m]);var T=m.length;y||T--;for(var S=0;S<m.length;S++){var C=x<0?Math.abs(x)*(T-S):x*S;m[S].anims.playAfterDelay(g,C)}return this},remove:function(g){var m=this.get(g);return m&&(this.emit(h.REMOVE_ANIMATION,g,m),this.anims.delete(g),this.removeMix(g)),m},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(h.RESUME_ALL)),this},toJSON:function(g){var m={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?m.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(x,y){m.anims.push(y.toJSON())}),m},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=c},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=[],r,a=!1;if((n||o)&&(a=!0,n||(n=""),o||(o="")),l<s)for(r=s;r>=l;r--)a?h.push(n+r.toString()+o):h.push(r);else for(r=s;r<=l;r++)a?h.push(n+r.toString()+o):h.push(r);return h};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(102),n=e(9),o=e(324),h=new s({initialize:function(){this.entries=new l,this.events=new n},add:function(r,a){return this.entries.set(r,a),this.events.emit(o.ADD,this,r,a),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var a=this.get(r);return a&&(this.entries.delete(r),this.events.emit(o.REMOVE,this,r,a.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ADD:e(736),REMOVE:e(737)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(323),l=e(0),n=e(22),o=new l({initialize:function(r){this.game=r,this.binary=new s,this.bitmapFont=new s,this.json=new s,this.physics=new s,this.shader=new s,this.audio=new s,this.video=new s,this.text=new s,this.html=new s,this.obj=new s,this.tilemap=new s,this.xml=new s,this.custom={},this.game.events.once(n.DESTROY,this.destroy,this)},addCustom:function(h){return this.custom.hasOwnProperty(h)||(this.custom[h]=new s),this.custom[h]},destroy:function(){for(var h=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<h.length;r++)this[h[r]].destroy(),this[h[r]]=null;for(var a in this.custom)this.custom[a].destroy();this.custom=null,this.game=null}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(133),l=e(190),n=e(18),o=e(0),h=e(11),r=e(333),a=e(37),v=e(135),u=e(10),d=e(3),c=new o({Extends:s,Mixins:[h.Flip,h.Tint,h.Pipeline],initialize:function(m,x,y,T){s.call(this,m,x,y,T),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new d(1,1),this.followOffset=new d,this.deadzone=null,this._follow=null},setDeadzone:function(g,m){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=m):this.deadzone=new u(0,0,g,m),this._follow){var x=this.width/2,y=this.height/2,T=this._follow.x-this.followOffset.x,S=this._follow.y-this.followOffset.y;this.midPoint.set(T,S),this.scrollX=T-x,this.scrollY=S-y}l(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,m,x,y,T,S){return this.fadeEffect.start(!1,g,m,x,y,!0,T,S)},fadeOut:function(g,m,x,y,T,S){return this.fadeEffect.start(!0,g,m,x,y,!0,T,S)},fadeFrom:function(g,m,x,y,T,S,C){return this.fadeEffect.start(!1,g,m,x,y,T,S,C)},fade:function(g,m,x,y,T,S,C){return this.fadeEffect.start(!0,g,m,x,y,T,S,C)},flash:function(g,m,x,y,T,S,C){return this.flashEffect.start(g,m,x,y,T,S,C)},shake:function(g,m,x,y,T){return this.shakeEffect.start(g,m,x,y,T)},pan:function(g,m,x,y,T,S,C){return this.panEffect.start(g,m,x,y,T,S,C)},rotateTo:function(g,m,x,y,T,S,C){return this.rotateToEffect.start(g,m,x,y,T,S,C)},zoomTo:function(g,m,x,y,T,S){return this.zoomEffect.start(g,m,x,y,T,S)},preRender:function(){this.renderList.length=0;var g=this.width,m=this.height,x=g*.5,y=m*.5,T=this.zoom,S=this.matrix,C=g*this.originX,E=m*this.originY,P=this._follow,M=this.deadzone,R=this.scrollX,A=this.scrollY;M&&l(M,this.midPoint.x,this.midPoint.y);var O=!1;if(P&&!this.panEffect.isRunning){var F=P.x-this.followOffset.x,I=P.y-this.followOffset.y;M?(F<M.x?R=v(R,R-(M.x-F),this.lerp.x):F>M.right&&(R=v(R,R+(F-M.right),this.lerp.x)),I<M.y?A=v(A,A-(M.y-I),this.lerp.y):I>M.bottom&&(A=v(A,A+(I-M.bottom),this.lerp.y))):(R=v(R,F-C,this.lerp.x),A=v(A,I-E,this.lerp.y)),O=!0}this.useBounds&&(R=this.clampX(R),A=this.clampY(A)),this.roundPixels&&(C=Math.round(C),E=Math.round(E),R=Math.round(R),A=Math.round(A)),this.scrollX=R,this.scrollY=A;var w=R+x,b=A+y;this.midPoint.set(w,b);var Y=g/T,U=m/T,W=w-Y/2,D=b-U/2;this.roundPixels&&(W=Math.round(W),D=Math.round(D)),this.worldView.setTo(W,D,Y,U),S.applyITRS(this.x+C,this.y+E,this.rotation,T,T),S.translate(-C,-E),this.shakeEffect.preRender(),O&&this.emit(a.FOLLOW_UPDATE,this,P)},setLerp:function(g,m){return g===void 0&&(g=1),m===void 0&&(m=g),this.lerp.set(g,m),this},setFollowOffset:function(g,m){return g===void 0&&(g=0),m===void 0&&(m=0),this.followOffset.set(g,m),this},startFollow:function(g,m,x,y,T,S){m===void 0&&(m=!1),x===void 0&&(x=1),y===void 0&&(y=x),T===void 0&&(T=0),S===void 0&&(S=T),this._follow=g,this.roundPixels=m,x=n(x,0,1),y=n(y,0,1),this.lerp.set(x,y),this.followOffset.set(T,S);var C=this.width/2,E=this.height/2,P=g.x-T,M=g.y-S;return this.midPoint.set(P,M),this.scrollX=P-C,this.scrollY=M-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,m){this.visible&&(this.rotateToEffect.update(g,m),this.panEffect.update(g,m),this.zoomEffect.update(g,m),this.shakeEffect.update(g,m),this.flashEffect.update(g,m),this.fadeEffect.update(g,m))},destroy:function(){this.resetFX(),s.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=c},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(38),l=function(n){var o=new s;n=n.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(u,d,c,g){return d+d+c+c+g+g});var h=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(h){var r=parseInt(h[1],16),a=parseInt(h[2],16),v=parseInt(h[3],16);o.setTo(r,a,v)}return o};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){return o<<24|s<<16|l<<8|n};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){o===void 0&&(o={h:0,s:0,v:0}),s/=255,l/=255,n/=255;var h=Math.min(s,l,n),r=Math.max(s,l,n),a=r-h,v=0,u=r===0?0:a/r,d=r;return r!==h&&(r===s?v=(l-n)/a+(l<n?6:0):r===l?v=(n-s)/a+2:r===n&&(v=(s-l)/a+4),v/=6),o.hasOwnProperty("_h")?(o._h=v,o._s=u,o._v=d):(o.h=v,o.s=u,o.v=d),o};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s>16777215?{a:s>>>24,r:s>>16&255,g:s>>8&255,b:s&255}:{a:255,r:s>>16&255,g:s>>8&255,b:s&255}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(38),l=function(n){return new s(n.r,n.g,n.b,n.a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(38),l=function(n){var o=new s,h=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(n.toLowerCase());if(h){var r=parseInt(h[1],10),a=parseInt(h[2],10),v=parseInt(h[3],10),u=h[4]!==void 0?parseFloat(h[4]):1;o.setTo(r,a,v,u*255)}return o};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Fade:e(761),Flash:e(762),Pan:e(763),Shake:e(796),RotateTo:e(797),Zoom:e(798)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={In:e(764),Out:e(765),InOut:e(766)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={In:e(767),Out:e(768),InOut:e(769)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={In:e(770),Out:e(771),InOut:e(772)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={In:e(773),Out:e(774),InOut:e(775)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={In:e(776),Out:e(777),InOut:e(778)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={In:e(779),Out:e(780),InOut:e(781)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports=e(782)},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={In:e(783),Out:e(784),InOut:e(785)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={In:e(786),Out:e(787),InOut:e(788)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={In:e(789),Out:e(790),InOut:e(791)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={In:e(792),Out:e(793),InOut:e(794)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports=e(795)},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(33),n=e(347),o=e(2),h=e(6),r=e(7),a=e(193),v=e(1),u=e(197),d=e(187),c=new s({initialize:function(m){m===void 0&&(m={});var x=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff";this.width=h(m,"width",1024),this.height=h(m,"height",768),this.zoom=h(m,"zoom",1),this.parent=h(m,"parent",void 0),this.scaleMode=h(m,"scaleMode",0),this.expandParent=h(m,"expandParent",!0),this.autoRound=h(m,"autoRound",!1),this.autoCenter=h(m,"autoCenter",0),this.resizeInterval=h(m,"resizeInterval",500),this.fullscreenTarget=h(m,"fullscreenTarget",null),this.minWidth=h(m,"minWidth",0),this.maxWidth=h(m,"maxWidth",0),this.minHeight=h(m,"minHeight",0),this.maxHeight=h(m,"maxHeight",0);var T=h(m,"scale",null);T&&(this.width=h(T,"width",this.width),this.height=h(T,"height",this.height),this.zoom=h(T,"zoom",this.zoom),this.parent=h(T,"parent",this.parent),this.scaleMode=h(T,"mode",this.scaleMode),this.expandParent=h(T,"expandParent",this.expandParent),this.autoRound=h(T,"autoRound",this.autoRound),this.autoCenter=h(T,"autoCenter",this.autoCenter),this.resizeInterval=h(T,"resizeInterval",this.resizeInterval),this.fullscreenTarget=h(T,"fullscreenTarget",this.fullscreenTarget),this.minWidth=h(T,"min.width",this.minWidth),this.maxWidth=h(T,"max.width",this.maxWidth),this.minHeight=h(T,"min.height",this.minHeight),this.maxHeight=h(T,"max.height",this.maxHeight)),this.renderType=h(m,"type",l.AUTO),this.canvas=h(m,"canvas",null),this.context=h(m,"context",null),this.canvasStyle=h(m,"canvasStyle",null),this.customEnvironment=h(m,"customEnvironment",!1),this.sceneConfig=h(m,"scene",null),this.seed=h(m,"seed",[(Date.now()*Math.random()).toString()]),a.RND=new a.RandomDataGenerator(this.seed),this.gameTitle=h(m,"title",""),this.gameURL=h(m,"url","https://phaser.io"),this.gameVersion=h(m,"version",""),this.autoFocus=h(m,"autoFocus",!0),this.domCreateContainer=h(m,"dom.createContainer",!1),this.domBehindCanvas=h(m,"dom.behindCanvas",!1),this.domPointerEvents=h(m,"dom.pointerEvents","none"),this.inputKeyboard=h(m,"input.keyboard",!0),this.inputKeyboardEventTarget=h(m,"input.keyboard.target",window),this.inputKeyboardCapture=h(m,"input.keyboard.capture",[]),this.inputMouse=h(m,"input.mouse",!0),this.inputMouseEventTarget=h(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=h(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=h(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=h(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=h(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=h(m,"input.touch",n.input.touch),this.inputTouchEventTarget=h(m,"input.touch.target",null),this.inputTouchCapture=h(m,"input.touch.capture",!0),this.inputActivePointers=h(m,"input.activePointers",1),this.inputSmoothFactor=h(m,"input.smoothFactor",0),this.inputWindowEvents=h(m,"input.windowEvents",!0),this.inputGamepad=h(m,"input.gamepad",!1),this.inputGamepadEventTarget=h(m,"input.gamepad.target",window),this.disableContextMenu=h(m,"disableContextMenu",!1),this.audio=h(m,"audio",{}),this.hideBanner=h(m,"banner",null)===!1,this.hidePhaser=h(m,"banner.hidePhaser",!1),this.bannerTextColor=h(m,"banner.text",y),this.bannerBackgroundColor=h(m,"banner.background",x),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=h(m,"fps",null);var S=h(m,"render",m);this.pipeline=h(S,"pipeline",null),this.antialias=h(S,"antialias",!0),this.antialiasGL=h(S,"antialiasGL",!0),this.mipmapFilter=h(S,"mipmapFilter","LINEAR"),this.desynchronized=h(S,"desynchronized",!1),this.roundPixels=h(S,"roundPixels",!1),this.pixelArt=h(S,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=h(S,"transparent",!1),this.clearBeforeRender=h(S,"clearBeforeRender",!0),this.preserveDrawingBuffer=h(S,"preserveDrawingBuffer",!1),this.premultipliedAlpha=h(S,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=h(S,"failIfMajorPerformanceCaveat",!1),this.powerPreference=h(S,"powerPreference","default"),this.batchSize=h(S,"batchSize",4096),this.maxTextures=h(S,"maxTextures",-1),this.maxLights=h(S,"maxLights",10);var C=h(m,"backgroundColor",0);this.backgroundColor=d(C),this.transparent&&(this.backgroundColor=d(0),this.backgroundColor.alpha=0),this.preBoot=h(m,"callbacks.preBoot",v),this.postBoot=h(m,"callbacks.postBoot",v),this.physics=h(m,"physics",{}),this.defaultPhysicsSystem=h(this.physics,"default",!1),this.loaderBaseURL=h(m,"loader.baseURL",""),this.loaderPath=h(m,"loader.path","");var E=n.os.android?6:32;this.loaderMaxParallelDownloads=h(m,"loader.maxParallelDownloads",E),this.loaderCrossOrigin=h(m,"loader.crossOrigin",void 0),this.loaderResponseType=h(m,"loader.responseType",""),this.loaderAsync=h(m,"loader.async",!0),this.loaderUser=h(m,"loader.user",""),this.loaderPassword=h(m,"loader.password",""),this.loaderTimeout=h(m,"loader.timeout",0),this.loaderWithCredentials=h(m,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=h(m,"plugins",null),M=u.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:r(P)&&(this.installGlobalPlugins=o(P,"global",[]),this.installScenePlugins=o(P,"scene",[]),Array.isArray(P.default)?M=P.default:Array.isArray(P.defaultMerge)&&(M=M.concat(P.defaultMerge)))),this.defaultPlugins=M;var R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=h(m,"images.default",R+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=h(m,"images.missing",R+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=h(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=l.WEBGL:window.FORCE_CANVAS&&(this.renderType=l.CANVAS))}});t.exports=c},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={os:e(105),browser:e(136),features:e(191),input:e(808),audio:e(809),video:e(810),fullscreen:e(811),canvasFeatures:e(348)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(31),l={supportInverseAlpha:!1,supportNewBlendModes:!1};function n(){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",a="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",v=new Image;return v.onload=function(){var u=new Image;u.onload=function(){var d=s.create(u,6,1),c=d.getContext("2d");if(c.globalCompositeOperation="multiply",c.drawImage(v,0,0),c.drawImage(u,2,0),!c.getImageData(2,0,1,1))return!1;var g=c.getImageData(2,0,1,1).data;s.remove(u),l.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},u.src=r+"/wCKxvRF"+a},v.src=r+"AP804Oa6"+a,!1}function o(){var r=s.create(this,2,1),a=r.getContext("2d");a.fillStyle="rgba(10, 20, 30, 0.5)",a.fillRect(0,0,1,1);var v=a.getImageData(0,0,1,1);if(v===null)return!1;a.putImageData(v,1,0);var u=a.getImageData(1,0,1,1);return u.data[0]===v.data[0]&&u.data[1]===v.data[1]&&u.data[2]===v.data[2]&&u.data[3]===v.data[3]}function h(){return typeof importScripts!="function"&&document!==void 0&&(l.supportNewBlendModes=n(),l.supportInverseAlpha=o()),l}t.exports=h()},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){return Math.atan2(o-l,n-s)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return Math.atan2(l.y-s.y,l.x-s.x)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s=s%(2*Math.PI),s>=0?s:s+2*Math.PI};t.exports=e},function(t,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.x-l.x,o=s.y-l.y;return Math.sqrt(n*n+o*o)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=s-n,r=l-o;return h*h+r*r};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return n===void 0&&(n=1e-4),s>l-n};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return n===void 0&&(n=1e-4),s<l+n};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(357),l=function(n,o){return s(n)/s(o)/s(n-o)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){if(s===0)return 1;for(var l=s;--s;)l*=s;return l};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(h,r){var a=1-h;return a*a*a*r}function s(h,r){var a=1-h;return 3*a*a*h*r}function l(h,r){return 3*(1-h)*h*h*r}function n(h,r){return h*h*h*r}var o=function(h,r,a,v,u){return e(h,r)+s(h,a)+l(h,v)+n(h,u)};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(o,h){var r=1-o;return r*r*h}function s(o,h){return 2*(1-o)*o*h}function l(o,h){return o*o*h}var n=function(o,h,r,a){return e(o,h)+s(o,r)+l(o,a)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(184),l=function(n,o,h){return o+(h-o)*s(n,0,1)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l=Math.log(s)/.6931471805599453;return 1<<Math.ceil(l)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.x,o=s.y;return s.x=n*Math.cos(l)-o*Math.sin(l),s.y=n*Math.sin(l)+o*Math.cos(l),s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s>0?Math.ceil(s):Math.floor(s)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o){this.val=new Float32Array(9),o?this.copy(o):this.identity()},clone:function(){return new l(this)},set:function(n){return this.copy(n)},copy:function(n){var o=this.val,h=n.val;return o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[3],o[4]=h[4],o[5]=h[5],o[6]=h[6],o[7]=h[7],o[8]=h[8],this},fromMat4:function(n){var o=n.val,h=this.val;return h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[4],h[4]=o[5],h[5]=o[6],h[6]=o[8],h[7]=o[9],h[8]=o[10],this},fromArray:function(n){var o=this.val;return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],this},identity:function(){var n=this.val;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,this},transpose:function(){var n=this.val,o=n[1],h=n[2],r=n[5];return n[1]=n[3],n[2]=n[6],n[3]=o,n[5]=n[7],n[6]=h,n[7]=r,this},invert:function(){var n=this.val,o=n[0],h=n[1],r=n[2],a=n[3],v=n[4],u=n[5],d=n[6],c=n[7],g=n[8],m=g*v-u*c,x=-g*a+u*d,y=c*a-v*d,T=o*m+h*x+r*y;return T?(T=1/T,n[0]=m*T,n[1]=(-g*h+r*c)*T,n[2]=(u*h-r*v)*T,n[3]=x*T,n[4]=(g*o-r*d)*T,n[5]=(-u*o+r*a)*T,n[6]=y*T,n[7]=(-c*o+h*d)*T,n[8]=(v*o-h*a)*T,this):null},adjoint:function(){var n=this.val,o=n[0],h=n[1],r=n[2],a=n[3],v=n[4],u=n[5],d=n[6],c=n[7],g=n[8];return n[0]=v*g-u*c,n[1]=r*c-h*g,n[2]=h*u-r*v,n[3]=u*d-a*g,n[4]=o*g-r*d,n[5]=r*a-o*u,n[6]=a*c-v*d,n[7]=h*d-o*c,n[8]=o*v-h*a,this},determinant:function(){var n=this.val,o=n[0],h=n[1],r=n[2],a=n[3],v=n[4],u=n[5],d=n[6],c=n[7],g=n[8];return o*(g*v-u*c)+h*(-g*a+u*d)+r*(c*a-v*d)},multiply:function(n){var o=this.val,h=o[0],r=o[1],a=o[2],v=o[3],u=o[4],d=o[5],c=o[6],g=o[7],m=o[8],x=n.val,y=x[0],T=x[1],S=x[2],C=x[3],E=x[4],P=x[5],M=x[6],R=x[7],A=x[8];return o[0]=y*h+T*v+S*c,o[1]=y*r+T*u+S*g,o[2]=y*a+T*d+S*m,o[3]=C*h+E*v+P*c,o[4]=C*r+E*u+P*g,o[5]=C*a+E*d+P*m,o[6]=M*h+R*v+A*c,o[7]=M*r+R*u+A*g,o[8]=M*a+R*d+A*m,this},translate:function(n){var o=this.val,h=n.x,r=n.y;return o[6]=h*o[0]+r*o[3]+o[6],o[7]=h*o[1]+r*o[4]+o[7],o[8]=h*o[2]+r*o[5]+o[8],this},rotate:function(n){var o=this.val,h=o[0],r=o[1],a=o[2],v=o[3],u=o[4],d=o[5],c=Math.sin(n),g=Math.cos(n);return o[0]=g*h+c*v,o[1]=g*r+c*u,o[2]=g*a+c*d,o[3]=g*v-c*h,o[4]=g*u-c*r,o[5]=g*d-c*a,this},scale:function(n){var o=this.val,h=n.x,r=n.y;return o[0]=h*o[0],o[1]=h*o[1],o[2]=h*o[2],o[3]=r*o[3],o[4]=r*o[4],o[5]=r*o[5],this},fromQuat:function(n){var o=n.x,h=n.y,r=n.z,a=n.w,v=o+o,u=h+h,d=r+r,c=o*v,g=o*u,m=o*d,x=h*u,y=h*d,T=r*d,S=a*v,C=a*u,E=a*d,P=this.val;return P[0]=1-(x+T),P[3]=g+E,P[6]=m-C,P[1]=g-E,P[4]=1-(c+T),P[7]=y+S,P[2]=m+C,P[5]=y-S,P[8]=1-(c+x),this},normalFromMat4:function(n){var o=n.val,h=this.val,r=o[0],a=o[1],v=o[2],u=o[3],d=o[4],c=o[5],g=o[6],m=o[7],x=o[8],y=o[9],T=o[10],S=o[11],C=o[12],E=o[13],P=o[14],M=o[15],R=r*c-a*d,A=r*g-v*d,O=r*m-u*d,F=a*g-v*c,I=a*m-u*c,w=v*m-u*g,b=x*E-y*C,Y=x*P-T*C,U=x*M-S*C,W=y*P-T*E,D=y*M-S*E,L=T*M-S*P,B=R*L-A*D+O*W+F*U-I*Y+w*b;return B?(B=1/B,h[0]=(c*L-g*D+m*W)*B,h[1]=(g*U-d*L-m*Y)*B,h[2]=(d*D-c*U+m*b)*B,h[3]=(v*D-a*L-u*W)*B,h[4]=(r*L-v*U+u*Y)*B,h[5]=(a*U-r*D-u*b)*B,h[6]=(E*w-P*I+M*F)*B,h[7]=(P*O-C*w-M*A)*B,h[8]=(C*I-E*O+M*R)*B,this):null}});t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(364),n=e(1),o=e(39),h=1e-6,r=new Int8Array([1,2,0]),a=new Float32Array([0,0,0]),v=new o(1,0,0),u=new o(0,1,0),d=new o,c=new l,g=new s({initialize:function(x,y,T,S){this.onChangeCallback=n,this.set(x,y,T,S)},x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(m){this._y=m,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(m){this._z=m,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(m){this._w=m,this.onChangeCallback(this)}},copy:function(m){return this.set(m)},set:function(m,x,y,T,S){return S===void 0&&(S=!0),typeof m=="object"?(this._x=m.x||0,this._y=m.y||0,this._z=m.z||0,this._w=m.w||0):(this._x=m||0,this._y=x||0,this._z=y||0,this._w=T||0),S&&this.onChangeCallback(this),this},add:function(m){return this._x+=m.x,this._y+=m.y,this._z+=m.z,this._w+=m.w,this.onChangeCallback(this),this},subtract:function(m){return this._x-=m.x,this._y-=m.y,this._z-=m.z,this._w-=m.w,this.onChangeCallback(this),this},scale:function(m){return this._x*=m,this._y*=m,this._z*=m,this._w*=m,this.onChangeCallback(this),this},length:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return Math.sqrt(m*m+x*x+y*y+T*T)},lengthSq:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return m*m+x*x+y*y+T*T},normalize:function(){var m=this.x,x=this.y,y=this.z,T=this.w,S=m*m+x*x+y*y+T*T;return S>0&&(S=1/Math.sqrt(S),this._x=m*S,this._y=x*S,this._z=y*S,this._w=T*S),this.onChangeCallback(this),this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w},lerp:function(m,x){x===void 0&&(x=0);var y=this.x,T=this.y,S=this.z,C=this.w;return this.set(y+x*(m.x-y),T+x*(m.y-T),S+x*(m.z-S),C+x*(m.w-C))},rotationTo:function(m,x){var y=m.x*x.x+m.y*x.y+m.z*x.z;return y<-.999999?(d.copy(v).cross(m).length()<h&&d.copy(u).cross(m),d.normalize(),this.setAxisAngle(d,Math.PI)):y>.999999?this.set(0,0,0,1):(d.copy(m).cross(x),this._x=d.x,this._y=d.y,this._z=d.z,this._w=1+y,this.normalize())},setAxes:function(m,x,y){var T=c.val;return T[0]=x.x,T[3]=x.y,T[6]=x.z,T[1]=y.x,T[4]=y.y,T[7]=y.z,T[2]=-m.x,T[5]=-m.y,T[8]=-m.z,this.fromMat3(c).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(m,x){x=x*.5;var y=Math.sin(x);return this.set(y*m.x,y*m.y,y*m.z,Math.cos(x))},multiply:function(m){var x=this.x,y=this.y,T=this.z,S=this.w,C=m.x,E=m.y,P=m.z,M=m.w;return this.set(x*M+S*C+y*P-T*E,y*M+S*E+T*C-x*P,T*M+S*P+x*E-y*C,S*M-x*C-y*E-T*P)},slerp:function(m,x){var y=this.x,T=this.y,S=this.z,C=this.w,E=m.x,P=m.y,M=m.z,R=m.w,A=y*E+T*P+S*M+C*R;A<0&&(A=-A,E=-E,P=-P,M=-M,R=-R);var O=1-x,F=x;if(1-A>h){var I=Math.acos(A),w=Math.sin(I);O=Math.sin((1-x)*I)/w,F=Math.sin(x*I)/w}return this.set(O*y+F*E,O*T+F*P,O*S+F*M,O*C+F*R)},invert:function(){var m=this.x,x=this.y,y=this.z,T=this.w,S=m*m+x*x+y*y+T*T,C=S?1/S:0;return this.set(-m*C,-x*C,-y*C,T*C)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,S=this.w,C=Math.sin(m),E=Math.cos(m);return this.set(x*E+S*C,y*E+T*C,T*E-y*C,S*E-x*C)},rotateY:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,S=this.w,C=Math.sin(m),E=Math.cos(m);return this.set(x*E-T*C,y*E+S*C,T*E+x*C,S*E-y*C)},rotateZ:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,S=this.w,C=Math.sin(m),E=Math.cos(m);return this.set(x*E+y*C,y*E-x*C,T*E+S*C,S*E-T*C)},calculateW:function(){var m=this.x,x=this.y,y=this.z;return this.w=-Math.sqrt(1-m*m-x*x-y*y),this},setFromEuler:function(m,x){var y=m.x/2,T=m.y/2,S=m.z/2,C=Math.cos(y),E=Math.cos(T),P=Math.cos(S),M=Math.sin(y),R=Math.sin(T),A=Math.sin(S);switch(m.order){case"XYZ":{this.set(M*E*P+C*R*A,C*R*P-M*E*A,C*E*A+M*R*P,C*E*P-M*R*A,x);break}case"YXZ":{this.set(M*E*P+C*R*A,C*R*P-M*E*A,C*E*A-M*R*P,C*E*P+M*R*A,x);break}case"ZXY":{this.set(M*E*P-C*R*A,C*R*P+M*E*A,C*E*A+M*R*P,C*E*P-M*R*A,x);break}case"ZYX":{this.set(M*E*P-C*R*A,C*R*P+M*E*A,C*E*A-M*R*P,C*E*P+M*R*A,x);break}case"YZX":{this.set(M*E*P+C*R*A,C*R*P+M*E*A,C*E*A-M*R*P,C*E*P-M*R*A,x);break}case"XZY":{this.set(M*E*P-C*R*A,C*R*P-M*E*A,C*E*A+M*R*P,C*E*P+M*R*A,x);break}}return this},setFromRotationMatrix:function(m){var x=m.val,y=x[0],T=x[4],S=x[8],C=x[1],E=x[5],P=x[9],M=x[2],R=x[6],A=x[10],O=y+E+A,F;return O>0?(F=.5/Math.sqrt(O+1),this.set((R-P)*F,(S-M)*F,(C-T)*F,.25/F)):y>E&&y>A?(F=2*Math.sqrt(1+y-E-A),this.set(.25*F,(T+C)/F,(S+M)/F,(R-P)/F)):E>A?(F=2*Math.sqrt(1+E-y-A),this.set((T+C)/F,.25*F,(P+R)/F,(S-M)/F)):(F=2*Math.sqrt(1+A-y-E),this.set((S+M)/F,(P+R)/F,.25*F,(C-T)/F)),this},fromMat3:function(m){var x=m.val,y=x[0]+x[4]+x[8],T;if(y>0)T=Math.sqrt(y+1),this.w=.5*T,T=.5/T,this._x=(x[7]-x[5])*T,this._y=(x[2]-x[6])*T,this._z=(x[3]-x[1])*T;else{var S=0;x[4]>x[0]&&(S=1),x[8]>x[S*3+S]&&(S=2);var C=r[S],E=r[C];T=Math.sqrt(x[S*3+S]-x[C*3+C]-x[E*3+E]+1),a[S]=.5*T,T=.5/T,a[C]=(x[C*3+S]+x[S*3+C])*T,a[E]=(x[E*3+S]+x[S*3+E])*T,this._x=a[0],this._y=a[1],this._z=a[2],this._w=(x[E*3+C]-x[C*3+E])*T}return this.onChangeCallback(this),this}});t.exports=g},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(367),l=e(31),n=e(33),o=e(191),h=function(r){var a=r.config;if((a.customEnvironment||a.canvas)&&a.renderType===n.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!a.customEnvironment&&!a.canvas&&a.renderType!==n.HEADLESS)if(a.renderType===n.CANVAS||a.renderType!==n.CANVAS&&!o.webGL)if(o.canvas)a.renderType=n.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else a.renderType=n.WEBGL;a.antialias||l.disableSmoothing();var v=r.scale.baseSize,u=v.width,d=v.height;if(a.canvas?(r.canvas=a.canvas,r.canvas.width=u,r.canvas.height=d):r.canvas=l.create(r,u,d,a.renderType),a.canvasStyle&&(r.canvas.style=a.canvasStyle),a.antialias||s.setCrisp(r.canvas),a.renderType!==n.HEADLESS){var c,g;c=e(368),g=e(371),a.renderType===n.WEBGL?r.renderer=new g(r):(r.renderer=new c(r),r.context=r.renderer.gameContext)}};t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setCrisp:function(s){var l=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return l.forEach(function(n){s.style["image-rendering"]=n}),s.style.msInterpolationMode="nearest-neighbor",s},setBicubic:function(s){return s.style["image-rendering"]="auto",s.style.msInterpolationMode="bicubic",s}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(37),l=e(369),n=e(0),o=e(33),h=e(9),r=e(91),a=e(370),v=e(104),u=e(106),d=e(25),c=new n({Extends:h,initialize:function(m){h.call(this);var x=m.config;this.config={clearBeforeRender:x.clearBeforeRender,backgroundColor:x.backgroundColor,antialias:x.antialias,roundPixels:x.roundPixels},this.game=m,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var y={alpha:m.config.transparent,desynchronized:m.config.desynchronized};this.gameContext=x.context?x.context:this.gameCanvas.getContext("2d",y),this.currentContext=this.gameContext,this.antialias=m.config.antialias,this.blendModes=a(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(u.READY,this.boot,this)},boot:function(){var g=this.game,m=g.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,g.scale.on(v.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(g,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(g,m){this.width=g,this.height=m,this.emit(r.RESIZE,g,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,m=this.config,x=this.width,y=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),m.clearBeforeRender&&(g.clearRect(0,0,x,y),m.transparent||(g.fillStyle=m.backgroundColor.rgba,g.fillRect(0,0,x,y))),g.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(g,m,x){var y=m.length;this.emit(r.RENDER,g,x);var T=x.x,S=x.y,C=x.width,E=x.height,P=x.renderToTexture?x.context:g.sys.context;P.save(),this.game.scene.customViewports&&(P.beginPath(),P.rect(T,S,C,E),P.clip()),this.currentContext=P;var M=x.mask;M&&M.preRenderCanvas(this,null,x._maskCamera),x.transparent||(P.fillStyle=x.backgroundColor.rgba,P.fillRect(T,S,C,E)),P.globalAlpha=x.alpha,P.globalCompositeOperation="source-over",this.drawCount+=y,x.renderToTexture&&x.emit(s.PRE_RENDER,x),x.matrix.copyToContext(P);for(var R=0;R<y;R++){var A=m[R];A.mask&&A.mask.preRenderCanvas(this,A,x),A.renderCanvas(this,A,x),A.mask&&A.mask.postRenderCanvas(this,A,x)}P.setTransform(1,0,0,1,0,0),P.globalCompositeOperation="source-over",P.globalAlpha=1,x.flashEffect.postRenderCanvas(P),x.fadeEffect.postRenderCanvas(P),x.dirty=!1,M&&M.postRenderCanvas(this),P.restore(),x.renderToTexture&&(x.emit(s.POST_RENDER,x),x.renderToGame&&g.sys.context.drawImage(x.canvas,T,S))},postRender:function(){var g=this.gameContext;g.restore(),this.emit(r.POST_RENDER);var m=this.snapshotState;m.callback&&(l(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(g,m,x,y,T,S,C,E,P){x===void 0&&(x=!1),this.snapshotArea(y,T,S,C,m,E,P);var M=this.snapshotState;return M.getPixel=x,l(this.canvas,M),M.callback=null,this},snapshot:function(g,m,x){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,m,x)},snapshotArea:function(g,m,x,y,T,S,C){var E=this.snapshotState;return E.callback=T,E.type=S,E.encoder=C,E.getPixel=!1,E.x=g,E.y=m,E.width=Math.min(x,this.gameCanvas.width),E.height=Math.min(y,this.gameCanvas.height),this},snapshotPixel:function(g,m,x){return this.snapshotArea(g,m,1,1,x),this.snapshotState.getPixel=!0,this},batchSprite:function(g,m,x,y){var T=x.alpha*g.alpha;if(T!==0){var S=this.currentContext,C=this._tempMatrix1,E=this._tempMatrix2,P=m.canvasData,M=P.x,R=P.y,A=m.cutWidth,O=m.cutHeight,F=m.customPivot,I=m.source.resolution,w=g.displayOriginX,b=g.displayOriginY,Y=-w+m.x,U=-b+m.y;if(g.isCropped){var W=g._crop;(W.flipX!==g.flipX||W.flipY!==g.flipY)&&m.updateCropUVs(W,g.flipX,g.flipY),A=W.cw,O=W.ch,M=W.cx,R=W.cy,Y=-w+W.x,U=-b+W.y,g.flipX&&(Y>=0?Y=-(Y+A):Y<0&&(Y=Math.abs(Y)-A)),g.flipY&&(U>=0?U=-(U+O):U<0&&(U=Math.abs(U)-O))}var D=1,L=1;g.flipX&&(F||(Y+=-m.realWidth+w*2),D=-1),g.flipY&&(F||(U+=-m.realHeight+b*2),L=-1),E.applyITRS(g.x,g.y,g.rotation,g.scaleX*D,g.scaleY*L),C.copyFrom(x.matrix),y?(C.multiplyWithOffset(y,-x.scrollX*g.scrollFactorX,-x.scrollY*g.scrollFactorY),E.e=g.x,E.f=g.y):(E.e-=x.scrollX*g.scrollFactorX,E.f-=x.scrollY*g.scrollFactorY),C.multiply(E),S.save(),C.setToContext(S),S.globalCompositeOperation=this.blendModes[g.blendMode],S.globalAlpha=T,S.imageSmoothingEnabled=!(!this.antialias||m.source.scaleMode),g.mask&&g.mask.preRenderCanvas(this,g,x),S.drawImage(m.source.image,M,R,A,O,Y,U,A/I,O/I),g.mask&&g.mask.postRenderCanvas(this,g,x),S.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=c},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(31),l=e(38),n=e(2),o=function(h,r){var a=n(r,"callback"),v=n(r,"type","image/png"),u=n(r,"encoder",.92),d=Math.abs(Math.round(n(r,"x",0))),c=Math.abs(Math.round(n(r,"y",0))),g=n(r,"width",h.width),m=n(r,"height",h.height),x=n(r,"getPixel",!1);if(x){var y=h.getContext("2d"),T=y.getImageData(d,c,1,1),S=T.data;a.call(null,new l(S[0],S[1],S[2],S[3]/255))}else if(d!==0||c!==0||g!==h.width||m!==h.height){var C=s.createWebGL(this,g,m),E=C.getContext("2d");E.drawImage(h,d,c,g,m,0,0,g,m);var P=new Image;P.onerror=function(){a.call(null),s.remove(C)},P.onload=function(){a.call(null,P),s.remove(C)},P.src=C.toDataURL(v,u)}else{var M=new Image;M.onerror=function(){a.call(null)},M.onload=function(){a.call(null,M)},M.src=h.toDataURL(v,u)}};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(35),l=e(348),n=function(){var o=[],h=l.supportNewBlendModes,r="source-over";return o[s.NORMAL]=r,o[s.ADD]="lighter",o[s.MULTIPLY]=h?"multiply":r,o[s.SCREEN]=h?"screen":r,o[s.OVERLAY]=h?"overlay":r,o[s.DARKEN]=h?"darken":r,o[s.LIGHTEN]=h?"lighten":r,o[s.COLOR_DODGE]=h?"color-dodge":r,o[s.COLOR_BURN]=h?"color-burn":r,o[s.HARD_LIGHT]=h?"hard-light":r,o[s.SOFT_LIGHT]=h?"soft-light":r,o[s.DIFFERENCE]=h?"difference":r,o[s.EXCLUSION]=h?"exclusion":r,o[s.HUE]=h?"hue":r,o[s.SATURATION]=h?"saturation":r,o[s.COLOR]=h?"color":r,o[s.LUMINOSITY]=h?"luminosity":r,o[s.ERASE]="destination-out",o[s.SOURCE_IN]="source-in",o[s.SOURCE_OUT]="source-out",o[s.SOURCE_ATOP]="source-atop",o[s.DESTINATION_OVER]="destination-over",o[s.DESTINATION_IN]="destination-in",o[s.DESTINATION_OUT]="destination-out",o[s.DESTINATION_ATOP]="destination-atop",o[s.LIGHTER]="lighter",o[s.COPY]="copy",o[s.XOR]="xor",o};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(93),l=e(37),n=e(0),o=e(33),h=e(9),r=e(91),a=e(22),v=e(138),u=e(69),d=e(1),c=e(372),g=e(141),m=e(104),x=e(106),y=e(12),T=e(383),S=new n({Extends:h,initialize:function(E){h.call(this);var P=E.config,M={alpha:P.transparent,desynchronized:P.desynchronized,depth:!1,antialias:P.antialiasGL,premultipliedAlpha:P.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:P.failIfMajorPerformanceCaveat,powerPreference:P.powerPreference,preserveDrawingBuffer:P.preserveDrawingBuffer};this.config={clearBeforeRender:P.clearBeforeRender,antialias:P.antialias,backgroundColor:P.backgroundColor,contextCreation:M,roundPixels:P.roundPixels,maxTextures:P.maxTextures,maxTextureSize:P.maxTextureSize,batchSize:P.batchSize,maxLights:P.maxLights,mipmapFilter:P.mipmapFilter},this.game=E,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=E.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=d,this.contextRestoredHandler=d,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(C){var E,P=this.game,M=this.canvas,R=C.backgroundColor;if(P.config.context?E=P.config.context:E=M.getContext("webgl",C.contextCreation)||M.getContext("experimental-webgl",C.contextCreation),!E||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var A=this;this.contextLostHandler=function(B){A.contextLost=!0,A.game.events.emit(a.CONTEXT_LOST,A),B.preventDefault()},this.contextRestoredHandler=function(){A.contextLost=!1,A.init(A.config),A.game.events.emit(a.CONTEXT_RESTORED,A)},M.addEventListener("webglcontextlost",this.contextLostHandler,!1),M.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),P.context=E;for(var O=0;O<=27;O++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var F=E.getSupportedExtensions();(!C.maxTextures||C.maxTextures===-1)&&(C.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),C.maxTextureSize||(C.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var I="WEBGL_compressed_texture_",w="WEBKIT_"+I;this.compression.ETC1=E.getExtension(I+"etc1")||E.getExtension(w+"etc1"),this.compression.PVRTC=E.getExtension(I+"pvrtc")||E.getExtension(w+"pvrtc"),this.compression.S3TC=E.getExtension(I+"s3tc")||E.getExtension(w+"s3tc"),this.supportedExtensions=F;var b="ANGLE_instanced_arrays";this.instancedArraysExtension=F.indexOf(b)>-1?E.getExtension(b):null;var Y="OES_vertex_array_object";this.vaoExtension=F.indexOf(Y)>-1?E.getExtension(Y):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(R.redGL,R.greenGL,R.blueGL,R.alphaGL),this.mipmapFilter=E[C.mipmapFilter],this.maxTextures=y.checkShaderMax(E,C.maxTextures),this.textureIndexes=[];var U=this.tempTextures;if(Array.isArray(U))for(var W=0;O<this.maxTextures;W++)E.deleteTexture(U[W]);else U=new Array(this.maxTextures);for(var D=0;D<this.maxTextures;D++){var L=E.createTexture();E.activeTexture(E.TEXTURE0+D),E.bindTexture(E.TEXTURE_2D,L),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),U[D]=L,this.textureIndexes.push(D)}return this.tempTextures=U,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new c(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=new u().identity(),P.textures.once(x.READY,this.boot,this),this},boot:function(){var C=this.game,E=this.pipelines,P=C.scale.baseSize;this.width=P.width,this.height=P.height,this.isBooted=!0,this.renderTarget=new g(this,this.width,this.height,1,0,!0,!0),E.boot(C.config.pipeline),this.blankTexture=C.textures.getFrame("__DEFAULT"),this.whiteTexture=C.textures.getFrame("__WHITE");var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,null),M.enable(M.SCISSOR_TEST),C.scale.on(m.RESIZE,this.onResize,this),this.resize(P.width,P.height)},onResize:function(C,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},beginCapture:function(C,E){C===void 0&&(C=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,C,E),this.setProjectionMatrix(C,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(C,E){var P=this.gl;return this.width=C,this.height=E,this.setProjectionMatrix(C,E),P.viewport(0,0,C,E),this.drawingBufferHeight=P.drawingBufferHeight,P.scissor(0,P.drawingBufferHeight-E,C,E),this.defaultScissor[2]=C,this.defaultScissor[3]=E,this.emit(r.RESIZE,C,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(C,E){return(C!==this.projectionWidth||E!==this.projectionHeight)&&(this.projectionWidth=C,this.projectionHeight=E,this.projectionMatrix.ortho(0,C,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(C){return this.supportedExtensions?this.supportedExtensions.indexOf(C):!1},getExtension:function(C){return this.hasExtension(C)?(C in this.extensions||(this.extensions[C]=this.gl.getExtension(C)),this.extensions[C]):null},flush:function(){this.pipelines.flush()},pushScissor:function(C,E,P,M,R){R===void 0&&(R=this.drawingBufferHeight);var A=this.scissorStack,O=[C,E,P,M];return A.push(O),this.setScissor(C,E,P,M,R),this.currentScissor=O,O},setScissor:function(C,E,P,M,R){R===void 0&&(R=this.drawingBufferHeight);var A=this.gl,O=this.currentScissor,F=P>0&&M>0;if(O&&F){var I=O[0],w=O[1],b=O[2],Y=O[3];F=I!==C||w!==E||b!==P||Y!==M}F&&(this.flush(),A.scissor(C,R-E-M,P,M))},resetScissor:function(){var C=this.gl;C.enable(C.SCISSOR_TEST);var E=this.currentScissor;if(E){var P=E[0],M=E[1],R=E[2],A=E[3];R>0&&A>0&&C.scissor(P,this.drawingBufferHeight-M-A,R,A)}},popScissor:function(){var C=this.scissorStack;C.pop();var E=C[C.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var C=this.currentMask.mask,E=this.currentCameraMask.mask;return C&&C.isStencil||E&&E.isStencil},resetViewport:function(){var C=this.gl;C.viewport(0,0,this.width,this.height),this.drawingBufferHeight=C.drawingBufferHeight},setBlendMode:function(C,E){E===void 0&&(E=!1);var P=this.gl,M=this.blendModes[C];return E||C!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==C?(this.flush(),P.enable(P.BLEND),P.blendEquation(M.equation),M.func.length>2?P.blendFuncSeparate(M.func[0],M.func[1],M.func[2],M.func[3]):P.blendFunc(M.func[0],M.func[1]),this.currentBlendMode=C,!0):!1},addBlendMode:function(C,E){var P=this.blendModes.push({func:C,equation:E});return P-1},updateBlendMode:function(C,E,P){return this.blendModes[C]&&(this.blendModes[C].func=E,P&&(this.blendModes[C].equation=P)),this},removeBlendMode:function(C){return C>17&&this.blendModes[C]&&this.blendModes.splice(C,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(C){if(this.pipelines.forceZero())return this.setTextureZero(C.glTexture,!0),0;var E=this.gl,P=this.currentActiveTexture;return C.glIndexCounter<this.startActiveTexture&&(C.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(C.glIndex=P,E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,C.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,C.glIndexCounter=this.startActiveTexture,C.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,C.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,C.glIndex},isNewNormalMap:function(C,E){return this.textureZero!==C||this.normalTexture!==E},setTextureZero:function(C,E){if(this.textureZero!==C){E&&this.flush();var P=this.gl;P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,C),this.textureZero=C}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(C){if(this.normalTexture!==C){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,C),this.normalTexture=C,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var C=this.gl,E=this.tempTextures,P=0;P<E.length;P++)C.activeTexture(C.TEXTURE0+P),C.bindTexture(C.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(C){if(C===void 0&&(C=!1),!this.isTextureClean){this.flush();var E=this.gl,P=this.tempTextures;if(C){for(var M=0;M<P.length;M++)E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,P[M]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,P[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,P[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,P[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(C){if(this.pipelines.forceZero())return this.setTextureZero(C,!0),0;var E=this.gl,P=this.currentActiveTexture;return C.glIndexCounter<this.startActiveTexture&&(C.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(C.glIndex=P,E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,C),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,C.glIndexCounter=this.startActiveTexture,C.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,C),this.currentActiveTexture=2)),this.isTextureClean=!1,C.glIndex},pushFramebuffer:function(C,E,P,M){return C===this.currentFramebuffer?this:(this.fboStack.push(C),this.setFramebuffer(C,E,P,M))},setFramebuffer:function(C,E,P,M){if(E===void 0&&(E=!1),P===void 0&&(P=!1),M===void 0&&(M=!0),C===this.currentFramebuffer)return this;var R=this.gl,A=this.width,O=this.height;return C&&C.renderTexture&&M?(A=C.renderTexture.width,O=C.renderTexture.height):this.flush(),R.bindFramebuffer(R.FRAMEBUFFER,C),M&&R.viewport(0,0,A,O),E&&(C?(this.drawingBufferHeight=O,this.pushScissor(0,0,A,O)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=C,P&&this.resetTextures(),this},popFramebuffer:function(C,E,P){C===void 0&&(C=!1),E===void 0&&(E=!1),P===void 0&&(P=!0);var M=this.fboStack;M.pop();var R=M[M.length-1];return R||(R=null),this.setFramebuffer(R,C,E,P),R},setProgram:function(C){return C!==this.currentProgram?(this.flush(),this.gl.useProgram(C),this.currentProgram=C,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(C,E,P,M){var R=this.gl,A=R.NEAREST,O=R.NEAREST,F=R.CLAMP_TO_EDGE,I=null;E=C?C.width:E,P=C?C.height:P;var w=v(E,P);return w&&(F=R.REPEAT),M===o.ScaleModes.LINEAR&&this.config.antialias&&(A=w?this.mipmapFilter:R.LINEAR,O=R.LINEAR),!C&&typeof E=="number"&&typeof P=="number"?I=this.createTexture2D(0,A,O,F,F,R.RGBA,null,E,P):I=this.createTexture2D(0,A,O,F,F,R.RGBA,C),I},createTexture2D:function(C,E,P,M,R,A,O,F,I,w,b,Y){w=w==null?!0:w,b===void 0&&(b=!1),Y===void 0&&(Y=!1);var U=this.gl,W=U.createTexture();U.activeTexture(U.TEXTURE0);var D=U.getParameter(U.TEXTURE_BINDING_2D);return U.bindTexture(U.TEXTURE_2D,W),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,E),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,P),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,R),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,M),U.pixelStorei(U.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w),U.pixelStorei(U.UNPACK_FLIP_Y_WEBGL,Y),O==null?U.texImage2D(U.TEXTURE_2D,C,A,F,I,0,A,U.UNSIGNED_BYTE,null):(b||(F=O.width,I=O.height),U.texImage2D(U.TEXTURE_2D,C,A,A,U.UNSIGNED_BYTE,O)),v(F,I)&&U.generateMipmap(U.TEXTURE_2D),D&&U.bindTexture(U.TEXTURE_2D,D),W.isAlphaPremultiplied=w,W.isRenderTexture=!1,W.width=F,W.height=I,W.glIndex=0,W.glIndexCounter=-1,W},createFramebuffer:function(C,E,P,M){var R=this.gl,A=R.createFramebuffer(),O=0;if(this.setFramebuffer(A),M){var F=R.createRenderbuffer();R.bindRenderbuffer(R.RENDERBUFFER,F),R.renderbufferStorage(R.RENDERBUFFER,R.DEPTH_STENCIL,C,E),R.framebufferRenderbuffer(R.FRAMEBUFFER,R.DEPTH_STENCIL_ATTACHMENT,R.RENDERBUFFER,F)}if(P.isRenderTexture=!0,P.isAlphaPremultiplied=!1,R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,P,0),O=R.checkFramebufferStatus(R.FRAMEBUFFER),O!==R.FRAMEBUFFER_COMPLETE){var I={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+I[O])}return A.renderTexture=P,this.setFramebuffer(null),this.resetTextures(),A},createProgram:function(C,E){var P=this.gl,M=P.createProgram(),R=P.createShader(P.VERTEX_SHADER),A=P.createShader(P.FRAGMENT_SHADER);if(P.shaderSource(R,C),P.shaderSource(A,E),P.compileShader(R),P.compileShader(A),!P.getShaderParameter(R,P.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+P.getShaderInfoLog(R));if(!P.getShaderParameter(A,P.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+P.getShaderInfoLog(A));if(P.attachShader(M,R),P.attachShader(M,A),P.linkProgram(M),!P.getProgramParameter(M,P.LINK_STATUS))throw new Error(`Link Program failed:
`+P.getProgramInfoLog(M));return P.useProgram(M),M},createVertexBuffer:function(C,E){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ARRAY_BUFFER,M),P.bufferData(P.ARRAY_BUFFER,C,E),P.bindBuffer(P.ARRAY_BUFFER,null),M},createIndexBuffer:function(C,E){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,M),P.bufferData(P.ELEMENT_ARRAY_BUFFER,C,E),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,null),M},deleteTexture:function(C,E){return E&&this.resetTextures(!0),C&&this.gl.deleteTexture(C),this},deleteFramebuffer:function(C){return C&&(this.gl.deleteFramebuffer(C),s(this.fboStack,C),this.currentFramebuffer===C&&(this.currentFramebuffer=null)),this},deleteProgram:function(C){return C&&this.gl.deleteProgram(C),this},deleteBuffer:function(C){return this.gl.deleteBuffer(C),this},preRenderCamera:function(C){var E=C.x,P=C.y,M=C.width,R=C.height,A=C.backgroundColor;if(C.emit(l.PRE_RENDER,C),this.pipelines.preBatchCamera(C),this.pushScissor(E,P,M,R),C.mask&&(this.currentCameraMask.mask=C.mask,this.currentCameraMask.camera=C._maskCamera,C.mask.preRenderWebGL(this,C,C._maskCamera)),A.alphaGL>0){var O=this.pipelines.setMulti();O.drawFillRect(E,P,M,R,y.getTintFromFloats(A.blueGL,A.greenGL,A.redGL,1),A.alphaGL)}},getCurrentStencilMask:function(){var C=null,E=this.maskStack,P=this.currentCameraMask;return E.length>0?C=E[E.length-1]:P.mask&&P.mask.isStencil&&(C=P),C},postRenderCamera:function(C){var E=C.flashEffect,P=C.fadeEffect;if(E.isRunning||P.isRunning||P.isComplete){var M=this.pipelines.setMulti();E.postRenderWebGL(M,y.getTintFromFloats),P.postRenderWebGL(M,y.getTintFromFloats)}C.dirty=!1,this.popScissor(),C.mask&&(this.currentCameraMask.mask=null,C.mask.postRenderWebGL(this,C._maskCamera)),this.pipelines.postBatchCamera(C),C.emit(l.POST_RENDER,C)},preRender:function(){if(!this.contextLost){var C=this.gl;if(C.bindFramebuffer(C.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;C.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT|C.STENCIL_BUFFER_BIT)}C.enable(C.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&C.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(r.PRE_RENDER)}},render:function(C,E,P){if(!this.contextLost){var M=E.length;if(this.emit(r.RENDER,C,P),this.preRenderCamera(P),M===0){this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(P);return}this.currentType="";for(var R=this.currentMask,A=0;A<M;A++){this.finalType=A===M-1;var O=E[A],F=O.mask;R=this.currentMask,R.mask&&R.mask!==F&&R.mask.postRenderWebGL(this,R.camera),F&&R.mask!==F&&F.preRenderWebGL(this,O,P),O.blendMode!==this.currentBlendMode&&this.setBlendMode(O.blendMode);var I=O.type;I!==this.currentType&&(this.newType=!0,this.currentType=I),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[A+1].type===this.currentType,O.renderWebGL(this,O,P),this.newType=!1}R=this.currentMask,R.mask&&R.mask.postRenderWebGL(this,R.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(P)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(r.POST_RENDER);var C=this.snapshotState;C.callback&&(T(this.canvas,C),C.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(C,E,P){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,C,E,P)},snapshotArea:function(C,E,P,M,R,A,O){var F=this.snapshotState;return F.callback=R,F.type=A,F.encoder=O,F.getPixel=!1,F.x=C,F.y=E,F.width=Math.min(P,this.gl.drawingBufferWidth),F.height=Math.min(M,this.gl.drawingBufferHeight),this},snapshotPixel:function(C,E,P){return this.snapshotArea(C,E,1,1,P),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(C,E,P,M,R,A,O,F,I,w,b){R===void 0&&(R=!1),A===void 0&&(A=0),O===void 0&&(O=0),F===void 0&&(F=E),I===void 0&&(I=P);var Y=this.currentFramebuffer;this.snapshotArea(A,O,F,I,M,w,b);var U=this.snapshotState;return U.getPixel=R,U.isFramebuffer=!0,U.bufferWidth=E,U.bufferHeight=P,this.setFramebuffer(C),T(this.canvas,U),this.setFramebuffer(Y),U.callback=null,U.isFramebuffer=!1,this},canvasToTexture:function(C,E,P,M){return P===void 0&&(P=!1),M===void 0&&(M=!1),E?this.updateCanvasTexture(C,E,M):this.createCanvasTexture(C,P,M)},createCanvasTexture:function(C,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var M=this.gl,R=M.NEAREST,A=M.NEAREST,O=C.width,F=C.height,I=M.CLAMP_TO_EDGE,w=v(O,F);return!E&&w&&(I=M.REPEAT),this.config.antialias&&(R=w?this.mipmapFilter:M.LINEAR,A=M.LINEAR),this.createTexture2D(0,R,A,I,I,M.RGBA,C,O,F,!0,!1,P)},updateCanvasTexture:function(C,E,P){P===void 0&&(P=!1);var M=this.gl,R=C.width,A=C.height;if(R>0&&A>0){M.activeTexture(M.TEXTURE0);var O=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,E),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,C),E.width=R,E.height=A,O&&M.bindTexture(M.TEXTURE_2D,O)}return E},createVideoTexture:function(C,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var M=this.gl,R=M.NEAREST,A=M.NEAREST,O=C.videoWidth,F=C.videoHeight,I=M.CLAMP_TO_EDGE,w=v(O,F);return!E&&w&&(I=M.REPEAT),this.config.antialias&&(R=w?this.mipmapFilter:M.LINEAR,A=M.LINEAR),this.createTexture2D(0,R,A,I,I,M.RGBA,C,O,F,!0,!0,P)},updateVideoTexture:function(C,E,P){P===void 0&&(P=!1);var M=this.gl,R=C.videoWidth,A=C.videoHeight;if(R>0&&A>0){M.activeTexture(M.TEXTURE0);var O=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,E),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,C),E.width=R,E.height=A,O&&M.bindTexture(M.TEXTURE_2D,O)}return E},setTextureFilter:function(C,E){var P=this.gl,M=[P.LINEAR,P.NEAREST][E];P.activeTexture(P.TEXTURE0);var R=P.getParameter(P.TEXTURE_BINDING_2D);return P.bindTexture(P.TEXTURE_2D,C),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,M),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,M),R&&P.bindTexture(P.TEXTURE_2D,R),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var C=this.gl,E=this.tempTextures,P=0;P<E.length;P++)C.deleteTexture(E[P]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=S},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(92),n=e(102),o=e(373),h=e(376),r=e(377),a=e(108),v=e(378),u=e(379),d=e(380),c=e(381),g=new s({initialize:function(x){this.game=x.game,this.renderer=x,this.classes=new n([[l.UTILITY_PIPELINE,c],[l.MULTI_PIPELINE,a],[l.BITMAPMASK_PIPELINE,o],[l.SINGLE_PIPELINE,d],[l.ROPE_PIPELINE,u],[l.LIGHT_PIPELINE,r],[l.POINTLIGHT_PIPELINE,v],[l.GRAPHICS_PIPELINE,h]]),this.postPipelineClasses=new n,this.pipelines=new n,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(m){var x,y,T=this,S=this.game;if(this.classes.each(function(E,P){x=T.add(E,new P({game:S})),E===l.UTILITY_PIPELINE&&(T.UTILITY_PIPELINE=x,T.fullFrame1=x.fullFrame1,T.fullFrame2=x.fullFrame2,T.halfFrame1=x.halfFrame1,T.halfFrame2=x.halfFrame2)}),this.MULTI_PIPELINE=this.get(l.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(l.BITMAPMASK_PIPELINE),m)for(y in m){var C=m[y];x=new C(S),x.isPostFX?this.postPipelineClasses.set(y,C):this.has(y)||(this.classes.set(y,C),this.add(y,x))}},add:function(m,x){if(x.isPostFX){console.warn(m+" is a Post Pipeline. Use `addPostPipeline` instead");return}var y=this.pipelines,T=this.renderer;return y.has(m)?console.warn("Pipeline exists: "+m):(x.name=m,x.manager=this,y.set(m,x)),x.hasBooted||x.boot(),T.width!==0&&T.height!==0&&x.resize(T.width,T.height),x},addPostPipeline:function(m,x){this.postPipelineClasses.has(m)||this.postPipelineClasses.set(m,x)},flush:function(){this.current&&this.current.flush()},has:function(m){var x=this.pipelines;return typeof m=="string"?x.has(m):!!x.contains(m)},get:function(m){var x=this.pipelines;if(typeof m=="string")return x.get(m);if(x.contains(m))return m},getPostPipeline:function(m,x){var y=this.postPipelineClasses,T;if(typeof m=="string"?T=y.get(m):typeof m=="function"?y.contains(m)&&(T=m):typeof m=="object"&&(T=y.get(m.name)),T){var S=new T(this.game);return x&&(S.gameObject=x),S}},remove:function(m,x,y){x===void 0&&(x=!0),y===void 0&&(y=!0),this.pipelines.delete(m),x&&this.classes.delete(m),y&&this.postPipelineClasses.delete(m)},set:function(m,x,y){if(!m.isPostFX)return this.isCurrent(m,y)||(this.flush(),this.current&&this.current.unbind(),this.current=m,m.bind(y)),m.updateProjectionMatrix(),m.onBind(x),m},preBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},preBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},isCurrent:function(m,x){var y=this.renderer,T=this.current;return T&&!x&&(x=T.currentShader),!(T!==m||x.program!==y.currentProgram)},copyFrame:function(m,x,y,T,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(m,x,y,T,S),this},copyToGame:function(m){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(m),this},drawFrame:function(m,x,y,T){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(m,x,y,T),this},blendFrames:function(m,x,y,T,S){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(m,x,y,T,S),this},blendFramesAdditive:function(m,x,y,T,S){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(m,x,y,T,S),this},clearFrame:function(m,x){return this.UTILITY_PIPELINE.clearFrame(m,x),this},blitFrame:function(m,x,y,T,S,C){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(m,x,y,T,S,C),this},copyFrameRect:function(m,x,y,T,S,C,E,P){return this.UTILITY_PIPELINE.copyFrameRect(m,x,y,T,S,C,E,P),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(m){return this.UTILITY_PIPELINE.bind(m)},rebind:function(m){m===void 0&&this.previous&&(m=this.previous);var x=this.renderer,y=x.gl;y.disable(y.DEPTH_TEST),y.disable(y.CULL_FACE),x.hasActiveStencilMask()?y.clear(y.DEPTH_BUFFER_BIT):(y.disable(y.STENCIL_TEST),y.clear(y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.viewport(0,0,x.width,x.height),x.currentProgram=null,x.setBlendMode(0,!0);var T=this.pipelines.entries;for(var S in T)T[S].glReset=!0;m&&(this.current=m,m.rebind()),x.resetTextures()},clear:function(){var m=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,m.currentProgram=null,m.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});t.exports=g},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(2),n=e(866),o=e(867),h=e(107),r=e(58),a=new s({Extends:r,initialize:function(u){u.fragShader=l(u,"fragShader",n),u.vertShader=l(u,"vertShader",o),u.batchSize=l(u,"batchSize",1),u.vertices=l(u,"vertices",[-1,1,-1,-7,7,1]),u.attributes=l(u,"attributes",[{name:"inPosition",size:2,type:h.FLOAT}]),r.call(this,u)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(v,u){r.prototype.resize.call(this,v,u),this.set2f("uResolution",v,u)},beginMask:function(v,u,d){var c=this.gl;if(v.bitmapMask&&c){var g=this.renderer;g.flush(),g.pushFramebuffer(v.mainFramebuffer),c.disable(c.STENCIL_TEST),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),g.currentCameraMask.mask!==v&&(g.currentMask.mask=v,g.currentMask.camera=d)}},endMask:function(v,u){var d=this.gl,c=this.renderer,g=v.bitmapMask;if(g&&d){c.flush(),c.pushFramebuffer(v.maskFramebuffer),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),c.setBlendMode(0,!0),g.renderWebGL(c,g,u),c.flush(),c.popFramebuffer(),c.popFramebuffer();var m=c.getCurrentStencilMask();m?(d.enable(d.STENCIL_TEST),m.mask.applyStencil(c,m.camera,!0)):c.currentMask.mask=null,c.pipelines.set(this),d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,v.maskTexture),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,v.mainTexture),this.set1i("uInvertMaskAlpha",v.invertAlpha),d.drawArrays(this.topology,0,3),c.resetTextures()}}});t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={AFTER_FLUSH:e(868),BEFORE_FLUSH:e(869),BIND:e(870),BOOT:e(871),DESTROY:e(872),REBIND:e(873),RESIZE:e(874)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(2),n=e(107),o=new s({initialize:function(r,a,v,u,d){this.pipeline=r,this.name=a,this.renderer=r.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(v,u),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(d),this.createUniforms()},createAttributes:function(h){var r=0,a=0,v=[];this.vertexComponentCount=0;for(var u=0;u<h.length;u++){var d=h[u],c=d.name,g=l(d,"size",1),m=l(d,"type",n.FLOAT),x=m.enum,y=m.size,T=!!d.normalized;v.push({name:c,size:g,type:x,normalized:T,offset:a,enabled:!1,location:-1}),y===4?r+=g:r++,a+=g*y}this.vertexSize=a,this.vertexComponentCount=r,this.attributes=v},bind:function(h,r){return h===void 0&&(h=!1),r===void 0&&(r=!1),r&&this.pipeline.flush(),this.renderer.setProgram(this.program),h&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(h){h===void 0&&(h=!1);for(var r=this.gl,a=this.vertexSize,v=this.attributes,u=this.program,d=0;d<v.length;d++){var c=v[d],g=c.size,m=c.type,x=c.offset,y=c.enabled,T=c.location,S=!!c.normalized;if(h){var C=r.getAttribLocation(u,c.name);C>=0?(r.enableVertexAttribArray(C),r.vertexAttribPointer(C,g,m,S,a,x),c.enabled=!0,c.location=C):C!==-1&&r.disableVertexAttribArray(C)}else y?r.vertexAttribPointer(T,g,m,S,a,x):!y&&T>-1&&(r.disableVertexAttribArray(T),c.location=-1)}return this},createUniforms:function(){var h=this.gl,r=this.program,a=this.uniforms,v,u,d,c=h.getProgramParameter(r,h.ACTIVE_UNIFORMS);for(v=0;v<c;v++){var g=h.getActiveUniform(r,v);if(g){u=g.name,d=h.getUniformLocation(r,u),d!==null&&(a[u]={name:u,location:d,value1:null,value2:null,value3:null,value4:null});var m=u.indexOf("[");m>0&&(u=u.substr(0,m),a.hasOwnProperty(u)||(d=h.getUniformLocation(r,u),d!==null&&(a[u]={name:u,location:d,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(h){return this.uniforms.hasOwnProperty(h)},resetUniform:function(h){var r=this.uniforms[h];return r&&(r.value1=null,r.value2=null,r.value3=null,r.value4=null),this},setUniform1:function(h,r,a,v){var u=this.uniforms[r];return u?((v||u.value1!==a)&&(u.value1=a,this.renderer.setProgram(this.program),h.call(this.gl,u.location,a),this.pipeline.currentShader=this),this):this},setUniform2:function(h,r,a,v,u){var d=this.uniforms[r];return d?((u||d.value1!==a||d.value2!==v)&&(d.value1=a,d.value2=v,this.renderer.setProgram(this.program),h.call(this.gl,d.location,a,v),this.pipeline.currentShader=this),this):this},setUniform3:function(h,r,a,v,u,d){var c=this.uniforms[r];return c?((d||c.value1!==a||c.value2!==v||c.value3!==u)&&(c.value1=a,c.value2=v,c.value3=u,this.renderer.setProgram(this.program),h.call(this.gl,c.location,a,v,u),this.pipeline.currentShader=this),this):this},setUniform4:function(h,r,a,v,u,d,c){var g=this.uniforms[r];return g?((c||g.value1!==a||g.value2!==v||g.value3!==u||g.value4!==d)&&(g.value1=a,g.value2=v,g.value3=u,g.value4=d,this.renderer.setProgram(this.program),h.call(this.gl,g.location,a,v,u,d),this.pipeline.currentShader=this),this):this},set1f:function(h,r){return this.setUniform1(this.gl.uniform1f,h,r)},set2f:function(h,r,a){return this.setUniform2(this.gl.uniform2f,h,r,a)},set3f:function(h,r,a,v){return this.setUniform3(this.gl.uniform3f,h,r,a,v)},set4f:function(h,r,a,v,u){return this.setUniform4(this.gl.uniform4f,h,r,a,v,u)},set1fv:function(h,r){return this.setUniform1(this.gl.uniform1fv,h,r,!0)},set2fv:function(h,r){return this.setUniform1(this.gl.uniform2fv,h,r,!0)},set3fv:function(h,r){return this.setUniform1(this.gl.uniform3fv,h,r,!0)},set4fv:function(h,r){return this.setUniform1(this.gl.uniform4fv,h,r,!0)},set1iv:function(h,r){return this.setUniform1(this.gl.uniform1iv,h,r,!0)},set2iv:function(h,r){return this.setUniform1(this.gl.uniform2iv,h,r,!0)},set3iv:function(h,r){return this.setUniform1(this.gl.uniform3iv,h,r,!0)},set4iv:function(h,r){return this.setUniform1(this.gl.uniform4iv,h,r,!0)},set1i:function(h,r){return this.setUniform1(this.gl.uniform1i,h,r)},set2i:function(h,r,a){return this.setUniform2(this.gl.uniform2i,h,r,a)},set3i:function(h,r,a,v){return this.setUniform3(this.gl.uniform3i,h,r,a,v)},set4i:function(h,r,a,v,u){return this.setUniform4(this.gl.uniform4i,h,r,a,v,u)},setMatrix2fv:function(h,r,a){return this.setUniform2(this.gl.uniformMatrix2fv,h,r,a,!0)},setMatrix3fv:function(h,r,a){return this.setUniform2(this.gl.uniformMatrix3fv,h,r,a,!0)},setMatrix4fv:function(h,r,a){return this.setUniform2(this.gl.uniformMatrix4fv,h,r,a,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(59),n=e(2),o=e(875),h=e(876),r=e(25),a=e(107),v=e(58),u=new s({Extends:v,initialize:function(c){c.fragShader=n(c,"fragShader",o),c.vertShader=n(c,"vertShader",h),c.attributes=n(c,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:a.UNSIGNED_BYTE,normalized:!0}]),v.call(this,c),this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(d,c,g,m,x,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(x,T);var S=d+g,C=c+m,E=T.getX(d,c),P=T.getY(d,c),M=T.getX(d,C),R=T.getY(d,C),A=T.getX(S,C),O=T.getY(S,C),F=T.getX(S,c),I=T.getY(S,c),w=this.fillTint;this.batchQuad(E,P,M,R,A,O,F,I,w.TL,w.TR,w.BL,w.BR)},batchFillTriangle:function(d,c,g,m,x,y,T,S){this.renderer.pipelines.set(this);var C=this.calcMatrix;S&&S.multiply(T,C);var E=C.getX(d,c),P=C.getY(d,c),M=C.getX(g,m),R=C.getY(g,m),A=C.getX(x,y),O=C.getY(x,y),F=this.fillTint;this.batchTri(E,P,M,R,A,O,F.TL,F.TR,F.BL)},batchStrokeTriangle:function(d,c,g,m,x,y,T,S,C){var E=this.tempTriangle;E[0].x=d,E[0].y=c,E[0].width=T,E[1].x=g,E[1].y=m,E[1].width=T,E[2].x=x,E[2].y=y,E[2].width=T,E[3].x=d,E[3].y=c,E[3].width=T,this.batchStrokePath(E,T,!1,S,C)},batchFillPath:function(d,c,g){this.renderer.pipelines.set(this);var m=this.calcMatrix;g&&g.multiply(c,m);for(var x=d.length,y=this.polygonCache,T,S,C=this.fillTint.TL,E=this.fillTint.TR,P=this.fillTint.BL,M=0;M<x;++M)S=d[M],y.push(S.x,S.y);T=l(y),x=T.length;for(var R=0;R<x;R+=3){var A=T[R+0]*2,O=T[R+1]*2,F=T[R+2]*2,I=y[A+0],w=y[A+1],b=y[O+0],Y=y[O+1],U=y[F+0],W=y[F+1],D=m.getX(I,w),L=m.getY(I,w),B=m.getX(b,Y),G=m.getY(b,Y),N=m.getX(U,W),V=m.getY(U,W);this.batchTri(D,L,B,G,N,V,C,E,P)}y.length=0},batchStrokePath:function(d,c,g,m,x){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=d.length-1,T=0;T<y;T++){var S=d[T],C=d[T+1];this.batchLine(S.x,S.y,C.x,C.y,S.width/2,C.width/2,c,T,!g&&T===y-1,m,x)}},batchLine:function(d,c,g,m,x,y,T,S,C,E,P){this.renderer.pipelines.set(this);var M=this.calcMatrix;P&&P.multiply(E,M);var R=g-d,A=m-c,O=Math.sqrt(R*R+A*A),F=x*(m-c)/O,I=x*(d-g)/O,w=y*(m-c)/O,b=y*(d-g)/O,Y=g-w,U=m-b,W=d-F,D=c-I,L=g+w,B=m+b,G=d+F,N=c+I,V=M.getX(Y,U),z=M.getY(Y,U),X=M.getX(W,D),H=M.getY(W,D),K=M.getX(L,B),J=M.getY(L,B),Z=M.getX(G,N),Q=M.getY(G,N),q=this.strokeTint,k=q.TL,_=q.TR,ot=q.BL,nt=q.BR;if(this.batchQuad(Z,Q,X,H,V,z,K,J,k,_,ot,nt),!(T<=2)){var et=this.prevQuad,j=this.firstQuad;S>0&&et[4]?this.batchQuad(Z,Q,X,H,et[0],et[1],et[2],et[3],k,_,ot,nt):(j[0]=Z,j[1]=Q,j[2]=X,j[3]=H,j[4]=1),C&&j[4]?this.batchQuad(V,z,K,J,j[0],j[1],j[2],j[3],k,_,ot,nt):(et[0]=V,et[1]=z,et[2]=K,et[3]=J,et[4]=1)}},batchVert:function(d,c,g){var m=this.vertexViewF32,x=this.vertexViewU32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;m[++y]=d,m[++y]=c,x[++y]=g,this.vertexCount++},batchQuad:function(d,c,g,m,x,y,T,S,C,E,P,M){var R=!1;return this.shouldFlush(6)&&(this.flush(),R=!0),this.batchVert(d,c,C),this.batchVert(g,m,P),this.batchVert(x,y,M),this.batchVert(d,c,C),this.batchVert(x,y,M),this.batchVert(T,S,E),R},batchTri:function(d,c,g,m,x,y,T,S,C){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(d,c,T),this.batchVert(g,m,S),this.batchVert(x,y,C),E},destroy:function(){return v.prototype.destroy.call(this),this.polygonCache=null,this}});t.exports=u},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(2),n=e(877),o=e(108),h=e(3),r=e(58),a=10,v=new h,u=new s({Extends:o,initialize:function(c){a=c.game.renderer.config.maxLights;for(var g=l(c,"fragShader",n),m=[],x=1;x<=a;x++)m.push({name:"lights"+x,fragShader:g.replace("%LIGHT_COUNT%",x.toString())});c.shaders=m,o.call(this,c),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){r.prototype.boot.call(this);var d=this.gl,c=d.createTexture();d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,c),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,1,1,0,d.RGBA,d.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:c};for(var g=0;g<this.shaders.length;g++)this["lightShader"+(g+1)]=this.shaders[g]},onRender:function(d,c){var g=d.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var m=g.getLights(c),x=m.length;if(x!==0){this.lightsActive=!0,this.setShader(this["lightShader"+x],!0);var y,T=this.renderer,S=T.height,C=c.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",c.x,c.y,c.rotation,c.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),y=0;y<x;y++){var E=m[y].light,P=E.color,M="uLights["+y+"].";C.transformPoint(E.x,E.y,v),this.set2f(M+"position",v.x-c.scrollX*E.scrollFactorX*c.zoom,S-(v.y-c.scrollY*E.scrollFactorY*c.zoom)),this.set3f(M+"color",P.r,P.g,P.b),this.set1f(M+"intensity",E.intensity),this.set1f(M+"radius",E.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(d){if(d!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var c=this.inverseRotationMatrix;if(d){var g=-d,m=Math.cos(g),x=Math.sin(g);c[1]=x,c[3]=-x,c[0]=c[4]=m}else c[0]=c[4]=1,c[1]=c[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,c),this.currentNormalMapRotation=d}},setTexture2D:function(d,c){var g=this.renderer;d===void 0&&(d=g.tempTextures[0]);var m=this.getNormalMap(c);g.isNewNormalMap(d,m)&&(this.flush(),g.setTextureZero(d),g.setNormalMap(m));var x=c?c.rotation:0;return this.setNormalMapRotation(x),this.currentUnit=0,0},setGameObject:function(d,c){c===void 0&&(c=d.frame);var g=this.renderer,m=c.glTexture,x=this.getNormalMap(d);return g.isNewNormalMap()&&(this.flush(),g.setTextureZero(m),g.setNormalMap(x)),this.setNormalMapRotation(d.rotation),this.currentUnit=0,0},getNormalMap:function(d){var c;return d?d.displayTexture?c=d.displayTexture.dataSource[d.displayFrame.sourceIndex]:d.texture?c=d.texture.dataSource[d.frame.sourceIndex]:d.tileset&&(Array.isArray(d.tileset)?c=d.tileset[0].image.dataSource[0]:c=d.tileset.image.dataSource[0]):c=this.defaultNormalMap,c||(c=this.defaultNormalMap),c.glTexture},batchSprite:function(d,c,g){this.lightsActive&&o.prototype.batchSprite.call(this,d,c,g)},batchTexture:function(d,c,g,m,x,y,T,S,C,E,P,M,R,A,O,F,I,w,b,Y,U,W,D,L,B,G,N,V,z,X,H,K){this.lightsActive&&o.prototype.batchTexture.call(this,d,c,g,m,x,y,T,S,C,E,P,M,R,A,O,F,I,w,b,Y,U,W,D,L,B,G,N,V,z,X,H,K)},batchTextureFrame:function(d,c,g,m,x,y,T){this.lightsActive&&o.prototype.batchTextureFrame.call(this,d,c,g,m,x,y,T)}});u.LIGHT_COUNT=a,t.exports=u},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(2),n=e(880),o=e(881),h=e(58),r=new s({Extends:h,initialize:function(v){v.vertShader=l(v,"vertShader",o),v.fragShader=l(v,"fragShader",n),v.attributes=l(v,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),h.call(this,v)},onRender:function(a,v){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",v.zoom)},batchPointLight:function(a,v,u,d,c,g,m,x,y,T,S,C){var E=a.color,P=a.intensity,M=a.radius,R=a.attenuation,A=E.r*P,O=E.g*P,F=E.b*P,I=v.alpha*a.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(u,d,S,C,M,R,A,O,F,I),this.batchLightVert(c,g,S,C,M,R,A,O,F,I),this.batchLightVert(m,x,S,C,M,R,A,O,F,I),this.batchLightVert(u,d,S,C,M,R,A,O,F,I),this.batchLightVert(m,x,S,C,M,R,A,O,F,I),this.batchLightVert(y,T,S,C,M,R,A,O,F,I)},batchLightVert:function(a,v,u,d,c,g,m,x,y,T){var S=this.vertexViewF32,C=this.vertexCount*this.currentShader.vertexComponentCount-1;S[++C]=a,S[++C]=v,S[++C]=u,S[++C]=d,S[++C]=c,S[++C]=g,S[++C]=m,S[++C]=x,S[++C]=y,S[++C]=T,this.vertexCount++}});t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(2),n=e(108),o=new s({Extends:n,initialize:function(r){r.topology=5,r.batchSize=l(r,"batchSize",256),n.call(this,r)}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(2),n=e(108),o=e(882),h=e(883),r=e(58),a=new s({Extends:n,initialize:function(u){u.fragShader=l(u,"fragShader",o),u.vertShader=l(u,"vertShader",h),u.forceZero=!0,n.call(this,u)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0)}});t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(884),l=e(35),n=e(0),o=e(198),h=e(885),r=e(886),a=e(2),v=e(887),u=e(382),d=e(58),c=new n({Extends:d,initialize:function(m){m.renderTarget=a(m,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),m.vertShader=a(m,"vertShader",u),m.shaders=a(m,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:s},{name:"LinearBlend",fragShader:v},{name:"ColorMatrix",fragShader:h}]),m.attributes=a(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),m.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],m.batchSize=1,d.call(this,m),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){d.prototype.boot.call(this);var g=this.shaders,m=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=m[0],this.fullFrame2=m[1],this.halfFrame1=m[2],this.halfFrame2=m[3]},copyFrame:function(g,m,x,y,T){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0);var S=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),m?(S.viewport(0,0,m.width,m.height),S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0)):S.viewport(0,0,g.width,g.height),y&&(T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blitFrame:function(g,m,x,y,T,S){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0),S===void 0&&(S=!1);var C=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),g.height>m.height)C.viewport(0,0,g.width,g.height),this.setTargetUVs(g,m);else{var E=m.height-g.height;C.viewport(0,E,g.width,g.height)}if(C.bindFramebuffer(C.FRAMEBUFFER,m.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,m.texture,0),y&&(T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),S){var P=this.renderer.currentBlendMode;this.renderer.setBlendMode(l.ERASE)}C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),S&&this.renderer.setBlendMode(P),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,m,x,y,T,S,C,E){C===void 0&&(C=!0),E===void 0&&(E=!0);var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,g.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,g.texture,0),C&&(E?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,m.texture),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,x,y,T,S),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},copyToGame:function(g){var m=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,g.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(g,m,x,y){x===void 0&&(x=!0),y===void 0&&(y=this.colorMatrix);var T=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,g.texture),m?(T.viewport(0,0,m.width,m.height),T.bindFramebuffer(T.FRAMEBUFFER,m.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,m.texture,0)):T.viewport(0,0,g.width,g.height),x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFrames:function(g,m,x,y,T,S){y===void 0&&(y=1),T===void 0&&(T=!0),S===void 0&&(S=this.linearShader);var C=this.gl;this.setShader(S),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),C.activeTexture(C.TEXTURE1),C.bindTexture(C.TEXTURE_2D,m.texture),x?(C.bindFramebuffer(C.FRAMEBUFFER,x.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,x.texture,0),C.viewport(0,0,x.width,x.height)):C.viewport(0,0,g.width,g.height),T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blendFramesAdditive:function(g,m,x,y,T){this.blendFrames(g,m,x,y,T,this.addShader)},clearFrame:function(g,m){m===void 0&&(m=!0);var x=this.gl;x.viewport(0,0,g.width,g.height),x.bindFramebuffer(x.FRAMEBUFFER,g.framebuffer),m?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;x.bindFramebuffer(x.FRAMEBUFFER,y)},setUVs:function(g,m,x,y,T,S,C,E){var P=this.vertexViewF32;P[2]=g,P[3]=m,P[6]=x,P[7]=y,P[10]=T,P[11]=S,P[14]=g,P[15]=m,P[18]=T,P[19]=S,P[22]=C,P[23]=E},setTargetUVs:function(g,m){var x=m.height/g.height;x>.5?x=.5-(x-.5):x=.5+(.5-x),this.setUVs(0,x,0,1+x,1,1+x,1,x)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=c},function(t,f){t.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(31),l=e(38),n=e(2),o=function(h,r){var a=h.getContext("experimental-webgl"),v=n(r,"callback"),u=n(r,"type","image/png"),d=n(r,"encoder",.92),c=n(r,"x",0),g=n(r,"y",0),m=n(r,"getPixel",!1),x=n(r,"isFramebuffer",!1),y=x?n(r,"bufferWidth",1):a.drawingBufferWidth,T=x?n(r,"bufferHeight",1):a.drawingBufferHeight;if(m){var S=new Uint8Array(4),C=x?g:T-g;a.readPixels(c,C,1,1,a.RGBA,a.UNSIGNED_BYTE,S),v.call(null,new l(S[0],S[1],S[2],S[3]/255))}else{var E=n(r,"width",y),P=n(r,"height",T),M=E*P*4,R=new Uint8Array(M);a.readPixels(c,T-g-P,E,P,a.RGBA,a.UNSIGNED_BYTE,R);for(var A=s.createWebGL(this,E,P),O=A.getContext("2d"),F=O.getImageData(0,0,E,P),I=F.data,w=0;w<P;w++)for(var b=0;b<E;b++){var Y=((P-w-1)*E+b)*4,U=(w*E+b)*4;I[U+0]=R[Y+0],I[U+1]=R[Y+1],I[U+2]=R[Y+2],I[U+3]=R[Y+3]}O.putImageData(F,0,0);var W=new Image;W.onerror=function(){v.call(null),s.remove(A)},W.onload=function(){v.call(null,W),s.remove(A)},W.src=A.toDataURL(u,d)}};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(33),l=function(n){var o=n.config;if(!o.hideBanner){var h="WebGL";o.renderType===s.CANVAS?h="Canvas":o.renderType===s.HEADLESS&&(h="Headless");var r=o.audio,a=n.device.audio,v;if(a.webAudio&&!r.disableWebAudio?v="Web Audio":r.noAudio||!a.webAudio&&!a.audioData?v="No Audio":v="HTML5 Audio",n.device.browser.ie)window.console&&console.log("Phaser v"+s.VERSION+" / https://phaser.io");else{var u="",d=[u];if(Array.isArray(o.bannerBackgroundColor)){var c;o.bannerBackgroundColor.forEach(function(m){u=u.concat("%c "),d.push("background: "+m),c=m}),d[d.length-1]="color: "+o.bannerTextColor+"; background: "+c}else u=u.concat("%c "),d.push("color: "+o.bannerTextColor+"; background: "+o.bannerBackgroundColor);d.push("background: transparent"),o.gameTitle&&(u=u.concat(o.gameTitle),o.gameVersion&&(u=u.concat(" v"+o.gameVersion)),o.hidePhaser||(u=u.concat(" / ")));var g="";o.hidePhaser||(u=u.concat("Phaser v"+s.VERSION+g+" ("+h+" | "+v+")")),u=u.concat(" %c "+o.gameURL),d[0]=u,console.log.apply(console,d)}}};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(6),n=e(1),o=e(386),h=new s({initialize:function(a,v){this.game=a,this.raf=new o,this.started=!1,this.running=!1,this.minFps=l(v,"min",5),this.targetFps=l(v,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=n,this.forceSetTimeOut=l(v,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=l(v,"deltaHistory",10),this.panicMax=l(v,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=l(v,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0;for(var a=0;a<this.deltaSmoothingMax;a++)this.deltaHistory[a]=Math.min(this._target,this.deltaHistory[a]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var a=0;a<this.deltaSmoothingMax;a++)this.deltaHistory[a]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var r=window.performance.now();this.now=r;var a=r-this.lastTime;a<0&&(a=0),this.rawDelta=a;var v=this.deltaIndex,u=this.deltaHistory,d=this.deltaSmoothingMax,c=a,g=a;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,c=Math.min(c,this._target)),c>this._min&&(c=u[v],c=Math.min(c,this._min)),u[v]=c,this.deltaIndex++,this.deltaIndex>d&&(this.deltaIndex=0),g=0;for(var m=0;m<d;m++)g+=u[m];g/=d}this.delta=g,this.time+=this.rawDelta,r>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0),this.framesThisSecond++;var x=g/this._target;this.callback(r,g,x),this.lastTime=r,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){this.running||(r&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=n,this.raf=null,this.game=null}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(1),n=new s({initialize:function(){this.isRunning=!1,this.callback=l,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var h=this;this.step=function r(){var a=window.performance.now();h.lastTime=h.tick,h.tick=a,h.callback(a),h.timeOutID=window.requestAnimationFrame(r)},this.stepTimeout=function r(){var a=Date.now(),v=Math.min(Math.max(h.target*2+h.tick-a,0),h.target);h.lastTime=h.tick,h.tick=a,h.callback(a),h.timeOutID=window.setTimeout(r,v)}},start:function(o,h,r){this.isRunning||(this.callback=o,this.isSetTimeOut=h,this.target=r,this.isRunning=!0,this.timeOutID=h?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=l}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(22),l=function(n){var o,h=n.events;if(document.hidden!==void 0)o="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(v){document[v+"Hidden"]!==void 0&&(document.hidden=function(){return document[v+"Hidden"]},o=v+"visibilitychange")})}var a=function(v){document.hidden||v.type==="pause"?h.emit(s.HIDDEN):h.emit(s.VISIBLE)};o&&document.addEventListener(o,a,!1),window.onblur=function(){h.emit(s.BLUR)},window.onfocus=function(){h.emit(s.FOCUS)},window.focus&&n.config.autoFocus&&window.focus()};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(389),l=e(31),n=e(6),o=function(h){var r=n(h,"data",[]),a=n(h,"canvas",null),v=n(h,"palette",s),u=n(h,"pixelWidth",1),d=n(h,"pixelHeight",u),c=n(h,"resizeCanvas",!0),g=n(h,"clearCanvas",!0),m=n(h,"preRender",null),x=n(h,"postRender",null),y=Math.floor(Math.abs(r[0].length*u)),T=Math.floor(Math.abs(r.length*d));a||(a=l.create2D(this,y,T),c=!1,g=!1),c&&(a.width=y,a.height=T);var S=a.getContext("2d");g&&S.clearRect(0,0,y,T),m&&m(a,S);for(var C=0;C<r.length;C++)for(var E=r[C],P=0;P<E.length;P++){var M=E[P];M!=="."&&M!==" "&&(S.fillStyle=v[M],S.fillRect(P*u,C*d,u,d))}return x&&x(a,S),a};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(358),n=e(94),o=e(3),h=new s({Extends:n,initialize:function(a,v,u,d){n.call(this,"CubicBezierCurve"),Array.isArray(a)&&(d=new o(a[6],a[7]),u=new o(a[4],a[5]),v=new o(a[2],a[3]),a=new o(a[0],a[1])),this.p0=a,this.p1=v,this.p2=u,this.p3=d},getStartPoint:function(r){return r===void 0&&(r=new o),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,a){a===void 0&&(a=new o);var v=this.p0,u=this.p1,d=this.p2,c=this.p3;return a.set(l(r,v.x,u.x,d.x,c.x),l(r,v.y,u.y,d.y,c.y))},draw:function(r,a){a===void 0&&(a=32);var v=this.getPoints(a);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var u=1;u<v.length;u++)r.lineTo(v[u].x,v[u].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});h.fromJSON=function(r){var a=r.points,v=new o(a[0],a[1]),u=new o(a[2],a[3]),d=new o(a[4],a[5]),c=new o(a[6],a[7]);return new h(v,u,d,c)},t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(94),n=e(36),o=e(6),h=e(196),r=e(3),a=new s({Extends:l,initialize:function(u,d,c,g,m,x,y,T){if(typeof u=="object"){var S=u;u=o(S,"x",0),d=o(S,"y",0),c=o(S,"xRadius",0),g=o(S,"yRadius",c),m=o(S,"startAngle",0),x=o(S,"endAngle",360),y=o(S,"clockwise",!1),T=o(S,"rotation",0)}else g===void 0&&(g=c),m===void 0&&(m=0),x===void 0&&(x=360),y===void 0&&(y=!1),T===void 0&&(T=0);l.call(this,"EllipseCurve"),this.p0=new r(u,d),this._xRadius=c,this._yRadius=g,this._startAngle=n(m),this._endAngle=n(x),this._clockwise=y,this._rotation=n(T)},getStartPoint:function(v){return v===void 0&&(v=new r),this.getPoint(0,v)},getResolution:function(v){return v*2},getPoint:function(v,u){u===void 0&&(u=new r);for(var d=Math.PI*2,c=this._endAngle-this._startAngle,g=Math.abs(c)<Number.EPSILON;c<0;)c+=d;for(;c>d;)c-=d;c<Number.EPSILON&&(g?c=0:c=d),this._clockwise&&!g&&(c===d?c=-d:c=c-d);var m=this._startAngle+v*c,x=this.p0.x+this._xRadius*Math.cos(m),y=this.p0.y+this._yRadius*Math.sin(m);if(this._rotation!==0){var T=Math.cos(this._rotation),S=Math.sin(this._rotation),C=x-this.p0.x,E=y-this.p0.y;x=C*T-E*S+this.p0.x,y=C*S+E*T+this.p0.y}return u.set(x,y)},setXRadius:function(v){return this.xRadius=v,this},setYRadius:function(v){return this.yRadius=v,this},setWidth:function(v){return this.xRadius=v/2,this},setHeight:function(v){return this.yRadius=v/2,this},setStartAngle:function(v){return this.startAngle=v,this},setEndAngle:function(v){return this.endAngle=v,this},setClockwise:function(v){return this.clockwise=v,this},setRotation:function(v){return this.rotation=v,this},x:{get:function(){return this.p0.x},set:function(v){this.p0.x=v}},y:{get:function(){return this.p0.y},set:function(v){this.p0.y=v}},xRadius:{get:function(){return this._xRadius},set:function(v){this._xRadius=v}},yRadius:{get:function(){return this._yRadius},set:function(v){this._yRadius=v}},startAngle:{get:function(){return h(this._startAngle)},set:function(v){this._startAngle=n(v)}},endAngle:{get:function(){return h(this._endAngle)},set:function(v){this._endAngle=n(v)}},clockwise:{get:function(){return this._clockwise},set:function(v){this._clockwise=v}},angle:{get:function(){return h(this._rotation)},set:function(v){this._rotation=n(v)}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),clockwise:this._clockwise,rotation:h(this._rotation)}}});a.fromJSON=function(v){return new a(v)},t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(94),n=e(199),o=e(10),h=e(3),r=new s({Extends:l,initialize:function(v,u){l.call(this,"LineCurve"),Array.isArray(v)&&(u=new h(v[2],v[3]),v=new h(v[0],v[1])),this.p0=v,this.p1=u,this.arcLengthDivisions=1},getBounds:function(a){return a===void 0&&(a=new o),n([this.p0,this.p1],a)},getStartPoint:function(a){return a===void 0&&(a=new h),a.copy(this.p0)},getResolution:function(a){return a===void 0&&(a=1),a},getPoint:function(a,v){return v===void 0&&(v=new h),a===1?v.copy(this.p1):(v.copy(this.p1).subtract(this.p0).scale(a).add(this.p0),v)},getPointAt:function(a,v){return this.getPoint(a,v)},getTangent:function(a,v){return v===void 0&&(v=new h),v.copy(this.p1).subtract(this.p0).normalize(),v},getUtoTmapping:function(a,v,u){var d;if(v){var c=this.getLengths(u),g=c[c.length-1],m=Math.min(v,g);d=m/g}else d=a;return d},draw:function(a){return a.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});r.fromJSON=function(a){var v=a.points,u=new h(v[0],v[1]),d=new h(v[2],v[3]);return new r(u,d)},t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(3),n=new s({initialize:function(h,r){this.active=!1,this.p0=new l(h,r)},getPoint:function(o,h){return h===void 0&&(h=new l),h.copy(this.p0)},getPointAt:function(o,h){return this.getPoint(o,h)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(94),n=e(359),o=e(3),h=new s({Extends:l,initialize:function(a,v,u){l.call(this,"QuadraticBezier"),Array.isArray(a)&&(u=new o(a[4],a[5]),v=new o(a[2],a[3]),a=new o(a[0],a[1])),this.p0=a,this.p1=v,this.p2=u},getStartPoint:function(r){return r===void 0&&(r=new o),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,a){a===void 0&&(a=new o);var v=this.p0,u=this.p1,d=this.p2;return a.set(n(r,v.x,u.x,d.x),n(r,v.y,u.y,d.y))},draw:function(r,a){a===void 0&&(a=32);var v=this.getPoints(a);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var u=1;u<v.length;u++)r.lineTo(v[u].x,v[u].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});h.fromJSON=function(r){var a=r.points,v=new o(a[0],a[1]),u=new o(a[2],a[3]),d=new o(a[4],a[5]);return new h(v,u,d)},t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(194),l=e(0),n=e(94),o=e(3),h=new l({Extends:n,initialize:function(a){a===void 0&&(a=[]),n.call(this,"SplineCurve"),this.points=[],this.addPoints(a)},addPoints:function(r){for(var a=0;a<r.length;a++){var v=new o;typeof r[a]=="number"?(v.x=r[a],v.y=r[a+1],a++):Array.isArray(r[a])?(v.x=r[a][0],v.y=r[a][1]):(v.x=r[a].x,v.y=r[a].y),this.points.push(v)}return this},addPoint:function(r,a){var v=new o(r,a);return this.points.push(v),v},getStartPoint:function(r){return r===void 0&&(r=new o),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,a){a===void 0&&(a=new o);var v=this.points,u=(v.length-1)*r,d=Math.floor(u),c=u-d,g=v[d===0?d:d-1],m=v[d],x=v[d>v.length-2?v.length-1:d+1],y=v[d>v.length-3?v.length-1:d+2];return a.set(s(c,g.x,m.x,x.x,y.x),s(c,g.y,m.y,x.y,y.y))},toJSON:function(){for(var r=[],a=0;a<this.points.length;a++)r.push(this.points[a].x),r.push(this.points[a].y);return{type:this.type,points:r}}});h.fromJSON=function(r){return new h(r.points)},t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o,h,r,a){(!h||h==="")&&(h=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),a===void 0&&(a=null),this.key=o,this.fragmentSrc=h,this.vertexSrc=r,this.uniforms=a}});t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(38);s.ColorSpectrum=e(909),s.ColorToRGBA=e(910),s.ComponentToHex=e(398),s.GetColor=e(103),s.GetColor32=e(328),s.HexStringToColor=e(327),s.HSLToColor=e(911),s.HSVColorWheel=e(912),s.HSVToRGB=e(188),s.HueToComponent=e(399),s.IntegerToColor=e(189),s.IntegerToRGB=e(330),s.Interpolate=e(913),s.ObjectToColor=e(331),s.RandomRGB=e(914),s.RGBStringToColor=e(332),s.RGBToHSV=e(329),s.RGBToString=e(915),s.ValueToColor=e(187),t.exports=s},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l=s.toString(16);return l.length===1?"0"+l:l};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return n<0&&(n+=1),n>1&&(n-=1),n<.16666666666666666?s+(l-s)*6*n:n<.5?l:n<.6666666666666666?s+(l-s)*(.6666666666666666-n)*6:s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(105),l=function(n){if(document.readyState==="complete"||document.readyState==="interactive"){n();return}var o=function(){document.removeEventListener("deviceready",o,!0),document.removeEventListener("DOMContentLoaded",o,!0),window.removeEventListener("load",o,!0),n()};document.body?s.cordova?document.addEventListener("deviceready",o,!1):(document.addEventListener("DOMContentLoaded",o,!0),window.addEventListener("load",o,!0)):window.setTimeout(o,20)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){if(!s)return window.innerHeight;var l=Math.abs(window.orientation),n={w:0,h:0},o=document.createElement("div");return o.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(o),n.w=l===90?o.offsetHeight:window.innerWidth,n.h=l===90?window.innerWidth:o.offsetHeight,document.documentElement.removeChild(o),o=null,Math.abs(window.orientation)!==90?n.h:n.w};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(201),l=function(n,o){var h=window.screen,r=h?h.orientation||h.mozOrientation||h.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return s.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return s.ORIENTATION.LANDSCAPE}else return o>n?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l;return s!==""&&(typeof s=="string"?l=document.getElementById(s):s&&s.nodeType===1&&(l=s)),l||(l=document.body),l};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l="";try{if(window.DOMParser){var n=new DOMParser;l=n.parseFromString(s,"text/xml")}else l=new ActiveXObject("Microsoft.XMLDOM"),l.loadXML(s)}catch{l=null}return!l||!l.documentElement||l.getElementsByTagName("parsererror").length?null:l};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(203),n=e(9),o=e(51),h=e(22),r=e(410),a=e(411),v=e(412),u=e(413),d=e(25),c=e(177),g=new s({initialize:function(x,y){this.game=x,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new n,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new r(this):null,this.mouse=y.inputMouse?new a(this):null,this.touch=y.inputTouch?new u(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers,y.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var T=0;T<=this.pointersTotal;T++){var S=new v(this,T);S.smoothFactor=y.inputSmoothFactor,this.pointers.push(S)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new d,this._tempMatrix2=new d,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],x.events.once(h.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(o.MANAGER_BOOT),this.game.events.on(h.PRE_RENDER,this.preRender,this),this.game.events.once(h.DESTROY,this.destroy,this)},setCanvasOver:function(m){this.isOver=!0,this.events.emit(o.GAME_OVER,m)},setCanvasOut:function(m){this.isOver=!1,this.events.emit(o.GAME_OUT,m)},preRender:function(){var m=this.game.loop.now,x=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=m,this.events.emit(o.MANAGER_UPDATE);for(var T=0;T<y.length;T++){var S=y[T];if(S.sys.input&&S.sys.input.updatePoll(m,x)&&this.globalTopOnly)return}},setDefaultCursor:function(m){this.defaultCursor=m,this.canvas.style.cursor!==m&&(this.canvas.style.cursor=m)},setCursor:function(m){m.cursor&&(this.canvas.style.cursor=m.cursor)},resetCursor:function(m){m.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(m){m===void 0&&(m=1);var x=[];this.pointersTotal+m>10&&(m=10-this.pointersTotal);for(var y=0;y<m;y++){var T=this.pointers.length,S=new v(this,T);S.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(S),this.pointersTotal++,x.push(S)}return x},updateInputPlugins:function(m,x){var y=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var T=0;T<y.length;T++){var S=y[T];if(S.sys.input){var C=S.sys.input.update(m,x);if(C&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var S=m.changedTouches[T],C=1;C<this.pointersTotal;C++){var E=x[C];if(!E.active){E.touchstart(S,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(l.TOUCH_START,y)},onTouchMove:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var S=m.changedTouches[T],C=1;C<this.pointersTotal;C++){var E=x[C];if(E.active&&E.identifier===S.identifier){E.touchmove(S,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(l.TOUCH_MOVE,y)},onTouchEnd:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var S=m.changedTouches[T],C=1;C<this.pointersTotal;C++){var E=x[C];if(E.active&&E.identifier===S.identifier){E.touchend(S,m),y.push(E);break}}this.updateInputPlugins(l.TOUCH_END,y)},onTouchCancel:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var S=m.changedTouches[T],C=1;C<this.pointersTotal;C++){var E=x[C];if(E.active&&E.identifier===S.identifier){E.touchcancel(S,m),y.push(E);break}}this.updateInputPlugins(l.TOUCH_CANCEL,y)},onMouseDown:function(m){var x=this.mousePointer;x.down(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(l.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(m){var x=this.mousePointer;x.move(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(l.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(m){var x=this.mousePointer;x.up(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(l.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(m){var x=this.mousePointer;x.wheel(m),this.activePointer=x,this.updateInputPlugins(l.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(m){var x=this.mouse.locked;this.mousePointer.locked=x,this.events.emit(o.POINTERLOCK_CHANGE,m,x)},inputCandidate:function(m,x){var y=m.input;if(!y||!y.enabled||!y.alwaysEnabled&&!m.willRender(x))return!1;var T=!0,S=m.parentContainer;if(S)do{if(!S.willRender(x)){T=!1;break}S=S.parentContainer}while(S);return T},hitTest:function(m,x,y,T){T===void 0&&(T=this._tempHitTest);var S=this._tempPoint,C=y.scrollX,E=y.scrollY;T.length=0;var P=m.x,M=m.y;y.getWorldPoint(P,M,S),m.worldX=S.x,m.worldY=S.y;for(var R={x:0,y:0},A=this._tempMatrix,O=this._tempMatrix2,F=0;F<x.length;F++){var I=x[F];if(!!this.inputCandidate(I,y)){var w=S.x+C*I.scrollFactorX-C,b=S.y+E*I.scrollFactorY-E;I.parentContainer?(I.getWorldTransformMatrix(A,O),A.applyInverse(w,b,R)):c(w,b,I.x,I.y,I.rotation,I.scaleX,I.scaleY,R),this.pointWithinHitArea(I,R.x,R.y)&&T.push(I)}}return T},pointWithinHitArea:function(m,x,y){x+=m.displayOriginX,y+=m.displayOriginY;var T=m.input;return T&&T.hitAreaCallback(T.hitArea,x,y,m)?(T.localX=x,T.localY=y,!0):!1},pointWithinInteractiveObject:function(m,x,y){return m.hitArea?(x+=m.gameObject.displayOriginX,y+=m.gameObject.displayOriginY,m.localX=x,m.localY=y,m.hitAreaCallback(m.hitArea,x,y,m)):!1},transformPointer:function(m,x,y,T){var S=m.position,C=m.prevPosition;C.x=S.x,C.y=S.y;var E=this.scaleManager.transformX(x),P=this.scaleManager.transformY(y),M=m.smoothFactor;!T||M===0?(S.x=E,S.y=P):(S.x=E*M+C.x*(1-M),S.y=P*M+C.y*(1-M))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(h.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var m=0;m<this.pointers.length;m++)this.pointers[m].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=g},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(93),l=e(0),n=e(22),o=e(51),h=e(143),r=e(1),a=new l({initialize:function(u){this.manager=u,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=r,this.onKeyUp=r,u.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var v=this.manager.config;this.enabled=v.inputKeyboard,this.target=v.inputKeyboardEventTarget,this.addCapture(v.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(n.POST_STEP,this.postUpdate,this)},startListeners:function(){var v=this;this.onKeyDown=function(d){if(!(d.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(d),v.manager.events.emit(o.MANAGER_PROCESS);var c=d.altKey||d.ctrlKey||d.shiftKey||d.metaKey;v.preventDefault&&!c&&v.captures.indexOf(d.keyCode)>-1&&d.preventDefault()}},this.onKeyUp=function(d){if(!(d.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(d),v.manager.events.emit(o.MANAGER_PROCESS);var c=d.altKey||d.ctrlKey||d.shiftKey||d.metaKey;v.preventDefault&&!c&&v.captures.indexOf(d.keyCode)>-1&&d.preventDefault()}};var u=this.target;u&&(u.addEventListener("keydown",this.onKeyDown,!1),u.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var v=this.target;v.removeEventListener("keydown",this.onKeyDown,!1),v.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var u=this.captures,d=0;d<v.length;d++){var c=v[d];typeof c=="string"&&(c=h[c.trim().toUpperCase()]),u.indexOf(c)===-1&&u.push(c)}this.preventDefault=u.length>0},removeCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var u=this.captures,d=0;d<v.length;d++){var c=v[d];typeof c=="string"&&(c=h[c.toUpperCase()]),s(u,c)}this.preventDefault=u.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(n.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(191),n=e(51),o=e(1),h=new s({initialize:function(a){this.manager=a,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,a.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){if(l.pointerLock){var r=this.target;r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock()}},releasePointerLock:function(){l.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(!!r){var a=this,v=this.manager,u=v.canvas,d=window&&window.focus&&v.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&(v.onMouseMove(g),a.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){d&&window.focus(),!g.defaultPrevented&&a.enabled&&v&&v.enabled&&(v.onMouseDown(g),a.preventDefaultDown&&g.target===u&&g.preventDefault())},this.onMouseDownWindow=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&g.target!==u&&v.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&(v.onMouseUp(g),a.preventDefaultUp&&g.target===u&&g.preventDefault())},this.onMouseUpWindow=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&g.target!==u&&v.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&v.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&v.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&v.onMouseWheel(g),a.preventDefaultWheel&&g.target===u&&g.preventDefault()};var c={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,c),r.addEventListener("mouseout",this.onMouseOut,c),this.preventDefaultWheel?r.addEventListener("wheel",this.onMouseWheel,{passive:!1}):r.addEventListener("wheel",this.onMouseWheel,c),window&&v.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,c),window.top.addEventListener("mouseup",this.onMouseUpWindow,c)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,c),window.addEventListener("mouseup",this.onMouseUpWindow,c),this.isTop=!1}l.pointerLock&&(this.pointerLockChange=function(g){var m=a.target;a.locked=document.pointerLockElement===m||document.mozPointerLockElement===m||document.webkitPointerLockElement===m,v.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&(r=this.isTop?window.top:window,r.removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),l.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(349),l=e(0),n=e(50),o=e(124),h=e(360),r=e(3),a=e(105),v=new l({initialize:function(d,c){this.manager=d,this.id=c,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=c===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(u){var d=u.getWorldPoint(this.x,this.y);return this.worldX=d.x,this.worldY=d.y,this},positionToCamera:function(u,d){return u.getWorldPoint(this.x,this.y,d)},updateMotion:function(){var u=this.position.x,d=this.position.y,c=this.midPoint.x,g=this.midPoint.y;if(!(u===c&&d===g)){var m=h(this.motionFactor,c,u),x=h(this.motionFactor,g,d);o(m,u,.1)&&(m=u),o(x,d,.1)&&(x=d),this.midPoint.set(m,x);var y=u-m,T=d-x;this.velocity.set(y,T),this.angle=s(m,x,u,d),this.distance=Math.sqrt(y*y+T*T)}},up:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.button=u.button,this.upElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),u.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=u.timeStamp,this.wasTouch=!1)},down:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.button=u.button,this.downElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),u.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),a.macOS&&u.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=u.timeStamp),this.wasTouch=!1},move:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.manager.transformPointer(this,u.pageX,u.pageY,!0),this.locked&&(this.movementX=u.movementX||u.mozMovementX||u.webkitMovementX||0,this.movementY=u.movementY||u.mozMovementY||u.webkitMovementY||0),this.moveTime=u.timeStamp,this.wasTouch=!1},wheel:function(u){"buttons"in u&&(this.buttons=u.buttons),this.event=u,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.deltaX=u.deltaX,this.deltaY=u.deltaY,this.deltaZ=u.deltaZ,this.wasTouch=!1},touchstart:function(u,d){u.pointerId&&(this.pointerId=u.pointerId),this.identifier=u.identifier,this.target=u.target,this.active=!0,this.buttons=1,this.event=d,this.downElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=d.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(u,d){this.event=d,this.manager.transformPointer(this,u.pageX,u.pageY,!0),this.moveTime=d.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(u,d){this.buttons=0,this.event=d,this.upElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=d.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(u,d){this.buttons=0,this.event=d,this.upElement=u.target,this.manager.transformPointer(this,u.pageX,u.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=d.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(u,d){u===void 0&&(u=10),d===void 0&&(d=[]);for(var c=this.prevPosition.x,g=this.prevPosition.y,m=this.position.x,x=this.position.y,y=0;y<u;y++){var T=1/u*y;d[y]={x:h(T,c,m),y:h(T,g,x)}}return d},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(u){this.position.x=u}},y:{get:function(){return this.position.y},set:function(u){this.position.y=u}},time:{get:function(){return this.event?this.event.timeStamp:0}}});t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(51),n=e(1),o=new s({initialize:function(r){this.manager=r,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=n,this.onTouchStartWindow=n,this.onTouchMove=n,this.onTouchEnd=n,this.onTouchEndWindow=n,this.onTouchCancel=n,this.onTouchCancelWindow=n,this.onTouchOver=n,this.onTouchOut=n,r.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputTouch,this.target=h.inputTouchEventTarget,this.capture=h.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),h.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),this},startListeners:function(){var h=this,r=this.manager.canvas,a=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(c){a&&window.focus(),!c.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchStart(c),h.capture&&c.cancelable&&c.target===r&&c.preventDefault())},this.onTouchStartWindow=function(c){!c.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&c.target!==r&&h.manager.onTouchStart(c)},this.onTouchMove=function(c){!c.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchMove(c),h.capture&&c.cancelable&&c.preventDefault())},this.onTouchEnd=function(c){!c.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchEnd(c),h.capture&&c.cancelable&&c.target===r&&c.preventDefault())},this.onTouchEndWindow=function(c){!c.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&c.target!==r&&h.manager.onTouchEnd(c)},this.onTouchCancel=function(c){!c.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchCancel(c),h.capture&&c.preventDefault())},this.onTouchCancelWindow=function(c){!c.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&h.manager.onTouchCancel(c)},this.onTouchOver=function(c){!c.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&h.manager.setCanvasOver(c)},this.onTouchOut=function(c){!c.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&h.manager.setCanvasOut(c)};var v=this.target;if(!!v){var u={passive:!0},d={passive:!1};v.addEventListener("touchstart",this.onTouchStart,this.capture?d:u),v.addEventListener("touchmove",this.onTouchMove,this.capture?d:u),v.addEventListener("touchend",this.onTouchEnd,this.capture?d:u),v.addEventListener("touchcancel",this.onTouchCancel,this.capture?d:u),v.addEventListener("touchover",this.onTouchOver,this.capture?d:u),v.addEventListener("touchout",this.onTouchOut,this.capture?d:u),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,d),window.addEventListener("touchend",this.onTouchEndWindow,d),window.addEventListener("touchcancel",this.onTouchCancelWindow,d)),this.enabled=!0}},stopListeners:function(){var h=this.target;h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd),h.removeEventListener("touchcancel",this.onTouchCancel),h.removeEventListener("touchover",this.onTouchOver),h.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(22),n=e(9),o=e(8),h=e(16),r=e(5),a=e(2),v=e(24),u=e(93),d=new s({Extends:n,initialize:function(g){n.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(l.BOOT,this.boot,this)},boot:function(){var c,g,m,x,y,T,S,C=this.game.config,E=C.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),c=0;c<E.length;c++)g=E[c],m=a(g,"key",null),x=a(g,"plugin",null),y=a(g,"start",!1),T=a(g,"mapping",null),S=a(g,"data",null),m&&(x?this.install(m,x,y,T,S):console.warn("Missing `plugin` for key: "+m));for(E=C.installScenePlugins,E=E.concat(this._pendingScene),c=0;c<E.length;c++)g=E[c],m=a(g,"key",null),x=a(g,"plugin",null),T=a(g,"mapping",null),m&&(x?this.installScenePlugin(m,x,T):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(l.DESTROY,this.destroy,this)},addToScene:function(c,g,m){var x,y,T,S=this.game,C=c.scene,E=c.settings.map,P=c.settings.isBooted;for(x=0;x<g.length;x++)y=g[x],S[y]?(c[y]=S[y],E.hasOwnProperty(y)&&(C[E[y]]=c[y])):y==="game"&&E.hasOwnProperty(y)&&(C[E[y]]=S);for(var M=0;M<m.length;M++)for(T=m[M],x=0;x<T.length;x++)if(y=T[x],!!v.hasCore(y)){var R=v.getCore(y),A=R.mapping,O=new R.plugin(C,this,A);c[A]=O,R.custom?C[A]=O:E.hasOwnProperty(A)&&(C[E[A]]=O),P&&O.boot()}for(T=this.plugins,x=0;x<T.length;x++){var F=T[x];F.mapping&&(C[F.mapping]=F.plugin)}},getDefaultScenePlugins:function(){var c=this.game.config.defaultPlugins;return c=c.concat(this.scenePlugins),c},installScenePlugin:function(c,g,m,x,y){if(y===void 0&&(y=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+c);return}if(!v.hasCore(c))v.register(c,g,m,!0),this.scenePlugins.push(c);else if(!y&&v.hasCore(c)){console.warn("Scene Plugin key in use: "+c);return}if(x){var T=new g(x,this,c);x.sys[c]=T,m&&m!==""&&(x[m]=T),T.boot()}},install:function(c,g,m,x,y){if(m===void 0&&(m=!1),x===void 0&&(x=null),y===void 0&&(y=null),typeof g!="function")return console.warn("Invalid Plugin: "+c),null;if(v.hasCustom(c))return console.warn("Plugin key in use: "+c),null;if(x!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:c,plugin:g,start:m,mapping:x,data:y});else if(v.registerCustom(c,g,x,y),m)return this.start(c);return null},getIndex:function(c){for(var g=this.plugins,m=0;m<g.length;m++){var x=g[m];if(x.key===c)return m}return-1},getEntry:function(c){var g=this.getIndex(c);if(g!==-1)return this.plugins[g]},isActive:function(c){var g=this.getEntry(c);return g&&g.active},start:function(c,g){g===void 0&&(g=c);var m=this.getEntry(g);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(c,g)),m?m.plugin:null},createEntry:function(c,g){var m=v.getCustom(c);if(m){var x=new m.plugin(this);m={key:g,plugin:x,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),x.init(m.data),x.start()}return m},stop:function(c){var g=this.getEntry(c);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(c,g){g===void 0&&(g=!0);var m=this.getEntry(c);if(m)return m.plugin;var x=this.getClass(c);return x&&g?(m=this.createEntry(c,c),m?m.plugin:null):x||null},getClass:function(c){return v.getCustomClass(c)},removeGlobalPlugin:function(c){var g=this.getEntry(c);g&&u(this.plugins,g),v.removeCustom(c)},removeScenePlugin:function(c){u(this.scenePlugins,c),v.remove(c)},registerGameObject:function(c,g,m){return g&&r.register(c,g),m&&h.register(c,m),this},removeGameObject:function(c,g,m){return g===void 0&&(g=!0),m===void 0&&(m=!0),g&&r.remove(c),m&&h.remove(c),this},registerFileType:function(c,g,m){o.register(c,g),m&&m.sys.load&&(m.sys.load[c]=g)},destroy:function(){for(var c=0;c<this.plugins.length;c++)this.plugins[c].plugin.destroy();v.destroyCustomPlugins(),this.game.noReturn&&v.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=d},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(201),l=e(0),n=e(9),o=e(104),h=e(22),r=e(401),a=e(407),v=e(402),u=e(1),d=e(10),c=e(416),g=e(76),m=e(3),x=new l({Extends:n,initialize:function(T){n.call(this),this.game=T,this.canvas,this.canvasBounds=new d,this.parent=null,this.parentIsWindow=!1,this.parentSize=new c,this.gameSize=new c,this.baseSize=new c,this.displaySize=new c,this.scaleMode=s.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=s.CENTER.NO_CENTER,this.orientation=s.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:u,windowResize:u,fullScreenChange:u,fullScreenError:u}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(h.BOOT,this.boot,this)},boot:function(){var y=this.game;this.canvas=y.canvas,this.fullscreen=y.device.fullscreen,this.scaleMode!==s.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===s.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),y.events.on(h.PRE_STEP,this.step,this),y.events.once(h.READY,this.refresh,this),y.events.once(h.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(y){this.getParent(y),this.getParentBounds();var T=y.width,S=y.height,C=y.scaleMode,E=y.zoom,P=y.autoRound;if(typeof T=="string"){var M=this.parentSize.width;M===0&&(M=window.innerWidth);var R=parseInt(T,10)/100;T=Math.floor(M*R)}if(typeof S=="string"){var A=this.parentSize.height;A===0&&(A=window.innerHeight);var O=parseInt(S,10)/100;S=Math.floor(A*O)}this.scaleMode=C,this.autoRound=P,this.autoCenter=y.autoCenter,this.resizeInterval=y.resizeInterval,P&&(T=Math.floor(T),S=Math.floor(S)),this.gameSize.setSize(T,S),E===s.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,S),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),y.minWidth>0&&this.displaySize.setMin(y.minWidth*E,y.minHeight*E),y.maxWidth>0&&this.displaySize.setMax(y.maxWidth*E,y.maxHeight*E),this.displaySize.setSize(T,S),this.orientation=v(T,S)},getParent:function(y){var T=y.parent;if(T!==null){if(this.parent=a(T),this.parentIsWindow=this.parent===document.body,y.expandParent&&y.scaleMode!==s.SCALE_MODE.NONE){var S=this.parent.getBoundingClientRect();(this.parentIsWindow||S.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",S=this.parent.getBoundingClientRect(),!this.parentIsWindow&&S.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}y.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=a(y.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var y=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=r(!0));var S=T.width,C=T.height;return y.width!==S||y.height!==C?(y.setSize(S,C),!0):!1},lockOrientation:function(y){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,y):!1},setParentSize:function(y,T){return this.parentSize.setSize(y,T),this.refresh()},setGameSize:function(y,T){var S=this.autoRound;S&&(y=Math.floor(y),T=Math.floor(T));var C=this.width,E=this.height;return this.gameSize.resize(y,T),this.baseSize.resize(y,T),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(y/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(C,E)},resize:function(y,T){var S=this.zoom,C=this.autoRound;C&&(y=Math.floor(y),T=Math.floor(T));var E=this.width,P=this.height;this.gameSize.resize(y,T),this.baseSize.resize(y,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(y*S,T*S),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var M=this.canvas.style,R=y*S,A=T*S;return C&&(R=Math.floor(R),A=Math.floor(A)),(R!==y||A!==T)&&(M.width=R+"px",M.height=A+"px"),this.refresh(E,P)},setZoom:function(y){return this.zoom=y,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(y,T){y===void 0&&(y=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var S=this.game.domContainer;if(S){this.baseSize.setCSS(S);var C=this.canvas.style,E=S.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=C.marginLeft,E.marginTop=C.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,y,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var y=v(this.width,this.height);y!==this.orientation&&(this.orientation=y,this.emit(o.ORIENTATION_CHANGE,y))}},updateScale:function(){var y=this.canvas.style,T=this.gameSize.width,S=this.gameSize.height,C,E,P=this.zoom,M=this.autoRound;this.scaleMode===s.SCALE_MODE.NONE?(this.displaySize.setSize(T*P,S*P),C=this.displaySize.width,E=this.displaySize.height,M&&(C=Math.floor(C),E=Math.floor(E)),this._resetZoom&&(y.width=C+"px",y.height=E+"px",this._resetZoom=!1)):this.scaleMode===s.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),C=this.displaySize.width,E=this.displaySize.height,M&&(C=Math.floor(C),E=Math.floor(E)),this.canvas.width=C,this.canvas.height=E):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),C=this.displaySize.width,E=this.displaySize.height,M&&(C=Math.floor(C),E=Math.floor(E)),y.width=C+"px",y.height=E+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var y=g(this.parentSize.width,this.gameSize.width,0,!0),T=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(y,T),1)},updateCenter:function(){var y=this.autoCenter;if(y!==s.CENTER.NO_CENTER){var T=this.canvas,S=T.style,C=T.getBoundingClientRect(),E=C.width,P=C.height,M=Math.floor((this.parentSize.width-E)/2),R=Math.floor((this.parentSize.height-P)/2);y===s.CENTER.CENTER_HORIZONTALLY?R=0:y===s.CENTER.CENTER_VERTICALLY&&(M=0),S.marginLeft=M+"px",S.marginTop=R+"px"}},updateBounds:function(){var y=this.canvasBounds,T=this.canvas.getBoundingClientRect();y.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),y.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),y.width=T.width,y.height=T.height},transformX:function(y){return(y-this.canvasBounds.left)*this.displayScale.x},transformY:function(y){return(y-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(y){y===void 0&&(y={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(o.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var S=this.getFullscreenTarget();T.keyboard?S[T.request](Element.ALLOW_KEYBOARD_INPUT):S[T.request](y)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(y){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,y)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var y=document.createElement("div");y.style.margin="0",y.style.padding="0",y.style.width="100%",y.style.height="100%",this.fullscreenTarget=y,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var y=this.fullscreenTarget;if(y&&y.parentNode){var T=y.parentNode;T.insertBefore(this.canvas,y),T.removeChild(y)}}},stopFullscreen:function(){var y=this.fullscreen;if(!y.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;y.active&&document[y.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(y){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(y)},startListeners:function(){var y=this,T=this.listeners;if(T.orientationChange=function(){y.updateBounds(),y._checkOrientation=!0,y.dirty=!0},T.windowResize=function(){y.updateBounds(),y.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(C){return y.onFullScreenChange(C)},T.fullScreenError=function(C){return y.onFullScreenError(C)};var S=["webkit","moz",""];S.forEach(function(C){document.addEventListener(C+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(C+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(y,T){!this.parent||(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var y=this.listeners;window.removeEventListener("orientationchange",y.orientationChange,!1),window.removeEventListener("resize",y.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(S){document.removeEventListener(S+"fullscreenchange",y.fullScreenChange,!1),document.removeEventListener(S+"fullscreenerror",y.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",y.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===s.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===s.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});t.exports=x},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(18),l=e(0),n=e(76),o=e(3),h=new l({initialize:function(a,v,u,d){a===void 0&&(a=0),v===void 0&&(v=a),u===void 0&&(u=0),d===void 0&&(d=null),this._width=a,this._height=v,this._parent=d,this.aspectMode=u,this.aspectRatio=v===0?1:a/v,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(r){return r===void 0&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,a){return r===void 0&&(r=0),a===void 0&&(a=r),this.snapTo.set(r,a),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,a){return r===void 0&&(r=0),a===void 0&&(a=r),this.minWidth=s(r,0,this.maxWidth),this.minHeight=s(a,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,a){return r===void 0&&(r=Number.MAX_VALUE),a===void 0&&(a=r),this.maxWidth=s(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=s(a,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,a){switch(r===void 0&&(r=0),a===void 0&&(a=r),this.aspectMode){case h.NONE:this._width=this.getNewWidth(n(r,this.snapTo.x)),this._height=this.getNewHeight(n(a,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case h.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(n(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case h.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(n(a,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case h.FIT:this.constrain(r,a,!0);break;case h.ENVELOP:this.constrain(r,a,!1);break}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,a){return this._width=this.getNewWidth(n(r,this.snapTo.x)),this._height=this.getNewHeight(n(a,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(r,a){return a===void 0&&(a=!0),r=s(r,this.minWidth,this.maxWidth),a&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,a){return a===void 0&&(a=!0),r=s(r,this.minHeight,this.maxHeight),a&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,a,v){r===void 0&&(r=0),a===void 0&&(a=r),v===void 0&&(v=!0),r=this.getNewWidth(r),a=this.getNewHeight(a);var u=this.snapTo,d=a===0?1:r/a;return v&&this.aspectRatio>d||!v&&this.aspectRatio<d?(r=n(r,u.x),a=r/this.aspectRatio,u.y>0&&(a=n(a,u.y),r=a*this.aspectRatio)):(v&&this.aspectRatio<d||!v&&this.aspectRatio>d)&&(a=n(a,u.y),r=a*this.aspectRatio,u.x>0&&(r=n(r,u.x),a=r*(1/this.aspectRatio))),this._width=r,this._height=a,this},fitTo:function(r,a){return this.constrain(r,a,!0)},envelop:function(r,a){return this.constrain(r,a,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});h.NONE=0,h.WIDTH_CONTROLS_HEIGHT=1,h.HEIGHT_CONTROLS_WIDTH=2,h.FIT=3,h.ENVELOP=4,t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(144),n=e(20),o=e(22),h=e(6),r=e(95),a=e(1),v=e(418),u=e(204),d=new s({initialize:function(g,m){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this._pending.push({key:"default",scene:m[x],autoStart:x===0,data:{}})}g.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var c,g,m,x;for(c=0;c<this._pending.length;c++){g=this._pending[c],m=g.key,x=g.scene;var y;x instanceof v?y=this.createSceneFromInstance(m,x):typeof x=="object"?y=this.createSceneFromObject(m,x):typeof x=="function"&&(y=this.createSceneFromFunction(m,x)),m=y.sys.settings.key,this.keys[m]=y,this.scenes.push(y),this._data[m]&&(y.sys.settings.data=this._data[m].data,this._data[m].autoStart&&(g.autoStart=!0)),(g.autoStart||y.sys.settings.active)&&this._start.push(m)}for(this._pending.length=0,this._data={},this.isBooted=!0,c=0;c<this._start.length;c++)g=this._start[c],this.start(g);this._start.length=0}},processQueue:function(){var c=this._pending.length,g=this._queue.length;if(!(c===0&&g===0)){var m,x;if(c){for(m=0;m<c;m++)x=this._pending[m],this.add(x.key,x.scene,x.autoStart,x.data);for(m=0;m<this._start.length;m++)x=this._start[m],this.start(x);this._start.length=0,this._pending.length=0;return}for(m=0;m<this._queue.length;m++)x=this._queue[m],this[x.op](x.keyA,x.keyB);this._queue.length=0}},add:function(c,g,m,x){if(m===void 0&&(m=!1),x===void 0&&(x={}),this.isProcessing||!this.isBooted)return this._pending.push({key:c,scene:g,autoStart:m,data:x}),this.isBooted||(this._data[c]={data:x}),null;c=this.getKey(c,g);var y;return g instanceof v?y=this.createSceneFromInstance(c,g):typeof g=="object"?(g.key=c,y=this.createSceneFromObject(c,g)):typeof g=="function"&&(y=this.createSceneFromFunction(c,g)),y.sys.settings.data=x,c=y.sys.settings.key,this.keys[c]=y,this.scenes.push(y),(m||y.sys.settings.active)&&(this._pending.length?this._start.push(c):this.start(c)),y},remove:function(c){if(this.isProcessing)this._queue.push({op:"remove",keyA:c,keyB:null});else{var g=this.getScene(c);if(!g||g.sys.isTransitioning())return this;var m=this.scenes.indexOf(g),x=g.sys.settings.key;m>-1&&(delete this.keys[x],this.scenes.splice(m,1),this._start.indexOf(x)>-1&&(m=this._start.indexOf(x),this._start.splice(m,1)),g.sys.destroy())}return this},bootScene:function(c){var g=c.sys,m=g.settings;g.sceneUpdate=a,c.init&&(c.init.call(c,m.data),m.status=l.INIT,m.isTransition&&g.events.emit(n.TRANSITION_INIT,m.transitionFrom,m.transitionDuration));var x;g.load&&(x=g.load,x.reset()),x&&c.preload?(c.preload.call(c),x.list.size===0?this.create(c):(m.status=l.LOADING,x.once(r.COMPLETE,this.loadComplete,this),x.start())):this.create(c)},loadComplete:function(c){this.create(c.scene)},payloadComplete:function(c){this.bootScene(c.scene)},update:function(c,g){this.processQueue(),this.isProcessing=!0;for(var m=this.scenes.length-1;m>=0;m--){var x=this.scenes[m].sys;x.settings.status>l.START&&x.settings.status<=l.RUNNING&&x.step(c,g)}},render:function(c){for(var g=0;g<this.scenes.length;g++){var m=this.scenes[g].sys;m.settings.visible&&m.settings.status>=l.LOADING&&m.settings.status<l.SLEEPING&&m.render(c)}this.isProcessing=!1},create:function(c){var g=c.sys,m=g.settings;c.create&&(m.status=l.CREATING,c.create.call(c,m.data),m.status===l.DESTROYED)||(m.isTransition&&g.events.emit(n.TRANSITION_START,m.transitionFrom,m.transitionDuration),c.update&&(g.sceneUpdate=c.update),m.status=l.RUNNING,g.events.emit(n.CREATE,c))},createSceneFromFunction:function(c,g){var m=new g;if(m instanceof v){var x=m.sys.settings.key;if(x!==""&&(c=x),this.keys.hasOwnProperty(c))throw new Error("Cannot add a Scene with duplicate key: "+c);return this.createSceneFromInstance(c,m)}else return m.sys=new u(m),m.sys.settings.key=c,m.sys.init(this.game),m},createSceneFromInstance:function(c,g){var m=g.sys.settings.key;return m===""&&(g.sys.settings.key=c),g.sys.init(this.game),g},createSceneFromObject:function(c,g){var m=new v(g),x=m.sys.settings.key;x!==""?c=x:m.sys.settings.key=c,m.sys.init(this.game);for(var y=["init","preload","create","update","render"],T=0;T<y.length;T++){var S=h(g,y[T],null);S&&(m[y[T]]=S)}if(g.hasOwnProperty("extend")){for(var C in g.extend)if(!!g.extend.hasOwnProperty(C)){var E=g.extend[C];C==="data"&&m.hasOwnProperty("data")&&typeof E=="object"?m.data.merge(E):C!=="sys"&&(m[C]=E)}}return m},getKey:function(c,g){if(c||(c="default"),typeof g=="function")return c;if(g instanceof v?c=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(c=g.key),this.keys.hasOwnProperty(c))throw new Error("Cannot add a Scene with duplicate key: "+c);return c},getScenes:function(c,g){c===void 0&&(c=!0),g===void 0&&(g=!1);for(var m=[],x=this.scenes,y=0;y<x.length;y++){var T=x[y];T&&(!c||c&&T.sys.isActive())&&m.push(T)}return g?m.reverse():m},getScene:function(c){if(typeof c=="string"){if(this.keys[c])return this.keys[c]}else for(var g=0;g<this.scenes.length;g++)if(c===this.scenes[g])return c;return null},isActive:function(c){var g=this.getScene(c);return g?g.sys.isActive():null},isPaused:function(c){var g=this.getScene(c);return g?g.sys.isPaused():null},isVisible:function(c){var g=this.getScene(c);return g?g.sys.isVisible():null},isSleeping:function(c){var g=this.getScene(c);return g?g.sys.isSleeping():null},pause:function(c,g){var m=this.getScene(c);return m&&m.sys.pause(g),this},resume:function(c,g){var m=this.getScene(c);return m&&m.sys.resume(g),this},sleep:function(c,g){var m=this.getScene(c);return m&&!m.sys.isTransitioning()&&m.sys.sleep(g),this},wake:function(c,g){var m=this.getScene(c);return m&&m.sys.wake(g),this},run:function(c,g){var m=this.getScene(c);if(!m){for(var x=0;x<this._pending.length;x++)if(this._pending[x].key===c){this.queueOp("start",c,g);break}return this}m.sys.isSleeping()?m.sys.wake(g):m.sys.isPaused()?m.sys.resume(g):this.start(c,g)},start:function(c,g){if(!this.isBooted)return this._data[c]={autoStart:!0,data:g},this;var m=this.getScene(c);if(m){var x=m.sys;if(x.isActive()||x.isPaused())x.shutdown(),x.sceneUpdate=a,x.start(g);else{x.sceneUpdate=a,x.start(g);var y;if(x.load&&(y=x.load),y&&x.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:x.settings.pack})))return x.settings.status=l.LOADING,y.once(r.COMPLETE,this.payloadComplete,this),y.start(),this}this.bootScene(m)}return this},stop:function(c,g){var m=this.getScene(c);return m&&!m.sys.isTransitioning()&&m.sys.shutdown(g),this},switch:function(c,g){var m=this.getScene(c),x=this.getScene(g);return m&&x&&m!==x&&(this.sleep(c),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(c){return this.scenes[c]},getIndex:function(c){var g=this.getScene(c);return this.scenes.indexOf(g)},bringToTop:function(c){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:c,keyB:null});else{var g=this.getIndex(c);if(g!==-1&&g<this.scenes.length){var m=this.getScene(c);this.scenes.splice(g,1),this.scenes.push(m)}}return this},sendToBack:function(c){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:c,keyB:null});else{var g=this.getIndex(c);if(g!==-1&&g>0){var m=this.getScene(c);this.scenes.splice(g,1),this.scenes.unshift(m)}}return this},moveDown:function(c){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:c,keyB:null});else{var g=this.getIndex(c);if(g>0){var m=g-1,x=this.getScene(c),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveUp:function(c){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:c,keyB:null});else{var g=this.getIndex(c);if(g<this.scenes.length-1){var m=g+1,x=this.getScene(c),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveAbove:function(c,g){if(c===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:c,keyB:g});else{var m=this.getIndex(c),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),this.scenes.splice(m+1,0,y)}}return this},moveBelow:function(c,g){if(c===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:c,keyB:g});else{var m=this.getIndex(c),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),m===0?this.scenes.unshift(y):this.scenes.splice(m,0,y)}}return this},queueOp:function(c,g,m){return this._queue.push({op:c,keyA:g,keyB:m}),this},swapPosition:function(c,g){if(c===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:c,keyB:g});else{var m=this.getIndex(c),x=this.getIndex(g);if(m!==x&&m!==-1&&x!==-1){var y=this.getAt(m);this.scenes[m]=this.scenes[x],this.scenes[x]=y}}return this},dump:function(){for(var c=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],m=0;m<this.scenes.length;m++){var x=this.scenes[m].sys,y=x.settings.visible&&(x.settings.status===l.RUNNING||x.settings.status===l.PAUSED)?"[*] ":"[-] ";y+=x.settings.key+" ("+g[x.settings.status]+")",c.push(y)}console.log(c.join(`
`))},destroy:function(){for(var c=0;c<this.scenes.length;c++){var g=this.scenes[c].sys;g.destroy()}this.update=a,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=d},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(204),n=new s({initialize:function(h){this.sys=new l(this,h),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(2),l=e(205),n=function(o){var h=o.game.config.defaultPhysicsSystem,r=s(o.settings,"physics",!1);if(!(!h&&!r)){var a=[];if(h&&a.push(l(h+"Physics")),r)for(var v in r)v=l(v.concat("Physics")),a.indexOf(v)===-1&&a.push(v);return a}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(2),l=function(n){var o=n.plugins.getDefaultScenePlugins(),h=s(n.settings,"plugins",!1);return Array.isArray(h)?h:o||[]};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(144),l=e(6),n=e(127),o=e(978),h={create:function(r){return typeof r=="string"?r={key:r}:r===void 0&&(r={}),{status:s.PENDING,key:l(r,"key",""),active:l(r,"active",!1),visible:l(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:l(r,"pack",!1),cameras:l(r,"cameras",null),map:l(r,"map",n(o,l(r,"mapAdd",{}))),physics:l(r,"physics",{}),loader:l(r,"loader",{}),plugins:l(r,"plugins",!1),input:l(r,"input",{})}}};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(31),l=e(423),n=e(0),o=e(38),h=e(33),r=e(9),a=e(106),v=e(22),u=e(388),d=e(6),c=e(425),g=e(206),m=new n({Extends:r,initialize:function(y){r.call(this),this.game=y,this.name="TextureManager",this.list={},this._tempCanvas=s.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,y.events.once(v.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(a.LOAD,this.updatePending,this),this.on(a.ERROR,this.updatePending,this);var x=this.game.config;this.addBase64("__DEFAULT",x.defaultImage),this.addBase64("__MISSING",x.missingImage),this.addBase64("__WHITE",x.whiteImage),this.game.events.once(v.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(a.LOAD),this.off(a.ERROR),this.emit(a.READY))},checkKey:function(x){return this.exists(x)?(console.error("Texture key already in use: "+x),!1):!0},remove:function(x){if(typeof x=="string")if(this.exists(x))x=this.get(x);else return console.warn("No texture found matching key: "+x),this;return this.list.hasOwnProperty(x.key)&&(x.destroy(),this.emit(a.REMOVE,x.key)),this},removeKey:function(x){return this.list.hasOwnProperty(x)&&delete this.list[x],this},addBase64:function(x,y){if(this.checkKey(x)){var T=this,S=new Image;S.onerror=function(){T.emit(a.ERROR,x)},S.onload=function(){var C=T.create(x,S);c.Image(C,0),T.emit(a.ADD,x,C),T.emit(a.LOAD,x,C)},S.src=y}return this},getBase64:function(x,y,T,S){T===void 0&&(T="image/png"),S===void 0&&(S=.92);var C="",E=this.getFrame(x,y);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var P=E.canvasData,M=s.create2D(this,P.width,P.height),R=M.getContext("2d");R.drawImage(E.source.image,P.x,P.y,P.width,P.height,0,0,P.width,P.height),C=M.toDataURL(T,S),s.remove(M)}return C},addImage:function(x,y,T){var S=null;return this.checkKey(x)&&(S=this.create(x,y),c.Image(S,0),T&&S.setDataSource(T),this.emit(a.ADD,x,S)),S},addGLTexture:function(x,y,T,S){var C=null;return this.checkKey(x)&&(T===void 0&&(T=y.width),S===void 0&&(S=y.height),C=this.create(x,y,T,S),C.add("__BASE",0,0,0,T,S),this.emit(a.ADD,x,C)),C},addRenderTexture:function(x,y){var T=null;return this.checkKey(x)&&(T=this.create(x,y),T.add("__BASE",0,0,0,y.width,y.height),this.emit(a.ADD,x,T)),T},generate:function(x,y){if(this.checkKey(x)){var T=s.create(this,1,1);return y.canvas=T,u(y),this.addCanvas(x,T)}else return null},createCanvas:function(x,y,T){if(y===void 0&&(y=256),T===void 0&&(T=256),this.checkKey(x)){var S=s.create(this,y,T,h.CANVAS,!0);return this.addCanvas(x,S)}return null},addCanvas:function(x,y,T){T===void 0&&(T=!1);var S=null;return T?S=new l(this,x,y,y.width,y.height):this.checkKey(x)&&(S=new l(this,x,y,y.width,y.height),this.list[x]=S,this.emit(a.ADD,x,S)),S},addAtlas:function(x,y,T,S){return Array.isArray(T.textures)||Array.isArray(T.frames)?this.addAtlasJSONArray(x,y,T,S):this.addAtlasJSONHash(x,y,T,S)},addAtlasJSONArray:function(x,y,T,S){var C=null;if(this.checkKey(x)){if(C=this.create(x,y),Array.isArray(T))for(var E=T.length===1,P=0;P<C.source.length;P++){var M=E?T[0]:T[P];c.JSONArray(C,P,M)}else c.JSONArray(C,0,T);S&&C.setDataSource(S),this.emit(a.ADD,x,C)}return C},addAtlasJSONHash:function(x,y,T,S){var C=null;if(this.checkKey(x)){if(C=this.create(x,y),Array.isArray(T))for(var E=0;E<T.length;E++)c.JSONHash(C,E,T[E]);else c.JSONHash(C,0,T);S&&C.setDataSource(S),this.emit(a.ADD,x,C)}return C},addAtlasXML:function(x,y,T,S){var C=null;return this.checkKey(x)&&(C=this.create(x,y),c.AtlasXML(C,0,T),S&&C.setDataSource(S),this.emit(a.ADD,x,C)),C},addUnityAtlas:function(x,y,T,S){var C=null;return this.checkKey(x)&&(C=this.create(x,y),c.UnityYAML(C,0,T),S&&C.setDataSource(S),this.emit(a.ADD,x,C)),C},addSpriteSheet:function(x,y,T){var S=null;if(this.checkKey(x)){S=this.create(x,y);var C=S.source[0].width,E=S.source[0].height;c.SpriteSheet(S,0,0,0,C,E,T),this.emit(a.ADD,x,S)}return S},addSpriteSheetFromAtlas:function(x,y){if(!this.checkKey(x))return null;var T=d(y,"atlas",null),S=d(y,"frame",null);if(!(!T||!S)){var C=this.get(T),E=C.get(S);if(E){var P=this.create(x,E.source.image);return E.trimmed?c.SpriteSheetFromAtlas(P,E,y):c.SpriteSheet(P,0,E.cutX,E.cutY,E.cutWidth,E.cutHeight,y),this.emit(a.ADD,x,P),P}}},create:function(x,y,T,S){var C=null;return this.checkKey(x)&&(C=new g(this,x,y,T,S),this.list[x]=C),C},exists:function(x){return this.list.hasOwnProperty(x)},get:function(x){return x===void 0&&(x="__DEFAULT"),this.list[x]?this.list[x]:x instanceof g?x:this.list.__MISSING},cloneFrame:function(x,y){if(this.list[x])return this.list[x].get(y).clone()},getFrame:function(x,y){if(this.list[x])return this.list[x].get(y)},getTextureKeys:function(){var x=[];for(var y in this.list)y!=="__DEFAULT"&&y!=="__MISSING"&&x.push(y);return x},getPixel:function(x,y,T,S){var C=this.getFrame(T,S);if(C){x-=C.x,y-=C.y;var E=C.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(C.source.image,x,y,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return new o(M.data[0],M.data[1],M.data[2],M.data[3])}}return null},getPixelAlpha:function(x,y,T,S){var C=this.getFrame(T,S);if(C){x-=C.x,y-=C.y;var E=C.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(C.source.image,x,y,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return M.data[3]}}return null},setTexture:function(x,y,T){return this.list[y]&&(x.texture=this.list[y],x.frame=x.texture.get(T)),x},renameTexture:function(x,y){var T=this.get(x);return T&&x!==y?(T.key=y,this.list[y]=T,delete this.list[x],!0):!1},each:function(x,y){for(var T=[null],S=1;S<arguments.length;S++)T.push(arguments[S]);for(var C in this.list)T[0]=this.list[C],x.apply(y,T)},destroy:function(){for(var x in this.list)this.list[x].destroy();this.list={},this.game=null,s.remove(this._tempCanvas)}});t.exports=m},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(18),n=e(38),o=e(33),h=e(138),r=e(206),a=new s({Extends:r,initialize:function(u,d,c,g,m){r.call(this,u,d,c,g,m),this.add("__BASE",0,0,0,g,m),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=g,this.height=m,this.imageData=this.context.getImageData(0,0,g,m),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(v,u,d){return this.context.drawImage(d,v,u),this.update()},drawFrame:function(v,u,d,c){d===void 0&&(d=0),c===void 0&&(c=0);var g=this.manager.getFrame(v,u);if(g){var m=g.canvasData,x=g.cutWidth,y=g.cutHeight,T=g.source.resolution;return this.context.drawImage(g.source.image,m.x,m.y,x,y,d,c,x/T,y/T),this.update()}else return this},setPixel:function(v,u,d,c,g,m){m===void 0&&(m=255),v=Math.abs(Math.floor(v)),u=Math.abs(Math.floor(u));var x=this.getIndex(v,u);if(x>-1){var y=this.context.getImageData(v,u,1,1);y.data[0]=d,y.data[1]=c,y.data[2]=g,y.data[3]=m,this.context.putImageData(y,v,u)}return this},putData:function(v,u,d,c,g,m,x){return c===void 0&&(c=0),g===void 0&&(g=0),m===void 0&&(m=v.width),x===void 0&&(x=v.height),this.context.putImageData(v,u,d,c,g,m,x),this},getData:function(v,u,d,c){v=l(Math.floor(v),0,this.width-1),u=l(Math.floor(u),0,this.height-1),d=l(d,1,this.width-v),c=l(c,1,this.height-u);var g=this.context.getImageData(v,u,d,c);return g},getPixel:function(v,u,d){d||(d=new n);var c=this.getIndex(v,u);if(c>-1){var g=this.data,m=g[c+0],x=g[c+1],y=g[c+2],T=g[c+3];d.setTo(m,x,y,T)}return d},getPixels:function(v,u,d,c){v===void 0&&(v=0),u===void 0&&(u=0),d===void 0&&(d=this.width),c===void 0&&(c=d),v=Math.abs(Math.round(v)),u=Math.abs(Math.round(u));for(var g=l(v,0,this.width),m=l(v+d,0,this.width),x=l(u,0,this.height),y=l(u+c,0,this.height),T=new n,S=[],C=x;C<y;C++){for(var E=[],P=g;P<m;P++)T=this.getPixel(P,C,T),E.push({x:P,y:C,color:T.color,alpha:T.alphaGL});S.push(E)}return S},getIndex:function(v,u){return v=Math.abs(Math.round(v)),u=Math.abs(Math.round(u)),v<this.width&&u<this.height?(v+u*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(v,u,d,c){return v===void 0&&(v=0),u===void 0&&(u=0),d===void 0&&(d=this.width),c===void 0&&(c=this.height),this.context.clearRect(v,u,d,c),this.update()},setSize:function(v,u){return u===void 0&&(u=v),(v!==this.width||u!==this.height)&&(this.canvas.width=v,this.canvas.height=u,this._source.width=v,this._source.height=u,this._source.isPowerOf2=h(v,u),this.frames.__BASE.setSize(v,u,0,0),this.width=v,this.height=u,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(31),l=e(0),n=e(138),o=e(168),h=new l({initialize:function(a,v,u,d,c){c===void 0&&(c=!1);var g=a.manager.game;this.renderer=g.renderer,this.texture=a,this.source=v,this.image=v,this.compressionAlgorithm=null,this.resolution=1,this.width=u||v.naturalWidth||v.videoWidth||v.width||0,this.height=d||v.naturalHeight||v.videoHeight||v.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=v instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&v instanceof HTMLVideoElement,this.isRenderTexture=v.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&v instanceof WebGLTexture,this.isPowerOf2=n(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=c,this.init(g)},init:function(r){var a=this.renderer;a&&(a.gl?this.isCanvas?this.glTexture=a.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=a.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=a.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=a.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),r.config.antialias||this.setFilter(1)},setFilter:function(r){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,r),this.scaleMode=r},setFlipY:function(r){return r===void 0&&(r=!0),this.flipY=r,this},update:function(){var r=this.renderer.gl;r&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):r&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&s.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={AtlasXML:e(979),Canvas:e(980),Image:e(981),JSONArray:e(982),JSONHash:e(983),SpriteSheet:e(984),SpriteSheetFromAtlas:e(985),UnityYAML:e(986)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(427),l=e(430),n=e(432),o={create:function(h){var r=h.config.audio,a=h.device.audio;return r.noAudio||!a.webAudio&&!a.audioData?new l(h):a.webAudio&&!r.disableWebAudio?new n(h):new s(h)}};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(145),l=e(0),n=e(70),o=e(429),h=new l({Extends:s,initialize:function(a){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,s.call(this,a)},add:function(r,a){var v=new o(this,r,a);return this.sounds.push(v),v},unlock:function(){this.locked=!1;var r=this;if(this.game.cache.audio.entries.each(function(d,c){for(var g=0;g<c.length;g++)if(c[g].dataset.locked==="true")return r.locked=!0,!1;return!0}),!!this.locked){var a=!1,v=function(){a=!0},u=function(){if(a){a=!1;return}document.body.removeEventListener("touchmove",v),document.body.removeEventListener("touchend",u);var d=[];if(r.game.cache.audio.entries.each(function(g,m){for(var x=0;x<m.length;x++){var y=m[x];y.dataset.locked==="true"&&d.push(y)}return!0}),d.length!==0){var c=d[d.length-1];c.oncanplaythrough=function(){c.oncanplaythrough=null,d.forEach(function(g){g.dataset.locked="false"}),r.unlocked=!0},d.forEach(function(g){g.load()})}};this.once(n.UNLOCKED,function(){for(this.forEachActiveSound(function(c){c.currentMarker===null&&c.duration===0&&(c.duration=c.tags[0].duration),c.totalDuration=c.tags[0].duration});this.lockedActionsQueue.length;){var d=this.lockedActionsQueue.shift();d.sound[d.prop].apply?d.sound[d.prop].apply(d.sound,d.value||[]):d.sound[d.prop]=d.value}},this),document.body.addEventListener("touchmove",v,!1),document.body.addEventListener("touchend",u,!1)}},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){s.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,a,v){return r.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:r,prop:a,value:v}),!0):!1},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(a){a.updateMute()}),this.emit(n.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(a){a.updateVolume()}),this.emit(n.GLOBAL_VOLUME,this,r)}}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(78),l=function(n,o,h,r,a){if(r===void 0&&(r=0),a===void 0&&(a=n.length),s(n,r,a))for(var v=r;v<a;v++){var u=n[v];if(!o||o&&h===void 0&&u.hasOwnProperty(o)||o&&h!==void 0&&u[o]===h)return u}return null};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(146),l=e(0),n=e(70),o=e(18),h=new l({Extends:s,initialize:function(a,v,u){if(u===void 0&&(u={}),this.tags=a.game.cache.audio.get(v),!this.tags)throw new Error('There is no audio asset with key "'+v+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,s.call(this,a,v,u)},play:function(r,a){return this.manager.isLocked(this,"play",[r,a])||!s.prototype.play.call(this,r,a)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!s.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(n.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!s.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(n.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var r=this.currentConfig.seek,a=this.currentConfig.delay,v=(this.currentMarker?this.currentMarker.start:0)+r;return this.previousTime=v,this.audio.currentTime=v,this.applyConfig(),a===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+a*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var a=this.tags[r];if(a.dataset.used==="false")return a.dataset.used="true",this.audio=a,!0}if(!this.manager.override)return!1;var v=[];this.manager.forEachActiveSound(function(d){d.key===this.key&&d.audio&&v.push(d)},this),v.sort(function(d,c){return d.loop===c.loop?c.seek/c.duration-d.seek/d.duration:d.loop?1:-1});var u=v[0];return this.audio=u.audio,u.reset(),u.audio=null,u.startTime=0,u.previousTime=0,!0},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(a){console.warn(a)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){s.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(!!this.isPlaying){if(this.startTime>0){this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var a=this.currentMarker?this.currentMarker.start:0,v=a+this.duration,u=this.audio.currentTime;if(this.currentConfig.loop)u>=v-this.manager.loopEndOffset?(this.audio.currentTime=a+Math.max(0,u-v),u=this.audio.currentTime):u<a&&(this.audio.currentTime+=a,u=this.audio.currentTime),u<this.previousTime&&this.emit(n.LOOPED,this);else if(u>=v){this.reset(),this.stopAndReleaseAudioTag(),this.emit(n.COMPLETE,this);return}this.previousTime=u}},destroy:function(){s.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){s.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,!this.manager.isLocked(this,"mute",r)&&(this.updateMute(),this.emit(n.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,!this.manager.isLocked(this,"volume",r)&&(this.updateVolume(),this.emit(n.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,!this.manager.isLocked(this,n.RATE,r)&&(this.calculateRate(),this.emit(n.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,!this.manager.isLocked(this,n.DETUNE,r)&&(this.calculateRate(),this.emit(n.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||this.startTime>0||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(n.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,!this.manager.isLocked(this,"loop",r)&&(this.audio&&(this.audio.loop=r),this.emit(n.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(n.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(145),l=e(0),n=e(9),o=e(431),h=e(1),r=new l({Extends:n,initialize:function(v){n.call(this),this.game=v,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(a,v){var u=new o(this,a,v);return this.sounds.push(u),u},addAudioSprite:function(a,v){var u=this.add(a,v);return u.spritemap={},u},play:function(a,v){return!1},playAudioSprite:function(a,v,u){return!1},remove:function(a){return s.prototype.remove.call(this,a)},removeByKey:function(a){return s.prototype.removeByKey.call(this,a)},pauseAll:h,resumeAll:h,stopAll:h,update:h,setRate:h,setDetune:h,setMute:h,setVolume:h,forEachActiveSound:function(a,v){s.prototype.forEachActiveSound.call(this,a,v)},destroy:function(){s.prototype.destroy.call(this)}});t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(146),l=e(0),n=e(9),o=e(17),h=function(){return!1},r=function(){return null},a=function(){return this},v=new l({Extends:n,initialize:function(d,c,g){g===void 0&&(g={}),n.call(this),this.manager=d,this.key=c,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:h,updateMarker:h,removeMarker:r,play:h,pause:h,resume:h,stop:h,destroy:function(){s.prototype.destroy.call(this)},setMute:a,setVolume:a,setRate:a,setDetune:a,setSeek:a,setLoop:a,setPan:a});t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(433),l=e(145),n=e(0),o=e(70),h=e(22),r=e(434),a=new n({Extends:l,initialize:function(u){this.context=this.createAudioContext(u),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),l.call(this,u),this.locked&&u.isBooted?this.unlock():u.events.once(h.BOOT,this.unlock,this)},createAudioContext:function(v){var u=v.config.audio;if(u.context)return u.context.resume(),u.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(v){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=v,this.masterMuteNode=v.createGain(),this.masterVolumeNode=v.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(v.destination),this.destination=this.masterMuteNode,this},add:function(v,u){var d=new r(this,v,u);return this.sounds.push(d),d},decodeAudio:function(v,u){var d;Array.isArray(v)?d=v:d=[{key:v,data:u}];for(var c=this.game.cache.audio,g=d.length,m=0;m<d.length;m++){var x=d[m],y=x.key,T=x.data;typeof T=="string"&&(T=s(T));var S=function(E,P){c.add(E,P),this.emit(o.DECODED,E),g--,g===0&&this.emit(o.DECODED_ALL)}.bind(this,y),C=function(E,P){console.error("Error decoding audio: "+E+" - ",P?P.message:""),g--,g===0&&this.emit(o.DECODED_ALL)}.bind(this,y);this.context.decodeAudioData(T,S,C)}},unlock:function(){var v=this,u=document.body,d=function c(){if(v.context&&u){var g=u.removeEventListener;v.context.resume().then(function(){g("touchstart",c),g("touchend",c),g("click",c),g("keydown",c),v.unlocked=!0},function(){g("touchstart",c),g("touchend",c),g("click",c),g("keydown",c)})}};u&&(u.addEventListener("touchstart",d,!1),u.addEventListener("touchend",d,!1),u.addEventListener("click",d,!1),u.addEventListener("keydown",d,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var v=this.context;(v.state==="suspended"||v.state==="interrupted")&&!this.locked&&v.resume()},update:function(v,u){l.prototype.update.call(this,v,u);var d=this.context;d&&d.state==="interrupted"&&d.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var v=this;this.context.close().then(function(){v.context=null})}l.prototype.destroy.call(this)},setMute:function(v){return this.mute=v,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(v){this.masterMuteNode.gain.setValueAtTime(v?0:1,0),this.emit(o.GLOBAL_MUTE,this,v)}},setVolume:function(v){return this.volume=v,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(v){this.masterVolumeNode.gain.setValueAtTime(v,0),this.emit(o.GLOBAL_VOLUME,this,v)}}});t.exports=a},function(t,f){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(256),l=0;l<e.length;l++)s[e.charCodeAt(l)]=l;var n=function(o){o=o.substr(o.indexOf(",")+1);var h=o.length,r=h*.75,a=0,v,u,d,c;o[h-1]==="="&&(r--,o[h-2]==="="&&r--);for(var g=new ArrayBuffer(r),m=new Uint8Array(g),x=0;x<h;x+=4)v=s[o.charCodeAt(x)],u=s[o.charCodeAt(x+1)],d=s[o.charCodeAt(x+2)],c=s[o.charCodeAt(x+3)],m[a++]=v<<2|u>>4,m[a++]=(u&15)<<4|d>>2,m[a++]=(d&3)<<6|c&63;return g};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(146),l=e(0),n=e(70),o=new l({Extends:s,initialize:function(r,a,v){if(v===void 0&&(v={}),this.audioBuffer=r.game.cache.audio.get(a),!this.audioBuffer)throw new Error('Audio key "'+a+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=r.context.createGain(),this.volumeNode=r.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),r.context.createStereoPanner?(this.pannerNode=r.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(r.destination)):this.volumeNode.connect(r.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,s.call(this,r,a,v)},play:function(h,r){return s.prototype.play.call(this,h,r)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(n.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(n.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(n.RESUME,this),!0)},stop:function(){return s.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(n.STOP,this),!0):!1},createAndStartBufferSource:function(){var h=this.currentConfig.seek,r=this.currentConfig.delay,a=this.manager.context.currentTime+r,v=(this.currentMarker?this.currentMarker.start:0)+h,u=this.duration-h;this.playTime=a-h,this.startTime=a,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,a),Math.max(0,v),Math.max(0,u)),this.resetConfig()},createAndStartLoopBufferSource:function(){var h=this.getLoopTime(),r=this.currentMarker?this.currentMarker.start:0,a=this.duration;this.loopTime=h,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,h),Math.max(0,r),Math.max(0,a))},createBufferSource:function(){var h=this,r=this.manager.context.createBufferSource();return r.buffer=this.audioBuffer,r.connect(this.muteNode),r.onended=function(a){a.target===h.source&&(h.currentConfig.loop?h.hasLooped=!0:h.hasEnded=!0)},r},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),s.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,s.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(n.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(n.LOOPED,this))},destroy:function(){s.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){s.prototype.calculateRate.call(this);var h=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,h),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,h)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var h=0,r=0;r<this.rateUpdates.length;r++){var a=0;r<this.rateUpdates.length-1?a=this.rateUpdates[r+1].time:a=this.manager.context.currentTime-this.playTime,h+=(a-this.rateUpdates[r].time)*this.rateUpdates[r].rate}return h},getLoopTime:function(){for(var h=0,r=0;r<this.rateUpdates.length-1;r++)h+=(this.rateUpdates[r+1].time-this.rateUpdates[r].time)*this.rateUpdates[r].rate;var a=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+a.time+(this.duration-h)/a.rate},rate:{get:function(){return this.currentConfig.rate},set:function(h){this.currentConfig.rate=h,this.calculateRate(),this.emit(n.RATE,this,h)}},setRate:function(h){return this.rate=h,this},detune:{get:function(){return this.currentConfig.detune},set:function(h){this.currentConfig.detune=h,this.calculateRate(),this.emit(n.DETUNE,this,h)}},setDetune:function(h){return this.detune=h,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(h){this.currentConfig.mute=h,this.muteNode.gain.setValueAtTime(h?0:1,0),this.emit(n.MUTE,this,h)}},setMute:function(h){return this.mute=h,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(h){this.currentConfig.volume=h,this.volumeNode.gain.setValueAtTime(h,0),this.emit(n.VOLUME,this,h)}},setVolume:function(h){return this.volume=h,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(h){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(h=Math.min(Math.max(0,h),this.duration),this.currentConfig.seek=h,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(n.SEEK,this,h))}},setSeek:function(h){return this.seek=h,this},loop:{get:function(){return this.currentConfig.loop},set:function(h){this.currentConfig.loop=h,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),h&&this.createAndStartLoopBufferSource()),this.emit(n.LOOP,this,h)}},setLoop:function(h){return this.loop=h,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(h){this.currentConfig.pan=h,this.pannerNode&&this.pannerNode.pan.setValueAtTime(h,this.manager.context.currentTime),this.emit(n.PAN,this,h)}},setPan:function(h){return this.pan=h,this}});t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){for(var l=s.length,n=s[0].length,o=new Array(n),h=0;h<n;h++){o[h]=new Array(l);for(var r=l-1;r>-1;r--)o[h][r]=s[r][h]}return o};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(n,o,h){var r=n[o];n[o]=n[h],n[h]=r}function s(n,o){return n<o?-1:n>o?1:0}var l=function(n,o,h,r,a){for(h===void 0&&(h=0),r===void 0&&(r=n.length-1),a===void 0&&(a=s);r>h;){if(r-h>600){var v=r-h+1,u=o-h+1,d=Math.log(v),c=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*c*(v-c)/v)*(u-v/2<0?-1:1),m=Math.max(h,Math.floor(o-u*c/v+g)),x=Math.min(r,Math.floor(o+(v-u)*c/v+g));l(n,o,m,x,a)}var y=n[o],T=h,S=r;for(e(n,h,o),a(n[r],y)>0&&e(n,h,r);T<S;){for(e(n,T,S),T++,S--;a(n[T],y)<0;)T++;for(;a(n[S],y)>0;)S--}a(n[h],y)===0?e(n,h,S):(S++,e(n,S,r)),S<=o&&(h=S+1),o<=S&&(r=S-1)}};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(6),l=e(131),n=function(h,r,a){for(var v=[],u=0;u<h.length;u++)for(var d=0;d<r.length;d++)for(var c=0;c<a;c++)v.push({a:h[u],b:r[d]});return v},o=function(h,r,a){var v=s(a,"max",0),u=s(a,"qty",1),d=s(a,"random",!1),c=s(a,"randomB",!1),g=s(a,"repeat",0),m=s(a,"yoyo",!1),x=[];if(c&&l(r),g===-1)if(v===0)g=0;else{var y=h.length*r.length*u;m&&(y*=2),g=Math.ceil(v/y)}for(var T=0;T<=g;T++){var S=n(h,r,u);d&&l(S),x=x.concat(S),m&&(S.reverse(),x=x.concat(S))}return v&&x.splice(v),x};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={PROCESS_QUEUE_ADD:e(1041),PROCESS_QUEUE_REMOVE:e(1042)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(13),l=function(n,o){var h=s(o,"anims",null);if(h===null)return n;if(typeof h=="string")n.anims.play(h);else if(typeof h=="object"){var r=n.anims,a=s(h,"key",void 0);if(a){var v=s(h,"startFrame",void 0),u=s(h,"delay",0),d=s(h,"repeat",0),c=s(h,"repeatDelay",0),g=s(h,"yoyo",!1),m=s(h,"play",!1),x=s(h,"delayedPlay",0),y={key:a,delay:u,repeat:d,repeatDelay:c,yoyo:g,startFrame:v};m?r.play(y):x>0?r.playAfterDelay(y,x):r.load(y)}}return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(109),n=new s({initialize:function(h,r,a,v,u){this.parent=h,this.x=r,this.y=a,this.frame=v,this.data={},this.tint=16777215,this._visible=u,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(o){return o===void 0?this.frame=this.parent.frame:o instanceof l&&o.texture===this.parent.texture?this.frame=o:this.frame=this.parent.texture.get(o),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(o,h,r){return this.x=o,this.y=h,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(o,h){return this.x=o,this.y=h,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,h){return this.flipX=o,this.flipY=h,this},setVisible:function(o){return this.visible=o,this},setAlpha:function(o){return this.alpha=o,this},setTint:function(o){return this.tint=o,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(o){this.parent.dirty|=this._visible!==o,this._visible=o}},alpha:{get:function(){return this._alpha},set:function(o){this.parent.dirty|=this._alpha>0!=o>0,this._alpha=o}}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10),l=function(n,o,h){h===void 0&&(h=new s);var r=Math.min(n.x,o.x),a=Math.min(n.y,o.y),v=Math.max(n.right,o.right)-r,u=Math.max(n.bottom,o.bottom)-a;return h.setTo(r,a,v,u)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(11),n=e(1055),o=e(15),h=e(7),r=e(202),a=e(20),v=e(140),u=new s({Extends:o,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Origin,l.ScrollFactor,l.Transform,l.Visible,n],initialize:function(c,g,m,x,y,T){o.call(this,c,"DOMElement"),this.parent=c.sys.game.domContainer,this.cache=c.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new v,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,m),typeof x=="string"?x[0]==="#"?this.setElement(x.substr(1),y,T):this.createElement(x,y,T):x&&this.setElement(x,y,T),c.sys.events.on(a.SLEEP,this.handleSceneEvent,this),c.sys.events.on(a.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(d){var c=this.node,g=c.style;c&&(g.display=d.settings.visible?"block":"none")},setSkew:function(d,c){return d===void 0&&(d=0),c===void 0&&(c=d),this.skewX=d,this.skewY=c,this},setPerspective:function(d){return this.parent.style.perspective=d+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(d){this.parent.style.perspective=d+"px"}},addListener:function(d){if(this.node){d=d.split(" ");for(var c=0;c<d.length;c++)this.node.addEventListener(d[c],this.handler,!1)}return this},removeListener:function(d){if(this.node){d=d.split(" ");for(var c=0;c<d.length;c++)this.node.removeEventListener(d[c],this.handler)}return this},dispatchNativeEvent:function(d){this.emit(d.type,d)},createElement:function(d,c,g){return this.setElement(document.createElement(d),c,g)},setElement:function(d,c,g){this.removeElement();var m;if(typeof d=="string"?(d[0]==="#"&&(d=d.substr(1)),m=document.getElementById(d)):typeof d=="object"&&d.nodeType===1&&(m=d),!m)return this;if(this.node=m,c&&h(c))for(var x in c)m.style[x]=c[x];else typeof c=="string"&&(m.style=c);return m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),g&&(m.innerText=g),this.updateSize()},createFromCache:function(d,c){var g=this.cache.get(d);return g&&this.createFromHTML(g,c),this},createFromHTML:function(d,c){c===void 0&&(c="div"),this.removeElement();var g=document.createElement(c);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=d,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var d=this.node,c=d.getBoundingClientRect();return this.width=d.clientWidth,this.height=d.clientHeight,this.displayWidth=c.width||0,this.displayHeight=c.height||0,this},getChildByProperty:function(d,c){if(this.node){for(var g=this.node.querySelectorAll("*"),m=0;m<g.length;m++)if(g[m][d]===c)return g[m]}return null},getChildByID:function(d){return this.getChildByProperty("id",d)},getChildByName:function(d){return this.getChildByProperty("name",d)},setClassName:function(d){return this.node&&(this.node.className=d,this.updateSize()),this},setText:function(d){return this.node&&(this.node.innerText=d,this.updateSize()),this},setHTML:function(d){return this.node&&(this.node.innerHTML=d,this.updateSize()),this},preUpdate:function(){var d=this.parentContainer,c=this.node;c&&d&&!d.willRender()&&(c.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(a.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(a.WAKE,this.handleSceneEvent,this)}});t.exports=u},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1056),l=e(15),n=e(25),o=new n,h=new n,r=new n,a=function(v,u,d,c){if(!!u.node){var g=u.node.style,m=u.scene.sys.settings;if(!g||!m.visible||l.RENDER_MASK!==u.renderFlags||u.cameraFilter!==0&&u.cameraFilter&d.id||u.parentContainer&&!u.parentContainer.willRender()){g.display="none";return}var x=u.parentContainer,y=d.alpha*u.alpha;x&&(y*=x.alpha);var T=o,S=h,C=r,E=0,P=0,M="0%",R="0%";c?(E=u.width*u.scaleX*u.originX,P=u.height*u.scaleY*u.originY,S.applyITRS(u.x-E,u.y-P,u.rotation,u.scaleX,u.scaleY),T.copyFrom(d.matrix),T.multiplyWithOffset(c,-d.scrollX*u.scrollFactorX,-d.scrollY*u.scrollFactorY),S.e=u.x-E,S.f=u.y-P,T.multiply(S,C)):(E=u.width*u.originX,P=u.height*u.originY,S.applyITRS(u.x-E,u.y-P,u.rotation,u.scaleX,u.scaleY),T.copyFrom(d.matrix),M=100*u.originX+"%",R=100*u.originY+"%",S.e-=d.scrollX*u.scrollFactorX,S.f-=d.scrollY*u.scrollFactorY,T.multiply(S,C)),u.transformOnly||(g.display="block",g.opacity=y,g.zIndex=u._depth,g.pointerEvents=u.pointerEvents,g.mixBlendMode=s[u._blendMode]),g.transform=C.getCSSMatrix()+" skew("+u.skewX+"rad, "+u.skewY+"rad) rotate3d("+u.rotate3d.x+","+u.rotate3d.y+","+u.rotate3d.z+","+u.rotate3d.w+u.rotate3dAngle+")",g.transformOrigin=M+" "+R}};t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(11),n=e(15),o=e(1060),h=new s({Extends:n,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Flip,l.Origin,l.ScrollFactor,l.Size,l.Texture,l.Tint,l.Transform,l.Visible,o],initialize:function(a){n.call(this,a,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(218),l=e(98),n=e(14),o=e(4),h=function(r,a,v){v===void 0&&(v=new o);var u=l(a,0,n.PI2);return s(r,u,v)};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(447),l=e(218),n=e(98),o=e(14),h=function(r,a,v,u){u===void 0&&(u=[]),!a&&v>0&&(a=s(r)/v);for(var d=0;d<a;d++){var c=n(d/a,0,o.PI2);u.push(l(r,c))}return u};t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l=s.width/2,n=s.height/2,o=Math.pow(l-n,2)/Math.pow(l+n,2);return Math.PI*(l+n)*(1+3*o/(10+Math.sqrt(4-3*o)))};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(217),l=e(30),n=function(o,h,r,a,v,u){var d=h.commandBuffer,c=d.length,g=v||o.currentContext;if(!(c===0||!l(o,g,h,r,a))){r.addToRenderList(h);var m=1,x=1,y=0,T=0,S=1,C=0,E=0,P=0;g.beginPath();for(var M=0;M<c;++M){var R=d[M];switch(R){case s.ARC:g.arc(d[M+1],d[M+2],d[M+3],d[M+4],d[M+5],d[M+6]),M+=7;break;case s.LINE_STYLE:S=d[M+1],y=d[M+2],m=d[M+3],C=(y&16711680)>>>16,E=(y&65280)>>>8,P=y&255,g.strokeStyle="rgba("+C+","+E+","+P+","+m+")",g.lineWidth=S,M+=3;break;case s.FILL_STYLE:T=d[M+1],x=d[M+2],C=(T&16711680)>>>16,E=(T&65280)>>>8,P=T&255,g.fillStyle="rgba("+C+","+E+","+P+","+x+")",M+=2;break;case s.BEGIN_PATH:g.beginPath();break;case s.CLOSE_PATH:g.closePath();break;case s.FILL_PATH:u||g.fill();break;case s.STROKE_PATH:u||g.stroke();break;case s.FILL_RECT:u?g.rect(d[M+1],d[M+2],d[M+3],d[M+4]):g.fillRect(d[M+1],d[M+2],d[M+3],d[M+4]),M+=4;break;case s.FILL_TRIANGLE:g.beginPath(),g.moveTo(d[M+1],d[M+2]),g.lineTo(d[M+3],d[M+4]),g.lineTo(d[M+5],d[M+6]),g.closePath(),u||g.fill(),M+=6;break;case s.STROKE_TRIANGLE:g.beginPath(),g.moveTo(d[M+1],d[M+2]),g.lineTo(d[M+3],d[M+4]),g.lineTo(d[M+5],d[M+6]),g.closePath(),u||g.stroke(),M+=6;break;case s.LINE_TO:g.lineTo(d[M+1],d[M+2]),M+=2;break;case s.MOVE_TO:g.moveTo(d[M+1],d[M+2]),M+=2;break;case s.LINE_FX_TO:g.lineTo(d[M+1],d[M+2]),M+=5;break;case s.MOVE_FX_TO:g.moveTo(d[M+1],d[M+2]),M+=5;break;case s.SAVE:g.save();break;case s.RESTORE:g.restore();break;case s.TRANSLATE:g.translate(d[M+1],d[M+2]),M+=2;break;case s.SCALE:g.scale(d[M+1],d[M+2]),M+=2;break;case s.ROTATE:g.rotate(d[M+1]),M+=1;break;case s.GRADIENT_FILL_STYLE:M+=5;break;case s.GRADIENT_LINE_STYLE:M+=6;break}}g.restore()}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(137),n=e(80),o=e(2),h=e(68),r=new s({initialize:function(v,u,d,c){c===void 0&&(c=!1),this.propertyKey=u,this.propertyValue=d,this.defaultValue=d,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=c,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(v)},loadConfig:function(a,v){a===void 0&&(a={}),v&&(this.propertyKey=v),this.propertyValue=o(a,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(a){return this.propertyValue=a,this.setMethods()},setMethods:function(){var a=this.propertyValue,v=typeof a;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,v==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(a))this.onEmit=this.randomStaticValueEmit;else if(v==="function")this.emitOnly?this.onEmit=a:this.onUpdate=a;else if(v==="object"&&this.hasBoth(a,"start","end")){this.start=a.start,this.end=a.end;var u=this.has(a,"random");if(u&&(this.onEmit=this.randomRangedValueEmit),this.has(a,"steps"))this.steps=a.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var d=this.has(a,"ease")?a.ease:"Linear";this.ease=n(d,a.easeParams),u||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(v==="object"&&this.hasBoth(a,"min","max"))this.start=a.min,this.end=a.max,this.onEmit=this.randomRangedValueEmit;else if(v==="object"&&this.has(a,"random")){var c=a.random;Array.isArray(c)&&(this.start=c[0],this.end=c[1]),this.onEmit=this.randomRangedValueEmit}else v==="object"&&this.hasEither(a,"onEmit","onUpdate")&&(this.has(a,"onEmit")&&(this.onEmit=a.onEmit),this.has(a,"onUpdate")&&(this.onUpdate=a.onUpdate));return this},has:function(a,v){return a.hasOwnProperty(v)},hasBoth:function(a,v,u){return a.hasOwnProperty(v)&&a.hasOwnProperty(u)},hasEither:function(a,v,u){return a.hasOwnProperty(v)||a.hasOwnProperty(u)},defaultEmit:function(a,v,u){return u},defaultUpdate:function(a,v,u,d){return d},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var a=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[a]},randomRangedValueEmit:function(a,v){var u=l(this.start,this.end);return a&&a.data[v]&&(a.data[v].min=u),u},steppedEmit:function(){var a=this.counter,v=this.counter+(this.end-this.start)/this.steps;return this.counter=h(v,this.start,this.end),a},easedValueEmit:function(a,v){if(a&&a.data[v]){var u=a.data[v];u.min=this.start,u.max=this.end}return this.start},easeValueUpdate:function(a,v,u){var d=a.data[v];return(d.max-d.min)*this.ease(u)+d.min}});t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(2),n=new s({initialize:function(h,r,a,v,u){if(typeof h=="object"){var d=h;h=l(d,"x",0),r=l(d,"y",0),a=l(d,"power",0),v=l(d,"epsilon",100),u=l(d,"gravity",50)}else h===void 0&&(h=0),r===void 0&&(r=0),a===void 0&&(a=0),v===void 0&&(v=100),u===void 0&&(u=50);this.x=h,this.y=r,this.active=!0,this._gravity=u,this._power=0,this._epsilon=0,this.power=a,this.epsilon=v},update:function(o,h){var r=this.x-o.x,a=this.y-o.y,v=r*r+a*a;if(v!==0){var u=Math.sqrt(v);v<this._epsilon&&(v=this._epsilon);var d=this._power*h/(v*u)*100;o.velocityX+=r*d,o.velocityY+=a*d}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(o){this._epsilon=o*o}},power:{get:function(){return this._power/this._gravity},set:function(o){this._power=o*this._gravity}},gravity:{get:function(){return this._gravity},set:function(o){var h=this.power;this._gravity=o,this.power=h}}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(36),n=e(50),o=new s({initialize:function(r){this.emitter=r,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(h,r){var a=this.emitter;this.frame=a.getFrame(),a.emitZone&&a.emitZone.getPoint(this),h===void 0?this.x+=a.x.onEmit(this,"x"):this.x+=h,r===void 0?this.y+=a.y.onEmit(this,"y"):this.y+=r,this.life=a.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var v=a.speedX.onEmit(this,"speedX"),u=a.speedY?a.speedY.onEmit(this,"speedY"):v;if(a.radial){var d=l(a.angle.onEmit(this,"angle"));this.velocityX=Math.cos(d)*Math.abs(v),this.velocityY=Math.sin(d)*Math.abs(u)}else if(a.moveTo){var c=a.moveToX.onEmit(this,"moveToX"),g=a.moveToY?a.moveToY.onEmit(this,"moveToY"):c,m=Math.atan2(g-this.y,c-this.x),x=n(this.x,this.y,c,g)/(this.life/1e3);this.velocityX=Math.cos(m)*x,this.velocityY=Math.sin(m)*x}else this.velocityX=v,this.velocityY=u;a.acceleration&&(this.accelerationX=a.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=a.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=a.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=a.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=a.delay.onEmit(this,"delay"),this.scaleX=a.scaleX.onEmit(this,"scaleX"),this.scaleY=a.scaleY?a.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=a.rotate.onEmit(this,"rotate"),this.rotation=l(this.angle),this.bounce=a.bounce.onEmit(this,"bounce"),this.alpha=a.alpha.onEmit(this,"alpha"),this.tint=a.tint.onEmit(this,"tint")},computeVelocity:function(h,r,a,v){var u=this.velocityX,d=this.velocityY,c=this.accelerationX,g=this.accelerationY,m=this.maxVelocityX,x=this.maxVelocityY;u+=h.gravityX*a,d+=h.gravityY*a,c&&(u+=c*a),g&&(d+=g*a),u>m?u=m:u<-m&&(u=-m),d>x?d=x:d<-x&&(d=-x),this.velocityX=u,this.velocityY=d;for(var y=0;y<v.length;y++)v[y].update(this,r,a)},checkBounds:function(h){var r=h.bounds,a=-this.bounce;this.x<r.x&&h.collideLeft?(this.x=r.x,this.velocityX*=a):this.x>r.right&&h.collideRight&&(this.x=r.right,this.velocityX*=a),this.y<r.y&&h.collideTop?(this.y=r.y,this.velocityY*=a):this.y>r.bottom&&h.collideBottom&&(this.y=r.bottom,this.velocityY*=a)},update:function(h,r,a){if(this.delayCurrent>0)return this.delayCurrent-=h,!1;var v=this.emitter,u=1-this.lifeCurrent/this.life;return this.lifeT=u,this.computeVelocity(v,h,r,a),this.x+=this.velocityX*r,this.y+=this.velocityY*r,v.bounds&&this.checkBounds(v),v.deathZone&&v.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=v.scaleX.onUpdate(this,"scaleX",u,this.scaleX),v.scaleY?this.scaleY=v.scaleY.onUpdate(this,"scaleY",u,this.scaleY):this.scaleY=this.scaleX,this.angle=v.rotate.onUpdate(this,"rotate",u,this.angle),this.rotation=l(this.angle),this.alpha=v.alpha.onUpdate(this,"alpha",u,this.alpha),this.tint=v.tint.onUpdate(this,"tint",u,this.tint),this.lifeCurrent-=h,this.lifeCurrent<=0)}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(35),l=e(0),n=e(11),o=e(453),h=e(454),r=e(449),a=e(2),v=e(210),u=e(455),d=e(126),c=e(451),g=e(456),m=e(10),x=e(79),y=e(3),T=e(68),S=new l({Mixins:[n.BlendMode,n.Mask,n.ScrollFactor,n.Visible],initialize:function(E,P){this.manager=E,this.texture=E.texture,this.frames=[E.defaultFrame],this.defaultFrame=E.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=c,this.x=new r(P,"x",0,!0),this.y=new r(P,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new r(P,"accelerationX",0,!0),this.accelerationY=new r(P,"accelerationY",0,!0),this.maxVelocityX=new r(P,"maxVelocityX",1e4,!0),this.maxVelocityY=new r(P,"maxVelocityY",1e4,!0),this.speedX=new r(P,"speedX",0,!0),this.speedY=new r(P,"speedY",0,!0),this.moveTo=!1,this.moveToX=new r(P,"moveToX",0,!0),this.moveToY=new r(P,"moveToY",0,!0),this.bounce=new r(P,"bounce",0,!0),this.scaleX=new r(P,"scaleX",1),this.scaleY=new r(P,"scaleY",1),this.tint=new r(P,"tint",16777215),this.alpha=new r(P,"alpha",1),this.lifespan=new r(P,"lifespan",1e3,!0),this.angle=new r(P,"angle",{min:0,max:360},!0),this.rotate=new r(P,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new r(P,"quantity",1,!0),this.delay=new r(P,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=s.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,P&&this.fromJSON(P)},fromJSON:function(C){if(!C)return this;var E=0,P="";for(E=0;E<this.configFastMap.length;E++)P=this.configFastMap[E],d(C,P)&&(this[P]=a(C,P));for(E=0;E<this.configOpMap.length;E++)P=this.configOpMap[E],d(C,P)&&this[P].loadConfig(C);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,d(C,"speed")&&(this.speedX.loadConfig(C,"speed"),this.speedY=null),(u(C,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),d(C,"scale")&&(this.scaleX.loadConfig(C,"scale"),this.scaleY=null),d(C,"callbackScope")){var M=a(C,"callbackScope",null);this.emitCallbackScope=M,this.deathCallbackScope=M}return d(C,"emitZone")&&this.setEmitZone(C.emitZone),d(C,"deathZone")&&this.setDeathZone(C.deathZone),d(C,"bounds")&&this.setBounds(C.bounds),d(C,"followOffset")&&this.followOffset.setFromObject(a(C,"followOffset",0)),d(C,"frame")&&this.setFrame(C.frame),d(C,"reserve")&&this.reserve(C.reserve),this},toJSON:function(C){C===void 0&&(C={});var E=0,P="";for(E=0;E<this.configFastMap.length;E++)P=this.configFastMap[E],C[P]=this[P];for(E=0;E<this.configOpMap.length;E++)P=this.configOpMap[E],this[P]&&(C[P]=this[P].toJSON());return this.speedY||(delete C.speedX,C.speed=this.speedX.toJSON()),this.scaleY||(delete C.scaleX,C.scale=this.scaleX.toJSON()),C},startFollow:function(C,E,P,M){return E===void 0&&(E=0),P===void 0&&(P=0),M===void 0&&(M=!1),this.follow=C,this.followOffset.set(E,P),this.trackVisible=M,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return v(this.frames);var C=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=T(this.currentFrame+1,0,this._frameLength)),C},setFrame:function(C,E,P){E===void 0&&(E=!0),P===void 0&&(P=1),this.randomFrame=E,this.frameQuantity=P,this.currentFrame=0,this._frameCounter=0;var M=typeof C;if(Array.isArray(C)||M==="string"||M==="number")this.manager.setEmitterFrames(C,this);else if(M==="object"){var R=C;C=a(R,"frames",null),C&&this.manager.setEmitterFrames(C,this);var A=a(R,"cycle",!1);this.randomFrame=!A,this.frameQuantity=a(R,"quantity",P)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(C){return C===void 0&&(C=!0),this.radial=C,this},setPosition:function(C,E){return this.x.onChange(C),this.y.onChange(E),this},setBounds:function(C,E,P,M){if(typeof C=="object"){var R=C;C=R.x,E=R.y,P=d(R,"w")?R.w:R.width,M=d(R,"h")?R.h:R.height}return this.bounds?this.bounds.setTo(C,E,P,M):this.bounds=new m(C,E,P,M),this},setSpeedX:function(C){return this.speedX.onChange(C),this.radial=!1,this},setSpeedY:function(C){return this.speedY&&(this.speedY.onChange(C),this.radial=!1),this},setSpeed:function(C){return this.speedX.onChange(C),this.speedY=null,this.radial=!0,this},setScaleX:function(C){return this.scaleX.onChange(C),this},setScaleY:function(C){return this.scaleY.onChange(C),this},setScale:function(C){return this.scaleX.onChange(C),this.scaleY=null,this},setGravityX:function(C){return this.gravityX=C,this},setGravityY:function(C){return this.gravityY=C,this},setGravity:function(C,E){return this.gravityX=C,this.gravityY=E,this},setAlpha:function(C){return this.alpha.onChange(C),this},setTint:function(C){return this.tint.onChange(C),this},setEmitterAngle:function(C){return this.angle.onChange(C),this},setAngle:function(C){return this.angle.onChange(C),this},setLifespan:function(C){return this.lifespan.onChange(C),this},setQuantity:function(C){return this.quantity.onChange(C),this},setFrequency:function(C,E){return this.frequency=C,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(C){if(C===void 0)this.emitZone=null;else{var E=a(C,"type","random"),P=a(C,"source",null);switch(E){case"random":this.emitZone=new g(P);break;case"edge":var M=a(C,"quantity",1),R=a(C,"stepRate",0),A=a(C,"yoyo",!1),O=a(C,"seamless",!0);this.emitZone=new h(P,M,R,A,O);break}}return this},setDeathZone:function(C){if(C===void 0)this.deathZone=null;else{var E=a(C,"type","onEnter"),P=a(C,"source",null);if(P&&typeof P.contains=="function"){var M=E==="onEnter";this.deathZone=new o(P,M)}}return this},reserve:function(C){for(var E=this.dead,P=0;P<C;P++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(C,E){return C===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof C=="function"&&(this.emitCallback=C,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(C,E){return C===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof C=="function"&&(this.deathCallback=C,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var C=this.dead,E=this.alive;E.length>0;)C.push(E.pop());return this},forEachAlive:function(C,E){for(var P=this.alive,M=P.length,R=0;R<M;++R)C.call(E,P[R],this);return this},forEachDead:function(C,E){for(var P=this.dead,M=P.length,R=0;R<M;++R)C.call(E,P[R],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return x(this.alive,this.depthSortCallback),this},flow:function(C,E){return E===void 0&&(E=1),this.frequency=C,this.quantity.onChange(E),this.start()},explode:function(C,E,P){return this.frequency=-1,this.emitParticle(C,E,P)},emitParticleAt:function(C,E,P){return this.emitParticle(P,C,E)},emitParticle:function(C,E,P){if(!this.atLimit()){C===void 0&&(C=this.quantity.onEmit());for(var M=this.dead,R=this.follow?this.follow.x+this.followOffset.x:E,A=this.follow?this.follow.y+this.followOffset.y:P,O=0;O<C;O++){var F=M.pop();if(F||(F=new this.particleClass(this)),F.fire(R,A),this.particleBringToTop?this.alive.push(F):this.alive.unshift(F),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,F,this),this.atLimit())break}return F}},preUpdate:function(C,E){E*=this.timeScale;var P=E/1e3;this.trackVisible&&(this.visible=this.follow.visible);var M=this.manager.getProcessors(),R=this.alive,A=this.dead,O=0,F=[],I=R.length;for(O=0;O<I;O++){var w=R[O];w.update(E,P,M)&&F.push({index:O,particle:w})}if(I=F.length,I>0){var b=this.deathCallback,Y=this.deathCallbackScope;for(O=I-1;O>=0;O--){var U=F[O];R.splice(U.index,1),A.push(U.particle),b&&b.call(Y,U.particle),U.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(C,E){return C.y-E.y}});t.exports=S},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o,h){this.source=o,this.killOnEnter=h},willKill:function(n){var o=this.source.contains(n.x,n.y);return o&&this.killOnEnter||!o&&!this.killOnEnter}});t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o,h,r,a,v){a===void 0&&(a=!1),v===void 0&&(v=!0),this.source=o,this.points=[],this.quantity=h,this.stepRate=r,this.yoyo=a,this.counter=-1,this.seamless=v,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var n=this.points[0],o=this.points[this.points.length-1];n.x===o.x&&n.y===o.y&&this.points.pop()}var h=this._length;return this._length=this.points.length,this._length<h&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(n){return this.source=n,this.updateSource()},getPoint:function(n){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var o=this.points[this.counter];o&&(n.x=o.x,n.y=o.y)}});t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){for(var n=0;n<l.length;n++)if(s.hasOwnProperty(l[n]))return!0;return!1};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(3),n=new s({initialize:function(h){this.source=h,this._tempVec=new l},getPoint:function(o){var h=this._tempVec;this.source.getRandomPoint(h),o.x=h.x,o.y=h.y}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(11),n=e(73),o=new s({Extends:n,Mixins:[l.PathFollower],initialize:function(r,a,v,u,d,c){n.call(this,r,v,u,d,c),this.path=a},preUpdate:function(h,r){this.anims.update(h,r),this.pathUpdate(h)}});t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=s.canvas,h=s.context,r=s.style,a=[],v=0,u=n.length;r.maxLines>0&&r.maxLines<n.length&&(u=r.maxLines),r.syncFont(o,h);for(var d=0;d<u;d++){var c=r.strokeThickness;c+=h.measureText(n[d]).width,r.wordWrap&&(c-=h.measureText(" ").width),a[d]=Math.ceil(c),v=Math.max(v,a[d])}var g=l.fontSize+r.strokeThickness,m=g*u,x=s.lineSpacing;return u>1&&(m+=x*(u-1)),{width:v,height:m,lines:u,lineWidths:a,lineSpacing:x,lineHeight:g}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(13),n=e(6),o=e(460),h={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new s({initialize:function(v,u){this.parent=v,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(u,!1,!0);var d=n(u,"metrics",!1);d?this.metrics={ascent:n(d,"ascent",0),descent:n(d,"descent",0),fontSize:n(d,"fontSize",0)}:this.metrics=o(this)},setStyle:function(a,v,u){v===void 0&&(v=!0),u===void 0&&(u=!1),a&&a.hasOwnProperty("fontSize")&&typeof a.fontSize=="number"&&(a.fontSize=a.fontSize.toString()+"px");for(var d in h){var c=u?h[d][1]:this[d];d==="wordWrapCallback"||d==="wordWrapCallbackScope"?this[d]=n(a,h[d][0],c):this[d]=l(a,h[d][0],c)}var g=n(a,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var m=n(a,"fill",null);return m!==null&&(this.color=m),v?this.update(!0):this.parent},syncFont:function(a,v){v.font=this._font},syncStyle:function(a,v){v.textBaseline="alphabetic",v.fillStyle=this.color,v.strokeStyle=this.stroke,v.lineWidth=this.strokeThickness,v.lineCap="round",v.lineJoin="round"},syncShadow:function(a,v){v?(a.shadowOffsetX=this.shadowOffsetX,a.shadowOffsetY=this.shadowOffsetY,a.shadowColor=this.shadowColor,a.shadowBlur=this.shadowBlur):(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowColor=0,a.shadowBlur=0)},update:function(a){return a&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(a,v){v===void 0&&(v=!0);var u=a,d="",c="";if(typeof a!="string")u=n(a,"fontFamily","Courier"),d=n(a,"fontSize","16px"),c=n(a,"fontStyle","");else{var g=a.split(" "),m=0;c=g.length>2?g[m++]:"",d=g[m++]||"16px",u=g[m++]||"Courier"}return(u!==this.fontFamily||d!==this.fontSize||c!==this.fontStyle)&&(this.fontFamily=u,this.fontSize=d,this.fontStyle=c,v&&this.update(!0)),this.parent},setFontFamily:function(a){return this.fontFamily!==a&&(this.fontFamily=a,this.update(!0)),this.parent},setFontStyle:function(a){return this.fontStyle!==a&&(this.fontStyle=a,this.update(!0)),this.parent},setFontSize:function(a){return typeof a=="number"&&(a=a.toString()+"px"),this.fontSize!==a&&(this.fontSize=a,this.update(!0)),this.parent},setTestString:function(a){return this.testString=a,this.update(!0)},setFixedSize:function(a,v){return this.fixedWidth=a,this.fixedHeight=v,a&&(this.parent.width=a),v&&(this.parent.height=v),this.update(!1)},setBackgroundColor:function(a){return this.backgroundColor=a,this.update(!1)},setFill:function(a){return this.color=a,this.update(!1)},setColor:function(a){return this.color=a,this.update(!1)},setResolution:function(a){return this.resolution=a,this.update(!1)},setStroke:function(a,v){return v===void 0&&(v=this.strokeThickness),a===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==a||this.strokeThickness!==v)&&(this.stroke=a,this.strokeThickness=v,this.update(!0)),this.parent},setShadow:function(a,v,u,d,c,g){return a===void 0&&(a=0),v===void 0&&(v=0),u===void 0&&(u="#000"),d===void 0&&(d=0),c===void 0&&(c=!1),g===void 0&&(g=!0),this.shadowOffsetX=a,this.shadowOffsetY=v,this.shadowColor=u,this.shadowBlur=d,this.shadowStroke=c,this.shadowFill=g,this.update(!1)},setShadowOffset:function(a,v){return a===void 0&&(a=0),v===void 0&&(v=a),this.shadowOffsetX=a,this.shadowOffsetY=v,this.update(!1)},setShadowColor:function(a){return a===void 0&&(a="#000"),this.shadowColor=a,this.update(!1)},setShadowBlur:function(a){return a===void 0&&(a=0),this.shadowBlur=a,this.update(!1)},setShadowStroke:function(a){return this.shadowStroke=a,this.update(!1)},setShadowFill:function(a){return this.shadowFill=a,this.update(!1)},setWordWrapWidth:function(a,v){return v===void 0&&(v=!1),this.wordWrapWidth=a,this.wordWrapUseAdvanced=v,this.update(!1)},setWordWrapCallback:function(a,v){return v===void 0&&(v=null),this.wordWrapCallback=a,this.wordWrapCallbackScope=v,this.update(!1)},setAlign:function(a){return a===void 0&&(a="left"),this.align=a,this.update(!1)},setMaxLines:function(a){return a===void 0&&(a=0),this.maxLines=a,this.update(!1)},getTextMetrics:function(){var a=this.metrics;return{ascent:a.ascent,descent:a.descent,fontSize:a.fontSize}},toJSON:function(){var a={};for(var v in h)a[v]=this[v];return a.metrics=this.getTextMetrics(),a},destroy:function(){this.parent=void 0}});t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(31),l=function(n){var o=s.create(this),h=o.getContext("2d");n.syncFont(o,h);var r=h.measureText(n.testString);if("actualBoundingBoxAscent"in r){var a=r.actualBoundingBoxAscent,v=r.actualBoundingBoxDescent;return s.remove(o),{ascent:a,descent:v,fontSize:a+v}}var u=Math.ceil(r.width*n.baselineX),d=u,c=2*d;d=d*n.baselineY|0,o.width=u,o.height=c,h.fillStyle="#f00",h.fillRect(0,0,u,c),h.font=n._font,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(n.testString,0,d);var g={ascent:0,descent:0,fontSize:0},m=h.getImageData(0,0,u,c);if(!m)return g.ascent=d,g.descent=d+6,g.fontSize=g.ascent+g.descent,s.remove(o),g;var x=m.data,y=x.length,T=u*4,S,C,E=0,P=!1;for(S=0;S<d;S++){for(C=0;C<T;C+=4)if(x[E+C]!==255){P=!0;break}if(!P)E+=T;else break}for(g.ascent=d-S,E=y-T,P=!1,S=c;S>d;S--){for(C=0;C<T;C+=4)if(x[E+C]!==255){P=!0;break}if(!P)E-=T;else break}return g.descent=S-d,g.fontSize=g.ascent+g.descent,s.remove(o),g};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1097),l=e(0),n=e(36),o=e(59),h=e(65),r=e(14),a=e(34),v=new l({Extends:a,Mixins:[s],initialize:function(d,c,g,m,x,y,T,S,C){c===void 0&&(c=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=0),y===void 0&&(y=360),T===void 0&&(T=!1),a.call(this,d,"Arc",new h(0,0,m)),this._startAngle=x,this._endAngle=y,this._anticlockwise=T,this._iterations=.01,this.setPosition(c,g);var E=this.geom.radius*2;this.setSize(E,E),S!==void 0&&this.setFillStyle(S,C),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(u){this._iterations=u,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(u){this.geom.radius=u;var d=u*2;this.setSize(d,d),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(u){this._startAngle=u,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(u){this._endAngle=u,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(u){this._anticlockwise=u,this.updateData()}},setRadius:function(u){return this.radius=u,this},setIterations:function(u){return u===void 0&&(u=.01),this.iterations=u,this},setStartAngle:function(u,d){return this._startAngle=u,d!==void 0&&(this._anticlockwise=d),this.updateData()},setEndAngle:function(u,d){return this._endAngle=u,d!==void 0&&(this._anticlockwise=d),this.updateData()},updateData:function(){var u=this._iterations,d=u,c=this.geom.radius,g=n(this._startAngle),m=n(this._endAngle),x=this._anticlockwise,y=c,T=c;m-=g,x?m<-r.PI2?m=-r.PI2:m>0&&(m=-r.PI2+m%r.PI2):m>r.PI2?m=r.PI2:m<0&&(m=r.PI2+m%r.PI2);for(var S=[y+Math.cos(g)*c,T+Math.sin(g)*c],C;d<1;)C=m*d+g,S.push(y+Math.cos(C)*c,T+Math.sin(C)*c),d+=u;return C=m+g,S.push(y+Math.cos(C)*c,T+Math.sin(C)*c),S.push(y+Math.cos(g)*c,T+Math.sin(g)*c),this.pathIndexes=o(S),this.pathData=S,this}});t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(1100),n=e(59),o=e(10),h=e(34),r=new s({Extends:h,Mixins:[l],initialize:function(v,u,d,c,g,m){u===void 0&&(u=0),d===void 0&&(d=0),h.call(this,v,"Curve",c),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(u,d),g!==void 0&&this.setFillStyle(g,m),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(a){this._smoothness=a,this.updateData()}},setSmoothness:function(a){return this._smoothness=a,this.updateData()},updateData:function(){var a=this._curveBounds,v=this._smoothness;this.geom.getBounds(a,v),this.setSize(a.width,a.height),this.updateDisplayOrigin();for(var u=[],d=this.geom.getPoints(v),c=0;c<d.length;c++)u.push(d[c].x,d[c].y);return u.push(d[0].x,d[0].y),this.pathIndexes=n(u),this.pathData=u,this}});t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(59),n=e(1103),o=e(111),h=e(34),r=new s({Extends:h,Mixins:[n],initialize:function(v,u,d,c,g,m,x){u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=128),g===void 0&&(g=128),h.call(this,v,"Ellipse",new o(c/2,g/2,c,g)),this._smoothness=64,this.setPosition(u,d),this.width=c,this.height=g,m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(a){this._smoothness=a,this.updateData()}},setSize:function(a,v){return this.width=a,this.height=v,this.geom.setPosition(a/2,v/2),this.geom.setSize(a,v),this.updateData()},setSmoothness:function(a){return this._smoothness=a,this.updateData()},updateData:function(){for(var a=[],v=this.geom.getPoints(this._smoothness),u=0;u<v.length;u++)a.push(v[u].x,v[u].y);return a.push(v[0].x,v[0].y),this.pathIndexes=l(a),this.pathData=a,this}});t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(34),n=e(1106),o=new s({Extends:l,Mixins:[n],initialize:function(r,a,v,u,d,c,g,m,x,y,T){a===void 0&&(a=0),v===void 0&&(v=0),u===void 0&&(u=128),d===void 0&&(d=128),c===void 0&&(c=32),g===void 0&&(g=32),l.call(this,r,"Grid",null),this.cellWidth=c,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(a,v),this.setSize(u,d),this.setFillStyle(m,x),y!==void 0&&this.setOutlineStyle(y,T),this.updateDisplayOrigin()},setFillStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showCells=!1:(this.fillColor=h,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showAltCells=!1:(this.altFillColor=h,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showOutline=!1:(this.outlineFillColor=h,this.outlineFillAlpha=r,this.showOutline=!0),this}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1109),l=e(0),n=e(34),o=new l({Extends:n,Mixins:[s],initialize:function(r,a,v,u,d,c,g,m){a===void 0&&(a=0),v===void 0&&(v=0),u===void 0&&(u=48),d===void 0&&(d=32),c===void 0&&(c=15658734),g===void 0&&(g=10066329),m===void 0&&(m=13421772),n.call(this,r,"IsoBox",null),this.projection=4,this.fillTop=c,this.fillLeft=g,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(a,v),this.setSize(u,d),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setFaces:function(h,r,a){return h===void 0&&(h=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),this.showTop=h,this.showLeft=r,this.showRight=a,this},setFillStyle:function(h,r,a){return this.fillTop=h,this.fillLeft=r,this.fillRight=a,this.isFilled=!0,this}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(1112),n=e(34),o=new s({Extends:n,Mixins:[l],initialize:function(r,a,v,u,d,c,g,m,x){a===void 0&&(a=0),v===void 0&&(v=0),u===void 0&&(u=48),d===void 0&&(d=32),c===void 0&&(c=!1),g===void 0&&(g=15658734),m===void 0&&(m=10066329),x===void 0&&(x=13421772),n.call(this,r,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=m,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=c,this.isFilled=!0,this.setPosition(a,v),this.setSize(u,d),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setReversed:function(h){return this.isReversed=h,this},setFaces:function(h,r,a){return h===void 0&&(h=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),this.showTop=h,this.showLeft=r,this.showRight=a,this},setFillStyle:function(h,r,a){return this.fillTop=h,this.fillLeft=r,this.fillRight=a,this.isFilled=!0,this}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(34),n=e(47),o=e(1115),h=new s({Extends:l,Mixins:[o],initialize:function(a,v,u,d,c,g,m,x,y){v===void 0&&(v=0),u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=0),g===void 0&&(g=128),m===void 0&&(m=0),l.call(this,a,"Line",new n(d,c,g,m));var T=Math.max(1,this.geom.right-this.geom.left),S=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(v,u),this.setSize(T,S),x!==void 0&&this.setStrokeStyle(1,x,y),this.updateDisplayOrigin()},setLineWidth:function(r,a){return a===void 0&&(a=r),this._startWidth=r,this._endWidth=a,this.lineWidth=r,this},setTo:function(r,a,v,u){return this.geom.setTo(r,a,v,u),this}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1118),l=e(0),n=e(59),o=e(469),h=e(227),r=e(34),a=e(472),v=new l({Extends:r,Mixins:[s],initialize:function(d,c,g,m,x,y){c===void 0&&(c=0),g===void 0&&(g=0),r.call(this,d,"Polygon",new h(m));var T=o(this.geom);this.setPosition(c,g),this.setSize(T.width,T.height),x!==void 0&&this.setFillStyle(x,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(u){u===void 0&&(u=1);for(var d=0;d<u;d++)a(this.geom);return this.updateData()},updateData:function(){for(var u=[],d=this.geom.points,c=0;c<d.length;c++)u.push(d[c].x,d[c].y);return u.push(d[0].x,d[0].y),this.pathIndexes=n(u),this.pathData=u,this}});t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10),l=function(n,o){o===void 0&&(o=new s);for(var h=1/0,r=1/0,a=-h,v=-r,u,d=0;d<n.points.length;d++)u=n.points[d],h=Math.min(h,u.x),r=Math.min(r,u.y),a=Math.max(a,u.x),v=Math.max(v,u.y);return o.x=h,o.y=r,o.width=a-h,o.height=v-r,o};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(67),l=e(47),n=e(471),o=function(h,r,a,v){v===void 0&&(v=[]);var u=h.points,d=n(h);!r&&a>0&&(r=d/a);for(var c=0;c<r;c++)for(var g=d*(c/r),m=0,x=0;x<u.length;x++){var y=u[x],T=u[(x+1)%u.length],S=new l(y.x,y.y,T.x,T.y),C=s(S);if(g<m||g>m+C){m+=C;continue}var E=S.getPoint((g-m)/C);v.push(E);break}return v};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(67),l=e(47),n=function(o){for(var h=o.points,r=0,a=0;a<h.length;a++){var v=h[a],u=h[(a+1)%h.length],d=new l(v.x,v.y,u.x,u.y);r+=s(d)}return r};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(l,n){return l[0]=n[0],l[1]=n[1],l},s=function(l){var n,o=[],h=l.points;for(n=0;n<h.length;n++)o.push([h[n].x,h[n].y]);var r=[];for(o.length>0&&r.push(e([0,0],o[0])),n=0;n<o.length-1;n++){var a=o[n],v=o[n+1],u=a[0],d=a[1],c=v[0],g=v[1];r.push([.85*u+.15*c,.85*d+.15*g]),r.push([.15*u+.85*c,.15*d+.85*g])}return o.length>1&&r.push(e([0,0],o[o.length-1])),l.setTo(r)};t.exports=s},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(10),n=e(34),o=e(1121),h=new s({Extends:n,Mixins:[o],initialize:function(a,v,u,d,c,g,m){v===void 0&&(v=0),u===void 0&&(u=0),d===void 0&&(d=128),c===void 0&&(c=128),n.call(this,a,"Rectangle",new l(0,0,d,c)),this.setPosition(v,u),this.setSize(d,c),g!==void 0&&this.setFillStyle(g,m),this.updateDisplayOrigin(),this.updateData()},setSize:function(r,a){return this.width=r,this.height=a,this.geom.setSize(r,a),this.updateData(),this},updateData:function(){var r=[],a=this.geom,v=this._tempLine;return a.getLineA(v),r.push(v.x1,v.y1,v.x2,v.y2),a.getLineB(v),r.push(v.x2,v.y2),a.getLineC(v),r.push(v.x2,v.y2),a.getLineD(v),r.push(v.x2,v.y2),this.pathData=r,this}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1124),l=e(0),n=e(59),o=e(34),h=new l({Extends:o,Mixins:[s],initialize:function(a,v,u,d,c,g,m,x){v===void 0&&(v=0),u===void 0&&(u=0),d===void 0&&(d=5),c===void 0&&(c=32),g===void 0&&(g=64),o.call(this,a,"Star",null),this._points=d,this._innerRadius=c,this._outerRadius=g,this.setPosition(v,u),this.setSize(g*2,g*2),m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],a=this._points,v=this._innerRadius,u=this._outerRadius,d=Math.PI/2*3,c=Math.PI/a,g=u,m=u;r.push(g,m+-u);for(var x=0;x<a;x++)r.push(g+Math.cos(d)*u,m+Math.sin(d)*u),d+=c,r.push(g+Math.cos(d)*v,m+Math.sin(d)*v),d+=c;return r.push(g,m+-u),this.pathIndexes=n(r),this.pathData=r,this}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(34),n=e(82),o=e(1127),h=new s({Extends:l,Mixins:[o],initialize:function(a,v,u,d,c,g,m,x,y,T,S){v===void 0&&(v=0),u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=128),g===void 0&&(g=64),m===void 0&&(m=0),x===void 0&&(x=128),y===void 0&&(y=128),l.call(this,a,"Triangle",new n(d,c,g,m,x,y));var C=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(v,u),this.setSize(C,E),T!==void 0&&this.setFillStyle(T,S),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,a,v,u,d,c){return this.geom.setTo(r,a,v,u,d,c),this.updateData()},updateData:function(){var r=[],a=this.geom,v=this._tempLine;return a.getLineA(v),r.push(v.x1,v.y1,v.x2,v.y2),a.getLineB(v),r.push(v.x2,v.y2),a.getLineC(v),r.push(v.x2,v.y2),this.pathData=r,this}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=e(67),n=function(o,h,r){r===void 0&&(r=new s);var a=o.getLineA(),v=o.getLineB(),u=o.getLineC();if(h<=0||h>=1)return r.x=a.x1,r.y=a.y1,r;var d=l(a),c=l(v),g=l(u),m=d+c+g,x=m*h,y=0;return x<d?(y=x/d,r.x=a.x1+(a.x2-a.x1)*y,r.y=a.y1+(a.y2-a.y1)*y):x>d+c?(x-=d+c,y=x/g,r.x=u.x1+(u.x2-u.x1)*y,r.y=u.y1+(u.y2-u.y1)*y):(x-=d,y=x/c,r.x=v.x1+(v.x2-v.x1)*y,r.y=v.y1+(v.y2-v.y1)*y),r};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(67),l=e(4),n=function(o,h,r,a){a===void 0&&(a=[]);var v=o.getLineA(),u=o.getLineB(),d=o.getLineC(),c=s(v),g=s(u),m=s(d),x=c+g+m;!h&&r>0&&(h=x/r);for(var y=0;y<h;y++){var T=x*(y/h),S=0,C=new l;T<c?(S=T/c,C.x=v.x1+(v.x2-v.x1)*S,C.y=v.y1+(v.y2-v.y1)*S):T>c+g?(T-=c+g,S=T/m,C.x=d.x1+(d.x2-d.x1)*S,C.y=d.y1+(d.y2-d.y1)*S):(T-=c,S=T/g,C.x=u.x1+(u.x2-u.x1)*S,C.y=u.y1+(u.y2-u.y1)*S),a.push(C)}return a};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){if(!s||typeof s=="number")return!1;if(s.hasOwnProperty(l))return s[l]=n,!0;if(l.indexOf(".")!==-1){for(var o=l.split("."),h=s,r=s,a=0;a<o.length;a++)if(h.hasOwnProperty(o[a]))r=h,h=h[o[a]];else return!1;return r[o[o.length-1]]=n,!0}return!1};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(116),l=e(117),n=function(o,h,r,a,v,u,d){if(a===void 0&&(a=!1),u===void 0&&(u=16777215),d===void 0&&(d=1),o.length!==h.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var c={faces:[],vertices:[]},g,m,x,y,T,S,C,E,P,M,R,A=a?3:2,O=Array.isArray(u),F=Array.isArray(d);if(Array.isArray(r)&&r.length>0)for(g=0;g<r.length;g++){var I=r[g],w=r[g]*2,b=r[g]*A;m=o[b],x=o[b+1],y=a?o[b+2]:0,T=h[w],S=h[w+1],C=O?u[I]:u,E=F?d[I]:d,P=0,M=0,R=0,v&&(P=v[b],M=v[b+1],R=a?v[b+2]:0),c.vertices.push(new l(m,x,y,T,S,C,E,P,M,R))}else{var Y=0,U=0;for(g=0;g<o.length;g+=A)m=o[g],x=o[g+1],y=a?o[g+2]:0,T=h[Y],S=h[Y+1],C=O?u[U]:u,E=F?d[U]:d,P=0,M=0,R=0,v&&(P=v[g],M=v[g+1],R=a?v[g+2]:0),c.vertices.push(new l(m,x,y,T,S,C,E,P,M,R)),Y+=2,U++}for(g=0;g<c.vertices.length;g+=3){var W=c.vertices[g],D=c.vertices[g+1],L=c.vertices[g+2];c.faces.push(new s(W,D,L))}return c};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(116),l=e(69),n=e(39),o=e(117),h=new n,r=new n,a=new l,v=function(u,d,c,g,m,x,y,T,S,C){c===void 0&&(c=1),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=0),S===void 0&&(S=0),C===void 0&&(C=!0);var E={faces:[],verts:[]},P=u.materials;h.set(g,m,x),r.set(y,T,S),a.fromRotationXYTranslation(r,h,C);for(var M=0;M<u.models.length;M++)for(var R=u.models[M],A=R.vertices,O=R.textureCoords,F=R.faces,I=0;I<F.length;I++){var w=F[I],b=w.vertices[0],Y=w.vertices[1],U=w.vertices[2],W=A[b.vertexIndex],D=A[Y.vertexIndex],L=A[U.vertexIndex],B=b.textureCoordsIndex,G=Y.textureCoordsIndex,N=U.textureCoordsIndex,V=B===-1?{u:0,v:1}:O[B],z=G===-1?{u:0,v:0}:O[G],X=N===-1?{u:1,v:1}:O[N],H=16777215;w.material!==""&&P[w.material]&&(H=P[w.material]);var K=new o(W.x*c,W.y*c,W.z*c,V.u,V.v,H).transformMat4(a),J=new o(D.x*c,D.y*c,D.z*c,z.u,z.v,H).transformMat4(a),Z=new o(L.x*c,L.y*c,L.z*c,X.u,X.v,H).transformMat4(a);E.verts.push(K,J,Z),E.faces.push(new s(K,J,Z))}return d&&(d.faces=d.faces.concat(E.faces),d.vertices=d.vertices.concat(E.verts)),E};t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(65),l=e(0),n=e(11),o=e(200),h=e(12),r=new l({Extends:s,Mixins:[n.ScrollFactor,n.Visible],initialize:function(v,u,d,c,g,m,x){s.call(this,v,u,d),this.color=new o(c,g,m),this.intensity=x,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(a){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&a.id)},setColor:function(a){var v=h.getFloatsFromUintRGB(a);return this.color.set(v[0],v[1],v[2]),this},setIntensity:function(a){return this.intensity=a,this},setRadius:function(a){return this.radius=a,this}});r.RENDER_MASK=15,t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(151),l=e(0),n=e(50),o=e(481),h=e(150),r=e(200),a=e(74),v=e(79),u=e(12),d=new l({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(c,g,m,x,y,T){return this.systems.displayList.add(new h(this.scene,c,g,m,x,y,T))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(c){for(var g=this.lights,m=c.worldView,x=[],y=0;y<g.length;y++){var T=g[y];T.willRender(c)&&s(T,m)&&x.push({light:T,distance:n(T.x,T.y,m.centerX,m.centerY)})}return x.length>this.maxLights&&(v(x,this.sortByDistance),x=x.slice(0,this.maxLights)),this.visibleLights=x.length,x},sortByDistance:function(c,g){return c.distance>=g.distance},setAmbientColor:function(c){var g=u.getFloatsFromUintRGB(c);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(c,g,m,x,y){c===void 0&&(c=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=16777215),y===void 0&&(y=1);var T=u.getFloatsFromUintRGB(x),S=new o(c,g,m,T[0],T[1],T[2],y);return this.lights.push(S),S},removeLight:function(c){var g=this.lights.indexOf(c);return g>=0&&a(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=d},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(56),l=e(17),n={Circle:e(1191),Ellipse:e(1201),Intersects:e(484),Line:e(1221),Mesh:e(1243),Point:e(1246),Polygon:e(1260),Rectangle:e(502),Triangle:e(1293)};n=l(!1,n,s),t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={CircleToCircle:e(231),CircleToRectangle:e(151),GetCircleToCircle:e(1211),GetCircleToRectangle:e(1212),GetLineToCircle:e(232),GetLineToLine:e(485),GetLineToPoints:e(486),GetLineToPolygon:e(487),GetLineToRectangle:e(234),GetRaysFromPointToPolygon:e(1213),GetRectangleIntersection:e(1214),GetRectangleToRectangle:e(1215),GetRectangleToTriangle:e(1216),GetTriangleToCircle:e(1217),GetTriangleToLine:e(492),GetTriangleToTriangle:e(1218),LineToCircle:e(233),LineToLine:e(96),LineToRectangle:e(488),PointToLine:e(496),PointToLineSegment:e(1219),RectangleToRectangle:e(152),RectangleToTriangle:e(489),RectangleToValues:e(1220),TriangleToCircle:e(491),TriangleToLine:e(493),TriangleToTriangle:e(494)}},function(t,f,e){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(39),l=function(n,o,h){var r=n.x1,a=n.y1,v=n.x2,u=n.y2,d=o.x1,c=o.y1,g=o.x2,m=o.y2,x=v-r,y=u-a,T=g-d,S=m-c,C=S*x-T*y;if(x===0||C===0)return!1;var E=(x*(c-a)+y*(r-d))/(T*y-S*x),P=(d+T*E-r)/x;return P<0||E<0||E>1?null:(h===void 0&&(h=new s),h.set(r+x*P,a+y*P,P))};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(39),l=e(485),n=e(47),o=new n,h=new s,r=function(a,v,u){u===void 0&&(u=new s);var d=!1;u.set(),h.set();for(var c=v[0],g=1;g<v.length;g++){var m=v[g];o.setTo(c.x,c.y,m.x,m.y),c=m,l(a,o,h)&&(!d||h.z<u.z)&&(u.copy(h),d=!0)}return d?u:null};t.exports=r},function(t,f,e){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(39),l=e(140),n=e(486),o=new s,h=function(r,a,v){v===void 0&&(v=new l),Array.isArray(a)||(a=[a]);var u=!1;v.set(),o.set();for(var d=0;d<a.length;d++)n(r,a[d].points,o)&&(!u||o.z<v.z)&&(v.set(o.x,o.y,o.z,d),u=!0);return u?v:null};t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.x1,o=s.y1,h=s.x2,r=s.y2,a=l.x,v=l.y,u=l.right,d=l.bottom,c=0;if(n>=a&&n<=u&&o>=v&&o<=d||h>=a&&h<=u&&r>=v&&r<=d)return!0;if(n<a&&h>=a){if(c=o+(r-o)*(a-n)/(h-n),c>v&&c<=d)return!0}else if(n>u&&h<=u&&(c=o+(r-o)*(u-n)/(h-n),c>=v&&c<=d))return!0;if(o<v&&r>=v){if(c=n+(h-n)*(v-o)/(r-o),c>=a&&c<=u)return!0}else if(o>d&&r<=d&&(c=n+(h-n)*(d-o)/(r-o),c>=a&&c<=u))return!0;return!1};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(96),l=e(57),n=e(235),o=e(490),h=function(r,a){if(a.left>r.right||a.right<r.left||a.top>r.bottom||a.bottom<r.top)return!1;var v=a.getLineA(),u=a.getLineB(),d=a.getLineC();if(l(r,v.x1,v.y1)||l(r,v.x2,v.y2)||l(r,u.x1,u.y1)||l(r,u.x2,u.y2)||l(r,d.x1,d.y1)||l(r,d.x2,d.y2))return!0;var c=r.getLineA(),g=r.getLineB(),m=r.getLineC(),x=r.getLineD();if(s(v,c)||s(v,g)||s(v,m)||s(v,x)||s(u,c)||s(u,g)||s(u,m)||s(u,x)||s(d,c)||s(d,g)||s(d,m)||s(d,x))return!0;var y=o(r),T=n(a,y,!0);return T.length>0};t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l===void 0&&(l=[]),l.push({x:s.x,y:s.y}),l.push({x:s.right,y:s.y}),l.push({x:s.right,y:s.bottom}),l.push({x:s.x,y:s.bottom}),l};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(233),l=e(115),n=function(o,h){return o.left>h.right||o.right<h.left||o.top>h.bottom||o.bottom<h.top?!1:!!(l(o,h.x,h.y)||s(o.getLineA(),h)||s(o.getLineB(),h)||s(o.getLineC(),h))};t.exports=n},function(t,f,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=e(493),n=e(96),o=function(h,r,a){if(a===void 0&&(a=[]),l(h,r))for(var v=h.getLineA(),u=h.getLineB(),d=h.getLineC(),c=[new s,new s,new s],g=[n(v,r,c[0]),n(u,r,c[1]),n(d,r,c[2])],m=0;m<3;m++)g[m]&&a.push(c[m]);return a};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(96),l=function(n,o){return!!(n.contains(o.x1,o.y1)||n.contains(o.x2,o.y2)||s(n.getLineA(),o)||s(n.getLineB(),o)||s(n.getLineC(),o))};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(235),l=e(495),n=e(96),o=function(h,r){if(h.left>r.right||h.right<r.left||h.top>r.bottom||h.bottom<r.top)return!1;var a=h.getLineA(),v=h.getLineB(),u=h.getLineC(),d=r.getLineA(),c=r.getLineB(),g=r.getLineC();if(n(a,d)||n(a,c)||n(a,g)||n(v,d)||n(v,c)||n(v,g)||n(u,d)||n(u,c)||n(u,g))return!0;var m=l(h),x=s(r,m,!0);return x.length>0||(m=l(r),x=s(h,m,!0),x.length>0)};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l===void 0&&(l=[]),l.push({x:s.x1,y:s.y1}),l.push({x:s.x2,y:s.y2}),l.push({x:s.x3,y:s.y3}),l};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){n===void 0&&(n=1);var o=l.x1,h=l.y1,r=l.x2,a=l.y2,v=s.x,u=s.y,d=(r-o)*(r-o)+(a-h)*(a-h);if(d===0)return!1;var c=((v-o)*(r-o)+(u-h)*(a-h))/d;if(c<0)return Math.sqrt((o-v)*(o-v)+(h-u)*(h-u))<=n;if(c>=0&&c<=1){var g=((h-u)*(r-o)-(o-v)*(a-h))/d;return Math.abs(g)*Math.sqrt(d)<=n}else return Math.sqrt((r-v)*(r-v)+(a-u)*(a-u))<=n};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(14),l=e(68),n=e(97),o=function(h){var r=n(h)-s.TAU;return l(r,-Math.PI,Math.PI)};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=!0,s="untitled",l="",n="";function o(y){var T=y.indexOf("#");return T>-1?y.substring(0,T):y}function h(y){return y.models.length===0&&y.models.push({faces:[],name:s,textureCoords:[],vertexNormals:[],vertices:[]}),l="",y.models[y.models.length-1]}function r(y,T){var S=y.length>=2?y[1]:s;T.models.push({faces:[],name:S,textureCoords:[],vertexNormals:[],vertices:[]}),l=""}function a(y){y.length===2&&(l=y[1])}function v(y,T){var S=y.length,C=S>=2?parseFloat(y[1]):0,E=S>=3?parseFloat(y[2]):0,P=S>=4?parseFloat(y[3]):0;h(T).vertices.push({x:C,y:E,z:P})}function u(y,T){var S=y.length,C=S>=2?parseFloat(y[1]):0,E=S>=3?parseFloat(y[2]):0,P=S>=4?parseFloat(y[3]):0;isNaN(C)&&(C=0),isNaN(E)&&(E=0),isNaN(P)&&(P=0),e&&(E=1-E),h(T).textureCoords.push({u:C,v:E,w:P})}function d(y,T){var S=y.length,C=S>=2?parseFloat(y[1]):0,E=S>=3?parseFloat(y[2]):0,P=S>=4?parseFloat(y[3]):0;h(T).vertexNormals.push({x:C,y:E,z:P})}function c(y,T){var S=y.length-1;if(!(S<3)){for(var C={group:l,material:n,vertices:[]},E=0;E<S;E++){var P=y[E+1],M=P.split("/"),R=M.length;if(!(R<1||R>3)){var A=0,O=0,F=0;A=parseInt(M[0],10),R>1&&M[1]!==""&&(O=parseInt(M[1],10)),R>2&&(F=parseInt(M[2],10)),A!==0&&(A<0&&(A=h(T).vertices.length+1+A),O-=1,A-=1,F-=1,C.vertices.push({textureCoordsIndex:O,vertexIndex:A,vertexNormalIndex:F}))}}h(T).faces.push(C)}}function g(y,T){y.length>=2&&T.materialLibraries.push(y[1])}function m(y){y.length>=2&&(n=y[1])}var x=function(y,T){T===void 0&&(T=!0),e=T;var S={materials:{},materialLibraries:[],models:[]};l="",n="";for(var C=y.split(`
`),E=0;E<C.length;E++){var P=o(C[E]),M=P.replace(/\s\s+/g," ").trim().split(" ");switch(M[0].toLowerCase()){case"o":r(M,S);break;case"g":a(M);break;case"v":v(M,S);break;case"vt":u(M,S);break;case"vn":d(M,S);break;case"f":c(M,S);break;case"mtllib":g(M,S);break;case"usemtl":m(M);break}}return S};t.exports=x},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(103),l=function(n){for(var o={},h=n.split(`
`),r="",a=0;a<h.length;a++){var v=h[a].trim();if(!(v.indexOf("#")===0||v==="")){var u=v.replace(/\s\s+/g," ").trim().split(" ");switch(u[0].toLowerCase()){case"newmtl":{r=u[1];break}case"kd":{var d=Math.floor(u[1]*255),c=u.length>=2?Math.floor(u[2]*255):d,g=u.length>=3?Math.floor(u[3]*255):d;o[r]=s(d,c,g);break}}}}return o};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.x*s.x+s.y*s.y};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10);s.Area=e(1267),s.Ceil=e(1268),s.CeilAll=e(1269),s.CenterOn=e(190),s.Clone=e(1270),s.Contains=e(57),s.ContainsPoint=e(1271),s.ContainsRect=e(503),s.CopyFrom=e(1272),s.Decompose=e(490),s.Equals=e(1273),s.FitInside=e(1274),s.FitOutside=e(1275),s.Floor=e(1276),s.FloorAll=e(1277),s.FromPoints=e(199),s.FromXY=e(1278),s.GetAspectRatio=e(237),s.GetCenter=e(1279),s.GetPoint=e(171),s.GetPoints=e(306),s.GetSize=e(1280),s.Inflate=e(1281),s.Intersection=e(1282),s.MarchingAnts=e(316),s.MergePoints=e(1283),s.MergeRect=e(1284),s.MergeXY=e(1285),s.Offset=e(1286),s.OffsetPoint=e(1287),s.Overlaps=e(1288),s.Perimeter=e(130),s.PerimeterPoint=e(1289),s.Random=e(174),s.RandomOutside=e(1290),s.SameDimensions=e(1291),s.Scale=e(1292),s.Union=e(441),t.exports=s},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l.width*l.height>s.width*s.height?!1:l.x>s.x&&l.x<s.right&&l.right>s.x&&l.right<s.right&&l.y>s.y&&l.y<s.bottom&&l.bottom>s.y&&l.bottom<s.bottom};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o){return o===void 0&&(o=new s),o.x=(n.x1+n.x2+n.x3)/3,o.y=(n.y1+n.y2+n.y3)/3,o};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return s.x1+=l,s.y1+=n,s.x2+=l,s.y2+=n,s.x3+=l,s.y3+=n,s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4);function l(o,h,r,a){var v=o-r,u=h-a,d=v*v+u*u;return Math.sqrt(d)}var n=function(o,h){h===void 0&&(h=new s);var r=o.x1,a=o.y1,v=o.x2,u=o.y2,d=o.x3,c=o.y3,g=l(d,c,v,u),m=l(r,a,d,c),x=l(v,u,r,a),y=g+m+x;return h.x=(r*g+v*m+d*x)/y,h.y=(a*g+u*m+c*x)/y,h};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return function(n,o,h,r){var a=s.getPixelAlpha(o,h,r.texture.key,r.frame.name);return a&&a>=l}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return{gameObject:s,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:l,hitAreaCallback:n,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o,h){this.pad=o,this.events=o.events,this.index=h,this.value=0,this.threshold=.1},update:function(n){this.value=n},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(239),n=new s({initialize:function(h,r){this.pad=h,this.events=h.manager,this.index=r,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var h=this.pad,r=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(l.BUTTON_DOWN,h,this,o),this.pad.emit(l.GAMEPAD_BUTTON_DOWN,r,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(l.BUTTON_UP,h,this,o),this.pad.emit(l.GAMEPAD_BUTTON_UP,r,o,this))},destroy:function(){this.pad=null,this.events=null}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(509),l=e(510),n=e(0),o=e(9),h=e(3),r=new n({Extends:o,initialize:function(v,u){o.call(this),this.manager=v,this.pad=u,this.id=u.id,this.index=u.index;for(var d=[],c=0;c<u.buttons.length;c++)d.push(new l(this,c));this.buttons=d;var g=[];for(c=0;c<u.axes.length;c++)g.push(new s(this,c));this.axes=g,this.vibration=u.vibrationActuator;var m={value:0,pressed:!1};this._LCLeft=d[14]?d[14]:m,this._LCRight=d[15]?d[15]:m,this._LCTop=d[12]?d[12]:m,this._LCBottom=d[13]?d[13]:m,this._RCLeft=d[2]?d[2]:m,this._RCRight=d[1]?d[1]:m,this._RCTop=d[3]?d[3]:m,this._RCBottom=d[0]?d[0]:m,this._FBLeftTop=d[4]?d[4]:m,this._FBLeftBottom=d[6]?d[6]:m,this._FBRightTop=d[5]?d[5]:m,this._FBRightBottom=d[7]?d[7]:m;var x={value:0};this._HAxisLeft=g[0]?g[0]:x,this._VAxisLeft=g[1]?g[1]:x,this._HAxisRight=g[2]?g[2]:x,this._VAxisRight=g[3]?g[3]:x,this.leftStick=new h,this.rightStick=new h,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(a){return this.axes[a].getValue()},setAxisThreshold:function(a){for(var v=0;v<this.axes.length;v++)this.axes[v].threshold=a},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(a){return this.buttons[a].value},isButtonDown:function(a){return this.buttons[a].pressed},update:function(a){if(!(a.timestamp<this._created)){var v,u=this.buttons,d=a.buttons,c=u.length;for(v=0;v<c;v++)u[v].update(d[v].value);var g=this.axes,m=a.axes;for(c=g.length,v=0;v<c;v++)g[v].update(m[v]);c>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),c>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var a;for(a=0;a<this.buttons.length;a++)this.buttons[a].destroy();for(a=0;a<this.axes.length;a++)this.axes[a].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(9),n=e(154),o=new s({Extends:l,initialize:function(r,a){l.call(this),this.plugin=r,this.keyCode=a,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(h){return this.emitOnRepeat=h,this},onDown:function(h){this.originalEvent=h,this.enabled&&(this.altKey=h.altKey,this.ctrlKey=h.ctrlKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.location=h.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(n.DOWN,this,h):(this.isDown=!0,this.isUp=!1,this.timeDown=h.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(n.DOWN,this,h)))},onUp:function(h){this.originalEvent=h,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=h.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(n.UP,this,h))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(154),n=e(2),o=e(514),h=e(516),r=new s({initialize:function(v,u,d){if(d===void 0&&(d={}),u.length<2)return!1;this.manager=v,this.enabled=!0,this.keyCodes=[];for(var c=0;c<u.length;c++){var g=u[c];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=n(d,"resetOnWrongKey",!0),this.maxKeyDelay=n(d,"maxKeyDelay",0),this.resetOnMatch=n(d,"resetOnMatch",!1),this.deleteOnMatch=n(d,"deleteOnMatch",!1);var m=this,x=function(y){if(!(m.matched||!m.enabled)){var T=o(y,m);T&&(m.manager.emit(l.COMBO_MATCH,m,y),m.resetOnMatch?h(m):m.deleteOnMatch&&m.destroy())}};this.onKeyDown=x,this.manager.on(l.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(l.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(515),l=function(n,o){if(o.matched)return!0;var h=!1,r=!1;if(n.keyCode===o.current)if(o.index>0&&o.maxKeyDelay>0){var a=o.timeLastMatched+o.maxKeyDelay;n.timeStamp<=a&&(r=!0,h=s(n,o))}else r=!0,h=s(n,o);return!r&&o.resetOnWrongKey&&(o.index=0,o.current=o.keyCodes[0]),h&&(o.timeLastMatched=n.timeStamp,o.matched=!0,o.timeMatched=n.timeStamp),h};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l.timeLastMatched=s.timeStamp,l.index++,l.index===l.size?!0:(l.current=l.keyCodes[l.index],!1)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.current=s.keyCodes[0],s.index=0,s.timeLastMatched=0,s.matched=!1,s.timeMatched=0,s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(240),l=function(n,o){var h=s(o,n.xhrSettings),r=new XMLHttpRequest;if(r.open("GET",n.src,h.async,h.user,h.password),r.responseType=n.xhrSettings.responseType,r.timeout=h.timeout,h.headers)for(var a in h.headers)r.setRequestHeader(a,h.headers[a]);return h.header&&h.headerValue&&r.setRequestHeader(h.header,h.headerValue),h.requestedWith&&r.setRequestHeader("X-Requested-With",h.requestedWith),h.overrideMimeType&&r.overrideMimeType(h.overrideMimeType),h.withCredentials&&(r.withCredentials=!0),r.onload=n.onLoad.bind(n,r),r.onerror=n.onError.bind(n,r),r.onprogress=n.onProgress.bind(n),r.send(),r};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(519),a=e(7),v=new s({Extends:n,initialize:function(d,c,g,m,x){if(a(c)){var y=c;c=h(y,"key"),m=h(y,"xhrSettings"),x=h(y,"context",x)}var T={type:"audio",cache:d.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:c,url:g.url,xhrSettings:m,config:{context:x}};n.call(this,d,T)},onProcess:function(){this.state=l.FILE_PROCESSING;var u=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(d){u.data=d,u.onProcessComplete()},function(d){console.error("Error decoding audio: "+u.key+" - ",d?d.message:null),u.onProcessError()}),this.config.context=null}});v.create=function(u,d,c,g,m){var x=u.systems.game,y=x.config.audio,T=x.device.audio;a(d)&&(c=h(d,"url",[]),g=h(d,"config",{}));var S=v.getAudioURL(x,c);return S?T.webAudio&&!y.disableWebAudio?new v(u,d,S,m,x.sound.context):new r(u,d,S,g):null},v.getAudioURL=function(u,d){Array.isArray(d)||(d=[d]);for(var c=0;c<d.length;c++){var g=h(d[c],"url",d[c]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var m=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(m=h(d[c],"type",m?m[1]:"").toLowerCase(),u.device.audio[m])return{url:g,type:m}}return null},o.register("audio",function(u,d,c,g){var m=this.systems.game,x=m.config.audio,y=m.device.audio;if(x.noAudio||!y.webAudio&&!y.audioData)return this;var T;if(Array.isArray(u))for(var S=0;S<u.length;S++)T=v.create(this,u[S]),T&&this.addFile(T);else T=v.create(this,u,d,c,g),T&&this.addFile(T);return this}),t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(95),n=e(23),o=e(2),h=e(155),r=e(7),a=new s({Extends:n,initialize:function(u,d,c,g){if(r(d)){var m=d;d=o(m,"key"),g=o(m,"config",g)}var x={type:"audio",cache:u.cacheManager.audio,extension:c.type,key:d,url:c.url,config:g};n.call(this,u,x),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var v=0;v<this.data.length;v++){var u=this.data[v];u.oncanplaythrough=null,u.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(v){var u=v.target;u.oncanplaythrough=null,u.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(l.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var v=this.config&&this.config.instances||1;this.filesTotal=v,this.filesLoaded=0,this.percentComplete=0;for(var u=0;u<v;u++){var d=new Audio;d.dataset||(d.dataset={}),d.dataset.name=this.key+("0"+u).slice(-2),d.dataset.used="false",this.locked?d.dataset.locked="true":(d.dataset.locked="false",d.preload="auto",d.oncanplaythrough=this.onProgress.bind(this),d.onerror=this.onError.bind(this)),this.data.push(d)}for(u=0;u<this.data.length;u++)d=this.data[u],d.src=h(this,this.loader.baseURL),this.locked||d.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=new s({Extends:n,initialize:function(u,d,c,g){var m="js";if(r(d)){var x=d;d=h(x,"key"),c=h(x,"url"),g=h(x,"xhrSettings"),m=h(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:d,url:c,xhrSettings:g};n.call(this,u,y)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",function(v,u,d){if(Array.isArray(v))for(var c=0;c<v.length;c++)this.addFile(new a(this,v[c]));else this.addFile(new a(this,v,u,d));return this}),t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(522),l=e(157),n=e(0),o=e(62),h=e(524),r=e(525),a=new n({initialize:function(u){this.world=u,this.scene=u.scene,this.sys=u.scene.sys},collider:function(v,u,d,c,g){return this.world.addCollider(v,u,d,c,g)},overlap:function(v,u,d,c,g){return this.world.addOverlap(v,u,d,c,g)},existing:function(v,u){var d=u?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(v,d),v},staticImage:function(v,u,d,c){var g=new s(this.scene,v,u,d,c);return this.sys.displayList.add(g),this.world.enableBody(g,o.STATIC_BODY),g},image:function(v,u,d,c){var g=new s(this.scene,v,u,d,c);return this.sys.displayList.add(g),this.world.enableBody(g,o.DYNAMIC_BODY),g},staticSprite:function(v,u,d,c){var g=new l(this.scene,v,u,d,c);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,o.STATIC_BODY),g},sprite:function(v,u,d,c){var g=new l(this.scene,v,u,d,c);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,o.DYNAMIC_BODY),g},staticGroup:function(v,u){return this.sys.updateList.add(new r(this.world,this.world.scene,v,u))},group:function(v,u){return this.sys.updateList.add(new h(this.world,this.world.scene,v,u))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(243),n=e(125),o=new s({Extends:n,Mixins:[l.Acceleration,l.Angular,l.Bounce,l.Debug,l.Drag,l.Enable,l.Friction,l.Gravity,l.Immovable,l.Mass,l.Pushable,l.Size,l.Velocity],initialize:function(r,a,v,u,d){n.call(this,r,a,v,u,d),this.body=null}});t.exports=o},function(t,f,e){var s=e(244),l=e(65),n=e(231),o=e(151),h=function(r,a,v,u,d,c){var g=s(r,a-u,v-u,2*u,2*u,d,c);if(g.length===0)return g;for(var m=new l(a,v,u),x=new l,y=[],T=0;T<g.length;T++){var S=g[T];S.isCircle?(x.setTo(S.center.x,S.center.y,S.halfWidth),n(m,x)&&y.push(S)):o(m,S)&&y.push(S)}return y};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(157),l=e(0),n=e(62),o=e(2),h=e(113),r=e(7),a=new l({Extends:h,initialize:function(u,d,c,g){if(!c&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(r(c))g=c,c=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(c)&&r(c[0])){g=c[0];var m=this;c.forEach(function(x){x.internalCreateCallback=m.createCallbackHandler,x.internalRemoveCallback=m.removeCallbackHandler}),c=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=u,g.classType=o(g,"classType",s),this.physicsType=n.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:o(g,"collideWorldBounds",!1),setBoundsRectangle:o(g,"customBoundsRectangle",null),setAccelerationX:o(g,"accelerationX",0),setAccelerationY:o(g,"accelerationY",0),setAllowDrag:o(g,"allowDrag",!0),setAllowGravity:o(g,"allowGravity",!0),setAllowRotation:o(g,"allowRotation",!0),setBounceX:o(g,"bounceX",0),setBounceY:o(g,"bounceY",0),setDragX:o(g,"dragX",0),setDragY:o(g,"dragY",0),setEnable:o(g,"enable",!0),setGravityX:o(g,"gravityX",0),setGravityY:o(g,"gravityY",0),setFrictionX:o(g,"frictionX",0),setFrictionY:o(g,"frictionY",0),setMaxVelocityX:o(g,"maxVelocityX",1e4),setMaxVelocityY:o(g,"maxVelocityY",1e4),setVelocityX:o(g,"velocityX",0),setVelocityY:o(g,"velocityY",0),setAngularVelocity:o(g,"angularVelocity",0),setAngularAcceleration:o(g,"angularAcceleration",0),setAngularDrag:o(g,"angularDrag",0),setMass:o(g,"mass",1),setImmovable:o(g,"immovable",!1)},h.call(this,d,c,g),this.type="PhysicsGroup"},createCallbackHandler:function(v){v.body||this.world.enableBody(v,n.DYNAMIC_BODY);var u=v.body;for(var d in this.defaults)u[d](this.defaults[d])},removeCallbackHandler:function(v){v.body&&this.world.disableBody(v)},setVelocity:function(v,u,d){d===void 0&&(d=0);for(var c=this.getChildren(),g=0;g<c.length;g++)c[g].body.velocity.set(v+g*d,u+g*d);return this},setVelocityX:function(v,u){u===void 0&&(u=0);for(var d=this.getChildren(),c=0;c<d.length;c++)d[c].body.velocity.x=v+c*u;return this},setVelocityY:function(v,u){u===void 0&&(u=0);for(var d=this.getChildren(),c=0;c<d.length;c++)d[c].body.velocity.y=v+c*u;return this}});t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(157),l=e(0),n=e(62),o=e(2),h=e(113),r=e(7),a=new l({Extends:h,initialize:function(u,d,c,g){!c&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:s}:r(c)?(g=c,c=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=o(g,"classType",s)):Array.isArray(c)&&r(c[0])?(g=c,c=null,g.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=o(m,"classType",s)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=u,this.physicsType=n.STATIC_BODY,h.call(this,d,c,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(v){v.body||this.world.enableBody(v,n.STATIC_BODY)},removeCallbackHandler:function(v){v.body&&this.world.disableBody(v)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var v=this.children.entries,u=0;u<v.length;u++)v[u].body.reset();return this}});t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(350),l=e(527),n=e(18),o=e(0),h=e(528),r=e(62),a=e(50),v=e(9),u=e(245),d=e(124),c=e(354),g=e(355),m=e(246),x=e(247),y=e(529),T=e(6),S=e(14),C=e(211),E=e(530),P=e(10),M=e(531),R=e(532),A=e(537),O=e(538),F=e(149),I=e(539),w=e(248),b=e(25),Y=e(3),U=e(68),W=new o({Extends:v,initialize:function(L,B){v.call(this),this.scene=L,this.bodies=new F,this.staticBodies=new F,this.pendingDestroy=new F,this.colliders=new C,this.gravity=new Y(T(B,"gravity.x",0),T(B,"gravity.y",0)),this.bounds=new P(T(B,"x",0),T(B,"y",0),T(B,"width",L.sys.scale.width),T(B,"height",L.sys.scale.height)),this.checkCollision={up:T(B,"checkCollision.up",!0),down:T(B,"checkCollision.down",!0),left:T(B,"checkCollision.left",!0),right:T(B,"checkCollision.right",!0)},this.fps=T(B,"fps",60),this.fixedStep=T(B,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(B,"timeScale",1),this.OVERLAP_BIAS=T(B,"overlapBias",4),this.TILE_BIAS=T(B,"tileBias",16),this.forceX=T(B,"forceX",!1),this.isPaused=T(B,"isPaused",!1),this._total=0,this.drawDebug=T(B,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(B,"debugShowBody",!0),debugShowStaticBody:T(B,"debugShowStaticBody",!0),debugShowVelocity:T(B,"debugShowVelocity",!0),bodyDebugColor:T(B,"debugBodyColor",16711935),staticBodyDebugColor:T(B,"debugStaticBodyColor",255),velocityDebugColor:T(B,"debugVelocityColor",65280)},this.maxEntries=T(B,"maxEntries",16),this.useTree=T(B,"useTree",!0),this.tree=new M(this.maxEntries),this.staticTree=new M(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new b,this._tempMatrix2=new b,this.drawDebug&&this.createDebugGraphic()},enable:function(D,L){L===void 0&&(L=r.DYNAMIC_BODY),Array.isArray(D)||(D=[D]);for(var B=0;B<D.length;B++){var G=D[B];if(G.isParent)for(var N=G.getChildren(),V=0;V<N.length;V++){var z=N[V];z.isParent?this.enable(z,L):this.enableBody(z,L)}else this.enableBody(G,L)}},enableBody:function(D,L){return L===void 0&&(L=r.DYNAMIC_BODY),D.body||(L===r.DYNAMIC_BODY?D.body=new l(this,D):L===r.STATIC_BODY&&(D.body=new I(this,D))),this.add(D.body),D},add:function(D){return D.physicsType===r.DYNAMIC_BODY?this.bodies.set(D):D.physicsType===r.STATIC_BODY&&(this.staticBodies.set(D),this.staticTree.insert(D)),D.enable=!0,D},disable:function(D){Array.isArray(D)||(D=[D]);for(var L=0;L<D.length;L++){var B=D[L];if(B.isParent)for(var G=B.getChildren(),N=0;N<G.length;N++){var V=G[N];V.isParent?this.disable(V):this.disableBody(V.body)}else this.disableBody(B.body)}},disableBody:function(D){this.remove(D),D.enable=!1},remove:function(D){D.physicsType===r.DYNAMIC_BODY?(this.tree.remove(D),this.bodies.delete(D)):D.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(D),this.staticTree.remove(D))},createDebugGraphic:function(){var D=this.scene.sys.add.graphics({x:0,y:0});return D.setDepth(Number.MAX_VALUE),this.debugGraphic=D,this.drawDebug=!0,D},setBounds:function(D,L,B,G,N,V,z,X){return this.bounds.setTo(D,L,B,G),N!==void 0&&this.setBoundsCollision(N,V,z,X),this},setBoundsCollision:function(D,L,B,G){return D===void 0&&(D=!0),L===void 0&&(L=!0),B===void 0&&(B=!0),G===void 0&&(G=!0),this.checkCollision.left=D,this.checkCollision.right=L,this.checkCollision.up=B,this.checkCollision.down=G,this},pause:function(){return this.isPaused=!0,this.emit(u.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(u.RESUME),this},addCollider:function(D,L,B,G,N){B===void 0&&(B=null),G===void 0&&(G=null),N===void 0&&(N=B);var V=new h(this,!1,D,L,B,G,N);return this.colliders.add(V),V},addOverlap:function(D,L,B,G,N){B===void 0&&(B=null),G===void 0&&(G=null),N===void 0&&(N=B);var V=new h(this,!0,D,L,B,G,N);return this.colliders.add(V),V},removeCollider:function(D){return this.colliders.remove(D),this},setFPS:function(D){return this.fps=D,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(D,L){if(!(this.isPaused||this.bodies.size===0)){var B,G=this._frameTime,N=this._frameTimeMS*this.timeScale;this._elapsed+=L;var V,z=this.bodies.entries,X=this._elapsed>=N;for(this.fixedStep||(G=L*.001,X=!0,this._elapsed=0),B=0;B<z.length;B++)V=z[B],V.enable&&V.preUpdate(X,G);if(X){this._elapsed-=N,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(z));var H=this.colliders.update();for(B=0;B<H.length;B++){var K=H[B];K.active&&K.update()}this.emit(u.WORLD_STEP,G)}for(;this._elapsed>=N;)this._elapsed-=N,this.step(G)}},step:function(D){var L,B,G=this.bodies.entries,N=G.length;for(L=0;L<N;L++)B=G[L],B.enable&&B.update(D);this.useTree&&(this.tree.clear(),this.tree.load(G));var V=this.colliders.update();for(L=0;L<V.length;L++){var z=V[L];z.active&&z.update()}this.emit(u.WORLD_STEP,D),this.stepsLastFrame++},postUpdate:function(){var D,L,B=this.bodies.entries,G=B.length,N=this.bodies,V=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,D=0;D<G;D++)L=B[D],L.enable&&L.postUpdate();if(this.drawDebug){var z=this.debugGraphic;for(z.clear(),D=0;D<G;D++)L=B[D],L.willDrawDebug()&&L.drawDebug(z);for(B=V.entries,G=B.length,D=0;D<G;D++)L=B[D],L.willDrawDebug()&&L.drawDebug(z)}var X=this.pendingDestroy;if(X.size>0){var H=this.tree,K=this.staticTree;for(B=X.entries,G=B.length,D=0;D<G;D++)L=B[D],L.physicsType===r.DYNAMIC_BODY?(H.remove(L),N.delete(L)):L.physicsType===r.STATIC_BODY&&(K.remove(L),V.delete(L)),L.world=void 0,L.gameObject=void 0;X.clear()}},updateMotion:function(D,L){D.allowRotation&&this.computeAngularVelocity(D,L),this.computeVelocity(D,L)},computeAngularVelocity:function(D,L){var B=D.angularVelocity,G=D.angularAcceleration,N=D.angularDrag,V=D.maxAngular;G?B+=G*L:D.allowDrag&&N&&(N*=L,c(B-N,0,.1)?B-=N:g(B+N,0,.1)?B+=N:B=0),B=n(B,-V,V);var z=B-D.angularVelocity;D.angularVelocity+=z,D.rotation+=D.angularVelocity*L},computeVelocity:function(D,L){var B=D.velocity.x,G=D.acceleration.x,N=D.drag.x,V=D.maxVelocity.x,z=D.velocity.y,X=D.acceleration.y,H=D.drag.y,K=D.maxVelocity.y,J=D.speed,Z=D.maxSpeed,Q=D.allowDrag,q=D.useDamping;D.allowGravity&&(B+=(this.gravity.x+D.gravity.x)*L,z+=(this.gravity.y+D.gravity.y)*L),G?B+=G*L:Q&&N&&(q?(N=Math.pow(N,L),B*=N,J=Math.sqrt(B*B+z*z),d(J,0,.001)&&(B=0)):(N*=L,c(B-N,0,.01)?B-=N:g(B+N,0,.01)?B+=N:B=0)),X?z+=X*L:Q&&H&&(q?(H=Math.pow(H,L),z*=H,J=Math.sqrt(B*B+z*z),d(J,0,.001)&&(z=0)):(H*=L,c(z-H,0,.01)?z-=H:g(z+H,0,.01)?z+=H:z=0)),B=n(B,-V,V),z=n(z,-K,K),D.velocity.set(B,z),Z>-1&&J>Z&&(D.velocity.normalize().scale(Z),J=Z),D.speed=J},separate:function(D,L,B,G,N,V){if(!V&&!D.enable||!L.enable||D.checkCollision.none||L.checkCollision.none||!this.intersects(D,L)||B&&B.call(G,D.gameObject,L.gameObject)===!1)return!1;if(D.isCircle&&L.isCircle)return this.separateCircle(D,L,N);if(D.isCircle!==L.isCircle){var z=D.isCircle?L:D,X=D.isCircle?D:L,H={x:z.x,y:z.y,right:z.right,bottom:z.bottom},K=X.center;if((K.y<H.y||K.y>H.bottom)&&(K.x<H.x||K.x>H.right))return this.separateCircle(D,L,N)}var J=!1,Z=!1;N?(J=A(D,L,N,this.OVERLAP_BIAS),Z=O(D,L,N,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+D.gravity.y)<Math.abs(this.gravity.x+D.gravity.x)?(J=A(D,L,N,this.OVERLAP_BIAS),this.intersects(D,L)&&(Z=O(D,L,N,this.OVERLAP_BIAS))):(Z=O(D,L,N,this.OVERLAP_BIAS),this.intersects(D,L)&&(J=A(D,L,N,this.OVERLAP_BIAS)));var Q=J||Z;return Q&&(N?(D.onOverlap||L.onOverlap)&&this.emit(u.OVERLAP,D.gameObject,L.gameObject,D,L):(D.onCollide||L.onCollide)&&this.emit(u.COLLIDE,D.gameObject,L.gameObject,D,L)),Q},separateCircle:function(D,L,B,G){m(D,L,!1,G),x(D,L,!1,G);var N=0;if(D.isCircle!==L.isCircle){var V={x:L.isCircle?D.position.x:L.position.x,y:L.isCircle?D.position.y:L.position.y,right:L.isCircle?D.right:L.right,bottom:L.isCircle?D.bottom:L.bottom},z={x:D.isCircle?D.center.x:L.center.x,y:D.isCircle?D.center.y:L.center.y,radius:D.isCircle?D.halfWidth:L.halfWidth};z.y<V.y?z.x<V.x?N=a(z.x,z.y,V.x,V.y)-z.radius:z.x>V.right&&(N=a(z.x,z.y,V.right,V.y)-z.radius):z.y>V.bottom&&(z.x<V.x?N=a(z.x,z.y,V.x,V.bottom)-z.radius:z.x>V.right&&(N=a(z.x,z.y,V.right,V.bottom)-z.radius)),N*=-1}else N=D.halfWidth+L.halfWidth-a(D.center.x,D.center.y,L.center.x,L.center.y);if(D.overlapR=N,L.overlapR=N,B||N===0||D.immovable&&L.immovable||D.customSeparateX||L.customSeparateX)return N!==0&&(D.onOverlap||L.onOverlap)&&this.emit(u.OVERLAP,D.gameObject,L.gameObject,D,L),N!==0;var X=D.center.x-L.center.x,H=D.center.y-L.center.y,K=Math.sqrt(Math.pow(X,2)+Math.pow(H,2)),J=(L.center.x-D.center.x)/K||0,Z=(L.center.y-D.center.y)/K||0,Q=2*(D.velocity.x*J+D.velocity.y*Z-L.velocity.x*J-L.velocity.y*Z)/(D.mass+L.mass);(D.immovable||L.immovable)&&(Q*=2),D.immovable||(D.velocity.x=D.velocity.x-Q/D.mass*J,D.velocity.y=D.velocity.y-Q/D.mass*Z),L.immovable||(L.velocity.x=L.velocity.x+Q/L.mass*J,L.velocity.y=L.velocity.y+Q/L.mass*Z),!D.immovable&&!L.immovable&&(N/=2);var q=s(D.center,L.center),k=(N+S.EPSILON)*Math.cos(q),_=(N+S.EPSILON)*Math.sin(q);return D.immovable||(D.x-=k,D.y-=_,D.updateCenter()),L.immovable||(L.x+=k,L.y+=_,L.updateCenter()),D.velocity.x*=D.bounce.x,D.velocity.y*=D.bounce.y,L.velocity.x*=L.bounce.x,L.velocity.y*=L.bounce.y,(D.onCollide||L.onCollide)&&this.emit(u.COLLIDE,D.gameObject,L.gameObject,D,L),!0},intersects:function(D,L){return D===L?!1:!D.isCircle&&!L.isCircle?!(D.right<=L.position.x||D.bottom<=L.position.y||D.position.x>=L.right||D.position.y>=L.bottom):D.isCircle?L.isCircle?a(D.center.x,D.center.y,L.center.x,L.center.y)<=D.halfWidth+L.halfWidth:this.circleBodyIntersects(D,L):this.circleBodyIntersects(L,D)},circleBodyIntersects:function(D,L){var B=n(D.center.x,L.left,L.right),G=n(D.center.y,L.top,L.bottom),N=(D.center.x-B)*(D.center.x-B),V=(D.center.y-G)*(D.center.y-G);return N+V<=D.halfWidth*D.halfWidth},overlap:function(D,L,B,G,N){return B===void 0&&(B=null),G===void 0&&(G=null),N===void 0&&(N=B),this.collideObjects(D,L,B,G,N,!0)},collide:function(D,L,B,G,N){return B===void 0&&(B=null),G===void 0&&(G=null),N===void 0&&(N=B),this.collideObjects(D,L,B,G,N,!1)},collideObjects:function(D,L,B,G,N,V){var z,X;D.isParent&&D.physicsType===void 0&&(D=D.children.entries),L&&L.isParent&&L.physicsType===void 0&&(L=L.children.entries);var H=Array.isArray(D),K=Array.isArray(L);if(this._total=0,!H&&!K)this.collideHandler(D,L,B,G,N,V);else if(!H&&K)for(z=0;z<L.length;z++)this.collideHandler(D,L[z],B,G,N,V);else if(H&&!K)if(L)for(z=0;z<D.length;z++)this.collideHandler(D[z],L,B,G,N,V);else for(z=0;z<D.length;z++){var J=D[z];for(X=z+1;X<D.length;X++)z!==X&&this.collideHandler(J,D[X],B,G,N,V)}else for(z=0;z<D.length;z++)for(X=0;X<L.length;X++)this.collideHandler(D[z],L[X],B,G,N,V);return this._total>0},collideHandler:function(D,L,B,G,N,V){if(L===void 0&&D.isParent)return this.collideGroupVsGroup(D,D,B,G,N,V);if(!D||!L)return!1;if(D.body){if(L.body)return this.collideSpriteVsSprite(D,L,B,G,N,V);if(L.isParent)return this.collideSpriteVsGroup(D,L,B,G,N,V);if(L.isTilemap)return this.collideSpriteVsTilemapLayer(D,L,B,G,N,V)}else if(D.isParent){if(L.body)return this.collideSpriteVsGroup(L,D,B,G,N,V);if(L.isParent)return this.collideGroupVsGroup(D,L,B,G,N,V);if(L.isTilemap)return this.collideGroupVsTilemapLayer(D,L,B,G,N,V)}else if(D.isTilemap){if(L.body)return this.collideSpriteVsTilemapLayer(L,D,B,G,N,V);if(L.isParent)return this.collideGroupVsTilemapLayer(L,D,B,G,N,V)}},collideSpriteVsSprite:function(D,L,B,G,N,V){return!D.body||!L.body?!1:(this.separate(D.body,L.body,G,N,V)&&(B&&B.call(N,D,L),this._total++),!0)},collideSpriteVsGroup:function(D,L,B,G,N,V){var z=D.body;if(!(L.length===0||!z||!z.enable||z.checkCollision.none)){var X,H,K;if(this.useTree||L.physicsType===r.STATIC_BODY){var J=this.treeMinMax;J.minX=z.left,J.minY=z.top,J.maxX=z.right,J.maxY=z.bottom;var Z=L.physicsType===r.DYNAMIC_BODY?this.tree.search(J):this.staticTree.search(J);for(H=Z.length,X=0;X<H;X++)K=Z[X],!(z===K||!K.enable||K.checkCollision.none||!L.contains(K.gameObject))&&this.separate(z,K,G,N,V,!0)&&(B&&B.call(N,z.gameObject,K.gameObject),this._total++)}else{var Q=L.getChildren(),q=L.children.entries.indexOf(D);for(H=Q.length,X=0;X<H;X++)K=Q[X].body,!(!K||X===q||!K.enable)&&this.separate(z,K,G,N,V)&&(B&&B.call(N,z.gameObject,K.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(D,L,B,G,N,V){var z=D.getChildren();if(z.length===0)return!1;for(var X=!1,H=0;H<z.length;H++)z[H].body&&this.collideSpriteVsTilemapLayer(z[H],L,B,G,N,V)&&(X=!0);return X},collideTiles:function(D,L,B,G,N){return!D.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(D,L,B,G,N,!1,!1)},overlapTiles:function(D,L,B,G,N){return!D.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(D,L,B,G,N,!0,!1)},collideSpriteVsTilemapLayer:function(D,L,B,G,N,V){var z=D.body;if(!z.enable||z.checkCollision.none)return!1;var X=z.position.x,H=z.position.y,K=z.width,J=z.height,Z=L.layer;if(Z.tileWidth>Z.baseTileWidth){var Q=(Z.tileWidth-Z.baseTileWidth)*L.scaleX;X-=Q,K+=Q}if(Z.tileHeight>Z.baseTileHeight){var q=(Z.tileHeight-Z.baseTileHeight)*L.scaleY;J+=q}var k=y(X,H,K,J,null,L.scene.cameras.main,L.layer);return k.length===0?!1:this.collideSpriteVsTilesHandler(D,k,B,G,N,V,!0)},collideSpriteVsTilesHandler:function(D,L,B,G,N,V,z){for(var X=D.body,H,K={left:0,right:0,top:0,bottom:0},J,Z=!1,Q=0;Q<L.length;Q++){H=L[Q],J=H.tilemapLayer;var q=J.tileToWorldXY(H.x,H.y);K.left=q.x,K.top=q.y,H.baseHeight!==H.height&&(K.top-=(H.height-H.baseHeight)*J.scaleY),K.right=K.left+H.width*J.scaleX,K.bottom=K.top+H.height*J.scaleY,w(K,X)&&(!G||G.call(N,D,H))&&E(H,D)&&(V||R(Q,X,H,K,J,this.TILE_BIAS,z))&&(this._total++,Z=!0,B&&B.call(N,D,H),V&&X.onOverlap?this.emit(u.TILE_OVERLAP,D,H,X):X.onCollide&&this.emit(u.TILE_COLLIDE,D,H,X))}return Z},collideGroupVsGroup:function(D,L,B,G,N,V){if(!(D.length===0||L.length===0))for(var z=D.getChildren(),X=0;X<z.length;X++)this.collideSpriteVsGroup(z[X],L,B,G,N,V)},wrap:function(D,L){D.body?this.wrapObject(D,L):D.getChildren?this.wrapArray(D.getChildren(),L):Array.isArray(D)?this.wrapArray(D,L):this.wrapObject(D,L)},wrapArray:function(D,L){for(var B=0;B<D.length;B++)this.wrapObject(D[B],L)},wrapObject:function(D,L){L===void 0&&(L=0),D.x=U(D.x,this.bounds.left-L,this.bounds.right+L),D.y=U(D.y,this.bounds.top-L,this.bounds.bottom+L)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});t.exports=W},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(62),n=e(245),o=e(196),h=e(10),r=e(57),a=e(3),v=new s({initialize:function(d,c){var g=c.displayWidth?c.displayWidth:64,m=c.displayHeight?c.displayHeight:64;this.world=d,this.gameObject=c,this.transform={x:c.x,y:c.y,rotation:c.angle,scaleX:c.scaleX,scaleY:c.scaleY,displayOriginX:c.displayOriginX,displayOriginY:c.displayOriginY},this.debugShowBody=d.defaults.debugShowBody,this.debugShowVelocity=d.defaults.debugShowVelocity,this.debugBodyColor=d.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(c.x-c.scaleX*c.displayOriginX,c.y-c.scaleY*c.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=c.angle,this.preRotation=c.angle,this.width=g,this.height=m,this.sourceWidth=g,this.sourceHeight=m,c.frame&&(this.sourceWidth=c.frame.realWidth,this.sourceHeight=c.frame.realHeight),this.halfWidth=Math.abs(g/2),this.halfHeight=Math.abs(m/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new a,this.newVelocity=new a,this.deltaMax=new a,this.acceleration=new a,this.allowDrag=!0,this.drag=new a,this.allowGravity=!0,this.gravity=new a,this.bounce=new a,this.worldBounce=null,this.customBoundsRectangle=d.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new a(1e4,1e4),this.maxSpeed=-1,this.friction=new a(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=l.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=l.DYNAMIC_BODY,this._sx=c.scaleX,this._sy=c.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new h},updateBounds:function(){var u=this.gameObject,d=this.transform;if(u.parentContainer){var c=u.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);d.x=c.tx,d.y=c.ty,d.rotation=o(c.rotation),d.scaleX=c.scaleX,d.scaleY=c.scaleY,d.displayOriginX=u.displayOriginX,d.displayOriginY=u.displayOriginY}else d.x=u.x,d.y=u.y,d.rotation=u.angle,d.scaleX=u.scaleX,d.scaleY=u.scaleY,d.displayOriginX=u.displayOriginX,d.displayOriginY=u.displayOriginY;var g=!1;if(this.syncBounds){var m=u.getBounds(this._bounds);this.width=m.width,this.height=m.height,g=!0}else{var x=Math.abs(d.scaleX),y=Math.abs(d.scaleY);(this._sx!==x||this._sy!==y)&&(this.width=this.sourceWidth*x,this.height=this.sourceHeight*y,this._sx=x,this._sy=y,g=!0)}g&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var u=this.transform;this.position.x=u.x+u.scaleX*(this.offset.x-u.displayOriginX),this.position.y=u.y+u.scaleY*(this.offset.y-u.displayOriginY),this.updateCenter()},resetFlags:function(u){u===void 0&&(u=!1);var d=this.wasTouching,c=this.touching,g=this.blocked;u?(d.none=!0,d.up=!1,d.down=!1,d.left=!1,d.right=!1):(d.none=c.none,d.up=c.up,d.down=c.down,d.left=c.left,d.right=c.right),c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1,g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(u,d){u&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),u&&this.update(d)},update:function(u){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,u);var d=this.velocity.x,c=this.velocity.y;this.newVelocity.set(d*u,c*u),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(c,d),this.speed=Math.sqrt(d*d+c*c),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(n.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var u=this.position.x-this.prevFrame.x,d=this.position.y-this.prevFrame.y;if(this.moves){var c=this.deltaMax.x,g=this.deltaMax.y;c!==0&&u!==0&&(u<0&&u<-c?u=-c:u>0&&u>c&&(u=c)),g!==0&&d!==0&&(d<0&&d<-g?d=-g:d>0&&d>g&&(d=g)),this.gameObject.x+=u,this.gameObject.y+=d}u<0?this.facing=l.FACING_LEFT:u>0&&(this.facing=l.FACING_RIGHT),d<0?this.facing=l.FACING_UP:d>0&&(this.facing=l.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=u,this._ty=d},setBoundsRectangle:function(u){return this.customBoundsRectangle=u||this.world.bounds,this},checkWorldBounds:function(){var u=this.position,d=this.customBoundsRectangle,c=this.world.checkCollision,g=this.worldBounce?-this.worldBounce.x:-this.bounce.x,m=this.worldBounce?-this.worldBounce.y:-this.bounce.y,x=!1;return u.x<d.x&&c.left?(u.x=d.x,this.velocity.x*=g,this.blocked.left=!0,x=!0):this.right>d.right&&c.right&&(u.x=d.right-this.width,this.velocity.x*=g,this.blocked.right=!0,x=!0),u.y<d.y&&c.up?(u.y=d.y,this.velocity.y*=m,this.blocked.up=!0,x=!0):this.bottom>d.bottom&&c.down&&(u.y=d.bottom-this.height,this.velocity.y*=m,this.blocked.down=!0,x=!0),x&&(this.blocked.none=!1,this.updateCenter()),x},setOffset:function(u,d){return d===void 0&&(d=u),this.offset.set(u,d),this},setSize:function(u,d,c){c===void 0&&(c=!0);var g=this.gameObject;if(!u&&g.frame&&(u=g.frame.realWidth),!d&&g.frame&&(d=g.frame.realHeight),this.sourceWidth=u,this.sourceHeight=d,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),c&&g.getCenter){var m=(g.width-u)/2,x=(g.height-d)/2;this.offset.set(m,x)}return this.isCircle=!1,this.radius=0,this},setCircle:function(u,d,c){return d===void 0&&(d=this.offset.x),c===void 0&&(c=this.offset.y),u>0?(this.isCircle=!0,this.radius=u,this.sourceWidth=u*2,this.sourceHeight=u*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(d,c),this.updateCenter()):this.isCircle=!1,this},reset:function(u,d){this.stop();var c=this.gameObject;c.setPosition(u,d),c.getTopLeft?c.getTopLeft(this.position):this.position.set(u,d),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=c.angle,this.preRotation=c.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(u){return u.x=this.x,u.y=this.y,u.right=this.right,u.bottom=this.bottom,u},hitTest:function(u,d){if(!this.isCircle)return r(this,u,d);if(this.radius>0&&u>=this.left&&u<=this.right&&d>=this.top&&d<=this.bottom){var c=(this.center.x-u)*(this.center.x-u),g=(this.center.y-d)*(this.center.y-d);return c+g<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(u){var d=this.position,c=d.x+this.halfWidth,g=d.y+this.halfHeight;this.debugShowBody&&(u.lineStyle(u.defaultStrokeWidth,this.debugBodyColor),this.isCircle?u.strokeCircle(c,g,this.width/2):(this.checkCollision.up&&u.lineBetween(d.x,d.y,d.x+this.width,d.y),this.checkCollision.right&&u.lineBetween(d.x+this.width,d.y,d.x+this.width,d.y+this.height),this.checkCollision.down&&u.lineBetween(d.x,d.y+this.height,d.x+this.width,d.y+this.height),this.checkCollision.left&&u.lineBetween(d.x,d.y,d.x,d.y+this.height))),this.debugShowVelocity&&(u.lineStyle(u.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),u.lineBetween(c,g,c+this.velocity.x/2,g+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(u,d,c,g){u===void 0&&(u=!0),this.collideWorldBounds=u;var m=d!==void 0,x=c!==void 0;return(m||x)&&(this.worldBounce||(this.worldBounce=new a),m&&(this.worldBounce.x=d),x&&(this.worldBounce.y=c)),g!==void 0&&(this.onWorldBounds=g),this},setVelocity:function(u,d){return this.velocity.set(u,d),u=this.velocity.x,d=this.velocity.y,this.speed=Math.sqrt(u*u+d*d),this},setVelocityX:function(u){this.velocity.x=u;var d=u,c=this.velocity.y;return this.speed=Math.sqrt(d*d+c*c),this},setVelocityY:function(u){this.velocity.y=u;var d=this.velocity.x,c=u;return this.speed=Math.sqrt(d*d+c*c),this},setMaxVelocity:function(u,d){return this.maxVelocity.set(u,d),this},setMaxVelocityX:function(u){return this.maxVelocity.x=u,this},setMaxVelocityY:function(u){return this.maxVelocity.y=u,this},setMaxSpeed:function(u){return this.maxSpeed=u,this},setBounce:function(u,d){return this.bounce.set(u,d),this},setBounceX:function(u){return this.bounce.x=u,this},setBounceY:function(u){return this.bounce.y=u,this},setAcceleration:function(u,d){return this.acceleration.set(u,d),this},setAccelerationX:function(u){return this.acceleration.x=u,this},setAccelerationY:function(u){return this.acceleration.y=u,this},setAllowDrag:function(u){return u===void 0&&(u=!0),this.allowDrag=u,this},setAllowGravity:function(u){return u===void 0&&(u=!0),this.allowGravity=u,this},setAllowRotation:function(u){return u===void 0&&(u=!0),this.allowRotation=u,this},setDrag:function(u,d){return this.drag.set(u,d),this},setDamping:function(u){return this.useDamping=u,this},setDragX:function(u){return this.drag.x=u,this},setDragY:function(u){return this.drag.y=u,this},setGravity:function(u,d){return this.gravity.set(u,d),this},setGravityX:function(u){return this.gravity.x=u,this},setGravityY:function(u){return this.gravity.y=u,this},setFriction:function(u,d){return this.friction.set(u,d),this},setFrictionX:function(u){return this.friction.x=u,this},setFrictionY:function(u){return this.friction.y=u,this},setAngularVelocity:function(u){return this.angularVelocity=u,this},setAngularAcceleration:function(u){return this.angularAcceleration=u,this},setAngularDrag:function(u){return this.angularDrag=u,this},setMass:function(u){return this.mass=u,this},setImmovable:function(u){return u===void 0&&(u=!0),this.immovable=u,this},setEnable:function(u){return u===void 0&&(u=!0),this.enable=u,this},processX:function(u,d,c,g){this.x+=u,this.updateCenter(),d!==null&&(this.velocity.x=d);var m=this.blocked;c&&(m.left=!0),g&&(m.right=!0)},processY:function(u,d,c,g){this.y+=u,this.updateCenter(),d!==null&&(this.velocity.y=d);var m=this.blocked;c&&(m.up=!0),g&&(m.down=!0)},x:{get:function(){return this.position.x},set:function(u){this.position.x=u}},y:{get:function(){return this.position.y},set:function(u){this.position.y=u}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o,h,r,a,v,u,d){this.world=o,this.name="",this.active=!0,this.overlapOnly=h,this.object1=r,this.object2=a,this.collideCallback=v,this.processCallback=u,this.callbackContext=d},setName:function(n){return this.name=n,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=e(3),n=new l,o=new l,h=function(r,a,v,u,d,c,g){var m=g.tilemapLayer.tilemap._convert.WorldToTileXY;m(r,a,!0,n,c,g);var x=n.x,y=n.y;m(r+v,a+u,!1,o,c,g);var T=Math.ceil(o.x),S=Math.ceil(o.y);return s(x,y,T-x,S-y,d,g)};t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.collisionCallback?!s.collisionCallback.call(s.collisionCallbackContext,l,s):s.layer.callbacks[s.index]?!s.layer.callbacks[s.index].callback.call(s.layer.callbacks[s.index].callbackContext,l,s):!0};t.exports=e},function(t,f,e){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(436);function l(S){var C=[".left",".top",".right",".bottom"];if(!(this instanceof l))return new l(S,C);this._maxEntries=Math.max(4,S||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}l.prototype={all:function(){return this._all(this.data,[])},search:function(S){var C=this.data,E=[],P=this.toBBox;if(!x(S,C))return E;for(var M=[],R,A,O,F;C;){for(R=0,A=C.children.length;R<A;R++)O=C.children[R],F=C.leaf?P(O):O,x(S,F)&&(C.leaf?E.push(O):m(S,F)?this._all(O,E):M.push(O));C=M.pop()}return E},collides:function(S){var C=this.data,E=this.toBBox;if(!x(S,C))return!1;for(var P=[],M,R,A,O;C;){for(M=0,R=C.children.length;M<R;M++)if(A=C.children[M],O=C.leaf?E(A):A,x(S,O)){if(C.leaf||m(S,O))return!0;P.push(A)}C=P.pop()}return!1},load:function(S){if(!(S&&S.length))return this;if(S.length<this._minEntries){for(var C=0,E=S.length;C<E;C++)this.insert(S[C]);return this}var P=this._build(S.slice(),0,S.length-1,0);if(!this.data.children.length)this.data=P;else if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var M=this.data;this.data=P,P=M}this._insert(P,this.data.height-P.height-1,!0)}return this},insert:function(S){return S&&this._insert(S,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(S,C){if(!S)return this;for(var E=this.data,P=this.toBBox(S),M=[],R=[],A,O,F,I;E||M.length;){if(E||(E=M.pop(),O=M[M.length-1],A=R.pop(),I=!0),E.leaf&&(F=n(S,E.children,C),F!==-1))return E.children.splice(F,1),M.push(E),this._condense(M),this;!I&&!E.leaf&&m(E,P)?(M.push(E),R.push(A),A=0,O=E,E=E.children[0]):O?(A++,E=O.children[A],I=!1):E=null}return this},toBBox:function(S){return S},compareMinX:a,compareMinY:v,toJSON:function(){return this.data},fromJSON:function(S){return this.data=S,this},_all:function(S,C){for(var E=[];S;)S.leaf?C.push.apply(C,S.children):E.push.apply(E,S.children),S=E.pop();return C},_build:function(S,C,E,P){var M=E-C+1,R=this._maxEntries,A;if(M<=R)return A=y(S.slice(C,E+1)),o(A,this.toBBox),A;P||(P=Math.ceil(Math.log(M)/Math.log(R)),R=Math.ceil(M/Math.pow(R,P-1))),A=y([]),A.leaf=!1,A.height=P;var O=Math.ceil(M/R),F=O*Math.ceil(Math.sqrt(R)),I,w,b,Y;for(T(S,C,E,F,this.compareMinX),I=C;I<=E;I+=F)for(b=Math.min(I+F-1,E),T(S,I,b,O,this.compareMinY),w=I;w<=b;w+=O)Y=Math.min(w+O-1,b),A.children.push(this._build(S,w,Y,P-1));return o(A,this.toBBox),A},_chooseSubtree:function(S,C,E,P){for(var M,R,A,O,F,I,w,b;P.push(C),!(C.leaf||P.length-1===E);){for(w=b=1/0,M=0,R=C.children.length;M<R;M++)A=C.children[M],F=u(A),I=c(S,A)-F,I<b?(b=I,w=F<w?F:w,O=A):I===b&&F<w&&(w=F,O=A);C=O||C.children[0]}return C},_insert:function(S,C,E){var P=this.toBBox,M=E?S:P(S),R=[],A=this._chooseSubtree(M,this.data,C,R);for(A.children.push(S),r(A,M);C>=0&&R[C].children.length>this._maxEntries;)this._split(R,C),C--;this._adjustParentBBoxes(M,R,C)},_split:function(S,C){var E=S[C],P=E.children.length,M=this._minEntries;this._chooseSplitAxis(E,M,P);var R=this._chooseSplitIndex(E,M,P),A=y(E.children.splice(R,E.children.length-R));A.height=E.height,A.leaf=E.leaf,o(E,this.toBBox),o(A,this.toBBox),C?S[C-1].children.push(A):this._splitRoot(E,A)},_splitRoot:function(S,C){this.data=y([S,C]),this.data.height=S.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(S,C,E){var P,M,R,A,O,F,I,w;for(F=I=1/0,P=C;P<=E-C;P++)M=h(S,0,P,this.toBBox),R=h(S,P,E,this.toBBox),A=g(M,R),O=u(M)+u(R),A<F?(F=A,w=P,I=O<I?O:I):A===F&&O<I&&(I=O,w=P);return w},_chooseSplitAxis:function(S,C,E){var P=S.leaf?this.compareMinX:a,M=S.leaf?this.compareMinY:v,R=this._allDistMargin(S,C,E,P),A=this._allDistMargin(S,C,E,M);R<A&&S.children.sort(P)},_allDistMargin:function(S,C,E,P){S.children.sort(P);var M=this.toBBox,R=h(S,0,C,M),A=h(S,E-C,E,M),O=d(R)+d(A),F,I;for(F=C;F<E-C;F++)I=S.children[F],r(R,S.leaf?M(I):I),O+=d(R);for(F=E-C-1;F>=C;F--)I=S.children[F],r(A,S.leaf?M(I):I),O+=d(A);return O},_adjustParentBBoxes:function(S,C,E){for(var P=E;P>=0;P--)r(C[P],S)},_condense:function(S){for(var C=S.length-1,E;C>=0;C--)S[C].children.length===0?C>0?(E=S[C-1].children,E.splice(E.indexOf(S[C]),1)):this.clear():o(S[C],this.toBBox)},compareMinX:function(S,C){return S.left-C.left},compareMinY:function(S,C){return S.top-C.top},toBBox:function(S){return{minX:S.left,minY:S.top,maxX:S.right,maxY:S.bottom}}};function n(S,C,E){if(!E)return C.indexOf(S);for(var P=0;P<C.length;P++)if(E(S,C[P]))return P;return-1}function o(S,C){h(S,0,S.children.length,C,S)}function h(S,C,E,P,M){M||(M=y(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var R=C,A;R<E;R++)A=S.children[R],r(M,S.leaf?P(A):A);return M}function r(S,C){return S.minX=Math.min(S.minX,C.minX),S.minY=Math.min(S.minY,C.minY),S.maxX=Math.max(S.maxX,C.maxX),S.maxY=Math.max(S.maxY,C.maxY),S}function a(S,C){return S.minX-C.minX}function v(S,C){return S.minY-C.minY}function u(S){return(S.maxX-S.minX)*(S.maxY-S.minY)}function d(S){return S.maxX-S.minX+(S.maxY-S.minY)}function c(S,C){return(Math.max(C.maxX,S.maxX)-Math.min(C.minX,S.minX))*(Math.max(C.maxY,S.maxY)-Math.min(C.minY,S.minY))}function g(S,C){var E=Math.max(S.minX,C.minX),P=Math.max(S.minY,C.minY),M=Math.min(S.maxX,C.maxX),R=Math.min(S.maxY,C.maxY);return Math.max(0,M-E)*Math.max(0,R-P)}function m(S,C){return S.minX<=C.minX&&S.minY<=C.minY&&C.maxX<=S.maxX&&C.maxY<=S.maxY}function x(S,C){return C.minX<=S.maxX&&C.minY<=S.maxY&&C.maxX>=S.minX&&C.maxY>=S.minY}function y(S){return{children:S,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function T(S,C,E,P,M){for(var R=[C,E],A;R.length;)E=R.pop(),C=R.pop(),!(E-C<=P)&&(A=C+Math.ceil((E-C)/P/2)*P,s(S,A,C,E,M),R.push(C,A,A,E))}t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(533),l=e(535),n=e(248),o=function(h,r,a,v,u,d,c){var g=v.left,m=v.top,x=v.right,y=v.bottom,T=a.faceLeft||a.faceRight,S=a.faceTop||a.faceBottom;if(c||(T=!0,S=!0),!T&&!S)return!1;var C=0,E=0,P=0,M=1;if(r.deltaAbsX()>r.deltaAbsY()?P=-1:r.deltaAbsX()<r.deltaAbsY()&&(M=-1),r.deltaX()!==0&&r.deltaY()!==0&&T&&S&&(P=Math.min(Math.abs(r.position.x-x),Math.abs(r.right-g)),M=Math.min(Math.abs(r.position.y-y),Math.abs(r.bottom-m))),P<M){if(T&&(C=s(r,a,g,x,d,c),C!==0&&!n(v,r)))return!0;S&&(E=l(r,a,m,y,d,c))}else{if(S&&(E=l(r,a,m,y,d,c),E!==0&&!n(v,r)))return!0;T&&(C=s(r,a,g,x,d,c))}return C!==0||E!==0};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(534),l=function(n,o,h,r,a,v){var u=0,d=o.faceLeft,c=o.faceRight,g=o.collideLeft,m=o.collideRight;return v||(d=!0,c=!0,g=!0,m=!0),n.deltaX()<0&&m&&n.checkCollision.left?c&&n.x<r&&(u=n.x-r,u<-a&&(u=0)):n.deltaX()>0&&g&&n.checkCollision.right&&d&&n.right>h&&(u=n.right-h,u>a&&(u=0)),u!==0&&(n.customSeparateX?n.overlapX=u:s(n,u)),u};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){l<0?(s.blocked.none=!1,s.blocked.left=!0):l>0&&(s.blocked.none=!1,s.blocked.right=!0),s.position.x-=l,s.bounce.x===0?s.velocity.x=0:s.velocity.x=-s.velocity.x*s.bounce.x};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(536),l=function(n,o,h,r,a,v){var u=0,d=o.faceTop,c=o.faceBottom,g=o.collideUp,m=o.collideDown;return v||(d=!0,c=!0,g=!0,m=!0),n.deltaY()<0&&m&&n.checkCollision.up?c&&n.y<r&&(u=n.y-r,u<-a&&(u=0)):n.deltaY()>0&&g&&n.checkCollision.down&&d&&n.bottom>h&&(u=n.bottom-h,u>a&&(u=0)),u!==0&&(n.customSeparateY?n.overlapY=u:s(n,u)),u};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){l<0?(s.blocked.none=!1,s.blocked.up=!0):l>0&&(s.blocked.none=!1,s.blocked.down=!0),s.position.y-=l,s.bounce.y===0?s.velocity.y=0:s.velocity.y=-s.velocity.y*s.bounce.y};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(246),l=e(1389),n=function(o,h,r,a){var v=s(o,h,r,a),u=o.immovable,d=h.immovable;if(r||v===0||u&&d||o.customSeparateX||h.customSeparateX)return v!==0||o.embedded&&h.embedded;var c=l.Set(o,h,v);return!u&&!d?c>0?!0:l.Check():(u?l.RunImmovableBody1(c):d&&l.RunImmovableBody2(c),!0)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(247),l=e(1390),n=function(o,h,r,a){var v=s(o,h,r,a),u=o.immovable,d=h.immovable;if(r||v===0||u&&d||o.customSeparateY||h.customSeparateY)return v!==0||o.embedded&&h.embedded;var c=l.Set(o,h,v);return!u&&!d?c>0?!0:l.Check():(u?l.RunImmovableBody1(c):d&&l.RunImmovableBody2(c),!0)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(66),l=e(0),n=e(62),o=e(57),h=e(3),r=new l({initialize:function(v,u){var d=u.displayWidth?u.displayWidth:64,c=u.displayHeight?u.displayHeight:64;this.world=v,this.gameObject=u,this.debugShowBody=v.defaults.debugShowStaticBody,this.debugBodyColor=v.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(u.x-d*u.originX,u.y-c*u.originY),this.width=d,this.height=c,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new h(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=h.ZERO,this.allowGravity=!1,this.gravity=h.ZERO,this.bounce=h.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=n.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(a,v){return a&&a!==this.gameObject&&(this.gameObject.body=null,a.body=this,this.gameObject=a),v&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var a=this.gameObject;return a.getTopLeft(this.position),this.width=a.displayWidth,this.height=a.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(a,v){return v===void 0&&(v=a),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(a,v),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(a,v,u){u===void 0&&(u=!0);var d=this.gameObject;if(!a&&d.frame&&(a=d.frame.realWidth),!v&&d.frame&&(v=d.frame.realHeight),this.world.staticTree.remove(this),this.width=a,this.height=v,this.halfWidth=Math.floor(a/2),this.halfHeight=Math.floor(v/2),u&&d.getCenter){var c=d.displayWidth/2,g=d.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(c-this.halfWidth,g-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(a,v,u){return v===void 0&&(v=this.offset.x),u===void 0&&(u=this.offset.y),a>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=a,this.width=a*2,this.height=a*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,u),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(a,v){var u=this.gameObject;a===void 0&&(a=u.x),v===void 0&&(v=u.y),this.world.staticTree.remove(this),u.setPosition(a,v),u.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(a){return a.x=this.x,a.y=this.y,a.right=this.right,a.bottom=this.bottom,a},hitTest:function(a,v){return this.isCircle?s(this,a,v):o(this,a,v)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(a){var v=this.position,u=v.x+this.halfWidth,d=v.y+this.halfHeight;this.debugShowBody&&(a.lineStyle(a.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?a.strokeCircle(u,d,this.width/2):a.strokeRect(v.x,v.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(a){return a<=0&&(a=.1),this.mass=a,this},x:{get:function(){return this.position.x},set:function(a){this.world.staticTree.remove(this),this.position.x=a,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(a){this.world.staticTree.remove(this),this.position.y=a,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=r},function(t,f,e){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=e(0),l=new s({initialize:function(o){this.pluginManager=o,this.game=o.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(3),l=new s,n=function(o,h,r,a){var v=r.tilemapLayer,u=v.cullPaddingX,d=v.cullPaddingY,c=v.tilemap.tileToWorldXY(o,h,l,a,v);return c.x>a.worldView.x+v.scaleX*r.tileWidth*(-u-.5)&&c.x<a.worldView.right+v.scaleX*r.tileWidth*(u-.5)&&c.y>a.worldView.y+v.scaleY*r.tileHeight*(-d-1)&&c.y<a.worldView.bottom+v.scaleY*r.tileHeight*(d-.5)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=function(n,o,h,r,a,v,u){for(var d=s(h,r,a,v,null,u),c=0;c<d.length;c++)d[c]&&d[c].index===n&&(d[c].index=o)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10),l=e(139),n=e(76),o=new s,h=function(r,a){var v=r.tilemapLayer.tilemap,u=r.tilemapLayer,d=Math.floor(v.tileWidth*u.scaleX),c=Math.floor(v.tileHeight*u.scaleY),g=n(a.worldView.x-u.x,d,0,!0)-u.cullPaddingX,m=l(a.worldView.right-u.x,d,0,!0)+u.cullPaddingX,x=n(a.worldView.y-u.y,c,0,!0)-u.cullPaddingY,y=l(a.worldView.bottom-u.y,c,0,!0)+u.cullPaddingY;return o.setTo(g,x,m-g,y-x)};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(543),l=e(159),n=function(o,h,r,a){r===void 0&&(r=[]),a===void 0&&(a=0),r.length=0;var v=o.tilemapLayer,u=s(o,h);return(v.skipCull||v.scrollFactorX!==1||v.scrollFactorY!==1)&&(u.left=0,u.right=o.width,u.top=0,u.bottom=o.height),l(o,u,a,r),r};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(546),l=e(159),n=function(o,h,r,a){r===void 0&&(r=[]),a===void 0&&(a=0),r.length=0;var v=o.tilemapLayer;if(!v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1){var u=s(o,h);l(o,u,a,r)}return r};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(139),l=e(76),n=function(o,h){var r=o.tilemapLayer.tilemap,a=o.tilemapLayer,v=Math.floor(r.tileWidth*a.scaleX),u=Math.floor(r.tileHeight*a.scaleY),d=o.hexSideLength,c=(u-d)/2+d,g=l(h.worldView.x-a.x,v,0,!0)-a.cullPaddingX,m=s(h.worldView.right-a.x,v,0,!0)+a.cullPaddingX,x=l(h.worldView.y-a.y,c,0,!0)-a.cullPaddingY,y=s(h.worldView.bottom-a.y,c,0,!0)+a.cullPaddingY;return{left:g,right:m,top:x,bottom:y}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(541),l=function(n,o,h,r){h===void 0&&(h=[]),r===void 0&&(r=0),h.length=0;var a=n.tilemapLayer,v=n.data,u=n.width,d=n.height,c=0,g=u,m=0,x=d;if(!a.skipCull){var y,T,S;if(r===0){for(T=m;T<x;T++)for(y=c;v[T]&&y<g;y++)if(s(y,T,n,o)){if(S=v[T][y],!S||S.index===-1||!S.visible||S.alpha===0)continue;h.push(S)}}else if(r===1){for(T=m;T<x;T++)for(y=g;v[T]&&y>=c;y--)if(s(y,T,n,o)){if(S=v[T][y],!S||S.index===-1||!S.visible||S.alpha===0)continue;h.push(S)}}else if(r===2){for(T=x;T>=m;T--)for(y=c;v[T]&&y<g;y++)if(s(y,T,n,o)){if(S=v[T][y],!S||S.index===-1||!S.visible||S.alpha===0)continue;h.push(S)}}else if(r===3){for(T=x;T>=m;T--)for(y=g;v[T]&&y>=c;y--)if(s(y,T,n,o)){if(S=v[T][y],!S||S.index===-1||!S.visible||S.alpha===0)continue;h.push(S)}}}return a.tilesDrawn=h.length,a.tilesTotal=u*d,h};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(549),l=e(159),n=function(o,h,r,a){r===void 0&&(r=[]),a===void 0&&(a=0),r.length=0;var v=o.tilemapLayer;if(!v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1){var u=s(o,h);l(o,u,a,r)}return r};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(139),l=e(76),n=function(o,h){var r=o.tilemapLayer.tilemap,a=o.tilemapLayer,v=Math.floor(r.tileWidth*a.scaleX),u=Math.floor(r.tileHeight*a.scaleY),d=l(h.worldView.x-a.x,v,0,!0)-a.cullPaddingX,c=s(h.worldView.right-a.x,v,0,!0)+a.cullPaddingX,g=l(h.worldView.y-a.y,u/2,0,!0)-a.cullPaddingY,m=s(h.worldView.bottom-a.y,u/2,0,!0)+a.cullPaddingY;return{left:d,right:c,top:g,bottom:m}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(3),l=function(n,o,h,r,a){h||(h=new s);var v=a.baseTileWidth,u=a.baseTileHeight,d=a.tilemapLayer,c=0,g=0;d&&(r||(r=d.scene.cameras.main),c=d.x+r.scrollX*(1-d.scrollFactorX),v*=d.scaleX,g=d.y+r.scrollY*(1-d.scrollFactorY),u*=d.scaleY);var m=a.hexSideLength,x=(u-m)/2+m,y=c+n*v+o%2*(v/2),T=g+o*x;return h.set(y,T)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(3),l=function(n,o,h,r,a){h||(h=new s);var v=a.baseTileWidth,u=a.baseTileHeight,d=a.tilemapLayer,c=0,g=0;d&&(r||(r=d.scene.cameras.main),c=d.x+r.scrollX*(1-d.scrollFactorX),v*=d.scaleX,g=d.y+r.scrollY*(1-d.scrollFactorY),u*=d.scaleY);var m=c+(n-o)*(v/2),x=g+(n+o)*(u/2);return h.set(m,x)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(3),l=function(n,o,h,r,a){h||(h=new s);var v=a.baseTileWidth,u=a.baseTileHeight,d=a.tilemapLayer,c=0,g=0;d&&(r||(r=d.scene.cameras.main),c=d.x+r.scrollX*(1-d.scrollFactorX),v*=d.scaleX,g=d.y+r.scrollY*(1-d.scrollFactorY),u*=d.scaleY);var m=c+n*v+o%2*(v/2),x=g+o*(u/2);return h.set(m,x)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(253),l=e(254),n=e(3),o=function(h,r,a,v,u){return a||(a=new n(0,0)),a.x=s(h,v,u),a.y=l(r,v,u),a};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=n.baseTileHeight,h=n.tilemapLayer,r=0;h&&(l===void 0&&(l=h.scene.cameras.main),r=h.y+l.scrollY*(1-h.scrollFactorY),o*=h.scaleY);var a=h.tilemap.hexSideLength,v=(o-a)/2+a;return r+s*v};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=n.baseTileHeight,h=n.tilemapLayer,r=0;return h&&(l===void 0&&(l=h.scene.cameras.main),r=h.y+l.scrollY*(1-h.scrollFactorY),o*=h.scaleY),r+s*(o/2)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(3),l=function(n,o,h,r,a,v){r||(r=new s);var u=v.baseTileWidth,d=v.baseTileHeight,c=v.tilemapLayer;c&&(a||(a=c.scene.cameras.main),o=o-(c.y+a.scrollY*(1-c.scrollFactorY)),d*=c.scaleY,n=n-(c.x+a.scrollX*(1-c.scrollFactorX)),u*=c.scaleX);var g=v.hexSideLength,m=(d-g)/2+g,x=h?Math.floor(o/m):o/m,y=h?Math.floor((n-x%2*.5*u)/u):(n-x%2*.5*u)/u;return r.set(y,x)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(3),l=function(n,o,h,r,a,v){r||(r=new s);var u=v.baseTileWidth,d=v.baseTileHeight,c=v.tilemapLayer;c&&(a||(a=c.scene.cameras.main),o=o-(c.y+a.scrollY*(1-c.scrollFactorY)),d*=c.scaleY,n=n-(c.x+a.scrollX*(1-c.scrollFactorX)),u*=c.scaleX);var g=h?Math.floor((n/(u/2)+o/(d/2))/2):(n/(u/2)+o/(d/2))/2,m=h?Math.floor((o/(d/2)-n/(u/2))/2):(o/(d/2)-n/(u/2))/2;return r.set(g,m)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(3),l=function(n,o,h,r,a,v){r||(r=new s);var u=v.baseTileWidth,d=v.baseTileHeight,c=v.tilemapLayer;c&&(a||(a=c.scene.cameras.main),o=o-(c.y+a.scrollY*(1-c.scrollFactorY)),d*=c.scaleY,n=n-(c.x+a.scrollX*(1-c.scrollFactorX)),u*=c.scaleX);var g=h?Math.floor(o/(d/2)):o/(d/2),m=h?Math.floor((n+g%2*.5*u)/u):(n+g%2*.5*u)/u;return r.set(m,g)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(255),l=e(256),n=e(3),o=function(h,r,a,v,u,d){return a===void 0&&(a=!0),v||(v=new n(0,0)),v.x=s(h,a,u,d),v.y=l(r,a,u,d),v};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=o.baseTileHeight,r=o.tilemapLayer;r&&(n||(n=r.scene.cameras.main),s=s-(r.y+n.scrollY*(1-r.scrollFactorY)),h*=r.scaleY);var a=o.hexSideLength,v=(h-a)/2+a;return l?Math.floor(s/v):s/v};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=o.baseTileHeight,r=o.tilemapLayer;return r&&(n||(n=r.scene.cameras.main),s=s-(r.y+n.scrollY*(1-r.scrollFactorY)),h*=r.scaleY),l?Math.floor(s/(h/2)):s/(h/2)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(119),l=function(n,o,h){if(s(n,o,h)){var r=h.data[o][n];return r!==null&&r.index>-1}else return!1};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(85),l=e(119),n=e(252),o=function(h,r,a,v,u){if(a===void 0&&(a=!0),v===void 0&&(v=!0),!l(h,r,u))return null;var d=u.data[r][h];if(d)u.data[r][h]=a?null:new s(u,-1,h,r,u.tileWidth,u.tileHeight);else return null;return v&&d&&d.collides&&n(h,r,u),d};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(40),l=e(259),n=e(565),o=e(566),h=e(577),r=function(a,v,u,d,c,g){var m;switch(v){case s.ARRAY_2D:m=l(a,u,d,c,g);break;case s.CSV:m=n(a,u,d,c,g);break;case s.TILED_JSON:m=o(a,u,g);break;case s.WELTMEISTER:m=h(a,u,g);break;default:console.warn("Unrecognized tilemap data format: "+v),m=null}return m};t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(40),l=e(259),n=function(o,h,r,a,v){var u=h.trim().split(`
`).map(function(c){return c.split(",")}),d=l(o,u,r,a,v);return d.format=s.CSV,d};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(567),l=e(568),n=e(29),o=e(40),h=e(258),r=e(121),a=e(569),v=e(570),u=e(573),d=e(575),c=function(g,m,x){var y=new r({width:m.width,height:m.height,name:g,tileWidth:m.tilewidth,tileHeight:m.tileheight,orientation:h(m.orientation),format:o.TILED_JSON,version:m.version,properties:m.properties,renderOrder:m.renderorder,infinite:m.infinite});y.orientation===n.HEXAGONAL&&(y.hexSideLength=m.hexsidelength),y.layers=u(m,x),y.images=a(m);var T=d(m);return y.tilesets=T.tilesets,y.imageCollections=T.imageCollections,y.objects=v(m),y.tiles=l(y),s(y),y};t.exports=c},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(17),l=function(n){for(var o,h,r,a,v,u=0;u<n.layers.length;u++){o=n.layers[u],a=null;for(var d=0;d<o.data.length;d++){v=o.data[d];for(var c=0;c<v.length;c++)h=v[c],!(h===null||h.index<0)&&(r=n.tiles[h.index][2],a=n.tilesets[r],h.width=a.tileWidth,h.height=a.tileHeight,a.tileProperties&&a.tileProperties[h.index-a.firstgid]&&(h.properties=s(h.properties,a.tileProperties[h.index-a.firstgid])))}}};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(122),l=function(n){var o,h,r=[];for(o=0;o<n.imageCollections.length;o++)for(var a=n.imageCollections[o],v=a.images,u=0;u<v.length;u++){var d=v[u];h=new s(d.image,d.gid,a.imageWidth,a.imageHeight,0,0),h.updateTileData(a.imageWidth,a.imageHeight),n.tilesets.push(h)}for(o=0;o<n.tilesets.length;o++){h=n.tilesets[o];for(var c=h.tileMargin,g=h.tileMargin,m=0,x=0,y=0,T=h.firstgid;T<h.firstgid+h.total&&(r[T]=[c,g,o],c+=h.tileWidth+h.tileSpacing,m++,!(m===h.total||(x++,x===h.columns&&(c=h.tileMargin,g+=h.tileHeight+h.tileSpacing,x=0,y++,y===h.rows))));T++);}return r};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(2),l=e(161),n=function(o){for(var h=[],r=[],a=l(o);a.i<a.layers.length||r.length>0;){if(a.i>=a.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=r.pop();continue}var v=a.layers[a.i];if(a.i++,v.type!=="imagelayer"){if(v.type==="group"){var u=l(o,v,a);r.push(a),a=u}continue}var d=s(v,"offsetx",0)+s(v,"startx",0),c=s(v,"offsety",0)+s(v,"starty",0);h.push({name:a.name+v.name,image:v.image,x:a.x+d+v.x,y:a.y+c+v.y,alpha:a.opacity*v.opacity,visible:a.visible&&v.visible,properties:s(v,"properties",{})})}return h};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(2),l=e(260),n=e(572),o=e(161),h=function(r){for(var a=[],v=[],u=o(r);u.i<u.layers.length||v.length>0;){if(u.i>=u.layers.length){if(v.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}u=v.pop();continue}var d=u.layers[u.i];if(u.i++,d.opacity*=u.opacity,d.visible=u.visible&&d.visible,d.type!=="objectgroup"){if(d.type==="group"){var c=o(r,d,u);v.push(u),u=c}continue}d.name=u.name+d.name;for(var g=u.x+s(d,"startx",0)+s(d,"offsetx",0),m=u.y+s(d,"starty",0)+s(d,"offsety",0),x=[],y=0;y<d.objects.length;y++){var T=l(d.objects[y],g,m);x.push(T)}var S=new n(d);S.objects=x,a.push(S)}return a};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(126),l=function(n,o){for(var h={},r=0;r<o.length;r++){var a=o[r];s(n,a)&&(h[a]=n[a])}return h};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(2),n=new s({initialize:function(h){h===void 0&&(h={}),this.name=l(h,"name","object layer"),this.opacity=l(h,"opacity",1),this.properties=l(h,"properties",{}),this.propertyTypes=l(h,"propertytypes",{}),this.type=l(h,"type","objectgroup"),this.visible=l(h,"visible",!0),this.objects=l(h,"objects",[])}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(574),l=e(29),n=e(161),o=e(258),h=e(2),r=e(120),a=e(261),v=e(85),u=function(d,c){for(var g=h(d,"infinite",!1),m=[],x=[],y=n(d);y.i<y.layers.length||x.length>0;){if(y.i>=y.layers.length){if(x.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=x.pop();continue}var T=y.layers[y.i];if(y.i++,T.type!=="tilelayer"){if(T.type==="group"){var S=n(d,T,y);x.push(y),y=S}continue}if(T.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+T.name+"'");continue}else if(T.encoding&&T.encoding==="base64"){if(T.chunks)for(var C=0;C<T.chunks.length;C++)T.chunks[C].data=s(T.chunks[C].data);T.data&&(T.data=s(T.data)),delete T.encoding}var E,P,M,R,A=[],O=0;if(g){var F=h(T,"startx",0)+T.x,I=h(T,"starty",0)+T.y;E=new r({name:y.name+T.name,x:y.x+h(T,"offsetx",0)+F*d.tilewidth,y:y.y+h(T,"offsety",0)+I*d.tileheight,width:T.width,height:T.height,tileWidth:d.tilewidth,tileHeight:d.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:h(T,"properties",[]),orientation:o(d.orientation)}),E.orientation===l.HEXAGONAL&&(E.hexSideLength=d.hexsidelength);for(var w=0;w<T.height;w++){A.push([null]);for(var b=0;b<T.width;b++)A[w][b]=null}for(w=0,X=T.chunks.length;w<X;w++)for(var Y=T.chunks[w],U=Y.x-F,W=Y.y-I,D=0,L=0,B=Y.data.length;L<B;L++){var G=O+U,N=D+W;P=a(Y.data[L]),P.gid>0?(M=new v(E,P.gid,G,N,d.tilewidth,d.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,A[N][G]=M):(R=c?null:new v(E,-1,G,N,d.tilewidth,d.tileheight),A[N][G]=R),O++,O===Y.width&&(D++,O=0)}}else{E=new r({name:y.name+T.name,x:y.x+h(T,"offsetx",0)+T.x,y:y.y+h(T,"offsety",0)+T.y,width:T.width,height:T.height,tileWidth:d.tilewidth,tileHeight:d.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:h(T,"properties",[]),orientation:o(d.orientation)}),E.orientation===l.HEXAGONAL&&(E.hexSideLength=d.hexsidelength);for(var V=[],z=0,X=T.data.length;z<X;z++)P=a(T.data[z]),P.gid>0?(M=new v(E,P.gid,O,A.length,d.tilewidth,d.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,V.push(M)):(R=c?null:new v(E,-1,O,A.length,d.tilewidth,d.tileheight),V.push(R)),O++,O===T.width&&(A.push(V),O=0,V=[])}E.data=A,m.push(E)}return m};t.exports=u},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){for(var l=window.atob(s),n=l.length,o=new Array(n/4),h=0;h<n;h+=4)o[h/4]=(l.charCodeAt(h)|l.charCodeAt(h+1)<<8|l.charCodeAt(h+2)<<16|l.charCodeAt(h+3)<<24)>>>0;return o};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(122),l=e(576),n=e(260),o=e(1453),h=function(r){for(var a=[],v=[],u=null,d,c=0;c<r.tilesets.length;c++){var g=r.tilesets[c];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var m=new s(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing);if(r.version>1){var x=void 0,y=void 0;if(Array.isArray(g.tiles)){x=x||{},y=y||{};for(var T=0;T<g.tiles.length;T++){var S=g.tiles[T];if(S.properties){var C={};S.properties.forEach(function(w){C[w.name]=w.value}),y[S.id]=C}if(S.objectgroup&&((x[S.id]||(x[S.id]={})).objectgroup=S.objectgroup,S.objectgroup.objects)){var E=S.objectgroup.objects.map(function(w){return n(w)});x[S.id].objectgroup.objects=E}S.animation&&((x[S.id]||(x[S.id]={})).animation=S.animation),S.type&&((x[S.id]||(x[S.id]={})).type=S.type)}}Array.isArray(g.wangsets)&&(x=x||{},y=y||{},o(g.wangsets,x)),x&&(m.tileData=x,m.tileProperties=y)}else if(g.tileproperties&&(m.tileProperties=g.tileproperties),g.tiles){m.tileData=g.tiles;for(d in m.tileData){var P=m.tileData[d].objectgroup;if(P&&P.objects){var M=P.objects.map(function(w){return n(w)});m.tileData[d].objectgroup.objects=M}}}m.updateTileData(g.imagewidth,g.imageheight),a.push(m)}else{var R=new l(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),A=0;for(T=0;T<g.tiles.length;T++){S=g.tiles[T];var O=S.image,F=parseInt(S.id,10),I=g.firstgid+F;R.addImage(I,O),A=Math.max(F,A)}R.maxId=A,v.push(R)}u&&(u.lastgid=g.firstgid-1),u=g}return{tilesets:a,imageCollections:v}};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o,h,r,a,v,u,d){(r===void 0||r<=0)&&(r=32),(a===void 0||a<=0)&&(a=32),v===void 0&&(v=0),u===void 0&&(u=0),this.name=o,this.firstgid=h|0,this.imageWidth=r|0,this.imageHeight=a|0,this.imageMargin=v|0,this.imageSpacing=u|0,this.properties=d||{},this.images=[],this.total=0},containsImageIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},addImage:function(n,o){return this.images.push({gid:n,image:o}),this.total++,this}});t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(40),l=e(121),n=e(578),o=e(579),h=function(r,a,v){if(a.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+r),null;for(var u=0,d=0,c=0;c<a.layer.length;c++)a.layer[c].width>u&&(u=a.layer[c].width),a.layer[c].height>d&&(d=a.layer[c].height);var g=new l({width:u,height:d,name:r,tileWidth:a.layer[0].tilesize,tileHeight:a.layer[0].tilesize,format:s.WELTMEISTER});return g.layers=n(a,v),g.tilesets=o(a),g};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(120),l=e(85),n=function(o,h){for(var r=[],a=0;a<o.layer.length;a++){for(var v=o.layer[a],u=new s({name:v.name,width:v.width,height:v.height,tileWidth:v.tilesize,tileHeight:v.tilesize,visible:v.visible===1}),d=[],c=[],g=0;g<v.data.length;g++){for(var m=0;m<v.data[g].length;m++){var x=v.data[g][m]-1,y;x>-1?y=new l(u,x,m,g,v.tilesize,v.tilesize):y=h?null:new l(u,-1,m,g,v.tilesize,v.tilesize),d.push(y)}c.push(d),d=[]}u.data=c,r.push(u)}return r};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(122),l=function(n){for(var o=[],h=[],r=0;r<n.layer.length;r++){var a=n.layer[r],v=a.tilesetName;v!==""&&h.indexOf(v)===-1&&(h.push(v),o.push(new s(v,0,a.tilesize,a.tilesize,0,0)))}return o};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(36),n=e(40),o=e(2),h=e(120),r=e(29),a=e(362),v=e(74),u=e(73),d=e(85),c=e(251),g=e(581),m=e(122),x=new s({initialize:function(T,S){this.scene=T,this.tileWidth=S.tileWidth,this.tileHeight=S.tileHeight,this.width=S.width,this.height=S.height,this.orientation=S.orientation,this.renderOrder=S.renderOrder,this.format=S.format,this.version=S.version,this.properties=S.properties,this.widthInPixels=S.widthInPixels,this.heightInPixels=S.heightInPixels,this.imageCollections=S.imageCollections,this.images=S.images,this.layers=S.layers,this.tilesets=S.tilesets,this.objects=S.objects,this.currentLayerIndex=0,this.hexSideLength=S.hexSideLength;var C=this.orientation;this._convert={WorldToTileXY:c.GetWorldToTileXYFunction(C),WorldToTileX:c.GetWorldToTileXFunction(C),WorldToTileY:c.GetWorldToTileYFunction(C),TileToWorldXY:c.GetTileToWorldXYFunction(C),TileToWorldX:c.GetTileToWorldXFunction(C),TileToWorldY:c.GetTileToWorldYFunction(C)}},createBlankDynamicLayer:function(y,T,S,C,E,P,M,R){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(y,T,S,C,E,P,M,R)},createDynamicLayer:function(y,T,S,C){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(y,T,S,C)},createStaticLayer:function(y,T,S,C){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(y,T,S,C)},setRenderOrder:function(y){var T=["right-down","left-down","right-up","left-up"];return typeof y=="number"&&(y=T[y]),T.indexOf(y)>-1&&(this.renderOrder=y),this},addTilesetImage:function(y,T,S,C,E,P,M){if(y===void 0)return null;if(T==null&&(T=y),!this.scene.sys.textures.exists(T))return console.warn("Invalid Tileset Image: "+T),null;var R=this.scene.sys.textures.get(T),A=this.getTilesetIndex(y);if(A===null&&this.format===n.TILED_JSON)return console.warn("No data found for Tileset: "+y),null;var O=this.tilesets[A];return O?(O.setTileSize(S,C),O.setSpacing(E,P),O.setImage(R),O):(S===void 0&&(S=this.tileWidth),C===void 0&&(C=this.tileHeight),E===void 0&&(E=0),P===void 0&&(P=0),M===void 0&&(M=0),O=new m(y,M,S,C,E,P),O.setImage(R),this.tilesets.push(O),O)},copy:function(y,T,S,C,E,P,M,R){return R=this.getLayer(R),R!==null?(c.Copy(y,T,S,C,E,P,M,R),this):null},createBlankLayer:function(y,T,S,C,E,P,M,R){S===void 0&&(S=0),C===void 0&&(C=0),E===void 0&&(E=this.width),P===void 0&&(P=this.height),M===void 0&&(M=this.tileWidth),R===void 0&&(R=this.tileHeight);var A=this.getLayerIndex(y);if(A!==null)return console.warn("Invalid Tilemap Layer ID: "+y),null;for(var O=new h({name:y,tileWidth:M,tileHeight:R,width:E,height:P,orientation:this.orientation}),F,I=0;I<P;I++){F=[];for(var w=0;w<E;w++)F.push(new d(O,-1,w,I,M,R,this.tileWidth,this.tileHeight));O.data.push(F)}this.layers.push(O),this.currentLayerIndex=this.layers.length-1;var b=new g(this.scene,this,this.currentLayerIndex,T,S,C);return b.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(b),b},createLayer:function(y,T,S,C){var E=this.getLayerIndex(y);if(E===null)return console.warn("Invalid Tilemap Layer ID: "+y),typeof y=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var P=this.layers[E];if(P.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+y),null;this.currentLayerIndex=E,S===void 0&&(S=P.x),C===void 0&&(C=P.y);var M=new g(this.scene,this,E,T,S,C);return M.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(M),M},createFromObjects:function(y,T){var S=[],C=this.getObjectLayer(y);if(!C)return console.warn("createFromObjects: Invalid objectLayerName given: "+y),S;Array.isArray(T)||(T=[T]);for(var E=C.objects,P=0;P<T.length;P++){for(var M=T[P],R=o(M,"id",null),A=o(M,"gid",null),O=o(M,"name",null),F,I=[],w=0;w<E.length;w++)F=E[w],(R===null&&A===null&&O===null||R!==null&&F.id===R||A!==null&&F.gid===A||O!==null&&F.name===O)&&I.push(F);for(var b=o(M,"classType",u),Y=o(M,"scene",this.scene),U=o(M,"container",null),W=o(M,"key",null),D=o(M,"frame",null),L=0;L<I.length;L++){F=I[L];var B=new b(Y);B.setName(F.name),B.setPosition(F.x,F.y),B.setTexture(W,D),F.width&&(B.displayWidth=F.width),F.height&&(B.displayHeight=F.height);var G={x:B.originX*F.width,y:(B.originY-1)*F.height};if(F.rotation){var N=l(F.rotation);a(G,N),B.rotation=N}if(B.x+=G.x,B.y+=G.y,(F.flippedHorizontal!==void 0||F.flippedVertical!==void 0)&&B.setFlip(F.flippedHorizontal,F.flippedVertical),F.visible||(B.visible=!1),Array.isArray(F.properties))F.properties.forEach(function(z){var X=z.name;B[X]!==void 0?B[X]=z.value:B.setData(X,z.value)});else for(var V in F.properties)B[V]!==void 0?B[V]=F.properties[V]:B.setData(V,F.properties[V]);U?U.add(B):Y.add.existing(B),S.push(B)}}return S},createFromTiles:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:c.CreateFromTiles(y,T,S,C,E,P)},fill:function(y,T,S,C,E,P,M){return P===void 0&&(P=!0),M=this.getLayer(M),M===null?null:(c.Fill(y,T,S,C,E,P,M),this)},filterObjects:function(y,T,S){if(typeof y=="string"){var C=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+C),null}return y.objects.filter(T,S)},filterTiles:function(y,T,S,C,E,P,M,R){return R=this.getLayer(R),R===null?null:c.FilterTiles(y,T,S,C,E,P,M,R)},findByIndex:function(y,T,S,C){return C=this.getLayer(C),C===null?null:c.FindByIndex(y,T,S,C)},findObject:function(y,T,S){if(typeof y=="string"){var C=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+C),null}return y.objects.find(T,S)||null},findTile:function(y,T,S,C,E,P,M,R){return R=this.getLayer(R),R===null?null:c.FindTile(y,T,S,C,E,P,M,R)},forEachTile:function(y,T,S,C,E,P,M,R){return R=this.getLayer(R),R===null?null:(c.ForEachTile(y,T,S,C,E,P,M,R),this)},getImageIndex:function(y){return this.getIndex(this.images,y)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(y){return y.name})},getIndex:function(y,T){for(var S=0;S<y.length;S++)if(y[S].name===T)return S;return null},getLayer:function(y){var T=this.getLayerIndex(y);return T!==null?this.layers[T]:null},getObjectLayer:function(y){var T=this.getIndex(this.objects,y);return T!==null?this.objects[T]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(y){return y.name})},getLayerIndex:function(y){return y===void 0?this.currentLayerIndex:typeof y=="string"?this.getLayerIndexByName(y):typeof y=="number"&&y<this.layers.length?y:y instanceof g?y.layerIndex:null},getLayerIndexByName:function(y){return this.getIndex(this.layers,y)},getTileAt:function(y,T,S,C){return C=this.getLayer(C),C===null?null:c.GetTileAt(y,T,S,C)},getTileAtWorldXY:function(y,T,S,C,E){return E=this.getLayer(E),E===null?null:c.GetTileAtWorldXY(y,T,S,C,E)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(y){return y.name})},getTilesWithin:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:c.GetTilesWithin(y,T,S,C,E,P)},getTilesWithinShape:function(y,T,S,C){return C=this.getLayer(C),C===null?null:c.GetTilesWithinShape(y,T,S,C)},getTilesWithinWorldXY:function(y,T,S,C,E,P,M){return M=this.getLayer(M),M===null?null:c.GetTilesWithinWorldXY(y,T,S,C,E,P,M)},getTileset:function(y){var T=this.getIndex(this.tilesets,y);return T!==null?this.tilesets[T]:null},getTilesetIndex:function(y){return this.getIndex(this.tilesets,y)},hasTileAt:function(y,T,S){return S=this.getLayer(S),S===null?null:c.HasTileAt(y,T,S)},hasTileAtWorldXY:function(y,T,S,C){return C=this.getLayer(C),C===null?null:c.HasTileAtWorldXY(y,T,S,C)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(y){this.setLayer(y)}},putTileAt:function(y,T,S,C,E){return C===void 0&&(C=!0),E=this.getLayer(E),E===null?null:c.PutTileAt(y,T,S,C,E)},putTileAtWorldXY:function(y,T,S,C,E,P){return C===void 0&&(C=!0),P=this.getLayer(P),P===null?null:c.PutTileAtWorldXY(y,T,S,C,E,P)},putTilesAt:function(y,T,S,C,E){return C===void 0&&(C=!0),E=this.getLayer(E),E===null?null:(c.PutTilesAt(y,T,S,C,E),this)},randomize:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:(c.Randomize(y,T,S,C,E,P),this)},calculateFacesAt:function(y,T,S){return S=this.getLayer(S),S===null?null:(c.CalculateFacesAt(y,T,S),this)},calculateFacesWithin:function(y,T,S,C,E){return E=this.getLayer(E),E===null?null:(c.CalculateFacesWithin(y,T,S,C,E),this)},removeLayer:function(y){var T=this.getLayerIndex(y);if(T!==null){v(this.layers,T);for(var S=T;S<this.layers.length;S++)this.layers[S].tilemapLayer&&this.layers[S].tilemapLayer.layerIndex--;return this.currentLayerIndex===T&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(y){var T=this.getLayerIndex(y);return T!==null?(y=this.layers[T],y.destroy(),v(this.layers,T),this.currentLayerIndex===T&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var y=this.layers,T=0;T<y.length;T++)y[T].tilemapLayer&&y[T].tilemapLayer.destroy(!1);return y.length=0,this.currentLayerIndex=0,this},removeTile:function(y,T,S){T===void 0&&(T=-1),S===void 0&&(S=!0);var C=[];Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++){var P=y[E];C.push(this.removeTileAt(P.x,P.y,!0,S,P.tilemapLayer)),T>-1&&this.putTileAt(T,P.x,P.y,S,P.tilemapLayer)}return C},removeTileAt:function(y,T,S,C,E){return S===void 0&&(S=!0),C===void 0&&(C=!0),E=this.getLayer(E),E===null?null:c.RemoveTileAt(y,T,S,C,E)},removeTileAtWorldXY:function(y,T,S,C,E,P){return S===void 0&&(S=!0),C===void 0&&(C=!0),P=this.getLayer(P),P===null?null:c.RemoveTileAtWorldXY(y,T,S,C,E,P)},renderDebug:function(y,T,S){return S=this.getLayer(S),S===null?null:(this.orientation===r.ORTHOGONAL&&c.RenderDebug(y,T,S),this)},renderDebugFull:function(y,T){for(var S=this.layers,C=0;C<S.length;C++)c.RenderDebug(y,T,S[C]);return this},replaceByIndex:function(y,T,S,C,E,P,M){return M=this.getLayer(M),M===null?null:(c.ReplaceByIndex(y,T,S,C,E,P,M),this)},setCollision:function(y,T,S,C,E){return T===void 0&&(T=!0),S===void 0&&(S=!0),E===void 0&&(E=!0),C=this.getLayer(C),C===null?null:(c.SetCollision(y,T,S,C,E),this)},setCollisionBetween:function(y,T,S,C,E){return S===void 0&&(S=!0),C===void 0&&(C=!0),E=this.getLayer(E),E===null?null:(c.SetCollisionBetween(y,T,S,C,E),this)},setCollisionByProperty:function(y,T,S,C){return T===void 0&&(T=!0),S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:(c.SetCollisionByProperty(y,T,S,C),this)},setCollisionByExclusion:function(y,T,S,C){return T===void 0&&(T=!0),S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:(c.SetCollisionByExclusion(y,T,S,C),this)},setCollisionFromCollisionGroup:function(y,T,S){return y===void 0&&(y=!0),T===void 0&&(T=!0),S=this.getLayer(S),S===null?null:(c.SetCollisionFromCollisionGroup(y,T,S),this)},setTileIndexCallback:function(y,T,S,C){return C=this.getLayer(C),C===null?null:(c.SetTileIndexCallback(y,T,S,C),this)},setTileLocationCallback:function(y,T,S,C,E,P,M){return M=this.getLayer(M),M===null?null:(c.SetTileLocationCallback(y,T,S,C,E,P,M),this)},setLayer:function(y){var T=this.getLayerIndex(y);return T!==null&&(this.currentLayerIndex=T),this},setBaseTileSize:function(y,T){this.tileWidth=y,this.tileHeight=T,this.widthInPixels=this.width*y,this.heightInPixels=this.height*T;for(var S=0;S<this.layers.length;S++){this.layers[S].baseTileWidth=y,this.layers[S].baseTileHeight=T;for(var C=this.layers[S].data,E=this.layers[S].width,P=this.layers[S].height,M=0;M<P;M++)for(var R=0;R<E;R++){var A=C[M][R];A!==null&&A.setSize(void 0,void 0,y,T)}}return this},setLayerTileSize:function(y,T,S){if(S=this.getLayer(S),S===null)return this;S.tileWidth=y,S.tileHeight=T;for(var C=S.data,E=S.width,P=S.height,M=0;M<P;M++)for(var R=0;R<E;R++){var A=C[M][R];A!==null&&A.setSize(y,T)}return this},shuffle:function(y,T,S,C,E){return E=this.getLayer(E),E===null?null:(c.Shuffle(y,T,S,C,E),this)},swapByIndex:function(y,T,S,C,E,P,M){return M=this.getLayer(M),M===null?null:(c.SwapByIndex(y,T,S,C,E,P,M),this)},tileToWorldX:function(y,T,S){return S=this.getLayer(S),S===null?null:this._convert.TileToWorldX(y,T,S)},tileToWorldY:function(y,T,S){return S=this.getLayer(S),S===null?null:this._convert.TileToWorldY(y,T,S)},tileToWorldXY:function(y,T,S,C,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldXY(y,T,S,C,E)},weightedRandomize:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:(c.WeightedRandomize(T,S,C,E,y,P),this)},worldToTileX:function(y,T,S,C){return C=this.getLayer(C),C===null?null:this._convert.WorldToTileX(y,T,S,C)},worldToTileY:function(y,T,S,C){return C=this.getLayer(C),C===null?null:this._convert.WorldToTileY(y,T,S,C)},worldToTileXY:function(y,T,S,C,E,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileXY(y,T,S,C,E,P)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});t.exports=x},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(11),n=e(15),o=e(251),h=e(1456),r=new s({Extends:n,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Depth,l.Flip,l.GetBounds,l.Origin,l.Pipeline,l.Transform,l.Visible,l.ScrollFactor,h],initialize:function(v,u,d,c,g,m){n.call(this,v,"TilemapLayer"),this.isTilemap=!0,this.tilemap=u,this.layerIndex=d,this.layer=u.layers[d],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(c),this.setAlpha(this.layer.alpha),this.setPosition(g,m),this.setOrigin(),this.setSize(u.tileWidth*this.layer.width,u.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(a){var v=[],u=[],d=this.tilemap;Array.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var g=a[c];if(typeof g=="string"&&(g=d.getTileset(g)),g){u.push(g);for(var m=g.firstgid,x=0;x<g.total;x++)v[m+x]=g}}this.gidMap=v,this.tileset=u},setRenderOrder:function(a){var v=["right-down","left-down","right-up","left-up"];return typeof a=="string"&&(a=v.indexOf(a)),a>=0&&a<4&&(this._renderOrder=a),this},calculateFacesAt:function(a,v){return o.CalculateFacesAt(a,v,this.layer),this},calculateFacesWithin:function(a,v,u,d){return o.CalculateFacesWithin(a,v,u,d,this.layer),this},createFromTiles:function(a,v,u,d,c){return o.CreateFromTiles(a,v,u,d,c,this.layer)},cull:function(a){return this.cullCallback(this.layer,a,this.culledTiles,this._renderOrder)},copy:function(a,v,u,d,c,g,m){return o.Copy(a,v,u,d,c,g,m,this.layer),this},fill:function(a,v,u,d,c,g){return o.Fill(a,v,u,d,c,g,this.layer),this},filterTiles:function(a,v,u,d,c,g,m){return o.FilterTiles(a,v,u,d,c,g,m,this.layer)},findByIndex:function(a,v,u){return o.FindByIndex(a,v,u,this.layer)},findTile:function(a,v,u,d,c,g,m){return o.FindTile(a,v,u,d,c,g,m,this.layer)},forEachTile:function(a,v,u,d,c,g,m){return o.ForEachTile(a,v,u,d,c,g,m,this.layer),this},getTileAt:function(a,v,u){return o.GetTileAt(a,v,u,this.layer)},getTileAtWorldXY:function(a,v,u,d){return o.GetTileAtWorldXY(a,v,u,d,this.layer)},getTilesWithin:function(a,v,u,d,c){return o.GetTilesWithin(a,v,u,d,c,this.layer)},getTilesWithinShape:function(a,v,u){return o.GetTilesWithinShape(a,v,u,this.layer)},getTilesWithinWorldXY:function(a,v,u,d,c,g){return o.GetTilesWithinWorldXY(a,v,u,d,c,g,this.layer)},hasTileAt:function(a,v){return o.HasTileAt(a,v,this.layer)},hasTileAtWorldXY:function(a,v,u){return o.HasTileAtWorldXY(a,v,u,this.layer)},putTileAt:function(a,v,u,d){return o.PutTileAt(a,v,u,d,this.layer)},putTileAtWorldXY:function(a,v,u,d,c){return o.PutTileAtWorldXY(a,v,u,d,c,this.layer)},putTilesAt:function(a,v,u,d){return o.PutTilesAt(a,v,u,d,this.layer),this},randomize:function(a,v,u,d,c){return o.Randomize(a,v,u,d,c,this.layer),this},removeTileAt:function(a,v,u,d){return o.RemoveTileAt(a,v,u,d,this.layer)},removeTileAtWorldXY:function(a,v,u,d,c){return o.RemoveTileAtWorldXY(a,v,u,d,c,this.layer)},renderDebug:function(a,v){return o.RenderDebug(a,v,this.layer),this},replaceByIndex:function(a,v,u,d,c,g){return o.ReplaceByIndex(a,v,u,d,c,g,this.layer),this},setSkipCull:function(a){return a===void 0&&(a=!0),this.skipCull=a,this},setCullPadding:function(a,v){return a===void 0&&(a=1),v===void 0&&(v=1),this.cullPaddingX=a,this.cullPaddingY=v,this},setCollision:function(a,v,u,d){return o.SetCollision(a,v,u,this.layer,d),this},setCollisionBetween:function(a,v,u,d){return o.SetCollisionBetween(a,v,u,d,this.layer),this},setCollisionByProperty:function(a,v,u){return o.SetCollisionByProperty(a,v,u,this.layer),this},setCollisionByExclusion:function(a,v,u){return o.SetCollisionByExclusion(a,v,u,this.layer),this},setCollisionFromCollisionGroup:function(a,v){return o.SetCollisionFromCollisionGroup(a,v,this.layer),this},setTileIndexCallback:function(a,v,u){return o.SetTileIndexCallback(a,v,u,this.layer),this},setTileLocationCallback:function(a,v,u,d,c,g){return o.SetTileLocationCallback(a,v,u,d,c,g,this.layer),this},shuffle:function(a,v,u,d){return o.Shuffle(a,v,u,d,this.layer),this},swapByIndex:function(a,v,u,d,c,g){return o.SwapByIndex(a,v,u,d,c,g,this.layer),this},tileToWorldX:function(a,v){return this.tilemap.tileToWorldX(a,v,this)},tileToWorldY:function(a,v){return this.tilemap.tileToWorldY(a,v,this)},tileToWorldXY:function(a,v,u,d){return this.tilemap.tileToWorldXY(a,v,u,d,this)},weightedRandomize:function(a,v,u,d,c){return o.WeightedRandomize(v,u,d,c,a,this.layer),this},worldToTileX:function(a,v,u){return this.tilemap.worldToTileX(a,v,u,this)},worldToTileY:function(a,v,u){return this.tilemap.worldToTileY(a,v,u,this)},worldToTileXY:function(a,v,u,d,c){return this.tilemap.worldToTileXY(a,v,u,d,c,this)},destroy:function(a){a===void 0&&(a=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),a&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],n.prototype.destroy.call(this))}});t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(2),n=new s({initialize:function(h){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(h)},reset:function(o){return this.delay=l(o,"delay",0),this.repeat=l(o,"repeat",0),this.loop=l(o,"loop",!1),this.callback=l(o,"callback",void 0),this.callbackScope=l(o,"callbackScope",this.callback),this.args=l(o,"args",[]),this.timeScale=l(o,"timeScale",1),this.startAt=l(o,"startAt",0),this.paused=l(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var o=this.delay+this.delay*this.repeat,h=this.elapsed+this.delay*(this.repeat-this.repeatCount);return h/o}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1465),l=function(n){var o,h=[];if(n.hasOwnProperty("props"))for(o in n.props)o.substr(0,1)!=="_"&&h.push({key:o,value:n.props[o]});else for(o in n)s.indexOf(o)===-1&&o.substr(0,1)!=="_"&&h.push({key:o,value:n[o]});return h};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(6),l=function(n){var o=s(n,"tweens",null);return o===null?[]:(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o]),o)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(265),l=e(13),n=e(99),o=e(80),h=e(162),r=e(6),a=e(264),v=e(266),u=e(268),d=function(c,g,m){m===void 0&&(m=s);var x=r(g,"from",0),y=r(g,"to",1),T=[{value:x}],S=h(g,"delay",m.delay),C=h(g,"duration",m.duration),E=r(g,"easeParams",m.easeParams),P=o(r(g,"ease",m.ease),E),M=h(g,"hold",m.hold),R=h(g,"repeat",m.repeat),A=h(g,"repeatDelay",m.repeatDelay),O=n(g,"yoyo",m.yoyo),F=[],I=a("value",y),w=u(T[0],0,"value",I.getEnd,I.getStart,I.getActive,P,S,C,O,M,R,A,!1,!1);w.start=x,w.current=x,w.to=y,F.push(w);var b=new v(c,F,T);b.offset=l(g,"offset",null),b.completeDelay=l(g,"completeDelay",0),b.loop=Math.round(l(g,"loop",0)),b.loopDelay=Math.round(l(g,"loopDelay",0)),b.paused=n(g,"paused",!1),b.useFrames=n(g,"useFrames",!1);for(var Y=r(g,"callbackScope",b),U=[b,null],W=v.TYPES,D=0;D<W.length;D++){var L=W[D],B=r(g,L,!1);if(B){var G=r(g,L+"Scope",Y),N=r(g,L+"Params",[]);b.setCallback(L,B,U.concat(N),G)}}return b};t.exports=d},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(80),l=e(6),n=e(14),o=function(h,r){r===void 0&&(r={});var a,v=l(r,"start",0),u=l(r,"ease",null),d=l(r,"grid",null),c=l(r,"from",0),g=c==="first",m=c==="center",x=c==="last",y=typeof c=="number",T=Array.isArray(h),S=parseFloat(T?h[0]:h),C=T?parseFloat(h[1]):0,E=Math.max(S,C);if(T&&(v+=S),d){var P=d[0],M=d[1],R=0,A=0,O=0,F=0,I=[];x?(R=P-1,A=M-1):y?(R=c%P,A=Math.floor(c/P)):m&&(R=(P-1)/2,A=(M-1)/2);for(var w=n.MIN_SAFE_INTEGER,b=0;b<M;b++){I[b]=[];for(var Y=0;Y<P;Y++){O=R-Y,F=A-b;var U=Math.sqrt(O*O+F*F);U>w&&(w=U),I[b][Y]=U}}}var W=u?s(u):null;return d?a=function(D,L,B,G){var N=0,V=G%P,z=Math.floor(G/P);V>=0&&V<P&&z>=0&&z<M&&(N=I[z][V]);var X;if(T){var H=C-S;W?X=N/w*H*W(N/w):X=N/w*H}else W?X=N*S*W(N/w):X=N*S;return X+v}:a=function(D,L,B,G,N){N--;var V;g?V=G:m?V=Math.abs(N/2-G):x?V=N-G:y&&(V=Math.abs(c-G));var z;if(T){var X;m?X=(C-S)/N*(V*2):X=(C-S)/N*V,W?z=X*W(V/N):z=X}else W?z=N*E*W(V/N):z=V*S;return z+v},a};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(77),l=e(265),n=e(13),o=e(99),h=e(80),r=e(162),a=e(263),v=e(584),u=e(6),d=e(588),c=e(163),g=function(m,x){var y=new d(m);y.completeDelay=n(x,"completeDelay",0),y.loop=Math.round(n(x,"loop",0)),y.loopDelay=Math.round(n(x,"loopDelay",0)),y.paused=o(x,"paused",!1),y.useFrames=o(x,"useFrames",!1);var T=u(x,"callbackScope",y),S=[y],C=u(x,"onStart",!1);if(C){var E=u(x,"onStartScope",T),P=u(x,"onStartParams",[]);y.setCallback("onStart",C,S.concat(P),E)}var M=u(x,"onUpdate",!1);if(M){var R=u(x,"onUpdateScope",T),A=u(x,"onUpdateParams",[]);y.setCallback("onUpdate",M,S.concat(A),R)}var O=u(x,"onLoop",!1);if(O){var F=u(x,"onLoopScope",T),I=u(x,"onLoopParams",[]);y.setCallback("onLoop",O,S.concat(I),F)}var w=u(x,"onYoyo",!1);if(w){var b=u(x,"onYoyoScope",T),Y=u(x,"onYoyoParams",[]);y.setCallback("onYoyo",w,S.concat(null,Y),b)}var U=u(x,"onComplete",!1);if(U){var W=u(x,"onCompleteScope",T),D=u(x,"onCompleteParams",[]);y.setCallback("onComplete",U,S.concat(D),W)}var L=v(x);if(L.length===0)return y.paused=!0,y;var B=s(l);B.targets=a(x);var G=n(x,"totalDuration",0);G>0?B.duration=Math.floor(G/L.length):B.duration=r(x,"duration",B.duration),B.delay=r(x,"delay",B.delay),B.easeParams=u(x,"easeParams",B.easeParams),B.ease=h(u(x,"ease",B.ease),B.easeParams),B.hold=r(x,"hold",B.hold),B.repeat=r(x,"repeat",B.repeat),B.repeatDelay=r(x,"repeatDelay",B.repeatDelay),B.yoyo=o(x,"yoyo",B.yoyo),B.flipX=o(x,"flipX",B.flipX),B.flipY=o(x,"flipY",B.flipY);for(var N=0;N<L.length;N++)y.queue(c(y,L[N],B));return y};t.exports=g},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(9),n=e(267),o=e(163),h=e(100),r=new s({Extends:l,initialize:function(v){l.call(this),this.manager=v,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=h.PENDING_ADD,this._pausedState=h.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(a,v){this.emit(a,this),v&&v.func.apply(v.scope,v.params)},setTimeScale:function(a){return this.timeScale=a,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===h.ACTIVE},add:function(a){return this.queue(o(this,a))},queue:function(a){return this.isPlaying()||(a.parent=this,a.parentIsTimeline=!0,this.data.push(a),this.totalData=this.data.length),this},hasOffset:function(a){return a.offset!==null},isOffsetAbsolute:function(a){return typeof a=="number"},isOffsetRelative:function(a){var v=typeof a;if(v==="string"){var u=a[0];if(u==="-"||u==="+")return!0}return!1},getRelativeOffset:function(a,v){var u=a[0],d=parseFloat(a.substr(2)),c=v;switch(u){case"+":c+=d;break;case"-":c-=d;break}return Math.max(0,c)},calcDuration:function(){for(var a=0,v=0,u=0,d=0;d<this.totalData;d++){var c=this.data[d];c.init(),this.hasOffset(c)?this.isOffsetAbsolute(c.offset)?(c.calculatedOffset=c.offset,c.offset===0&&(u=0)):this.isOffsetRelative(c.offset)&&(c.calculatedOffset=this.getRelativeOffset(c.offset,a)):c.calculatedOffset=u,a=c.totalDuration+c.calculatedOffset,v+=c.totalDuration,u+=c.totalDuration}this.duration=v,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=h.PAUSED,!1):!0},resetTweens:function(a){for(var v=0;v<this.totalData;v++){var u=this.data[v];u.play(a)}},setCallback:function(a,v,u,d){return r.TYPES.indexOf(a)!==-1&&(this.callbacks[a]={func:v,scope:d,params:u}),this},makeActive:function(a){return this.manager.makeActive(a)},play:function(){if(this.state!==h.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=h.ACTIVE;this.dispatchTimelineEvent(n.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=h.LOOP_DELAY):(this.state=h.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=h.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=h.PENDING_REMOVE,this.dispatchTimelineEvent(n.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(a,v){if(this.state!==h.PAUSED){switch(this.useFrames&&(v=1*this.manager.timeScale),v*=this.timeScale,this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case h.ACTIVE:for(var u=this.totalData,d=0;d<this.totalData;d++){var c=this.data[d];c.update(a,v)&&u--}this.dispatchTimelineEvent(n.TIMELINE_UPDATE,this.callbacks.onUpdate),u===0&&this.nextState();break;case h.LOOP_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=h.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_LOOP,this.callbacks.onLoop));break;case h.COMPLETE_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=h.PENDING_REMOVE,this.dispatchTimelineEvent(n.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===h.PENDING_REMOVE}},stop:function(){this.state=h.PENDING_REMOVE},pause:function(){if(this.state!==h.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=h.PAUSED,this.emit(n.TIMELINE_PAUSE,this),this},resume:function(){return this.state===h.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(n.TIMELINE_RESUME,this)),this},hasTarget:function(a){for(var v=0;v<this.data.length;v++)if(this.data[v].hasTarget(a))return!0;return!1},destroy:function(){for(var a=0;a<this.data.length;a++)this.data[a].stop()}});r.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=r},function(t,f,e){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(86),l=e(41),n=e(32),o=e(2),h=e(64),r={parseBody:function(a,v,u,d){d===void 0&&(d={});for(var c=o(u,"fixtures",[]),g=[],m=0;m<c.length;m++)for(var x=this.parseFixture(c[m]),y=0;y<x.length;y++)g.push(x[y]);var T=n.clone(u,!0);n.extend(T,d,!0),delete T.fixtures,delete T.type;var S=l.create(T);return l.setParts(S,g),l.setPosition(S,{x:a,y:v}),S},parseFixture:function(a){var v=n.extend({},!1,a);delete v.circle,delete v.vertices;var u;if(a.circle){var d=o(a.circle,"x"),c=o(a.circle,"y"),g=o(a.circle,"radius");u=[s.circle(d,c,g,v)]}else a.vertices&&(u=this.parseVertices(a.vertices,v));return u},parseVertices:function(a,v){v===void 0&&(v={});for(var u=[],d=0;d<a.length;d++)h.clockwiseSort(a[d]),u.push(l.create(n.extend({position:h.centre(a[d]),vertices:a[d]},v)));return s.flagCoincidentParts(u)}};t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(86),l=e(41),n={parseBody:function(o,h,r,a){a===void 0&&(a={});var v,u=r.vertices;if(u.length===1)a.vertices=u[0],v=l.create(a),s.flagCoincidentParts(v.parts);else{for(var d=[],c=0;c<u.length;c++){var g=l.create({vertices:u[c]});d.push(g)}s.flagCoincidentParts(d),a.parts=d,v=l.create(a)}return v.label=r.label,l.setPosition(v,{x:o,y:h}),v}};t.exports=n},function(t,f,e){var s={};t.exports=s;var l=e(118),n=e(128),o=e(32),h=e(41),r=e(86);(function(){s.stack=function(a,v,u,d,c,g,m){for(var x=l.create({label:"Stack"}),y=a,T=v,S,C=0,E=0;E<d;E++){for(var P=0,M=0;M<u;M++){var R=m(y,T,M,E,S,C);if(R){var A=R.bounds.max.y-R.bounds.min.y,O=R.bounds.max.x-R.bounds.min.x;A>P&&(P=A),h.translate(R,{x:O*.5,y:A*.5}),y=R.bounds.max.x+c,l.addBody(x,R),S=R,C+=1}else y+=c}T+=P+g,y=a}return x},s.chain=function(a,v,u,d,c,g){for(var m=a.bodies,x=1;x<m.length;x++){var y=m[x-1],T=m[x],S=y.bounds.max.y-y.bounds.min.y,C=y.bounds.max.x-y.bounds.min.x,E=T.bounds.max.y-T.bounds.min.y,P=T.bounds.max.x-T.bounds.min.x,M={bodyA:y,pointA:{x:C*v,y:S*u},bodyB:T,pointB:{x:P*d,y:E*c}},R=o.extend(M,g);l.addConstraint(a,n.create(R))}return a.label+=" Chain",a},s.mesh=function(a,v,u,d,c){var g=a.bodies,m,x,y,T,S;for(m=0;m<u;m++){for(x=1;x<v;x++)y=g[x-1+m*v],T=g[x+m*v],l.addConstraint(a,n.create(o.extend({bodyA:y,bodyB:T},c)));if(m>0)for(x=0;x<v;x++)y=g[x+(m-1)*v],T=g[x+m*v],l.addConstraint(a,n.create(o.extend({bodyA:y,bodyB:T},c))),d&&x>0&&(S=g[x-1+(m-1)*v],l.addConstraint(a,n.create(o.extend({bodyA:S,bodyB:T},c)))),d&&x<v-1&&(S=g[x+1+(m-1)*v],l.addConstraint(a,n.create(o.extend({bodyA:S,bodyB:T},c))))}return a.label+=" Mesh",a},s.pyramid=function(a,v,u,d,c,g,m){return s.stack(a,v,u,d,c,g,function(x,y,T,S,C,E){var P=Math.min(d,Math.ceil(u/2)),M=C?C.bounds.max.x-C.bounds.min.x:0;if(!(S>P)){S=P-S;var R=S,A=u-1-S;if(!(T<R||T>A)){E===1&&h.translate(C,{x:(T+(u%2===1?1:-1))*M,y:0});var O=C?T*M:0;return m(a+O+T*c,y,T,S,C,E)}}})},s.newtonsCradle=function(a,v,u,d,c){for(var g=l.create({label:"Newtons Cradle"}),m=0;m<u;m++){var x=1.9,y=r.circle(a+m*(d*x),v+c,d,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=n.create({pointA:{x:a+m*(d*x),y:v},bodyB:y});l.addBody(g,y),l.addConstraint(g,T)}return g},s.car=function(a,v,u,d,c){var g=h.nextGroup(!0),m=20,x=-u*.5+m,y=u*.5-m,T=0,S=l.create({label:"Car"}),C=r.rectangle(a,v,u,d,{collisionFilter:{group:g},chamfer:{radius:d*.5},density:2e-4}),E=r.circle(a+x,v+T,c,{collisionFilter:{group:g},friction:.8}),P=r.circle(a+y,v+T,c,{collisionFilter:{group:g},friction:.8}),M=n.create({bodyB:C,pointB:{x,y:T},bodyA:E,stiffness:1,length:0}),R=n.create({bodyB:C,pointB:{x:y,y:T},bodyA:P,stiffness:1,length:0});return l.addBody(S,C),l.addBody(S,E),l.addBody(S,P),l.addConstraint(S,M),l.addConstraint(S,R),S},s.softBody=function(a,v,u,d,c,g,m,x,y,T){y=o.extend({inertia:1/0},y),T=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var S=s.stack(a,v,u,d,c,g,function(C,E){return r.circle(C,E,x,y)});return s.mesh(S,u,d,m,T),S.label="Soft Body",S}})()},function(t,f,e){var s={};t.exports=s,e(84);var l=e(32);(function(){s.pathToVertices=function(n,o){typeof window!="undefined"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,r,a,v,u,d,c,g,m,x,y=[],T,S,C=0,E=0,P=0;o=o||15;var M=function(A,O,F){var I=F%2===1&&F>1;if(!m||A!=m.x||O!=m.y){m&&I?(T=m.x,S=m.y):(T=0,S=0);var w={x:T+A,y:S+O};(I||!m)&&(m=w),y.push(w),E=T+A,P=S+O}},R=function(A){var O=A.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":E=A.x,P=A.y;break;case"H":E=A.x;break;case"V":P=A.y;break}M(E,P,A.pathSegType)}};for(s._svgPathToAbsolute(n),a=n.getTotalLength(),d=[],h=0;h<n.pathSegList.numberOfItems;h+=1)d.push(n.pathSegList.getItem(h));for(c=d.concat();C<a;){if(x=n.getPathSegAtLength(C),u=d[x],u!=g){for(;c.length&&c[0]!=u;)R(c.shift());g=u}switch(u.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":v=n.getPointAtLength(C),M(v.x,v.y,0);break}C+=o}for(h=0,r=c.length;h<r;++h)R(c[h]);return y},s._svgPathToAbsolute=function(n){for(var o,h,r,a,v,u,d=n.pathSegList,c=0,g=0,m=d.numberOfItems,x=0;x<m;++x){var y=d.getItem(x),T=y.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in y&&(c=y.x),"y"in y&&(g=y.y);else switch("x1"in y&&(r=c+y.x1),"x2"in y&&(v=c+y.x2),"y1"in y&&(a=g+y.y1),"y2"in y&&(u=g+y.y2),"x"in y&&(c+=y.x),"y"in y&&(g+=y.y),T){case"m":d.replaceItem(n.createSVGPathSegMovetoAbs(c,g),x);break;case"l":d.replaceItem(n.createSVGPathSegLinetoAbs(c,g),x);break;case"h":d.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(c),x);break;case"v":d.replaceItem(n.createSVGPathSegLinetoVerticalAbs(g),x);break;case"c":d.replaceItem(n.createSVGPathSegCurvetoCubicAbs(c,g,r,a,v,u),x);break;case"s":d.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(c,g,v,u),x);break;case"q":d.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(c,g,r,a),x);break;case"t":d.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(c,g),x);break;case"a":d.replaceItem(n.createSVGPathSegArcAbs(c,g,y.r1,y.r2,y.angle,y.largeArcFlag,y.sweepFlag),x);break;case"z":case"Z":c=o,g=h;break}(T=="M"||T=="m")&&(o=c,h=g)}}})()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(86),l=e(41),n=e(0),o=e(249),h=e(9),r=e(2),a=e(126),v=e(64),u=new n({Extends:h,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(c,g,m){h.call(this),this.tile=g,this.world=c,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var x=r(m,"body",null),y=r(m,"addToWorld",!0);if(x)this.setBody(x,y);else{var T=g.getCollisionGroup(),S=r(T,"objects",[]);S.length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}},setFromTileRectangle:function(d){d===void 0&&(d={}),a(d,"isStatic")||(d.isStatic=!0),a(d,"addToWorld")||(d.addToWorld=!0);var c=this.tile.getBounds(),g=c.x+c.width/2,m=c.y+c.height/2,x=s.rectangle(g,m,c.width,c.height,d);return this.setBody(x,d.addToWorld),this},setFromTileCollision:function(d){d===void 0&&(d={}),a(d,"isStatic")||(d.isStatic=!0),a(d,"addToWorld")||(d.addToWorld=!0);for(var c=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,m=this.tile.getLeft(),x=this.tile.getTop(),y=this.tile.getCollisionGroup(),T=r(y,"objects",[]),S=[],C=0;C<T.length;C++){var E=T[C],P=m+E.x*c,M=x+E.y*g,R=E.width*c,A=E.height*g,O=null;if(E.rectangle)O=s.rectangle(P+R/2,M+A/2,R,A,d);else if(E.ellipse)O=s.circle(P+R/2,M+A/2,R/2,d);else if(E.polygon||E.polyline){var F=E.polygon?E.polygon:E.polyline,I=F.map(function(Y){return{x:Y.x*c,y:Y.y*g}}),w=v.create(I),b=v.centre(w);P+=b.x,M+=b.y,O=s.fromVertices(P,M,w,d)}O&&S.push(O)}return S.length===1?this.setBody(S[0],d.addToWorld):S.length>1&&(d.parts=S,this.setBody(l.create(d),d.addToWorld)),this},setBody:function(d,c){return c===void 0&&(c=!0),this.body&&this.removeBody(),this.body=d,this.body.gameObject=this,c&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});t.exports=u},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1399);s.Body=e(41),s.Composite=e(118),s.World=e(596),s.Detector=e(273),s.Grid=e(597),s.Pairs=e(598),s.Pair=e(250),s.Query=e(1400),s.Resolver=e(599),s.SAT=e(274),s.Constraint=e(128),s.Common=e(32),s.Engine=e(1401),s.Events=e(166),s.Sleeping=e(165),s.Plugin=e(595),s.Bodies=e(86),s.Composites=e(591),s.Axes=e(271),s.Bounds=e(84),s.Svg=e(592),s.Vector=e(83),s.Vertices=e(64),s.World.add=s.Composite.add,s.World.remove=s.Composite.remove,s.World.addComposite=s.Composite.addComposite,s.World.addBody=s.Composite.addBody,s.World.addConstraint=s.Composite.addConstraint,s.World.clear=s.Composite.clear,t.exports=s},function(t,f,e){var s={};t.exports=s;var l=e(32);(function(){s._registry={},s.register=function(n){if(s.isPlugin(n)||l.warn("Plugin.register:",s.toString(n),"does not implement all required fields."),n.name in s._registry){var o=s._registry[n.name],h=s.versionParse(n.version).number,r=s.versionParse(o.version).number;h>r?(l.warn("Plugin.register:",s.toString(o),"was upgraded to",s.toString(n)),s._registry[n.name]=n):h<r?l.warn("Plugin.register:",s.toString(o),"can not be downgraded to",s.toString(n)):n!==o&&l.warn("Plugin.register:",s.toString(n),"is already registered to different plugin object")}else s._registry[n.name]=n;return n},s.resolve=function(n){return s._registry[s.dependencyParse(n).name]},s.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},s.isPlugin=function(n){return n&&n.name&&n.version&&n.install},s.isUsed=function(n,o){return n.used.indexOf(o)>-1},s.isFor=function(n,o){var h=n.for&&s.dependencyParse(n.for);return!n.for||o.name===h.name&&s.versionSatisfies(o.version,h.range)},s.use=function(n,o){if(n.uses=(n.uses||[]).concat(o||[]),n.uses.length===0){l.warn("Plugin.use:",s.toString(n),"does not specify any dependencies to install.");return}for(var h=s.dependencies(n),r=l.topologicalSort(h),a=[],v=0;v<r.length;v+=1)if(r[v]!==n.name){var u=s.resolve(r[v]);if(!u){a.push("\u274C "+r[v]);continue}s.isUsed(n,u.name)||(s.isFor(u,n)||(l.warn("Plugin.use:",s.toString(u),"is for",u.for,"but installed on",s.toString(n)+"."),u._warned=!0),u.install?u.install(n):(l.warn("Plugin.use:",s.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(a.push("\u{1F536} "+s.toString(u)),delete u._warned):a.push("\u2705 "+s.toString(u)),n.used.push(u.name))}a.length>0&&!u.silent&&l.info(a.join("  "))},s.dependencies=function(n,o){var h=s.dependencyParse(n),r=h.name;if(o=o||{},!(r in o)){n=s.resolve(n)||n,o[r]=l.map(n.uses||[],function(v){s.isPlugin(v)&&s.register(v);var u=s.dependencyParse(v),d=s.resolve(v);return d&&!s.versionSatisfies(d.version,u.range)?(l.warn("Plugin.dependencies:",s.toString(d),"does not satisfy",s.toString(u),"used by",s.toString(h)+"."),d._warned=!0,n._warned=!0):d||(l.warn("Plugin.dependencies:",s.toString(v),"used by",s.toString(h),"could not be resolved."),n._warned=!0),u.name});for(var a=0;a<o[r].length;a+=1)s.dependencies(o[r][a],o);return o}},s.dependencyParse=function(n){if(l.isString(n)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return o.test(n)||l.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},s.versionParse=function(n){var o=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;o.test(n)||l.warn("Plugin.versionParse:",n,"is not a valid version or range.");var h=n.split("-");n=h[0];var r=isNaN(Number(n[0])),a=r?n.substr(1):n,v=l.map(a.split("."),function(u){return Number(u)});return{isRange:r,version:a,range:n,operator:r?n[0]:"",parts:v,prerelease:h[1],number:v[0]*1e8+v[1]*1e4+v[2]}},s.versionSatisfies=function(n,o){o=o||"*";var h=s.versionParse(o),r=h.parts,a=s.versionParse(n),v=a.parts;if(h.isRange){if(h.operator==="*"||n==="*")return!0;if(h.operator==="~")return v[0]===r[0]&&v[1]===r[1]&&v[2]>=r[2];if(h.operator==="^")return r[0]>0?v[0]===r[0]&&a.number>=h.number:r[1]>0?v[1]===r[1]&&v[2]>=r[2]:v[2]===r[2]}return n===o||n==="*"}})()},function(t,f,e){var s={};t.exports=s;var l=e(118);e(128);var n=e(32);(function(){s.create=function(o){var h=l.create(),r={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return n.extend(h,r,o)}})()},function(t,f,e){var s={};t.exports=s;var l=e(250),n=e(273),o=e(32);(function(){s.create=function(h){var r={controller:s,detector:n.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(r,h)},s.update=function(h,r,a,v){var u,d,c,g=a.world,m=h.buckets,x,y,T=!1,S=a.metrics;for(S.broadphaseTests=0,u=0;u<r.length;u++){var C=r[u];if(!(C.isSleeping&&!v)&&!(C.bounds.max.x<g.bounds.min.x||C.bounds.min.x>g.bounds.max.x||C.bounds.max.y<g.bounds.min.y||C.bounds.min.y>g.bounds.max.y)){var E=s._getRegion(h,C);if(!C.region||E.id!==C.region.id||v){S.broadphaseTests+=1,(!C.region||v)&&(C.region=E);var P=s._regionUnion(E,C.region);for(d=P.startCol;d<=P.endCol;d++)for(c=P.startRow;c<=P.endRow;c++){y=s._getBucketId(d,c),x=m[y];var M=d>=E.startCol&&d<=E.endCol&&c>=E.startRow&&c<=E.endRow,R=d>=C.region.startCol&&d<=C.region.endCol&&c>=C.region.startRow&&c<=C.region.endRow;!M&&R&&R&&x&&s._bucketRemoveBody(h,x,C),(C.region===E||M&&!R||v)&&(x||(x=s._createBucket(m,y)),s._bucketAddBody(h,x,C))}C.region=E,T=!0}}}T&&(h.pairsList=s._createActivePairsList(h))},s.clear=function(h){h.buckets={},h.pairs={},h.pairsList=[]},s._regionUnion=function(h,r){var a=Math.min(h.startCol,r.startCol),v=Math.max(h.endCol,r.endCol),u=Math.min(h.startRow,r.startRow),d=Math.max(h.endRow,r.endRow);return s._createRegion(a,v,u,d)},s._getRegion=function(h,r){var a=r.bounds,v=Math.floor(a.min.x/h.bucketWidth),u=Math.floor(a.max.x/h.bucketWidth),d=Math.floor(a.min.y/h.bucketHeight),c=Math.floor(a.max.y/h.bucketHeight);return s._createRegion(v,u,d,c)},s._createRegion=function(h,r,a,v){return{id:h+","+r+","+a+","+v,startCol:h,endCol:r,startRow:a,endRow:v}},s._getBucketId=function(h,r){return"C"+h+"R"+r},s._createBucket=function(h,r){var a=h[r]=[];return a},s._bucketAddBody=function(h,r,a){for(var v=0;v<r.length;v++){var u=r[v];if(!(a.id===u.id||a.isStatic&&u.isStatic)){var d=l.id(a,u),c=h.pairs[d];c?c[2]+=1:h.pairs[d]=[a,u,1]}}r.push(a)},s._bucketRemoveBody=function(h,r,a){r.splice(r.indexOf(a),1);for(var v=0;v<r.length;v++){var u=r[v],d=l.id(a,u),c=h.pairs[d];c&&(c[2]-=1)}},s._createActivePairsList=function(h){var r,a,v=[];r=o.keys(h.pairs);for(var u=0;u<r.length;u++)a=h.pairs[r[u]],a[2]>0?v.push(a):delete h.pairs[r[u]];return v}})()},function(t,f,e){var s={};t.exports=s;var l=e(250),n=e(32);(function(){s._pairMaxIdleLife=1e3,s.create=function(o){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},s.update=function(o,h,r){var a=o.list,v=o.table,u=o.collisionStart,d=o.collisionEnd,c=o.collisionActive,g,m,x,y;for(u.length=0,d.length=0,c.length=0,y=0;y<a.length;y++)a[y].confirmedActive=!1;for(y=0;y<h.length;y++)g=h[y],g.collided&&(m=l.id(g.bodyA,g.bodyB),x=v[m],x?(x.isActive?c.push(x):u.push(x),l.update(x,g,r),x.confirmedActive=!0):(x=l.create(g,r),v[m]=x,u.push(x),a.push(x)));for(y=0;y<a.length;y++)x=a[y],x.isActive&&!x.confirmedActive&&(l.setActive(x,!1,r),d.push(x))},s.removeOld=function(o,h){var r=o.list,a=o.table,v=[],u,d,c,g;for(g=0;g<r.length;g++){if(u=r[g],d=u.collision,d.bodyA.isSleeping||d.bodyB.isSleeping){u.timeUpdated=h;continue}h-u.timeUpdated>s._pairMaxIdleLife&&v.push(g)}for(g=0;g<v.length;g++)c=v[g]-g,u=r[c],delete a[u.id],r.splice(c,1)},s.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()},function(t,f,e){var s={};t.exports=s;var l=e(64),n=e(83),o=e(32),h=e(84);(function(){s._restingThresh=4,s._restingThreshTangent=6,s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s.preSolvePosition=function(r){var a,v,u;for(a=0;a<r.length;a++)v=r[a],v.isActive&&(u=v.activeContacts.length,v.collision.parentA.totalContacts+=u,v.collision.parentB.totalContacts+=u)},s.solvePosition=function(r,a,v){var u,d,c,g,m,x,y,T,S,C,E,P,M,R,A,O,F=v*s._positionDampen;for(u=0;u<a.length;u++){var I=a[u];I.previousPositionImpulse.x=I.positionImpulse.x,I.previousPositionImpulse.y=I.positionImpulse.y}for(u=0;u<r.length;u++)g=r[u],!(!g.isActive||g.isSensor)&&(m=g.collision,x=m.parentA,y=m.parentB,T=m.normal,E=x.previousPositionImpulse,P=y.previousPositionImpulse,C=m.penetration,R=P.x-E.x+C.x,A=P.y-E.y+C.y,d=T.x,c=T.y,S=d*R+c*A,g.separation=S,O=(S-g.slop)*F,(x.isStatic||y.isStatic)&&(O*=2),x.isStatic||x.isSleeping||(M=O/x.totalContacts,x.positionImpulse.x+=d*M,x.positionImpulse.y+=c*M),y.isStatic||y.isSleeping||(M=O/y.totalContacts,y.positionImpulse.x-=d*M,y.positionImpulse.y-=c*M))},s.postSolvePosition=function(r){for(var a=0;a<r.length;a++){var v=r[a];if(v.totalContacts=0,v.positionImpulse.x!==0||v.positionImpulse.y!==0){for(var u=0;u<v.parts.length;u++){var d=v.parts[u];l.translate(d.vertices,v.positionImpulse),h.update(d.bounds,d.vertices,v.velocity),d.position.x+=v.positionImpulse.x,d.position.y+=v.positionImpulse.y}v.positionPrev.x+=v.positionImpulse.x,v.positionPrev.y+=v.positionImpulse.y,n.dot(v.positionImpulse,v.velocity)<0?(v.positionImpulse.x=0,v.positionImpulse.y=0):(v.positionImpulse.x*=s._positionWarming,v.positionImpulse.y*=s._positionWarming)}}},s.preSolveVelocity=function(r){var a,v,u,d,c,g,m,x,y,T,S,C,E,P,M=n._temp[0],R=n._temp[1];for(a=0;a<r.length;a++)if(u=r[a],!(!u.isActive||u.isSensor))for(d=u.activeContacts,c=u.collision,g=c.parentA,m=c.parentB,x=c.normal,y=c.tangent,v=0;v<d.length;v++)T=d[v],S=T.vertex,C=T.normalImpulse,E=T.tangentImpulse,(C!==0||E!==0)&&(M.x=x.x*C+y.x*E,M.y=x.y*C+y.y*E,g.isStatic||g.isSleeping||(P=n.sub(S,g.position,R),g.positionPrev.x+=M.x*g.inverseMass,g.positionPrev.y+=M.y*g.inverseMass,g.anglePrev+=n.cross(P,M)*g.inverseInertia),m.isStatic||m.isSleeping||(P=n.sub(S,m.position,R),m.positionPrev.x-=M.x*m.inverseMass,m.positionPrev.y-=M.y*m.inverseMass,m.anglePrev-=n.cross(P,M)*m.inverseInertia))},s.solveVelocity=function(r,a){for(var v=a*a,u=n._temp[0],d=n._temp[1],c=n._temp[2],g=n._temp[3],m=n._temp[4],x=n._temp[5],y=0;y<r.length;y++){var T=r[y];if(!(!T.isActive||T.isSensor)){var S=T.collision,C=S.parentA,E=S.parentB,P=S.normal,M=S.tangent,R=T.activeContacts,A=1/R.length;C.velocity.x=C.position.x-C.positionPrev.x,C.velocity.y=C.position.y-C.positionPrev.y,E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,C.angularVelocity=C.angle-C.anglePrev,E.angularVelocity=E.angle-E.anglePrev;for(var O=0;O<R.length;O++){var F=R[O],I=F.vertex,w=n.sub(I,C.position,d),b=n.sub(I,E.position,c),Y=n.add(C.velocity,n.mult(n.perp(w),C.angularVelocity),g),U=n.add(E.velocity,n.mult(n.perp(b),E.angularVelocity),m),W=n.sub(Y,U,x),D=n.dot(P,W),L=n.dot(M,W),B=Math.abs(L),G=o.sign(L),N=(1+T.restitution)*D,V=o.clamp(T.separation+D,0,1)*s._frictionNormalMultiplier,z=L,X=1/0;B>T.friction*T.frictionStatic*V*v&&(X=B,z=o.clamp(T.friction*G*v,-X,X));var H=n.cross(w,P),K=n.cross(b,P),J=A/(C.inverseMass+E.inverseMass+C.inverseInertia*H*H+E.inverseInertia*K*K);if(N*=J,z*=J,D<0&&D*D>s._restingThresh*v)F.normalImpulse=0;else{var Z=F.normalImpulse;F.normalImpulse=Math.min(F.normalImpulse+N,0),N=F.normalImpulse-Z}if(L*L>s._restingThreshTangent*v)F.tangentImpulse=0;else{var Q=F.tangentImpulse;F.tangentImpulse=o.clamp(F.tangentImpulse+z,-X,X),z=F.tangentImpulse-Q}u.x=P.x*N+M.x*z,u.y=P.y*N+M.y*z,C.isStatic||C.isSleeping||(C.positionPrev.x+=u.x*C.inverseMass,C.positionPrev.y+=u.y*C.inverseMass,C.anglePrev+=n.cross(w,u)*C.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=u.x*E.inverseMass,E.positionPrev.y-=u.y*E.inverseMass,E.anglePrev-=n.cross(b,u)*E.inverseInertia)}}}}})()},function(t,f){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch{typeof window=="object"&&(e=window)}t.exports=e},function(t,f,e){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(276),l=function(n,o,h,r){for(var a=n[0],v=1;v<n.length;v++){var u=n[v];s(u,a,o,h,r),a=u}return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(46),l=function(n,o,h,r,a){return s(n,"angle",o,h,r,a)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){for(var o=0;o<s.length;o++){var h=s[o];l.call(n,h)}return s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){n===void 0&&(n=0);for(var o=n;o<s.length;o++){var h=s[o],r=!0;for(var a in l)h[a]!==l[a]&&(r=!1);if(r)return h}return null};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){n===void 0&&(n=0);for(var o=n;o<s.length;o++){var h=s[o],r=!0;for(var a in l)h[a]!==l[a]&&(r=!1);if(r)return h}return null};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(289),l=e(123),n=e(2),o=e(1),h=e(129),r=new h({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1),a=function(v,u){u===void 0&&(u={});var d=u.hasOwnProperty("width"),c=u.hasOwnProperty("height"),g=n(u,"width",-1),m=n(u,"height",-1),x=n(u,"cellWidth",1),y=n(u,"cellHeight",x),T=n(u,"position",l.TOP_LEFT),S=n(u,"x",0),C=n(u,"y",0),E=0,P=0,M=g*x,R=m*y;r.setPosition(S,C),r.setSize(x,y);for(var A=0;A<v.length;A++)if(s(v[A],r,T),d&&g===-1)r.x+=x;else if(c&&m===-1)r.y+=y;else if(c&&!d){if(P+=y,r.y+=y,P===R&&(P=0,E+=x,r.y=C,r.x+=x,E===M))break}else if(E+=x,r.x+=x,E===M&&(E=0,P+=y,r.x=S,r.y+=y,P===R))break;return v};t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(18),l=2,n={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o,h,r,a){return o===void 0&&(o=1),h===void 0?this.alpha=o:(this._alphaTL=s(o,0,1),this._alphaTR=s(h,0,1),this._alphaBL=s(r,0,1),this._alphaBR=s(a,0,1)),this},alpha:{get:function(){return this._alpha},set:function(o){var h=s(o,0,1);this._alpha=h,this._alphaTL=h,this._alphaTR=h,this._alphaBL=h,this._alphaBR=h,h===0?this.renderFlags&=~l:this.renderFlags|=l}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(o){var h=s(o,0,1);this._alphaTL=h,h!==0&&(this.renderFlags|=l)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(o){var h=s(o,0,1);this._alphaTR=h,h!==0&&(this.renderFlags|=l)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(o){var h=s(o,0,1);this._alphaBL=h,h!==0&&(this.renderFlags|=l)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(o){var h=s(o,0,1);this._alphaBR=h,h!==0&&(this.renderFlags|=l)}}};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}},setSize:function(s,l){return this.width=s,this.height=l,this},setDisplaySize:function(s,l){return this.displayWidth=s,this.displayHeight=l,this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={texture:null,frame:null,isCropped:!1,setCrop:function(s,l,n,o){if(s===void 0)this.isCropped=!1;else if(this.frame){if(typeof s=="number")this.frame.setCropUVs(this._crop,s,l,n,o,this.flipX,this.flipY);else{var h=s;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(s){return this.flipX=s,this},setFlipY:function(s){return this.flipY=s,this},setFlip:function(s,l){return this.flipX=s,this.flipY=l,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10),l=e(308),n=e(3),o={prepareBoundsOutput:function(h,r){if(r===void 0&&(r=!1),this.rotation!==0&&l(h,this.x,this.y,this.rotation),r&&this.parentContainer){var a=this.parentContainer.getBoundsTransformMatrix();a.transformPoint(h.x,h.y,h)}return h},getCenter:function(h){return h===void 0&&(h=new n),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,h},getTopLeft:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getTopCenter:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getTopRight:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getLeftCenter:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getRightCenter:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getBottomLeft:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBottomCenter:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBottomRight:function(h,r){return h||(h=new n),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBounds:function(h){h===void 0&&(h=new s);var r,a,v,u,d,c,g,m;if(this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(h),x.transformPoint(h.x,h.y,h),r=h.x,a=h.y,this.getTopRight(h),x.transformPoint(h.x,h.y,h),v=h.x,u=h.y,this.getBottomLeft(h),x.transformPoint(h.x,h.y,h),d=h.x,c=h.y,this.getBottomRight(h),x.transformPoint(h.x,h.y,h),g=h.x,m=h.y}else this.getTopLeft(h),r=h.x,a=h.y,this.getTopRight(h),v=h.x,u=h.y,this.getBottomLeft(h),d=h.x,c=h.y,this.getBottomRight(h),g=h.x,m=h.y;return h.x=Math.min(r,v,d,g),h.y=Math.min(a,u,c,m),h.width=Math.max(r,v,d,g)-h.x,h.height=Math.max(a,u,c,m)-h.y,h}};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="blur"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="boot"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="contextlost"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="contextrestored"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="destroy"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="focus"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="hidden"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pause"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="postrender"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="poststep"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="prerender"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="prestep"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="ready"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="resume"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="step"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="visible"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="postrender"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="prerender"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="render"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="resize"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(s){this._displayOriginX=s,this.originX=s/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(s){this._displayOriginY=s,this.originY=s/this.height}},setOrigin:function(s,l){return s===void 0&&(s=.5),l===void 0&&(l=s),this.originX=s,this.originY=l,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(s,l){return s===void 0&&(s=0),l===void 0&&(l=s),this.displayOriginX=s,this.displayOriginY=l,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(36),l=e(99),n=e(6),o=e(100),h=e(3),r={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(a,v){v===void 0&&(v=this.pathConfig);var u=this.pathTween;return u&&u.isPlaying()&&u.stop(),this.path=a,v&&this.startFollow(v),this},setRotateToPath:function(a,v){return v===void 0&&(v=0),this.rotateToPath=a,this.pathRotationOffset=v,this},isFollowing:function(){var a=this.pathTween;return a&&a.isPlaying()},startFollow:function(a,v){a===void 0&&(a={}),v===void 0&&(v=0);var u=this.pathTween;u&&u.isPlaying()&&u.stop(),typeof a=="number"&&(a={duration:a}),a.from=n(a,"from",0),a.to=n(a,"to",1);var d=l(a,"positionOnPath",!1);this.rotateToPath=l(a,"rotateToPath",!1),this.pathRotationOffset=n(a,"rotationOffset",0);var c=n(a,"startAt",v);if(c&&(a.onStart=function(m){var x=m.data[0];x.progress=c,x.elapsed=x.duration*c;var y=x.ease(x.progress);x.current=x.start+(x.end-x.start)*y,x.target[x.key]=x.current}),this.pathOffset||(this.pathOffset=new h(this.x,this.y)),this.pathVector||(this.pathVector=new h),this.pathDelta||(this.pathDelta=new h),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(a),this.path.getStartPoint(this.pathOffset),d&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+s(this.pathRotationOffset)}return this.pathConfig=a,this},pauseFollow:function(){var a=this.pathTween;return a&&a.isPlaying()&&a.pause(),this},resumeFollow:function(){var a=this.pathTween;return a&&a.isPaused()&&a.resume(),this},stopFollow:function(){var a=this.pathTween;return a&&a.isPlaying()&&a.stop(),this},pathUpdate:function(){var a=this.pathTween;if(a){var v=a.data[0],u=this.pathDelta,d=this.pathVector;if(u.copy(d).negate(),v.state===o.COMPLETE){this.path.getPoint(1,d),u.add(d),d.add(this.pathOffset),this.setPosition(d.x,d.y);return}else if(v.state!==o.PLAYING_FORWARD&&v.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(a.getValue(),d),u.add(d),d.add(this.pathOffset);var c=this.x,g=this.y;this.setPosition(d.x,d.y);var m=this.x-c,x=this.y-g;if(m===0&&x===0)return;if(v.state!==this._prevDirection){this._prevDirection=v.state;return}this.rotateToPath&&(this.rotation=Math.atan2(x,m)+s(this.pathRotationOffset))}}};t.exports=r},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(s){this.scaleX=s/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(s){this.scaleY=s/this.frame.realHeight}},setSizeToFrame:function(s){return s===void 0&&(s=this.frame),this.width=s.realWidth,this.height=s.realHeight,this},setSize:function(s,l){return this.width=s,this.height=l,this},setDisplaySize:function(s,l){return this.displayWidth=s,this.displayHeight=l,this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=8,s={texture:null,frame:null,isCropped:!1,setTexture:function(l,n){return this.texture=this.scene.sys.textures.get(l),this.setFrame(n)},setFrame:function(l,n,o){return n===void 0&&(n=!0),o===void 0&&(o=!0),this.frame=this.texture.get(l),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~e:this.renderFlags|=e,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=s},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=8,s={texture:null,frame:null,isCropped:!1,setCrop:function(l,n,o,h){if(l===void 0)this.isCropped=!1;else if(this.frame){if(typeof l=="number")this.frame.setCropUVs(this._crop,l,n,o,h,this.flipX,this.flipY);else{var r=l;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(l,n){return this.texture=this.scene.sys.textures.get(l),this.setFrame(n)},setFrame:function(l,n,o){return n===void 0&&(n=!0),o===void 0&&(o=!0),this.frame=this.texture.get(l),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~e:this.renderFlags|=e,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=s},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(s,l,n,o){return s===void 0&&(s=16777215),l===void 0&&(l=s,n=s,o=s),this.tintTopLeft=s,this.tintTopRight=l,this.tintBottomLeft=n,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(s,l,n,o){return this.setTint(s,l,n,o),this.tintFill=!0,this},tint:{set:function(s){this.setTint(s,s,s,s)}},isTinted:{get:function(){var s=16777215;return this.tintFill||this.tintTopLeft!==s||this.tintTopRight!==s||this.tintBottomLeft!==s||this.tintBottomRight!==s}}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="changedata"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="changedata-"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="destroy"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="removedata"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="setdata"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="addedtoscene"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="destroy"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="removedfromscene"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="complete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="created"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="error"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="loop"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="play"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="seeked"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="seeking"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="stop"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="timeout"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="unlocked"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="addedtoscene"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="boot"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="create"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="destroy"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pause"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="postupdate"},function(t,f){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="prerender"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="preupdate"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="ready"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="removedfromscene"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="render"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="resume"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="shutdown"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="sleep"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="start"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="transitioncomplete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="transitioninit"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="transitionout"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="transitionstart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="transitionwake"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="update"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="wake"},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(46),l=function(n,o,h,r,a){return s(n,"alpha",o,h,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(46),l=function(n,o,h,r,a){return s(n,"x",o,h,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(46),l=function(n,o,h,r,a,v,u){return h==null&&(h=o),s(n,"x",o,r,v,u),s(n,"y",h,a,v,u)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(46),l=function(n,o,h,r,a){return s(n,"y",o,h,r,a)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){n===void 0&&(n=0),o===void 0&&(o=6.28);for(var h=n,r=(o-n)/s.length,a=0;a<s.length;a++)s[a].x=l.x+l.radius*Math.cos(h),s[a].y=l.y+l.radius*Math.sin(h),h+=r;return s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){n===void 0&&(n=0),o===void 0&&(o=6.28);for(var h=n,r=(o-n)/s.length,a=l.width/2,v=l.height/2,u=0;u<s.length;u++)s[u].x=l.x+a*Math.cos(h),s[u].y=l.y+v*Math.sin(h),h+=r;return s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(172),l=function(n,o){for(var h=s(o,n.length),r=0;r<n.length;r++){var a=n[r],v=h[r];a.x=v.x,a.y=v.y}return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(316),l=e(178),n=e(179),o=function(h,r,a){a===void 0&&(a=0);var v=s(r,!1,h.length);a>0?l(v,a):a<0&&n(v,Math.abs(a));for(var u=0;u<h.length;u++)h[u].x=v[u].x,h[u].y=v[u].y;return h};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(317),l=function(n,o,h){var r=s({x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},h),a=s({x1:o.x2,y1:o.y2,x2:o.x3,y2:o.y3},h),v=s({x1:o.x3,y1:o.y3,x2:o.x1,y2:o.y1},h);r.pop(),a.pop(),v.pop(),r=r.concat(a,v);for(var u=r.length/n.length,d=0,c=0;c<n.length;c++){var g=n[c],m=r[Math.floor(d)];g.x=m.x,g.y=m.y,d+=u}return n};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){for(var o=0;o<s.length;o++){var h=s[o];h.anims&&h.anims.play(l,n)}return s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(170),l=function(n,o){for(var h=0;h<n.length;h++)s(o,n[h]);return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(180),l=function(n,o){for(var h=0;h<n.length;h++)s(o,n[h]);return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(173),l=function(n,o){for(var h=0;h<n.length;h++)s(o,n[h]);return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(174),l=function(n,o){for(var h=0;h<n.length;h++)s(o,n[h]);return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(181),l=function(n,o){for(var h=0;h<n.length;h++)s(o,n[h]);return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(46),l=function(n,o,h,r,a){return s(n,"rotation",o,h,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(182),l=e(50),n=function(o,h,r){for(var a=h.x,v=h.y,u=0;u<o.length;u++){var d=o[u];s(d,a,v,r,Math.max(1,l(d.x,d.y,a,v)))}return o};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(182),l=function(n,o,h,r){var a=o.x,v=o.y;if(r===0)return n;for(var u=0;u<n.length;u++)s(n[u],a,v,h,r);return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(46),l=function(n,o,h,r,a){return s(n,"scaleX",o,h,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(46),l=function(n,o,h,r,a,v,u){return h==null&&(h=o),s(n,"scaleX",o,r,v,u),s(n,"scaleY",h,a,v,u)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(46),l=function(n,o,h,r,a){return s(n,"scaleY",o,h,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a){return s(n,"alpha",o,h,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r){return s(n,"blendMode",o,0,h,r)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a){return s(n,"depth",o,h,r,a)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){for(var o=0;o<s.length;o++)s[o].setInteractive(l,n);return s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a,v,u){return h==null&&(h=o),s(n,"originX",o,r,v,u),s(n,"originY",h,a,v,u),n.forEach(function(d){d.updateDisplayOrigin()}),n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a){return s(n,"rotation",o,h,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a,v,u){return h==null&&(h=o),s(n,"scaleX",o,r,v,u),s(n,"scaleY",h,a,v,u)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a){return s(n,"scaleX",o,h,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a){return s(n,"scaleY",o,h,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a,v,u){return h==null&&(h=o),s(n,"scrollFactorX",o,r,v,u),s(n,"scrollFactorY",h,a,v,u)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a){return s(n,"scrollFactorX",o,h,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a){return s(n,"scrollFactorY",o,h,r,a)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h){for(var r=0;r<s.length;r++)s[r].setTint(l,n,o,h);return s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r){return s(n,"visible",o,0,h,r)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a){return s(n,"x",o,h,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a,v,u){return h==null&&(h=o),s(n,"x",o,r,v,u),s(n,"y",h,a,v,u)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(27),l=function(n,o,h,r,a){return s(n,"y",o,h,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(3),l=function(n,o,h,r,a){r===void 0&&(r=0),a===void 0&&(a=new s);var v,u;if(n.length>1){var d,c,g,m;if(r===0){var x=n.length-1;for(v=n[x].x,u=n[x].y,d=x-1;d>=0;d--)m=n[d],c=m.x,g=m.y,m.x=v,m.y=u,v=c,u=g;n[x].x=o,n[x].y=h}else{for(v=n[0].x,u=n[0].y,d=1;d<n.length;d++)m=n[d],c=m.x,g=m.y,m.x=v,m.y=u,v=c,u=g;n[0].x=o,n[0].y=h}}else v=n[0].x,u=n[0].y,n[0].x=o,n[0].y=h;return a.x=v,a.y=u,a};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(131),l=function(n){return s(n)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(183),l=function(n,o,h,r,a){a===void 0&&(a=!1);var v=Math.abs(r-h)/n.length,u;if(a)for(u=0;u<n.length;u++)n[u][o]+=s(u*v,h,r);else for(u=0;u<n.length;u++)n[u][o]=s(u*v,h,r);return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(184),l=function(n,o,h,r,a){a===void 0&&(a=!1);var v=Math.abs(r-h)/n.length,u;if(a)for(u=0;u<n.length;u++)n[u][o]+=s(u*v,h,r);else for(u=0;u<n.length;u++)n[u][o]=s(u*v,h,r);return n};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h){h===void 0&&(h=!1);var r=Math.abs(o-n)/s.length,a;if(h)for(a=0;a<s.length;a++)s[a][l]+=a*r+n;else for(a=0;a<s.length;a++)s[a][l]=a*r+n;return s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){for(var l=0;l<s.length;l++)s[l].visible=!s[l].visible;return s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(68),l=function(n,o,h){h===void 0&&(h=0);for(var r=0;r<n.length;r++){var a=n[r];a.x=s(a.x,o.left-h,o.right+h),a.y=s(a.y,o.top-h,o.bottom+h)}return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Animation:e(185),AnimationFrame:e(319),AnimationManager:e(321),AnimationState:e(164),Events:e(132)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="add"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="animationcomplete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="animationcomplete-"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="animationrepeat"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="animationrestart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="animationstart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="animationstop"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="animationupdate"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pauseall"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="remove"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="resumeall"},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={BaseCache:e(323),CacheManager:e(325),Events:e(324)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="add"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="remove"},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Controls:e(739),Scene2D:e(742)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={FixedKeyControl:e(740),SmoothedKeyControl:e(741)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(6),n=new s({initialize:function(h){this.camera=l(h,"camera",null),this.left=l(h,"left",null),this.right=l(h,"right",null),this.up=l(h,"up",null),this.down=l(h,"down",null),this.zoomIn=l(h,"zoomIn",null),this.zoomOut=l(h,"zoomOut",null),this.zoomSpeed=l(h,"zoomSpeed",.01),this.minZoom=l(h,"minZoom",.001),this.maxZoom=l(h,"maxZoom",1e3),this.speedX=0,this.speedY=0;var r=l(h,"speed",null);typeof r=="number"?(this.speedX=r,this.speedY=r):(this.speedX=l(h,"speed.x",0),this.speedY=l(h,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var h=this.camera;this.up&&this.up.isDown?h.scrollY-=this.speedY*o|0:this.down&&this.down.isDown&&(h.scrollY+=this.speedY*o|0),this.left&&this.left.isDown?h.scrollX-=this.speedX*o|0:this.right&&this.right.isDown&&(h.scrollX+=this.speedX*o|0),this.zoomIn&&this.zoomIn.isDown?(h.zoom-=this.zoomSpeed,h.zoom<this.minZoom&&(h.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(h.zoom+=this.zoomSpeed,h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(6),n=new s({initialize:function(h){this.camera=l(h,"camera",null),this.left=l(h,"left",null),this.right=l(h,"right",null),this.up=l(h,"up",null),this.down=l(h,"down",null),this.zoomIn=l(h,"zoomIn",null),this.zoomOut=l(h,"zoomOut",null),this.zoomSpeed=l(h,"zoomSpeed",.01),this.minZoom=l(h,"minZoom",.001),this.maxZoom=l(h,"maxZoom",1e3),this.accelX=0,this.accelY=0;var r=l(h,"acceleration",null);typeof r=="number"?(this.accelX=r,this.accelY=r):(this.accelX=l(h,"acceleration.x",0),this.accelY=l(h,"acceleration.y",0)),this.dragX=0,this.dragY=0;var a=l(h,"drag",null);typeof a=="number"?(this.dragX=a,this.dragY=a):(this.dragX=l(h,"drag.x",0),this.dragY=l(h,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var v=l(h,"maxSpeed",null);typeof v=="number"?(this.maxSpeedX=v,this.maxSpeedY=v):(this.maxSpeedX=l(h,"maxSpeed.x",0),this.maxSpeedY=l(h,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var h=this.camera;this._speedX>0?(this._speedX-=this.dragX*o,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*o,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*o,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*o,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(h.scrollX-=this._speedX*o|0),this._speedY!==0&&(h.scrollY-=this._speedY*o|0),this._zoom!==0&&(h.zoom+=this._zoom,h.zoom<this.minZoom?h.zoom=this.minZoom:h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Camera:e(326),BaseCamera:e(133),CameraManager:e(799),Effects:e(333),Events:e(37)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="cameradestroy"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="camerafadeincomplete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="camerafadeinstart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="camerafadeoutcomplete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="camerafadeoutstart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="cameraflashcomplete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="cameraflashstart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="followupdate"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="camerapancomplete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="camerapanstart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="postrender"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="prerender"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="camerarotatecomplete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="camerarotatestart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="camerashakecomplete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="camerashakestart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="camerazoomcomplete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="camerazoomstart"},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(18),l=e(0),n=e(37),o=new l({initialize:function(r){this.camera=r,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,r,a,v,u,d,c,g){if(h===void 0&&(h=!0),r===void 0&&(r=1e3),a===void 0&&(a=0),v===void 0&&(v=0),u===void 0&&(u=0),d===void 0&&(d=!1),c===void 0&&(c=null),g===void 0&&(g=this.camera.scene),!d&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=h,this.progress=0,this.red=a,this.green=v,this.blue=u,this.alpha=h?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=g;var m=h?n.FADE_OUT_START:n.FADE_IN_START;return this.camera.emit(m,this.camera,this,r,a,v,u),this.camera},update:function(h,r){!this.isRunning||(this._elapsed+=r,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(h){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(h,r){if(!this.isRunning&&!this.isComplete)return!1;var a=this.camera,v=this.red/255,u=this.green/255,d=this.blue/255;return h.drawFillRect(a.x,a.y,a.width,a.height,r(d,u,v,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var h=this.direction?n.FADE_OUT_COMPLETE:n.FADE_IN_COMPLETE;this.camera.emit(h,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(18),l=e(0),n=e(37),o=new l({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,r,a,v,u,d,c){return h===void 0&&(h=250),r===void 0&&(r=255),a===void 0&&(a=255),v===void 0&&(v=255),u===void 0&&(u=!1),d===void 0&&(d=null),c===void 0&&(c=this.camera.scene),!u&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=h,this.progress=0,this.red=r,this.green=a,this.blue=v,this.alpha=1,this._elapsed=0,this._onUpdate=d,this._onUpdateScope=c,this.camera.emit(n.FLASH_START,this.camera,this,h,r,a,v),this.camera)},update:function(h,r){!this.isRunning||(this._elapsed+=r,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(h){if(!this.isRunning)return!1;var r=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(h,r){if(!this.isRunning)return!1;var a=this.camera,v=this.red/255,u=this.green/255,d=this.blue/255;return h.drawFillRect(a.x,a.y,a.width,a.height,r(d,u,v,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(18),l=e(0),n=e(134),o=e(37),h=e(3),r=new l({initialize:function(v){this.camera=v,this.isRunning=!1,this.duration=0,this.source=new h,this.current=new h,this.destination=new h,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,v,u,d,c,g,m){u===void 0&&(u=1e3),d===void 0&&(d=n.Linear),c===void 0&&(c=!1),g===void 0&&(g=null),m===void 0&&(m=this.camera.scene);var x=this.camera;return!c&&this.isRunning||(this.isRunning=!0,this.duration=u,this.progress=0,this.source.set(x.scrollX,x.scrollY),this.destination.set(a,v),x.getScroll(a,v,this.current),typeof d=="string"&&n.hasOwnProperty(d)?this.ease=n[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=m,this.camera.emit(o.PAN_START,this.camera,this,u,a,v)),x},update:function(a,v){if(!!this.isRunning){this._elapsed+=v;var u=s(this._elapsed/this.duration,0,1);this.progress=u;var d=this.camera;if(this._elapsed<this.duration){var c=this.ease(u);d.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*c,m=this.source.y+(this.current.y-this.source.y)*c;d.setScroll(g,m),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,u,g,m)}else d.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,u,d.scrollX,d.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=r},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l===void 0&&(l=1.70158),s*s*((l+1)*s-l)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l===void 0&&(l=1.70158),--s*s*((l+1)*s+l)+1};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){l===void 0&&(l=1.70158);var n=l*1.525;return(s*=2)<1?.5*(s*s*((n+1)*s-n)):.5*((s-=2)*s*((n+1)*s+n)+2)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s=1-s,s<.36363636363636365?1-7.5625*s*s:s<.7272727272727273?1-(7.5625*(s-=.5454545454545454)*s+.75):s<.9090909090909091?1-(7.5625*(s-=.8181818181818182)*s+.9375):1-(7.5625*(s-=.9545454545454546)*s+.984375)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s<.36363636363636365?7.5625*s*s:s<.7272727272727273?7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?7.5625*(s-=.8181818181818182)*s+.9375:7.5625*(s-=.9545454545454546)*s+.984375};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l=!1;return s<.5?(s=1-s*2,l=!0):s=s*2-1,s<.36363636363636365?s=7.5625*s*s:s<.7272727272727273?s=7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?s=7.5625*(s-=.8181818181818182)*s+.9375:s=7.5625*(s-=.9545454545454546)*s+.984375,l?(1-s)*.5:s*.5+.5};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return 1-Math.sqrt(1-s*s)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return Math.sqrt(1- --s*s)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s*s*s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return--s*s*s+1};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return(s*=2)<1?.5*s*s*s:.5*((s-=2)*s*s+2)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){if(l===void 0&&(l=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var o=n/4;return l<1?l=1:o=n*Math.asin(1/l)/(2*Math.PI),-(l*Math.pow(2,10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/n))};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){if(l===void 0&&(l=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var o=n/4;return l<1?l=1:o=n*Math.asin(1/l)/(2*Math.PI),l*Math.pow(2,-10*s)*Math.sin((s-o)*(2*Math.PI)/n)+1};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){if(l===void 0&&(l=.1),n===void 0&&(n=.1),s===0)return 0;if(s===1)return 1;var o=n/4;return l<1?l=1:o=n*Math.asin(1/l)/(2*Math.PI),(s*=2)<1?-.5*(l*Math.pow(2,10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/n)):l*Math.pow(2,-10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/n)*.5+1};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return Math.pow(2,10*(s-1))-.001};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return 1-Math.pow(2,-10*s)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return(s*=2)<1?.5*Math.pow(2,10*(s-1)):.5*(2-Math.pow(2,-10*(s-1)))};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s*s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s*(2-s)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return(s*=2)<1?.5*s*s:-.5*(--s*(s-2)-1)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s*s*s*s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return 1- --s*s*s*s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return(s*=2)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s*s*s*s*s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return--s*s*s*s*s+1};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s===0?0:s===1?1:1-Math.cos(s*Math.PI/2)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s===0?0:s===1?1:Math.sin(s*Math.PI/2)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s===0?0:s===1?1:.5*(1-Math.cos(Math.PI*s))};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l===void 0&&(l=1),s<=0?0:s>=1?1:((l*s|0)+1)*(1/l)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(18),l=e(0),n=e(37),o=e(3),h=new l({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(r,a,v,u,d){return r===void 0&&(r=100),a===void 0&&(a=.05),v===void 0&&(v=!1),u===void 0&&(u=null),d===void 0&&(d=this.camera.scene),!v&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,typeof a=="number"?this.intensity.set(a):this.intensity.set(a.x,a.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=u,this._onUpdateScope=d,this.camera.emit(n.SHAKE_START,this.camera,this,r,a),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,a){if(!!this.isRunning)if(this._elapsed+=a,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var v=this.intensity,u=this.camera.width,d=this.camera.height,c=this.camera.zoom;this._offsetX=(Math.random()*v.x*u*2-v.x*u)*c,this._offsetY=(Math.random()*v.y*d*2-v.y*d)*c,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});t.exports=h},function(t,f,e){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var s=e(18),l=e(0),n=e(37),o=e(134),h=new l({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(r,a,v,u,d,c,g){v===void 0&&(v=1e3),u===void 0&&(u=o.Linear),d===void 0&&(d=!1),c===void 0&&(c=null),g===void 0&&(g=this.camera.scene),a===void 0&&(a=!1),this.shortestPath=a;var m=r;r<0?(m=-1*r,this.clockwise=!1):this.clockwise=!0;var x=360*Math.PI/180;m=m-Math.floor(m/x)*x;var y=this.camera;if(!d&&this.isRunning)return y;if(this.isRunning=!0,this.duration=v,this.progress=0,this.source=y.rotation,this.destination=m,typeof u=="string"&&o.hasOwnProperty(u)?this.ease=o[u]:typeof u=="function"&&(this.ease=u),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=g,this.shortestPath){var T=0,S=0;this.destination>this.source?T=Math.abs(this.destination-this.source):T=Math.abs(this.destination+x)-this.source,this.source>this.destination?S=Math.abs(this.source-this.destination):S=Math.abs(this.source+x)-this.destination,T<S?this.clockwise=!0:T>S&&(this.clockwise=!1)}return this.camera.emit(n.ROTATE_START,this.camera,this,v,m),y},update:function(r,a){if(!!this.isRunning){this._elapsed+=a;var v=s(this._elapsed/this.duration,0,1);this.progress=v;var u=this.camera;if(this._elapsed<this.duration){var d=this.ease(v);this.current=u.rotation;var c=0,g=360*Math.PI/180,m=this.destination,x=this.current;this.clockwise===!1&&(m=this.current,x=this.destination),m>=x?c=Math.abs(m-x):c=Math.abs(m+g)-x;var y=0;this.clockwise?y=u.rotation+c*d:y=u.rotation-c*d,u.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,v,y)}else u.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,v,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(18),l=e(0),n=e(134),o=e(37),h=new l({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,a,v,u,d,c){a===void 0&&(a=1e3),v===void 0&&(v=n.Linear),u===void 0&&(u=!1),d===void 0&&(d=null),c===void 0&&(c=this.camera.scene);var g=this.camera;return!u&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,this.source=g.zoom,this.destination=r,typeof v=="string"&&n.hasOwnProperty(v)?this.ease=n[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=c,this.camera.emit(o.ZOOM_START,this.camera,this,a,r)),g},update:function(r,a){!this.isRunning||(this._elapsed+=a,this.progress=s(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(326),l=e(0),n=e(2),o=e(24),h=e(57),r=e(104),a=e(20),v=new l({initialize:function(d){this.scene=d,this.systems=d.sys,this.roundPixels=d.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,d.sys.events.once(a.BOOT,this.boot,this),d.sys.events.on(a.START,this.start,this)},boot:function(){var u=this.systems;u.settings.cameras?this.fromJSON(u.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new s(0,0,u.scale.width,u.scale.height).setScene(this.scene),u.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){if(!this.main){var u=this.systems;u.settings.cameras?this.fromJSON(u.settings.cameras):this.add(),this.main=this.cameras[0]}var d=this.systems.events;d.on(a.UPDATE,this.update,this),d.once(a.SHUTDOWN,this.shutdown,this)},add:function(u,d,c,g,m,x){u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),m===void 0&&(m=!1),x===void 0&&(x="");var y=new s(u,d,c,g);return y.setName(x),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),m&&(this.main=y),y},addExisting:function(u,d){d===void 0&&(d=!1);var c=this.cameras.indexOf(u);return c===-1?(u.id=this.getNextID(),u.setRoundPixels(this.roundPixels),this.cameras.push(u),d&&(this.main=u),u):null},getNextID:function(){for(var u=this.cameras,d=1,c=0;c<32;c++){for(var g=!1,m=0;m<u.length;m++){var x=u[m];if(x&&x.id===d){g=!0;continue}}if(g)d=d<<1;else return d}return 0},getTotal:function(u){u===void 0&&(u=!1);for(var d=0,c=this.cameras,g=0;g<c.length;g++){var m=c[g];(!u||u&&m.visible)&&d++}return d},fromJSON:function(u){Array.isArray(u)||(u=[u]);for(var d=this.scene.sys.scale.width,c=this.scene.sys.scale.height,g=0;g<u.length;g++){var m=u[g],x=n(m,"x",0),y=n(m,"y",0),T=n(m,"width",d),S=n(m,"height",c),C=this.add(x,y,T,S);C.name=n(m,"name",""),C.zoom=n(m,"zoom",1),C.rotation=n(m,"rotation",0),C.scrollX=n(m,"scrollX",0),C.scrollY=n(m,"scrollY",0),C.roundPixels=n(m,"roundPixels",!1),C.visible=n(m,"visible",!0);var E=n(m,"backgroundColor",!1);E&&C.setBackgroundColor(E);var P=n(m,"bounds",null);if(P){var M=n(P,"x",0),R=n(P,"y",0),A=n(P,"width",d),O=n(P,"height",c);C.setBounds(M,R,A,O)}}return this},getCamera:function(u){for(var d=this.cameras,c=0;c<d.length;c++)if(d[c].name===u)return d[c];return null},getCamerasBelowPointer:function(u){for(var d=this.cameras,c=u.x,g=u.y,m=[],x=0;x<d.length;x++){var y=d[x];y.visible&&y.inputEnabled&&h(y,c,g)&&m.unshift(y)}return m},remove:function(u,d){d===void 0&&(d=!0),Array.isArray(u)||(u=[u]);for(var c=0,g=this.cameras,m=0;m<u.length;m++){var x=g.indexOf(u[m]);x!==-1&&(d?g[x].destroy():g[x].renderList=[],g.splice(x,1),c++)}return!this.main&&g[0]&&(this.main=g[0]),c},render:function(u,d){for(var c=this.scene,g=this.cameras,m=0;m<this.cameras.length;m++){var x=g[m];if(x.visible&&x.alpha>0){x.preRender();var y=this.getVisibleChildren(d.getChildren(),x);u.render(c,y,x)}}},getVisibleChildren:function(u,d){for(var c=[],g=0;g<u.length;g++){var m=u[g];m.willRender(d)&&c.push(m)}return c},resetAll:function(){for(var u=0;u<this.cameras.length;u++)this.cameras[u].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(u,d){for(var c=0;c<this.cameras.length;c++)this.cameras[c].update(u,d)},onResize:function(u,d,c,g,m){for(var x=0;x<this.cameras.length;x++){var y=this.cameras[x];y._x===0&&y._y===0&&y._width===g&&y._height===m&&y.setSize(d.width,d.height)}},resize:function(u,d){for(var c=0;c<this.cameras.length;c++)this.cameras[c].setSize(u,d)},shutdown:function(){this.main=void 0;for(var u=0;u<this.cameras.length;u++)this.cameras[u].destroy();this.cameras=[];var d=this.systems.events;d.off(a.UPDATE,this.update,this),d.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("CameraManager",v,"cameras"),t.exports=v},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="enterfullscreen"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="fullscreenfailed"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="fullscreenunsupported"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="leavefullscreen"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="orientationchange"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="resize"},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Config:e(346),CreateRenderer:e(366),DebugHeader:e(384),Events:e(22),TimeStep:e(385),VisibilityHandler:e(387)}},function(t,f){var e=t.exports={},s,l;function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=n}catch{s=n}try{typeof clearTimeout=="function"?l=clearTimeout:l=o}catch{l=o}})();function h(y){if(s===setTimeout)return setTimeout(y,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(y,0);try{return s(y,0)}catch{try{return s.call(null,y,0)}catch{return s.call(this,y,0)}}}function r(y){if(l===clearTimeout)return clearTimeout(y);if((l===o||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(y);try{return l(y)}catch{try{return l.call(null,y)}catch{return l.call(this,y)}}}var a=[],v=!1,u,d=-1;function c(){!v||!u||(v=!1,u.length?a=u.concat(a):d=-1,a.length&&g())}function g(){if(!v){var y=h(c);v=!0;for(var T=a.length;T;){for(u=a,a=[];++d<T;)u&&u[d].run();d=-1,T=a.length}u=null,v=!1,r(y)}}e.nextTick=function(y){var T=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)T[S-1]=arguments[S];a.push(new m(y,T)),a.length===1&&!v&&h(g)};function m(y,T){this.fun=y,this.array=T}m.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function x(){}e.on=x,e.addListener=x,e.once=x,e.off=x,e.removeListener=x,e.removeAllListeners=x,e.emit=x,e.prependListener=x,e.prependOnceListener=x,e.listeners=function(y){return[]},e.binding=function(y){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(136),l={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function n(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(l.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(l.mspointer=!0),navigator.getGamepads&&(l.gamepads=!0),"onwheel"in window||s.ie&&"WheelEvent"in window?l.wheelEvent="wheel":"onmousewheel"in window?l.wheelEvent="mousewheel":s.firefox&&"MouseScrollEvent"in window&&(l.wheelEvent="DOMMouseScroll")),l}t.exports=n()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(136),l={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function n(){if(typeof importScripts=="function")return l;l.audioData=!!window.Audio,l.webAudio=!!(window.AudioContext||window.webkitAudioContext);var o=document.createElement("audio"),h=!!o.canPlayType;try{if(h&&(o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(l.ogg=!0),(o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||o.canPlayType("audio/opus;").replace(/^no$/,""))&&(l.opus=!0),o.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(l.mp3=!0),o.canPlayType("audio/wav").replace(/^no$/,"")&&(l.wav=!0),(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/aac;").replace(/^no$/,""))&&(l.m4a=!0),o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(l.webm=!0),o.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(s.edge)l.dolby=!0;else if(s.safari&&s.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var r=parseInt(RegExp.$1,10),a=parseInt(RegExp.$2,10);(r===10&&a>=11||r>10)&&(l.dolby=!0)}}}catch{}return l}t.exports=n()},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function s(){if(typeof importScripts=="function")return e;var l=document.createElement("video"),n=!!l.canPlayType;try{n&&(l.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(e.ogg=!0),l.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(e.h264=!0,e.mp4=!0),l.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(e.webm=!0),l.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(e.vp9=!0),l.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(e.hls=!0))}catch{}return e}t.exports=s()},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={available:!1,cancel:"",keyboard:!1,request:""};function s(){if(typeof importScripts=="function")return e;var l,n="Fullscreen",o="FullScreen",h=["request"+n,"request"+o,"webkitRequest"+n,"webkitRequest"+o,"msRequest"+n,"msRequest"+o,"mozRequest"+o,"mozRequest"+n];for(l=0;l<h.length;l++)if(document.documentElement[h[l]]){e.available=!0,e.request=h[l];break}var r=["cancel"+o,"exit"+n,"webkitCancel"+o,"webkitExit"+n,"msCancel"+o,"msExit"+n,"mozCancel"+o,"mozExit"+n];if(e.available){for(l=0;l<r.length;l++)if(document[r[l]]){e.cancel=r[l];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(e.keyboard=!0),Object.defineProperty(e,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),e}t.exports=s()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Between:e(349),BetweenPoints:e(350),BetweenPointsY:e(813),BetweenY:e(814),CounterClockwise:e(815),Normalize:e(351),Random:e(816),RandomDegrees:e(817),Reverse:e(818),RotateTo:e(819),ShortestBetween:e(820),Wrap:e(269),WrapDegrees:e(270)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return Math.atan2(l.x-s.x,l.y-s.y)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){return Math.atan2(n-s,o-l)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(14),l=function(n){return n>Math.PI&&(n-=s.PI2),Math.abs(((n+s.TAU)%s.PI2-s.PI2)%s.PI2)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(137),l=function(){return s(-Math.PI,Math.PI)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(137),l=function(){return s(-180,180)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(351),l=function(n){return s(n+Math.PI)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(14),l=function(n,o,h){return h===void 0&&(h=.05),n===o||(Math.abs(o-n)<=h||Math.abs(o-n)>=s.PI2-h?n=o:(Math.abs(o-n)>Math.PI&&(o<n?o+=s.PI2:o-=s.PI2),o>n?n+=h:o<n&&(n-=h))),n};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=l-s;if(n===0)return 0;var o=Math.floor((n- -180)/360);return n-o*360};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Between:e(50),BetweenPoints:e(352),BetweenPointsSquared:e(822),Chebyshev:e(823),Power:e(824),Snake:e(825),Squared:e(353)}},function(t,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.x-l.x,o=s.y-l.y;return n*n+o*o};t.exports=e},function(t,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){return Math.max(Math.abs(s-n),Math.abs(l-o))};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h){return h===void 0&&(h=2),Math.sqrt(Math.pow(n-s,h)+Math.pow(o-l,h))};t.exports=e},function(t,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){return Math.abs(s-n)+Math.abs(l-o)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Back:e(334),Bounce:e(335),Circular:e(336),Cubic:e(337),Elastic:e(338),Expo:e(339),Linear:e(340),Quadratic:e(341),Quartic:e(342),Quintic:e(343),Sine:e(344),Stepped:e(345)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Ceil:e(828),Equal:e(124),Floor:e(829),GreaterThan:e(354),LessThan:e(355)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l===void 0&&(l=1e-4),Math.ceil(s-l)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l===void 0&&(l=1e-4),Math.floor(s+l)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Bezier:e(831),CatmullRom:e(832),CubicBezier:e(358),Linear:e(833),QuadraticBezier:e(359),SmoothStep:e(360),SmootherStep:e(834)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(356),l=function(n,o){for(var h=0,r=n.length-1,a=0;a<=r;a++)h+=Math.pow(1-o,r-a)*Math.pow(o,a)*n[a]*s(r,a);return h};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(194),l=function(n,o){var h=n.length-1,r=h*o,a=Math.floor(r);return n[0]===n[h]?(o<0&&(a=Math.floor(r=h*(1+o))),s(r-a,n[(a-1+h)%h],n[a],n[(a+1)%h],n[(a+2)%h])):o<0?n[0]-(s(-r,n[0],n[0],n[1],n[1])-n[0]):o>1?n[h]-(s(r-h,n[h],n[h],n[h-1],n[h-1])-n[h]):s(r-a,n[a?a-1:0],n[a],n[h<a+1?h:a+1],n[h<a+2?h:a+2])};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(135),l=function(n,o){var h=n.length-1,r=h*o,a=Math.floor(r);return o<0?s(n[0],n[1],r):o>1?s(n[h],n[h-1],h-r):s(n[a],n[a+1>h?h:a+1],r-a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(183),l=function(n,o,h){return o+(h-o)*s(n,0,1)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={GetNext:e(361),IsSize:e(138),IsValue:e(836)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s>0&&(s&s-1)===0};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Ceil:e(139),Floor:e(76),To:e(838)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){return n===void 0&&(n=0),l===0?s:(s-=n,s=l*Math.round(s/l),o?(n+s)/l:n+s)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=new s({initialize:function(o){o===void 0&&(o=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],o&&this.init(o)},rnd:function(){var n=2091639*this.s0+this.c*23283064365386963e-26;return this.c=n|0,this.s0=this.s1,this.s1=this.s2,this.s2=n-this.c,this.s2},hash:function(n){var o,h=this.n;n=n.toString();for(var r=0;r<n.length;r++)h+=n.charCodeAt(r),o=.02519603282416938*h,h=o>>>0,o-=h,o*=h,h=o>>>0,o-=h,h+=o*4294967296;return this.n=h,(h>>>0)*23283064365386963e-26},init:function(n){typeof n=="string"?this.state(n):this.sow(n)},sow:function(n){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!n)for(var o=0;o<n.length&&n[o]!=null;o++){var h=n[o];this.s0-=this.hash(h),this.s0+=~~(this.s0<0),this.s1-=this.hash(h),this.s1+=~~(this.s1<0),this.s2-=this.hash(h),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(n,o){return Math.floor(this.realInRange(0,o-n+1)+n)},between:function(n,o){return Math.floor(this.realInRange(0,o-n+1)+n)},realInRange:function(n,o){return this.frac()*(o-n)+n},normal:function(){return 1-2*this.frac()},uuid:function(){var n="",o="";for(o=n="";n++<36;o+=~n%5|n*3&4?(n^15?8^this.frac()*(n^20?16:4):4).toString(16):"-");return o},pick:function(n){return n[this.integerInRange(0,n.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(n){return n[~~(Math.pow(this.frac(),2)*(n.length-1)+.5)]},timestamp:function(n,o){return this.realInRange(n||9466848e5,o||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(n){return typeof n=="string"&&n.match(/^!rnd/)&&(n=n.split(","),this.c=parseFloat(n[1]),this.s0=parseFloat(n[2]),this.s1=parseFloat(n[3]),this.s2=parseFloat(n[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(n){for(var o=n.length-1,h=o;h>0;h--){var r=Math.floor(this.frac()*(h+1)),a=n[r];n[r]=n[h],n[h]=a}return n}});t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){for(var l=0,n=0;n<s.length;n++)l+=+s[n];return l/s.length};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){l===void 0&&(l=0),n===void 0&&(n=10);var o=Math.pow(n,-l);return Math.ceil(s*o)/o};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return Math.abs(s-l)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(18),l=e(0),n=e(69),o=e(1),h=new n,r=new l({initialize:function a(v,u,d,c){v===void 0&&(v=0),u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=a.DefaultOrder),this._x=v,this._y=u,this._z=d,this._order=c,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(a){this._x=a,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(a){this._y=a,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(a){this._z=a,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(a){this._order=a,this.onChangeCallback(this)}},set:function(a,v,u,d){return d===void 0&&(d=this._order),this._x=a,this._y=v,this._z=u,this._order=d,this.onChangeCallback(this),this},copy:function(a){return this.set(a.x,a.y,a.z,a.order)},setFromQuaternion:function(a,v,u){return v===void 0&&(v=this._order),u===void 0&&(u=!1),h.fromQuat(a),this.setFromRotationMatrix(h,v,u)},setFromRotationMatrix:function(a,v,u){v===void 0&&(v=this._order),u===void 0&&(u=!1);var d=a.val,c=d[0],g=d[4],m=d[8],x=d[1],y=d[5],T=d[9],S=d[2],C=d[6],E=d[10],P=0,M=0,R=0,A=.99999;switch(v){case"XYZ":{M=Math.asin(s(m,-1,1)),Math.abs(m)<A?(P=Math.atan2(-T,E),R=Math.atan2(-g,c)):P=Math.atan2(C,y);break}case"YXZ":{P=Math.asin(-s(T,-1,1)),Math.abs(T)<A?(M=Math.atan2(m,E),R=Math.atan2(x,y)):M=Math.atan2(-S,c);break}case"ZXY":{P=Math.asin(s(C,-1,1)),Math.abs(C)<A?(M=Math.atan2(-S,E),R=Math.atan2(-g,y)):R=Math.atan2(x,c);break}case"ZYX":{M=Math.asin(-s(S,-1,1)),Math.abs(S)<A?(P=Math.atan2(C,E),R=Math.atan2(x,c)):R=Math.atan2(-g,y);break}case"YZX":{R=Math.asin(s(x,-1,1)),Math.abs(x)<A?(P=Math.atan2(-T,y),M=Math.atan2(-S,c)):M=Math.atan2(m,E);break}case"XZY":{R=Math.asin(-s(g,-1,1)),Math.abs(g)<A?(P=Math.atan2(C,y),M=Math.atan2(m,c)):P=Math.atan2(-T,E);break}}return this._x=P,this._y=M,this._z=R,this._order=v,u&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",t.exports=r},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){l===void 0&&(l=0),n===void 0&&(n=10);var o=Math.pow(n,-l);return Math.floor(s*o)/o};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s/l/1e3};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s==parseFloat(s)?!(s%2):void 0};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s===parseFloat(s)?!(s%2):void 0};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return Math.min(s+l,n)};t.exports=e},function(t,f){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l=s.length;if(l===0)return 0;s.sort(function(o,h){return o-h});var n=Math.floor(l/2);return l%2===0?(s[n]+s[n-1])/2:s[n]};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return Math.max(s-l,n)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){n===void 0&&(n=l+1);var h=(s-l)/(n-l);return h>1?o!==void 0?(h=(o-s)/(o-n),h<0&&(h=0)):h=1:h<0&&(h=0),h};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){l===void 0&&(l=1);var n=Math.random()*2*Math.PI;return s.x=Math.cos(n)*l,s.y=Math.sin(n)*l,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){l===void 0&&(l=1);var n=Math.random()*2*Math.PI,o=Math.random()*2-1,h=Math.sqrt(1-o*o)*l;return s.x=Math.cos(n)*h,s.y=Math.sin(n)*h,s.z=o*l,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l===void 0&&(l=1),s.x=(Math.random()*2-1)*l,s.y=(Math.random()*2-1)*l,s.z=(Math.random()*2-1)*l,s.w=(Math.random()*2-1)*l,s};t.exports=e},function(t,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h){return s.x=l+h*Math.cos(o),s.y=n+h*Math.sin(o),s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){l===void 0&&(l=0),n===void 0&&(n=10);var o=Math.pow(n,-l);return Math.round(s*o)/o};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){l===void 0&&(l=1),n===void 0&&(n=1),o===void 0&&(o=1),o*=Math.PI/s;for(var h=[],r=[],a=0;a<s;a++)n-=l*o,l+=n*o,h[a]=n,r[a]=l;return{sin:r,cos:h,length:s}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(3),l=function(n,o,h,r){r===void 0&&(r=new s);var a=0,v=0,u=o*h;return n>0&&n<=u&&(n>o-1?(v=Math.floor(n/o),a=n-v*o):a=n),r.set(a,v)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return Math.abs(s-l)<=n};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(39),l=e(69),n=e(365),o=new l,h=new n,r=new s,a=function(v,u,d){return h.setAxisAngle(u,d),o.fromRotationTranslation(h,r.set(0,0,0)),v.transformMat4(o)};t.exports=a},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="addtexture"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="onerror"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="onload"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="ready"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="removetexture"},function(t,f){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pipelineafterflush"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pipelinebeforeflush"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pipelinebind"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pipelineboot"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pipelinedestroy"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pipelinerebind"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pipelineresize"},function(t,f){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(t,f){t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={GenerateTexture:e(388),Palettes:e(889)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ARNE16:e(389),C64:e(890),CGA:e(891),JMP:e(892),MSX:e(893)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Path:e(895),MoveTo:e(393),CubicBezier:e(390),Curve:e(94),Ellipse:e(391),Line:e(392),QuadraticBezier:e(394),Spline:e(395)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(390),n=e(391),o=e(5),h=e(392),r=e(393),a=e(394),v=e(10),u=e(395),d=e(3),c=e(14),g=new s({initialize:function(x,y){x===void 0&&(x=0),y===void 0&&(y=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new d,this._tmpVec2A=new d,this._tmpVec2B=new d,typeof x=="object"?this.fromJSON(x):this.startPoint.set(x,y)},add:function(m){return this.curves.push(m),this},circleTo:function(m,x,y){return x===void 0&&(x=!1),this.ellipseTo(m,m,0,360,x,y)},closePath:function(){var m=this.curves[0].getPoint(0),x=this.curves[this.curves.length-1].getPoint(1);return m.equals(x)||this.curves.push(new h(x,m)),this},cubicBezierTo:function(m,x,y,T,S,C){var E=this.getEndPoint(),P,M,R;return m instanceof d?(P=m,M=x,R=y):(P=new d(y,T),M=new d(S,C),R=new d(m,x)),this.add(new l(E,P,M,R))},quadraticBezierTo:function(m,x,y,T){var S=this.getEndPoint(),C,E;return m instanceof d?(C=m,E=x):(C=new d(y,T),E=new d(m,x)),this.add(new a(S,C,E))},draw:function(m,x){for(var y=0;y<this.curves.length;y++){var T=this.curves[y];!T.active||T.draw(m,x)}return m},ellipseTo:function(m,x,y,T,S,C){var E=new n(0,0,m,x,y,T,S,C),P=this.getEndPoint(this._tmpVec2A),M=E.getStartPoint(this._tmpVec2B);return P.subtract(M),E.x=P.x,E.y=P.y,this.add(E)},fromJSON:function(m){this.curves=[],this.cacheLengths=[],this.startPoint.set(m.x,m.y),this.autoClose=m.autoClose;for(var x=0;x<m.curves.length;x++){var y=m.curves[x];switch(y.type){case"LineCurve":this.add(h.fromJSON(y));break;case"EllipseCurve":this.add(n.fromJSON(y));break;case"SplineCurve":this.add(u.fromJSON(y));break;case"CubicBezierCurve":this.add(l.fromJSON(y));break;case"QuadraticBezierCurve":this.add(a.fromJSON(y));break}}return this},getBounds:function(m,x){m===void 0&&(m=new v),x===void 0&&(x=16),m.x=Number.MAX_VALUE,m.y=Number.MAX_VALUE;for(var y=new v,T=c.MIN_SAFE_INTEGER,S=c.MIN_SAFE_INTEGER,C=0;C<this.curves.length;C++){var E=this.curves[C];!E.active||(E.getBounds(y,x),m.x=Math.min(m.x,y.x),m.y=Math.min(m.y,y.y),T=Math.max(T,y.right),S=Math.max(S,y.bottom))}return m.right=T,m.bottom=S,m},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var m=[],x=0,y=0;y<this.curves.length;y++)x+=this.curves[y].getLength(),m.push(x);return this.cacheLengths=m,m},getEndPoint:function(m){return m===void 0&&(m=new d),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,m):m.copy(this.startPoint),m},getLength:function(){var m=this.getCurveLengths();return m[m.length-1]},getPoint:function(m,x){x===void 0&&(x=new d);for(var y=m*this.getLength(),T=this.getCurveLengths(),S=0;S<T.length;){if(T[S]>=y){var C=T[S]-y,E=this.curves[S],P=E.getLength(),M=P===0?0:1-C/P;return E.getPointAt(M,x)}S++}return null},getPoints:function(m){m===void 0&&(m=12);for(var x=[],y,T=0;T<this.curves.length;T++){var S=this.curves[T];if(!!S.active)for(var C=S.getResolution(m),E=S.getPoints(C),P=0;P<E.length;P++){var M=E[P];y&&y.equals(M)||(x.push(M),y=M)}}return this.autoClose&&x.length>1&&!x[x.length-1].equals(x[0])&&x.push(x[0]),x},getRandomPoint:function(m){return m===void 0&&(m=new d),this.getPoint(Math.random(),m)},getSpacedPoints:function(m){m===void 0&&(m=40);for(var x=[],y=0;y<=m;y++)x.push(this.getPoint(y/m));return this.autoClose&&x.push(x[0]),x},getStartPoint:function(m){return m===void 0&&(m=new d),m.copy(this.startPoint)},getTangent:function(m,x){x===void 0&&(x=new d);for(var y=m*this.getLength(),T=this.getCurveLengths(),S=0;S<T.length;){if(T[S]>=y){var C=T[S]-y,E=this.curves[S],P=E.getLength(),M=P===0?0:1-C/P;return E.getTangentAt(M,x)}S++}return null},lineTo:function(m,x){m instanceof d?this._tmpVec2B.copy(m):this._tmpVec2B.set(m,x);var y=this.getEndPoint(this._tmpVec2A);return this.add(new h([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(m){return m.unshift(this.getEndPoint()),this.add(new u(m))},moveTo:function(m,x){return m instanceof d?this.add(new r(m.x,m.y)):this.add(new r(m,x))},toJSON:function(){for(var m=[],x=0;x<this.curves.length;x++)m.push(this.curves[x].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:m}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",function(m,x){return new g(m,x)}),t.exports=g},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={DataManager:e(101),DataManagerPlugin:e(897),Events:e(315)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(101),n=e(24),o=e(20),h=new s({Extends:l,initialize:function(a){l.call(this,a,a.sys.events),this.scene=a,this.systems=a.sys,a.sys.events.once(o.BOOT,this.boot,this),a.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){l.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});n.register("DataManagerPlugin",h,"data"),t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Align:e(899),BaseShader:e(396),Bounds:e(902),Canvas:e(906),Color:e(397),ColorMatrix:e(198),Masks:e(916),RGB:e(200)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(123),l=e(17),n={In:e(900),To:e(901)};n=l(!1,n,s),t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={BottomCenter:e(290),BottomLeft:e(291),BottomRight:e(292),Center:e(293),LeftCenter:e(295),QuickSet:e(289),RightCenter:e(296),TopCenter:e(297),TopLeft:e(298),TopRight:e(299)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={BottomCenter:e(277),BottomLeft:e(278),BottomRight:e(279),LeftBottom:e(280),LeftCenter:e(281),LeftTop:e(282),QuickSet:e(276),RightBottom:e(283),RightCenter:e(284),RightTop:e(285),TopCenter:e(286),TopLeft:e(287),TopRight:e(288)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={CenterOn:e(294),GetBottom:e(42),GetBounds:e(903),GetCenterX:e(87),GetCenterY:e(89),GetLeft:e(43),GetOffsetX:e(904),GetOffsetY:e(905),GetRight:e(44),GetTop:e(45),SetBottom:e(55),SetCenterX:e(88),SetCenterY:e(90),SetLeft:e(53),SetRight:e(54),SetTop:e(52)}},function(t,f,e){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(42),l=e(43),n=e(44),o=e(45),h=function(r,a){a===void 0&&(a={});var v=l(r),u=o(r);return a.x=v,a.y=u,a.width=n(r)-v,a.height=s(r)-u,a};t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.width*s.originX};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.height*s.originY};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={CanvasInterpolation:e(367),CanvasPool:e(31),Smoothing:e(192),TouchAction:e(907),UserSelect:e(908)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l===void 0&&(l="none"),s.style.msTouchAction=l,s.style["ms-touch-action"]=l,s.style["touch-action"]=l,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){l===void 0&&(l="none");var n=["-webkit-","-khtml-","-moz-","-ms-",""];return n.forEach(function(o){s.style[o+"user-select"]=l}),s.style["-webkit-touch-callout"]=l,s.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(103),l=function(n){n===void 0&&(n=1024);var o=[],h=255,r,a=255,v=0,u=0;for(r=0;r<=h;r++)o.push({r:a,g:r,b:u,color:s(a,r,u)});for(v=255,r=h;r>=0;r--)o.push({r,g:v,b:u,color:s(r,v,u)});for(a=0,r=0;r<=h;r++,v--)o.push({r:a,g:v,b:r,color:s(a,v,r)});for(v=0,u=255,r=0;r<=h;r++,u--,a++)o.push({r:a,g:v,b:u,color:s(a,v,u)});if(n===1024)return o;var d=[],c=0,g=1024/n;for(r=0;r<n;r++)d.push(o[Math.floor(c)]),c+=g;return d};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l={r:s>>16&255,g:s>>8&255,b:s&255,a:255};return s>16777215&&(l.a=s>>>24),l};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(38),l=e(399),n=function(o,h,r){var a=r,v=r,u=r;if(h!==0){var d=r<.5?r*(1+h):r+h-r*h,c=2*r-d;a=l(c,d,o+1/3),v=l(c,d,o),u=l(c,d,o-1/3)}var g=new s;return g.setGLTo(a,v,u,1)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(188),l=function(n,o){n===void 0&&(n=1),o===void 0&&(o=1);for(var h=[],r=0;r<=359;r++)h.push(s(r/359,n,o));return h};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(135),l=function(h,r,a,v,u,d,c,g){c===void 0&&(c=100),g===void 0&&(g=0);var m=g/c;return{r:s(h,v,m),g:s(r,u,m),b:s(a,d,m)}},n=function(h,r,a,v){return a===void 0&&(a=100),v===void 0&&(v=0),l(h.r,h.g,h.b,r.r,r.g,r.b,a,v)},o=function(h,r,a,v,u,d){return u===void 0&&(u=100),d===void 0&&(d=0),l(h.r,h.g,h.b,r,a,v,u,d)};t.exports={RGBWithRGB:l,ColorWithRGB:o,ColorWithColor:n}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(195),l=e(38),n=function(o,h){return o===void 0&&(o=0),h===void 0&&(h=255),new l(s(o,h),s(o,h),s(o,h))};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(398),l=function(n,o,h,r,a){return r===void 0&&(r=255),a===void 0&&(a="#"),a==="#"?"#"+((1<<24)+(n<<16)+(o<<8)+h).toString(16).slice(1,7):"0x"+s(r)+s(n)+s(o)+s(h)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={BitmapMask:e(310),GeometryMask:e(311)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={AddToDOM:e(142),DOMContentLoaded:e(400),GetInnerHeight:e(401),GetScreenOrientation:e(402),GetTarget:e(407),ParseXML:e(408),RemoveFromDOM:e(202),RequestAnimationFrame:e(386)};t.exports=s},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={EventEmitter:e(919)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(9),n=e(24),o=new s({Extends:l,initialize:function(){l.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});n.register("EventEmitter",o,"events"),t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(142),l=e(321),n=e(325),o=e(31),h=e(0),r=e(346),a=e(921),v=e(366),u=e(101),d=e(384),c=e(347),g=e(400),m=e(9),x=e(22),y=e(409),T=e(24),S=e(414),C=e(415),E=e(417),P=e(106),M=e(422),R=e(385),A=e(387),O=e(426),F=new h({initialize:function(w){this.config=new r(w),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new l(this),this.textures=new M(this),this.cache=new n(this),this.registry=new u(this),this.input=new y(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=c,this.scale=new C(this,this.config),this.sound=null,this.sound=O.create(this),this.loop=new R(this,this.config.fps),this.plugins=new S(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,g(this.boot.bind(this))},boot:function(){if(!T.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),v(this),a(this),d(this),s(this.canvas,this.config.parent),this.textures.once(P.READY,this.texturesReady,this),this.events.emit(x.BOOT)},texturesReady:function(){this.events.emit(x.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),A(this);var I=this.events;I.on(x.HIDDEN,this.onHidden,this),I.on(x.VISIBLE,this.onVisible,this),I.on(x.BLUR,this.onBlur,this),I.on(x.FOCUS,this.onFocus,this)},step:function(I,w){if(this.pendingDestroy)return this.runDestroy();var b=this.events;b.emit(x.PRE_STEP,I,w),b.emit(x.STEP,I,w),this.scene.update(I,w),b.emit(x.POST_STEP,I,w);var Y=this.renderer;Y.preRender(),b.emit(x.PRE_RENDER,Y,I,w),this.scene.render(Y),Y.postRender(),b.emit(x.POST_RENDER,Y,I,w)},headlessStep:function(I,w){if(this.pendingDestroy)return this.runDestroy();var b=this.events;b.emit(x.PRE_STEP,I,w),b.emit(x.STEP,I,w),this.scene.update(I,w),b.emit(x.POST_STEP,I,w),b.emit(x.PRE_RENDER),b.emit(x.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(x.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(x.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(I,w){w===void 0&&(w=!1),this.pendingDestroy=!0,this.removeCanvas=I,this.noReturn=w},runDestroy:function(){this.scene.destroy(),this.events.emit(x.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=F},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(142),l=function(n){var o=n.config;if(!(!o.parent||!o.domCreateContainer)){var h=document.createElement("div");h.style.cssText=["display: block;","width: "+n.scale.width+"px;","height: "+n.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+o.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),n.domContainer=h,s(h,o.parent)}};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="boot"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="destroy"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="dragend"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="dragenter"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="drag"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="dragleave"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="dragover"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="dragstart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="drop"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="gameout"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="gameover"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="gameobjectdown"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="dragend"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="dragenter"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="drag"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="dragleave"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="dragover"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="dragstart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="drop"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="gameobjectmove"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="gameobjectout"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="gameobjectover"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointerdown"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointermove"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointerout"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointerover"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointerup"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="wheel"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="gameobjectup"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="gameobjectwheel"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="boot"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="process"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="update"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointerdown"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointerdownoutside"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointermove"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointerout"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointerover"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointerup"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointerupoutside"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="wheel"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pointerlockchange"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="preupdate"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="shutdown"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="start"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="update"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="addfile"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="complete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="filecomplete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="filecomplete-"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="loaderror"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="load"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="fileprogress"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="postprocess"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="progress"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="start"},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};t.exports=s},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){if(!n.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var o=s.source[l];s.add("__BASE",l,0,0,o.width,o.height);for(var h=n.getElementsByTagName("SubTexture"),r,a=0;a<h.length;a++){var v=h[a].attributes,u=v.name.value,d=parseInt(v.x.value,10),c=parseInt(v.y.value,10),g=parseInt(v.width.value,10),m=parseInt(v.height.value,10);if(r=s.add(u,l,d,c,g,m),v.frameX){var x=Math.abs(parseInt(v.frameX.value,10)),y=Math.abs(parseInt(v.frameY.value,10)),T=parseInt(v.frameWidth.value,10),S=parseInt(v.frameHeight.value,10);r.setTrim(g,m,x,y,T,S)}}return s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.source[l];return s.add("__BASE",l,0,0,n.width,n.height),s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.source[l];return s.add("__BASE",l,0,0,n.width,n.height),s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(77),l=function(n,o,h){if(!h.frames&&!h.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=n.source[o];n.add("__BASE",o,0,0,r.width,r.height);for(var a=Array.isArray(h.textures)?h.textures[o].frames:h.frames,v,u=0;u<a.length;u++){var d=a[u];v=n.add(d.filename,o,d.frame.x,d.frame.y,d.frame.w,d.frame.h),d.trimmed&&v.setTrim(d.sourceSize.w,d.sourceSize.h,d.spriteSourceSize.x,d.spriteSourceSize.y,d.spriteSourceSize.w,d.spriteSourceSize.h),d.rotated&&(v.rotated=!0,v.updateUVsInverted());var c=d.anchor||d.pivot;c&&(v.customPivot=!0,v.pivotX=c.x,v.pivotY=c.y),v.customData=s(d)}for(var g in h)g!=="frames"&&(Array.isArray(h[g])?n.customData[g]=h[g].slice(0):n.customData[g]=h[g]);return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(77),l=function(n,o,h){if(!h.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=n.source[o];n.add("__BASE",o,0,0,r.width,r.height);var a=h.frames,v;for(var u in a)if(!!a.hasOwnProperty(u)){var d=a[u];v=n.add(u,o,d.frame.x,d.frame.y,d.frame.w,d.frame.h),d.trimmed&&v.setTrim(d.sourceSize.w,d.sourceSize.h,d.spriteSourceSize.x,d.spriteSourceSize.y,d.spriteSourceSize.w,d.spriteSourceSize.h),d.rotated&&(v.rotated=!0,v.updateUVsInverted());var c=d.anchor||d.pivot;c&&(v.customPivot=!0,v.pivotX=c.x,v.pivotY=c.y),v.customData=s(d)}for(var g in h)g!=="frames"&&(Array.isArray(h[g])?n.customData[g]=h[g].slice(0):n.customData[g]=h[g]);return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(2),l=function(n,o,h,r,a,v,u){var d=s(u,"frameWidth",null),c=s(u,"frameHeight",d);if(d===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=n.source[o];n.add("__BASE",o,0,0,g.width,g.height);var m=s(u,"startFrame",0),x=s(u,"endFrame",-1),y=s(u,"margin",0),T=s(u,"spacing",0),S=Math.floor((a-y+T)/(d+T)),C=Math.floor((v-y+T)/(c+T)),E=S*C;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",n.key),(m>E||m<-E)&&(m=0),m<0&&(m=E+m),x!==-1&&(E=m+(x+1));for(var P=y,M=y,R=0,A=0,O=0;O<E;O++){R=0,A=0;var F=P+d,I=M+c;F>a&&(R=F-a),I>v&&(A=I-v),n.add(O,o,h+P,r+M,d-R,c-A),P+=d+T,P+d>a&&(P=y,M+=c+T)}return n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(2),l=function(n,o,h){var r=s(h,"frameWidth",null),a=s(h,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var v=n.source[0];n.add("__BASE",0,0,0,v.width,v.height),s(h,"startFrame",0),s(h,"endFrame",-1);for(var u=s(h,"margin",0),d=s(h,"spacing",0),c=o.cutX,g=o.cutY,m=o.cutWidth,x=o.cutHeight,y=o.realWidth,T=o.realHeight,S=Math.floor((y-u+d)/(r+d)),C=Math.floor((T-u+d)/(a+d)),E=o.x,P=r-E,M=r-(y-m-E),R=o.y,A=a-R,O=a-(T-x-R),F,I=u,w=u,b=0,Y=o.sourceIndex,U=0;U<C;U++){for(var W=U===0,D=U===C-1,L=0;L<S;L++){var B=L===0,G=L===S-1;if(F=n.add(b,Y,c+I,g+w,r,a),B||W||G||D){var N=B?E:0,V=W?R:0,z=0,X=0;B&&(z+=r-P),G&&(z+=r-M),W&&(X+=a-A),D&&(X+=a-O);var H=r-z,K=a-X;F.cutWidth=H,F.cutHeight=K,F.setTrim(r,a,N,V,H,K)}I+=d,B?I+=P:G?I+=M:I+=r,b++}I=u,w+=d,W?w+=A:D?w+=O:w+=a}return n};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=0,s=function(n,o,h,r){var a=e-r.y-r.height;n.add(h,o,r.x,a,r.width,r.height)},l=function(n,o,h){var r=n.source[o];n.add("__BASE",o,0,0,r.width,r.height),e=r.height;for(var a=h.split(`
`),v=/^[ ]*(- )*(\w+)+[: ]+(.*)/,u="",d="",c={x:0,y:0,width:0,height:0},g=0;g<a.length;g++){var m=a[g].match(v);if(!!m){var x=m[1]==="- ",y=m[2],T=m[3];if(x&&(d!==u&&(s(n,o,d,c),u=d),c={x:0,y:0,width:0,height:0}),y==="name"){d=T;continue}switch(y){case"x":case"y":case"width":case"height":c[y]=parseInt(T,10);break}}}return d!==u&&s(n,o,d,c),n};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="complete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="decoded"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="decodedall"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="destroy"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="detune"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="detune"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="mute"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="rate"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="volume"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="loop"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="looped"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="mute"},function(t,f){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pan"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pauseall"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pause"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="play"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="rate"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="resumeall"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="resume"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="seek"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="stopall"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="stop"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="unlocked"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="volume"},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Events:e(75),DisplayList:e(1012),GameObjectCreator:e(16),GameObjectFactory:e(5),UpdateList:e(1040),Components:e(11),GetCalcMatrix:e(19),BuildGameObject:e(28),BuildGameObjectAnimation:e(439),GameObject:e(15),BitmapText:e(148),Blitter:e(213),Bob:e(440),Container:e(214),DOMElement:e(442),DynamicBitmapText:e(215),Extern:e(444),Graphics:e(216),Group:e(113),Image:e(125),Layer:e(219),Particles:e(1074),PathFollower:e(457),RenderTexture:e(221),RetroFont:e(1082),Rope:e(223),Sprite:e(73),Text:e(224),GetTextSize:e(458),MeasureText:e(460),TextStyle:e(459),TileSprite:e(225),Zone:e(129),Video:e(226),Shape:e(34),Arc:e(461),Curve:e(462),Ellipse:e(463),Grid:e(464),IsoBox:e(465),IsoTriangle:e(466),Line:e(467),Polygon:e(468),Rectangle:e(473),Star:e(474),Triangle:e(475),Factories:{Blitter:e(1130),Container:e(1131),DOMElement:e(1132),DynamicBitmapText:e(1133),Extern:e(1134),Graphics:e(1135),Group:e(1136),Image:e(1137),Layer:e(1138),Particles:e(1139),PathFollower:e(1140),RenderTexture:e(1141),Rope:e(1142),Sprite:e(1143),StaticBitmapText:e(1144),Text:e(1145),TileSprite:e(1146),Zone:e(1147),Video:e(1148),Arc:e(1149),Curve:e(1150),Ellipse:e(1151),Grid:e(1152),IsoBox:e(1153),IsoTriangle:e(1154),Line:e(1155),Polygon:e(1156),Rectangle:e(1157),Star:e(1158),Triangle:e(1159)},Creators:{Blitter:e(1160),Container:e(1161),DynamicBitmapText:e(1162),Graphics:e(1163),Group:e(1164),Image:e(1165),Layer:e(1166),Particles:e(1167),RenderTexture:e(1168),Rope:e(1169),Sprite:e(1170),StaticBitmapText:e(1171),Text:e(1172),TileSprite:e(1173),Zone:e(1174),Video:e(1175)}};s.Shader=e(229),s.Mesh=e(230),s.PointLight=e(150),s.Factories.Shader=e(1184),s.Factories.Mesh=e(1185),s.Factories.PointLight=e(1186),s.Creators.Shader=e(1187),s.Creators.Mesh=e(1188),s.Creators.PointLight=e(1189),s.Light=e(481),s.LightsManager=e(482),s.LightsPlugin=e(1190),t.exports=s},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(110),n=e(24),o=e(75),h=e(20),r=e(79),a=new s({Extends:l,initialize:function(u){l.call(this,u),this.sortChildrenFlag=!1,this.scene=u,this.systems=u.sys,this.events=u.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},addChildCallback:function(v){v.displayList&&v.displayList!==this&&v.removeFromDisplayList(),v.displayList||(this.queueDepthSort(),v.displayList=this,v.emit(o.ADDED_TO_SCENE,v,this.scene),this.events.emit(h.ADDED_TO_SCENE,v,this.scene))},removeChildCallback:function(v){this.queueDepthSort(),v.displayList=null,v.emit(o.REMOVED_FROM_SCENE,v,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,v,this.scene)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(v,u){return v._depth-u._depth},getChildren:function(){return this.list},shutdown:function(){for(var v=this.list,u=v.length;u--;)v[u].destroy(!0);v.length=0,this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});n.register("DisplayList",a,"displayList"),t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={CheckMatrix:e(209),MatrixToString:e(1014),ReverseColumns:e(1015),ReverseRows:e(1016),Rotate180:e(1017),RotateLeft:e(1018),RotateMatrix:e(147),RotateRight:e(1019),Translate:e(1020),TransposeMatrix:e(435)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(186),l=e(209),n=function(o){var h="";if(!l(o))return h;for(var r=0;r<o.length;r++){for(var a=0;a<o[r].length;a++){var v=o[r][a].toString();v!=="undefined"?h+=s(v,2):h+="?",a<o[r].length-1&&(h+=" |")}if(r<o.length-1){h+=`
`;for(var u=0;u<o[r].length;u++)h+="---",u<o[r].length-1&&(h+="+");h+=`
`}}return h};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.reverse()};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){for(var l=0;l<s.length;l++)s[l].reverse();return s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(147),l=function(n){return s(n,180)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(147),l=function(n){return s(n,90)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(147),l=function(n){return s(n,-90)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(178),l=e(179),n=function(o,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),r!==0&&(r<0?s(o,Math.abs(r)):l(o,r)),h!==0)for(var a=0;a<o.length;a++){var v=o[a];h<0?s(v,Math.abs(h)):l(v,h)}return o};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h){if(h===void 0&&(h=s),n>0){var r=n-s.length;if(r<=0)return null}if(!Array.isArray(l))return s.indexOf(l)===-1?(s.push(l),o&&o.call(h,l),l):null;for(var a=l.length-1;a>=0;)s.indexOf(l[a])!==-1&&l.splice(a,1),a--;if(a=l.length,a===0)return null;n>0&&a>r&&(l.splice(r),a=r);for(var v=0;v<a;v++){var u=l[v];s.push(u),o&&o.call(h,u)}return l};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h,r){if(n===void 0&&(n=0),r===void 0&&(r=s),o>0){var a=o-s.length;if(a<=0)return null}if(!Array.isArray(l))return s.indexOf(l)===-1?(s.splice(n,0,l),h&&h.call(r,l),l):null;for(var v=l.length-1;v>=0;)s.indexOf(l[v])!==-1&&l.pop(),v--;if(v=l.length,v===0)return null;o>0&&v>a&&(l.splice(a),v=a);for(var u=v-1;u>=0;u--){var d=l[u];s.splice(n,0,d),h&&h.call(r,d)}return l};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.indexOf(l);return n!==-1&&n<s.length&&(s.splice(n,1),s.push(l)),l};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(78),l=function(n,o,h,r,a){r===void 0&&(r=0),a===void 0&&(a=n.length);var v=0;if(s(n,r,a))for(var u=r;u<a;u++){var d=n[u];d[o]===h&&v++}return v};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o,h=[null];for(o=3;o<arguments.length;o++)h.push(arguments[o]);for(o=0;o<s.length;o++)h[0]=s[o],l.apply(n,h);return s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(78),l=function(n,o,h,r,a){if(r===void 0&&(r=0),a===void 0&&(a=n.length),s(n,r,a)){var v,u=[null];for(v=5;v<arguments.length;v++)u.push(arguments[v]);for(v=r;v<a;v++)u[0]=n[v],o.apply(h,u)}return n};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.indexOf(l);if(n>0){var o=s[n-1],h=s.indexOf(o);s[n]=o,s[h]=l}return s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=s.indexOf(l);if(o===-1||n<0||n>=s.length)throw new Error("Supplied index out of bounds");return o!==n&&(s.splice(o,1),s.splice(n,0,l)),l};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.indexOf(l);if(n!==-1&&n<s.length-1){var o=s[n+1],h=s.indexOf(o);s[n]=o,s[h]=l}return s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){if(l===n)return s;var o=s.indexOf(l),h=s.indexOf(n);if(o<0||h<0)throw new Error("Supplied items must be elements of the same array");return o>h||(s.splice(o,1),h===s.length-1?s.push(l):s.splice(h,0,l)),s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){if(l===n)return s;var o=s.indexOf(l),h=s.indexOf(n);if(o<0||h<0)throw new Error("Supplied items must be elements of the same array");return o<h||(s.splice(o,1),h===0?s.unshift(l):s.splice(h,0,l)),s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(363),l=function(n,o,h){n===void 0&&(n=0),o===void 0&&(o=null),h===void 0&&(h=1),o===null&&(o=n,n=0);for(var r=[],a=Math.max(s((o-n)/(h||1)),0),v=0;v<a;v++)r.push(n),n+=h;return r};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(74),l=function(n,o,h,r){if(r===void 0&&(r=n),o<0||o>n.length-1)throw new Error("Index out of bounds");var a=s(n,o);return h&&h.call(r,a),a};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(78),l=function(n,o,h,r,a){if(o===void 0&&(o=0),h===void 0&&(h=n.length),a===void 0&&(a=n),s(n,o,h)){var v=h-o,u=n.splice(o,v);if(r)for(var d=0;d<u.length;d++){var c=u[d];r.call(a,c)}return u}else return[]};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(74),l=function(n,o,h){o===void 0&&(o=0),h===void 0&&(h=n.length);var r=o+Math.floor(Math.random()*h);return s(n,r)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=s.indexOf(l),h=s.indexOf(n);return o!==-1&&h===-1?(s[o]=n,!0):!1};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.indexOf(l);return n!==-1&&n>0&&(s.splice(n,1),s.unshift(l)),l};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(78),l=function(n,o,h,r,a){if(r===void 0&&(r=0),a===void 0&&(a=n.length),s(n,r,a))for(var v=r;v<a;v++){var u=n[v];u.hasOwnProperty(o)&&(u[o]=h)}return n};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){if(l===n)return s;var o=s.indexOf(l),h=s.indexOf(n);if(o<0||h<0)throw new Error("Supplied items must be elements of the same array");return s[o]=n,s[h]=l,s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(211),n=e(24),o=e(20),h=new s({Extends:l,initialize:function(a){l.call(this),this.checkQueue=!0,this.scene=a,this.systems=a.sys,a.sys.events.once(o.BOOT,this.boot,this),a.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(o.PRE_UPDATE,this.update,this),r.on(o.UPDATE,this.sceneUpdate,this),r.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,a){for(var v=this._active,u=v.length,d=0;d<u;d++){var c=v[d];c.active&&c.preUpdate.call(c,r,a)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var a=this.systems.events;a.off(o.PRE_UPDATE,this.update,this),a.off(o.UPDATE,this.sceneUpdate,this),a.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});n.register("UpdateList",h,"updateList"),t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="add"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="remove"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){if(n===void 0&&(n=!1),o===void 0)return o={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},o;var h=s.text,r=h.length,a=s.maxWidth,v=s.wordWrapCharCode,u=Number.MAX_VALUE,d=Number.MAX_VALUE,c=0,g=0,m=s.fontData.chars,x=s.fontData.lineHeight,y=s.letterSpacing,T=0,S=0,C=0,E=null,P=s._align,M=0,R=0,A=s.fontSize/s.fontData.size,O=A*s.scaleX,F=A*s.scaleY,I=null,w=0,b=[],Y=Number.MAX_VALUE,U=0,W=0,D=0,L,B=[],G=[],N=null;if(a>0){for(L=0;L<r;L++){if(C=h.charCodeAt(L),C===10){N!==null&&(B.push({word:N.word,i:N.i,x:N.x*O,y:N.y*F,w:N.w*O,h:N.h*F,cr:!0}),N=null),T=0,S+=x,I=null;continue}if(E=m[C],!!E){if(I!==null)var V=E.kerning[w];C===v?N!==null&&(B.push({word:N.word,i:N.i,x:N.x*O,y:N.y*F,w:N.w*O,h:N.h*F,cr:!1}),N=null):(N===null&&(N={word:"",i:L,x:T,y:S,w:0,h:x,cr:!1}),N.word=N.word.concat(h[L]),N.w+=E.xOffset+E.xAdvance+(V!==void 0?V:0)),T+=E.xAdvance+y,I=E,w=C}}N!==null&&B.push({word:N.word,i:N.i,x:N.x*O,y:N.y*F,w:N.w*O,h:N.h*F,cr:!1}),T=0,S=0,I=null,w=0;var z,X=0,H=[];for(L=0;L<B.length;L++){var K=B[L],J=K.x,Z=K.x+K.w;if(z){var Q=J-(z.x+z.w);X=J-(Q+z.w),z=null}var q=J-X,k=Z-X;q>a||k>a?(H.push(K.i-1),K.cr?(H.push(K.i+K.word.length),X=0,z=null):z=K):K.cr&&(H.push(K.i+K.word.length),X=0,z=null)}var _=function(Mt,Et,Zt){return Mt.substr(0,Et)+Zt+Mt.substr(Et+1)};for(L=H.length-1;L>=0;L--)h=_(h,H[L],`
`);o.wrappedText=h,r=h.length,B=[],N=null}var ot=0;for(L=0;L<r;L++){if(C=h.charCodeAt(L),C===10){N!==null&&(B.push({word:N.word,i:N.i,x:N.x*O,y:N.y*F,w:N.w*O,h:N.h*F}),N=null),T=0,S+=x,I=null,b[W]=D,D>U&&(U=D),D<Y&&(Y=D),W++,D=0;continue}if(E=m[C],!!E){if(M=T,R=S,I!==null){var nt=E.kerning[w];M+=nt!==void 0?nt:0}u>M&&(u=M),d>R&&(d=R);var et=M+E.xAdvance,j=R+x;c<et&&(c=et),g<j&&(g=j);var ht=E.xOffset+E.xAdvance+(nt!==void 0?nt:0);C===v?N!==null&&(B.push({word:N.word,i:N.i,x:N.x*O,y:N.y*F,w:N.w*O,h:N.h*F}),N=null):(N===null&&(N={word:"",i:ot,x:T,y:S,w:0,h:x}),N.word=N.word.concat(h[L]),N.w+=ht),G.push({i:ot,char:h[L],code:C,x:(E.xOffset+T)*A,y:(E.yOffset+S)*A,w:E.width*A,h:E.height*A,t:S*A,r:et*A,b:x*A,line:W,glyph:E}),T+=E.xAdvance+y,I=E,w=C,D=et*A,ot++}}if(N!==null&&B.push({word:N.word,i:N.i,x:N.x*O,y:N.y*F,w:N.w*O,h:N.h*F}),b[W]=D,D>U&&(U=D),D<Y&&(Y=D),P>0)for(var it=0;it<G.length;it++){var at=G[it];if(P===1){var Kt=(U-b[at.line])/2;at.x+=Kt,at.r+=Kt}else if(P===2){var Jt=U-b[at.line];at.x+=Jt,at.r+=Jt}}var Tt=o.local,dt=o.global,At=o.lines;return Tt.x=u*A,Tt.y=d*A,Tt.width=c*A,Tt.height=g*A,dt.x=s.x-s._displayOriginX+u*O,dt.y=s.y-s._displayOriginY+d*F,dt.width=c*O,dt.height=g*F,At.shortest=Y,At.longest=U,At.lengths=b,l&&(Tt.x=Math.ceil(Tt.x),Tt.y=Math.ceil(Tt.y),Tt.width=Math.ceil(Tt.width),Tt.height=Math.ceil(Tt.height),dt.x=Math.ceil(dt.x),dt.y=Math.ceil(dt.y),dt.width=Math.ceil(dt.width),dt.height=Math.ceil(dt.height),At.shortest=Math.ceil(Y),At.longest=Math.ceil(U)),n&&(s._displayOriginX=s.originX*Tt.width,s._displayOriginY=s.originY*Tt.height,dt.x=s.x-s._displayOriginX*s.scaleX,dt.y=s.y-s._displayOriginY*s.scaleY,l&&(dt.x=Math.ceil(dt.x),dt.y=Math.ceil(dt.y))),o.words=B,o.characters=G,o.lines.height=x,o.scale=A,o.scaleX=s.scaleX,o.scaleY=s.scaleY,o};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(212),l=function(n,o,h,r,a,v,u){var d=n.sys.textures.get(h),c=d.get(r),g=n.sys.cache.xml.get(a);if(c&&g){var m=s(g,c,v,u,d);return n.sys.cache.bitmapFont.add(o,{data:m,texture:h,frame:r,fromAtlas:!0}),!0}else return!1};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1046),l=e(1048),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1047),l=e(19),n=e(12),o=function(h,r,a,v){var u=r._text,d=u.length;if(d!==0){a.addToRenderList(r);var c=h.pipelines.set(r.pipeline,r),g=l(r,a,v).calc,m=a.roundPixels,x=a.alpha,y=r.charColors,T=r.tintFill,S=n.getTintAppendFloatAlpha,C=S(r.tintTopLeft,x*r._alphaTL),E=S(r.tintTopRight,x*r._alphaTR),P=S(r.tintBottomLeft,x*r._alphaBL),M=S(r.tintBottomRight,x*r._alphaBR),R=r.frame.glTexture,A=c.setGameObject(r),O=r.getTextBounds(!1),F,I,w,b=O.characters,Y=r.dropShadowX,U=r.dropShadowY,W=Y!==0||U!==0;if(h.pipelines.preBatch(r),W){var D=r.dropShadowColor,L=r.dropShadowAlpha,B=S(D,x*L*r._alphaTL),G=S(D,x*L*r._alphaTR),N=S(D,x*L*r._alphaBL),V=S(D,x*L*r._alphaBR);for(F=0;F<b.length;F++)I=b[F],w=I.glyph,!(I.code===32||w.width===0||w.height===0)&&s(c,r,I,w,Y,U,g,m,B,G,N,V,1,R,A)}for(F=0;F<b.length;F++)if(I=b[F],w=I.glyph,!(I.code===32||w.width===0||w.height===0))if(y[I.i]){var z=y[I.i],X=z.tintEffect,H=S(z.tintTL,x*r._alphaTL),K=S(z.tintTR,x*r._alphaTR),J=S(z.tintBL,x*r._alphaBL),Z=S(z.tintBR,x*r._alphaBR);s(c,r,I,w,0,0,g,m,H,K,J,Z,X,R,A)}else s(c,r,I,w,0,0,g,m,C,E,P,M,T,R,A);h.pipelines.postBatch(r)}};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h,r,a,v,u,d,c,g,m,x,y){var T=n.x-l.displayOriginX+h,S=n.y-l.displayOriginY+r,C=T+n.w,E=S+n.h,P=a.getXRound(T,S,v),M=a.getYRound(T,S,v),R=a.getXRound(T,E,v),A=a.getYRound(T,E,v),O=a.getXRound(C,E,v),F=a.getYRound(C,E,v),I=a.getXRound(C,S,v),w=a.getYRound(C,S,v);s.batchQuad(l,P,M,R,A,O,F,I,w,o.u0,o.v0,o.u1,o.v1,u,d,c,g,m,x,y)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(30),l=function(n,o,h,r){var a=o._text,v=a.length,u=n.currentContext;if(!(v===0||!s(n,u,o,h,r))){h.addToRenderList(o);var d=o.fromAtlas?o.frame:o.texture.frames.__BASE,c=o.fontData.chars,g=o.fontData.lineHeight,m=o._letterSpacing,x=0,y=0,T=0,S=null,C=0,E=0,P=0,M=0,R=0,A=0,O=null,F=0,I=d.source.image,w=d.cutX,b=d.cutY,Y=o._fontSize/o.fontData.size,U=o._align,W=0,D=0,L=o.getTextBounds(!1);o.maxWidth>0&&(a=L.wrappedText,v=a.length);var B=o._bounds.lines;U===1?D=(B.longest-B.lengths[0])/2:U===2&&(D=B.longest-B.lengths[0]),u.translate(-o.displayOriginX,-o.displayOriginY);for(var G=h.roundPixels,N=0;N<v;N++){if(T=a.charCodeAt(N),T===10){W++,U===1?D=(B.longest-B.lengths[W])/2:U===2&&(D=B.longest-B.lengths[W]),x=0,y+=g,O=null;continue}if(S=c[T],!!S){if(C=w+S.x,E=b+S.y,P=S.width,M=S.height,R=S.xOffset+x,A=S.yOffset+y,O!==null){var V=S.kerning[F];R+=V!==void 0?V:0}R*=Y,A*=Y,R+=D,x+=S.xAdvance+m,O=S,F=T,!(P===0||M===0||T===32)&&(G&&(R=Math.round(R),A=Math.round(A)),u.save(),u.translate(R,A),u.scale(Y,Y),u.drawImage(I,C,E,P,M,0,0,P,M),u.restore())}}u.restore()}};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1050),l=e(1051),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(25),l=e(12),n=new s,o=function(h,r,a,v){var u=r.getRenderList();if(u.length!==0){var d=a.alpha*r.alpha;if(d!==0){a.addToRenderList(r);var c=h.pipelines.set(this.pipeline,r),g=a.scrollX*r.scrollFactorX,m=a.scrollY*r.scrollFactorY,x=n.copyFrom(a.matrix);v&&(x.multiplyWithOffset(v,-g,-m),g=0,m=0);var y=r.x-g,T=r.y-m,S=-1,C=!1,E=a.roundPixels;h.pipelines.preBatch(r);for(var P=0;P<u.length;P++){var M=u[P],R=M.frame,A=M.alpha*d;if(A!==0){var O=R.width,F=R.height,I=y+M.x+R.x,w=T+M.y+R.y;M.flipX&&(O*=-1,I+=R.width),M.flipY&&(F*=-1,w+=R.height);var b=I+O,Y=w+F,U=x.getX(I,w),W=x.getY(I,w),D=x.getX(b,Y),L=x.getY(b,Y),B=l.getTintAppendFloatAlpha(M.tint,A);if(R.sourceIndex!==S){var G=c.setGameObject(r,R);S=R.sourceIndex}E&&(U=Math.round(U),W=Math.round(W),D=Math.round(D),L=Math.round(L)),c.batchQuad(r,U,W,U,L,D,L,D,W,R.u0,R.v0,R.u1,R.v1,B,B,B,B,C,R.glTexture,G)&&(S=-1)}}h.pipelines.postBatch(r)}}};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h=l.getRenderList();if(h.length!==0){var r=s.currentContext,a=n.alpha*l.alpha;if(a!==0){n.addToRenderList(l),r.globalCompositeOperation=s.blendModes[l.blendMode],r.imageSmoothingEnabled=!(!s.antialias||l.frame.source.scaleMode);var v=l.x-n.scrollX*l.scrollFactorX,u=l.y-n.scrollY*l.scrollFactorY;r.save(),o&&o.copyToContext(r);for(var d=n.roundPixels,c=0;c<h.length;c++){var g=h[c],m=g.flipX||g.flipY,x=g.frame,y=x.canvasData,T=x.x,S=x.y,C=1,E=1,P=g.alpha*a;P!==0&&(r.globalAlpha=P,m?(g.flipX&&(C=-1,T-=y.width),g.flipY&&(E=-1,S-=y.height),r.save(),r.translate(g.x+v,g.y+u),r.scale(C,E),r.drawImage(x.source.image,y.x,y.y,y.width,y.height,T,S,y.width,y.height),r.restore()):(d&&(T=Math.round(T),S=Math.round(S)),r.drawImage(x.source.image,y.x,y.y,y.width,y.height,T+g.x+v,S+g.y+u,y.width,y.height)))}r.restore()}}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1053),l=e(1054),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){n.addToRenderList(l);var h=l.list,r=h.length;if(r!==0){var a=l.localTransform;o?(a.loadIdentity(),a.multiply(o),a.translate(l.x,l.y),a.rotate(l.rotation),a.scale(l.scaleX,l.scaleY)):a.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),s.pipelines.preBatch(l);var v=l.blendMode!==-1;v||s.setBlendMode(0);for(var u=l.alpha,d=l.scrollFactorX,c=l.scrollFactorY,g=0;g<r;g++){var m=h[g];if(!!m.willRender(n)){var x,y,T,S;if(m.alphaTopLeft!==void 0)x=m.alphaTopLeft,y=m.alphaTopRight,T=m.alphaBottomLeft,S=m.alphaBottomRight;else{var C=m.alpha;x=C,y=C,T=C,S=C}var E=m.scrollFactorX,P=m.scrollFactorY;!v&&m.blendMode!==s.currentBlendMode&&s.setBlendMode(m.blendMode);var M=m.mask;M&&M.preRenderWebGL(s,m,n);var R=m.type;R!==s.currentType&&(s.newType=!0,s.currentType=R),s.nextTypeMatch=g<r-1?h[g+1].type===s.currentType:!1,m.setScrollFactor(E*d,P*c),m.setAlpha(x*u,y*u,T*u,S*u),m.renderWebGL(s,m,n,a),m.setAlpha(x,y,T,S),m.setScrollFactor(E,P),M&&M.postRenderWebGL(s,n),s.newType=!1}}s.pipelines.postBatch(l)}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){n.addToRenderList(l);var h=l.list;if(h.length!==0){var r=l.localTransform;o?(r.loadIdentity(),r.multiply(o),r.translate(l.x,l.y),r.rotate(l.rotation),r.scale(l.scaleX,l.scaleY)):r.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var a=l.blendMode!==-1;a||s.setBlendMode(0);var v=l._alpha,u=l.scrollFactorX,d=l.scrollFactorY;l.mask&&l.mask.preRenderCanvas(s,null,n);for(var c=0;c<h.length;c++){var g=h[c];if(!!g.willRender(n)){var m=g.alpha,x=g.scrollFactorX,y=g.scrollFactorY;!a&&g.blendMode!==s.currentBlendMode&&s.setBlendMode(g.blendMode),g.setScrollFactor(x*u,y*d),g.setAlpha(m*v),g.renderCanvas(s,g,n,r),g.setAlpha(m),g.setScrollFactor(x,y)}}l.mask&&l.mask.postRenderCanvas(s)}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(443),l=e(443),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1058),l=e(1059),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=e(25),n=e(12),o=new l,h=function(r,a,v,u){var d=a.text,c=d.length;if(c!==0){v.addToRenderList(a);var g=r.pipelines.set(a.pipeline,a),m=s(a,v,u),x=m.sprite,y=m.calc,T=o,S=a.cropWidth>0||a.cropHeight>0;S&&(g.flush(),r.pushScissor(y.tx,y.ty,a.cropWidth*y.scaleX,a.cropHeight*y.scaleY));var C=a.frame,E=C.glTexture,P=a.tintFill,M=n.getTintAppendFloatAlpha(a.tintTopLeft,v.alpha*a._alphaTL),R=n.getTintAppendFloatAlpha(a.tintTopRight,v.alpha*a._alphaTR),A=n.getTintAppendFloatAlpha(a.tintBottomLeft,v.alpha*a._alphaBL),O=n.getTintAppendFloatAlpha(a.tintBottomRight,v.alpha*a._alphaBR),F=g.setGameObject(a),I=0,w=0,b=0,Y=0,U=a.letterSpacing,W,D=0,L=0,B,G=a.scrollX,N=a.scrollY,V=a.fontData,z=V.chars,X=V.lineHeight,H=a.fontSize/V.size,K=0,J=a._align,Z=0,Q=0,q=a.getTextBounds(!1);a.maxWidth>0&&(d=q.wrappedText,c=d.length);var k=a._bounds.lines;J===1?Q=(k.longest-k.lengths[0])/2:J===2&&(Q=k.longest-k.lengths[0]);var _=v.roundPixels,ot=a.displayCallback,nt=a.callbackData;r.pipelines.preBatch(a);for(var et=0;et<c;et++){if(b=d.charCodeAt(et),b===10){Z++,J===1?Q=(k.longest-k.lengths[Z])/2:J===2&&(Q=k.longest-k.lengths[Z]),I=0,w+=X,B=null;continue}if(W=z[b],!!W){D=W.width,L=W.height;var j=W.xOffset+I-G,ht=W.yOffset+w-N;if(B!==null){var it=W.kerning[Y];j+=it!==void 0?it:0}if(I+=W.xAdvance+U,B=W,Y=b,!(D===0||L===0||b===32)){if(H=a.fontSize/a.fontData.size,K=0,ot){nt.color=0,nt.tint.topLeft=M,nt.tint.topRight=R,nt.tint.bottomLeft=A,nt.tint.bottomRight=O,nt.index=et,nt.charCode=b,nt.x=j,nt.y=ht,nt.scale=H,nt.rotation=K,nt.data=W.data;var at=ot(nt);j=at.x,ht=at.y,H=at.scale,K=at.rotation,at.color?(M=at.color,R=at.color,A=at.color,O=at.color):(M=at.tint.topLeft,R=at.tint.topRight,A=at.tint.bottomLeft,O=at.tint.bottomRight),M=n.getTintAppendFloatAlpha(M,v.alpha*a._alphaTL),R=n.getTintAppendFloatAlpha(R,v.alpha*a._alphaTR),A=n.getTintAppendFloatAlpha(A,v.alpha*a._alphaBL),O=n.getTintAppendFloatAlpha(O,v.alpha*a._alphaBR)}j*=H,ht*=H,j-=a.displayOriginX,ht-=a.displayOriginY,j+=Q,T.applyITRS(j,ht,K,H,H),y.multiply(T,x);var Kt=W.u0,Jt=W.v0,Tt=W.u1,dt=W.v1,At=D,Mt=L,Et=x.e,Zt=x.f,Xe=Mt*x.c+x.e,We=Mt*x.d+x.f,He=At*x.a+Mt*x.c+x.e,$e=At*x.b+Mt*x.d+x.f,Ke=At*x.a+x.e,Je=At*x.b+x.f;_&&(Et=Math.round(Et),Zt=Math.round(Zt),Xe=Math.round(Xe),We=Math.round(We),He=Math.round(He),$e=Math.round($e),Ke=Math.round(Ke),Je=Math.round(Je)),g.batchQuad(a,Et,Zt,Xe,We,He,$e,Ke,Je,Kt,Jt,Tt,dt,M,R,A,O,P,E,F)}}}S&&(g.flush(),r.popScissor()),r.pipelines.postBatch(a)}};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(30),l=function(n,o,h,r){var a=o._text,v=a.length,u=n.currentContext;if(!(v===0||!s(n,u,o,h,r))){h.addToRenderList(o);var d=o.fromAtlas?o.frame:o.texture.frames.__BASE,c=o.displayCallback,g=o.callbackData,m=o.fontData.chars,x=o.fontData.lineHeight,y=o._letterSpacing,T=0,S=0,C=0,E=null,P=0,M=0,R=0,A=0,O=0,F=0,I=null,w=0,b=o.frame.source.image,Y=d.cutX,U=d.cutY,W=0,D=0,L=o._fontSize/o.fontData.size,B=o._align,G=0,N=0;o.getTextBounds(!1);var V=o._bounds.lines;B===1?N=(V.longest-V.lengths[0])/2:B===2&&(N=V.longest-V.lengths[0]),u.translate(-o.displayOriginX,-o.displayOriginY);var z=h.roundPixels;o.cropWidth>0&&o.cropHeight>0&&(u.beginPath(),u.rect(0,0,o.cropWidth,o.cropHeight),u.clip());for(var X=0;X<v;X++){if(D=L,W=0,C=a.charCodeAt(X),C===10){G++,B===1?N=(V.longest-V.lengths[G])/2:B===2&&(N=V.longest-V.lengths[G]),T=0,S+=x,I=null;continue}if(E=m[C],!!E){if(P=Y+E.x,M=U+E.y,R=E.width,A=E.height,O=E.xOffset+T-o.scrollX,F=E.yOffset+S-o.scrollY,I!==null){var H=E.kerning[w];O+=H!==void 0?H:0}if(c){g.index=X,g.charCode=C,g.x=O,g.y=F,g.scale=D,g.rotation=W,g.data=E.data;var K=c(g);O=K.x,F=K.y,D=K.scale,W=K.rotation}O*=D,F*=D,O+=N,T+=E.xAdvance+y,I=E,w=C,!(R===0||A===0||C===32)&&(z&&(O=Math.round(O),F=Math.round(F)),u.save(),u.translate(O,F),u.rotate(W),u.scale(D,D),u.drawImage(b,P,M,R,A,0,0,R,A),u.restore())}}u.restore()}};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1061),l=e(1062),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=function(n,o,h,r){n.pipelines.clear();var a=s(o,h,r).calc;o.render.call(o,n,h,a),n.pipelines.rebind()};t.exports=l},function(t,f){},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1064),l=e(448),l=e(448),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(217),l=e(19),n=e(25),o=e(12),h=function(d,c,g){this.x=d,this.y=c,this.width=g},r=function(d,c,g){this.points=[],this.pointsLength=1,this.points[0]=new h(d,c,g)},a=[],v=new n,u=function(d,c,g,m){if(c.commandBuffer.length!==0){g.addToRenderList(c);var x=d.pipelines.set(c.pipeline,c);d.pipelines.preBatch(c);for(var y=l(c,g,m).calc,T=v.loadIdentity(),S=c.commandBuffer,C=g.alpha*c.alpha,E=1,P=x.fillTint,M=x.strokeTint,R=0,A=0,O=0,F=.01,I=Math.PI*2,w,b=[],Y=0,U=!0,W=null,D=o.getTintAppendFloatAlpha,L=0;L<S.length;L++)switch(w=S[L],w){case s.BEGIN_PATH:{b.length=0,W=null,U=!0;break}case s.CLOSE_PATH:{U=!1,W&&W.points.length&&W.points.push(W.points[0]);break}case s.FILL_PATH:{for(Y=0;Y<b.length;Y++)x.batchFillPath(b[Y].points,T,y);break}case s.STROKE_PATH:{for(Y=0;Y<b.length;Y++)x.batchStrokePath(b[Y].points,E,U,T,y);break}case s.LINE_STYLE:{E=S[++L];var B=S[++L],G=S[++L]*C,N=D(B,G);M.TL=N,M.TR=N,M.BL=N,M.BR=N;break}case s.FILL_STYLE:{var V=S[++L],z=S[++L]*C,X=D(V,z);P.TL=X,P.TR=X,P.BL=X,P.BR=X;break}case s.GRADIENT_FILL_STYLE:{var H=S[++L]*C,K=S[++L]*C,J=S[++L]*C,Z=S[++L]*C;P.TL=D(S[++L],H),P.TR=D(S[++L],K),P.BL=D(S[++L],J),P.BR=D(S[++L],Z);break}case s.GRADIENT_LINE_STYLE:{E=S[++L];var Q=S[++L]*C;M.TL=D(S[++L],Q),M.TR=D(S[++L],Q),M.BL=D(S[++L],Q),M.BR=D(S[++L],Q);break}case s.ARC:{var q=0,k=S[++L],_=S[++L],ot=S[++L],nt=S[++L],et=S[++L],j=S[++L],ht=S[++L];for(et-=nt,j?et<-I?et=-I:et>0&&(et=-I+et%I):et>I?et=I:et<0&&(et=I+et%I),W===null&&(W=new r(k+Math.cos(nt)*ot,_+Math.sin(nt)*ot,E),b.push(W),q+=F);q<1+ht;)O=et*q+nt,R=k+Math.cos(O)*ot,A=_+Math.sin(O)*ot,W.points.push(new h(R,A,E)),q+=F;O=et+nt,R=k+Math.cos(O)*ot,A=_+Math.sin(O)*ot,W.points.push(new h(R,A,E));break}case s.FILL_RECT:{x.batchFillRect(S[++L],S[++L],S[++L],S[++L],T,y);break}case s.FILL_TRIANGLE:{x.batchFillTriangle(S[++L],S[++L],S[++L],S[++L],S[++L],S[++L],T,y);break}case s.STROKE_TRIANGLE:{x.batchStrokeTriangle(S[++L],S[++L],S[++L],S[++L],S[++L],S[++L],E,T,y);break}case s.LINE_TO:{W!==null?W.points.push(new h(S[++L],S[++L],E)):(W=new r(S[++L],S[++L],E),b.push(W));break}case s.MOVE_TO:{W=new r(S[++L],S[++L],E),b.push(W);break}case s.SAVE:{a.push(T.copyToArray());break}case s.RESTORE:{T.copyFromArray(a.pop());break}case s.TRANSLATE:{k=S[++L],_=S[++L],T.translate(k,_);break}case s.SCALE:{k=S[++L],_=S[++L],T.scale(k,_);break}case s.ROTATE:{T.rotate(S[++L]);break}}d.pipelines.postBatch(c)}};t.exports=u},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1066),l=e(1067),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){n.addToRenderList(l),l.pipeline.batchSprite(l,n,o)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){n.addToRenderList(l),s.batchSprite(l,l.frame,n,o)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1069),l=e(1070),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){n.addToRenderList(l),this.pipeline.batchSprite(l,n,o)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){n.addToRenderList(l),s.batchSprite(l,l.frame,n,o)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1072),l=e(1073),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=l.list,h=o.length;if(h!==0){l.depthSort(),s.pipelines.preBatch(l);var r=l.blendMode!==-1;r||s.setBlendMode(0);for(var a=l.alpha,v=0;v<h;v++){var u=o[v];if(!!u.willRender(n)){var d,c,g,m;if(u.alphaTopLeft!==void 0)d=u.alphaTopLeft,c=u.alphaTopRight,g=u.alphaBottomLeft,m=u.alphaBottomRight;else{var x=u.alpha;d=x,c=x,g=x,m=x}!r&&u.blendMode!==s.currentBlendMode&&s.setBlendMode(u.blendMode);var y=u.mask;y&&y.preRenderWebGL(s,u,n);var T=u.type;T!==s.currentType&&(s.newType=!0,s.currentType=T),s.nextTypeMatch=v<h-1?o[v+1].type===s.currentType:!1,u.setAlpha(d*a,c*a,g*a,m*a),u.renderWebGL(s,u,n),u.setAlpha(d,c,g,m),y&&y.postRenderWebGL(s,n),s.newType=!1}}s.pipelines.postBatch(l)}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=l.list;if(o.length!==0){l.depthSort();var h=l.blendMode!==-1;h||s.setBlendMode(0);var r=l._alpha;l.mask&&l.mask.preRenderCanvas(s,null,n);for(var a=0;a<o.length;a++){var v=o[a];if(!!v.willRender(n)){var u=v.alpha;!h&&v.blendMode!==s.currentBlendMode&&s.setBlendMode(v.blendMode),v.setAlpha(u*r),v.renderCanvas(s,v,n),v.setAlpha(u)}}l.mask&&l.mask.postRenderCanvas(s)}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={EmitterOp:e(449),GravityWell:e(450),Particle:e(451),ParticleEmitter:e(452),ParticleEmitterManager:e(220),Zones:e(1078)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1076),l=e(1077),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(25),l=e(12),n=new s,o=new s,h=new s,r=new s,a=function(v,u,d,c){var g=u.emitters.list,m=g.length;if(m!==0){var x=v.pipelines.set(u.pipeline),y=n,T=o,S=h,C=r;c?(C.loadIdentity(),C.multiply(c),C.translate(u.x,u.y),C.rotate(u.rotation),C.scale(u.scaleX,u.scaleY)):C.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);var E=d.roundPixels,P=u.defaultFrame.glTexture,M=l.getTintAppendFloatAlpha,R=x.setGameObject(u,u.defaultFrame);v.pipelines.preBatch(u);for(var A=0;A<m;A++){var O=g[A],F=O.alive,I=F.length;if(!(!O.visible||I===0)){d.addToRenderList(O);var w=O.scrollFactorX,b=O.scrollFactorY;v.setBlendMode(O.blendMode),O.mask&&(O.mask.preRenderWebGL(v,O,d),v.pipelines.set(u.pipeline));for(var Y=0,U=0;U<I;U++){var W=F[U],D=W.alpha*d.alpha;if(!(D<=0)){S.applyITRS(W.x,W.y,W.rotation,W.scaleX,W.scaleY),y.copyFrom(d.matrix),y.multiplyWithOffset(C,-d.scrollX*w,-d.scrollY*b),S.e=W.x,S.f=W.y,y.multiply(S,T);var L=W.frame,B=-L.halfWidth,G=-L.halfHeight,N=B+L.width,V=G+L.height,z=T.getXRound(B,G,E),X=T.getYRound(B,G,E),H=T.getXRound(B,V,E),K=T.getYRound(B,V,E),J=T.getXRound(N,V,E),Z=T.getYRound(N,V,E),Q=T.getXRound(N,G,E),q=T.getYRound(N,G,E),k=M(W.tint,D);x.batchQuad(O,z,X,H,K,J,Z,Q,q,L.u0,L.v0,L.u1,L.v1,k,k,k,k,Y,P,R)}}O.mask&&O.mask.postRenderWebGL(v,d)}}v.pipelines.postBatch(u)}};t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(25),l=new s,n=new s,o=new s,h=new s,r=function(a,v,u,d){var c=v.emitters.list,g=c.length;if(g!==0){var m=l.copyFrom(u.matrix),x=n,y=o,T=h;d?(T.loadIdentity(),T.multiply(d),T.translate(v.x,v.y),T.rotate(v.rotation),T.scale(v.scaleX,v.scaleY)):T.applyITRS(v.x,v.y,v.rotation,v.scaleX,v.scaleY);for(var S=a.currentContext,C=u.roundPixels,E=0;E<g;E++){var P=c[E],M=P.alive,R=M.length;if(!(!P.visible||R===0)){u.addToRenderList(P);var A=P.scrollFactorX,O=P.scrollFactorY;S.save(),S.globalCompositeOperation=a.blendModes[P.blendMode];for(var F=0;F<R;F++){var I=M[F],w=I.alpha*u.alpha;if(!(w<=0)){y.applyITRS(I.x,I.y,I.rotation,I.scaleX,I.scaleY),m.copyFrom(u.matrix),m.multiplyWithOffset(T,-u.scrollX*A,-u.scrollY*O),y.e=I.x,y.f=I.y,m.multiply(y,x);var b=I.frame,Y=b.canvasData,U=-b.halfWidth,W=-b.halfHeight;S.globalAlpha=w,S.save(),x.setToContext(S),C&&(U=Math.round(U),W=Math.round(W)),S.imageSmoothingEnabled=!(!a.antialias||b.source.scaleMode),S.drawImage(b.source.image,Y.x,Y.y,Y.width,Y.height,U,W,Y.width,Y.height),S.restore()}}S.restore()}}}};t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={DeathZone:e(453),EdgeZone:e(454),RandomZone:e(456)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1080),l=e(1081),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(12),l=function(n,o,h,r){h.addToRenderList(o);var a=h.alpha,v=o.renderTarget,u=v.width,d=v.height,c=s.getTintAppendFloatAlpha,g=n.pipelines.set(o.pipeline),m=g.setTexture2D(v.texture);n.pipelines.preBatch(o),g.batchTexture(o,v.texture,u,d,o.x,o.y,u,d,o.scaleX,o.scaleY,o.rotation,o.flipX,!o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,u,d,c(o.tintTopLeft,a*o._alphaTL),c(o.tintTopRight,a*o._alphaTR),c(o.tintBottomLeft,a*o._alphaBL),c(o.tintBottomRight,a*o._alphaBR),o.tintFill,0,0,h,r,!0,m),n.resetTextures(),n.pipelines.postBatch(o)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){n.addToRenderList(l),s.batchSprite(l,l.frame,n,o)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1083),l=e(17),n={Parse:e(1084)};n=l(!1,n,s),t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(6),l=function(n,o){var h=o.width,r=o.height,a=Math.floor(h/2),v=Math.floor(r/2),u=s(o,"chars","");if(u!==""){var d=s(o,"image",""),c=n.sys.textures.getFrame(d),g=c.cutX,m=c.cutY,x=c.source.width,y=c.source.height,T=s(o,"offset.x",0),S=s(o,"offset.y",0),C=s(o,"spacing.x",0),E=s(o,"spacing.y",0),P=s(o,"lineSpacing",0),M=s(o,"charsPerRow",null);M===null&&(M=x/h,M>u.length&&(M=u.length));for(var R=T,A=S,O={retroFont:!0,font:d,size:h,lineHeight:r+P,chars:{}},F=0,I=0;I<u.length;I++){var w=u.charCodeAt(I),b=(g+R)/x,Y=(m+A)/y,U=(g+R+h)/x,W=(m+A+r)/y;O.chars[w]={x:R,y:A,width:h,height:r,centerX:a,centerY:v,xOffset:0,yOffset:0,xAdvance:h,data:{},kerning:{},u0:b,v0:Y,u1:U,v1:W},F++,F===M?(F=0,R=T,A+=r+E):R+=h+C}var D={data:O,frame:null,texture:d};return D}};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1086),l=e(1087),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=e(12),n=function(o,h,r,a){r.addToRenderList(h);var v=o.pipelines.set(h.pipeline,h),u=s(h,r,a).calc,d=h.vertices,c=h.uv,g=h.colors,m=h.alphas,x=h.alpha,y=l.getTintAppendFloatAlpha,T=r.roundPixels,S=d.length,C=Math.floor(S*.5);v.flush(),o.pipelines.preBatch(h);var E=v.setGameObject(h),P=v.vertexViewF32,M=v.vertexViewU32,R=v.vertexCount*v.currentShader.vertexComponentCount-1,A=0,O=h.tintFill;h.dirty&&h.updateVertices();for(var F=h.debugCallback,I=[],w=0;w<S;w+=2){var b=d[w+0],Y=d[w+1],U=b*u.a+Y*u.c+u.e,W=b*u.b+Y*u.d+u.f;T&&(U=Math.round(U),W=Math.round(W)),P[++R]=U,P[++R]=W,P[++R]=c[w+0],P[++R]=c[w+1],P[++R]=E,P[++R]=O,M[++R]=y(g[A],r.alpha*(m[A]*x)),A++,F&&(I[w+0]=U,I[w+1]=W)}F&&F.call(h,h,S,I),v.vertexCount+=C,o.pipelines.postBatch(h)};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(){};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1089),l=e(1090),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(12),l=function(n,o,h,r){if(!(o.width===0||o.height===0)){h.addToRenderList(o);var a=o.frame,v=a.width,u=a.height,d=s.getTintAppendFloatAlpha,c=n.pipelines.set(o.pipeline,o),g=c.setTexture2D(a.glTexture,o);n.pipelines.preBatch(o),c.batchTexture(o,a.glTexture,v,u,o.x,o.y,v/o.style.resolution,u/o.style.resolution,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,v,u,d(o.tintTopLeft,h.alpha*o._alphaTL),d(o.tintTopRight,h.alpha*o._alphaTR),d(o.tintBottomLeft,h.alpha*o._alphaBL),d(o.tintBottomRight,h.alpha*o._alphaBR),o.tintFill,0,0,h,r,!1,g),n.pipelines.postBatch(o)}};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){l.width===0||l.height===0||(n.addToRenderList(l),s.batchSprite(l,l.frame,n,o))};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1092),l=e(1093),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(12),l=function(n,o,h,r){o.updateCanvas();var a=o.width,v=o.height;if(!(a===0||v===0)){h.addToRenderList(o),n.pipelines.preBatch(o);var u=s.getTintAppendFloatAlpha,d=n.pipelines.set(o.pipeline,o),c=d.setTexture2D(o.fillPattern,o);d.batchTexture(o,o.fillPattern,o.displayFrame.width*o.tileScaleX,o.displayFrame.height*o.tileScaleY,o.x,o.y,a,v,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.originX*a,o.originY*v,0,0,a,v,u(o.tintTopLeft,h.alpha*o._alphaTL),u(o.tintTopRight,h.alpha*o._alphaTR),u(o.tintBottomLeft,h.alpha*o._alphaBL),u(o.tintBottomRight,h.alpha*o._alphaBR),o.tintFill,o.tilePositionX%o.displayFrame.width/o.displayFrame.width,o.tilePositionY%o.displayFrame.height/o.displayFrame.height,h,r,!1,c),n.pipelines.postBatch(o)}};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){l.updateCanvas(),n.addToRenderList(l),s.batchSprite(l,l.frame,n,o)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1095),l=e(1096),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){l.videoTexture&&(n.addToRenderList(l),l.pipeline.batchSprite(l,n,o))};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){l.videoTexture&&(n.addToRenderList(l),s.batchSprite(l,l.frame,n,o))};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1098),l=e(1099),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=e(114),n=e(81),o=function(h,r,a,v){a.addToRenderList(r);var u=h.pipelines.set(r.pipeline),d=s(r,a,v),c=u.calcMatrix.copyFrom(d.calc),g=r._displayOriginX,m=r._displayOriginY,x=a.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&l(u,c,r,x,g,m),r.isStroked&&n(u,r,x,g,m),h.pipelines.postBatch(r)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(36),l=e(48),n=e(60),o=e(30),h=function(r,a,v,u){v.addToRenderList(a);var d=r.currentContext;if(o(r,d,a,v,u)){var c=a.radius;d.beginPath(),d.arc(c-a.originX*(c*2),c-a.originY*(c*2),c,s(a._startAngle),s(a._endAngle),a.anticlockwise),a.closePath&&d.closePath(),a.isFilled&&(l(d,a),d.fill()),a.isStroked&&(n(d,a),d.stroke()),d.restore()}};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1101),l=e(1102),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(114),l=e(19),n=e(81),o=function(h,r,a,v){a.addToRenderList(r);var u=h.pipelines.set(r.pipeline),d=l(r,a,v),c=u.calcMatrix.copyFrom(d.calc),g=r._displayOriginX+r._curveBounds.x,m=r._displayOriginY+r._curveBounds.y,x=a.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&s(u,c,r,x,g,m),r.isStroked&&n(u,r,x,g,m),h.pipelines.postBatch(r)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(48),l=e(60),n=e(30),o=function(h,r,a,v){a.addToRenderList(r);var u=h.currentContext;if(n(h,u,r,a,v)){var d=r._displayOriginX+r._curveBounds.x,c=r._displayOriginY+r._curveBounds.y,g=r.pathData,m=g.length-1,x=g[0]-d,y=g[1]-c;u.beginPath(),u.moveTo(x,y),r.closePath||(m-=2);for(var T=2;T<m;T+=2){var S=g[T]-d,C=g[T+1]-c;u.lineTo(S,C)}r.closePath&&u.closePath(),r.isFilled&&(s(u,r),u.fill()),r.isStroked&&(l(u,r),u.stroke()),u.restore()}};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1104),l=e(1105),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(114),l=e(19),n=e(81),o=function(h,r,a,v){a.addToRenderList(r);var u=h.pipelines.set(r.pipeline),d=l(r,a,v),c=u.calcMatrix.copyFrom(d.calc),g=r._displayOriginX,m=r._displayOriginY,x=a.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&s(u,c,r,x,g,m),r.isStroked&&n(u,r,x,g,m),h.pipelines.postBatch(r)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(48),l=e(60),n=e(30),o=function(h,r,a,v){a.addToRenderList(r);var u=h.currentContext;if(n(h,u,r,a,v)){var d=r._displayOriginX,c=r._displayOriginY,g=r.pathData,m=g.length-1,x=g[0]-d,y=g[1]-c;u.beginPath(),u.moveTo(x,y),r.closePath||(m-=2);for(var T=2;T<m;T+=2){var S=g[T]-d,C=g[T+1]-c;u.lineTo(S,C)}u.closePath(),r.isFilled&&(s(u,r),u.fill()),r.isStroked&&(l(u,r),u.stroke()),u.restore()}};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1107),l=e(1108),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=e(12),n=function(o,h,r,a){r.addToRenderList(h);var v=o.pipelines.set(h.pipeline),u=s(h,r,a),d=v.calcMatrix.copyFrom(u.calc);d.translate(-h._displayOriginX,-h._displayOriginY);var c=r.alpha*h.alpha,g=h.width,m=h.height,x=h.cellWidth,y=h.cellHeight,T=Math.ceil(g/x),S=Math.ceil(m/y),C=x,E=y,P=x-(T*x-g),M=y-(S*y-m),R,A,O=h.showCells,F=h.showAltCells,I=h.showOutline,w=0,b=0,Y=0,U=0,W=0;if(I&&(C--,E--,P===x&&P--,M===y&&M--),o.pipelines.preBatch(h),O&&h.fillAlpha>0)for(R=v.fillTint,A=l.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*c),R.TL=A,R.TR=A,R.BL=A,R.BR=A,b=0;b<S;b++)for(F&&(Y=b%2),w=0;w<T;w++){if(F&&Y){Y=0;continue}Y++,U=w<T-1?C:P,W=b<S-1?E:M,v.batchFillRect(w*x,b*y,U,W)}if(F&&h.altFillAlpha>0)for(R=v.fillTint,A=l.getTintAppendFloatAlpha(h.altFillColor,h.altFillAlpha*c),R.TL=A,R.TR=A,R.BL=A,R.BR=A,b=0;b<S;b++)for(F&&(Y=b%2),w=0;w<T;w++){if(F&&!Y){Y=1;continue}Y=0,U=w<T-1?C:P,W=b<S-1?E:M,v.batchFillRect(w*x,b*y,U,W)}if(I&&h.outlineFillAlpha>0){var D=v.strokeTint,L=l.getTintAppendFloatAlpha(h.outlineFillColor,h.outlineFillAlpha*c);for(D.TL=L,D.TR=L,D.BL=L,D.BR=L,w=1;w<T;w++){var B=w*x;v.batchLine(B,0,B,m,1,1,1,0,!1)}for(b=1;b<S;b++){var G=b*y;v.batchLine(0,G,g,G,1,1,1,0,!1)}}o.pipelines.postBatch(h)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(48),l=e(60),n=e(30),o=function(h,r,a,v){a.addToRenderList(r);var u=h.currentContext;if(n(h,u,r,a,v)){var d=-r._displayOriginX,c=-r._displayOriginY,g=a.alpha*r.alpha,m=r.width,x=r.height,y=r.cellWidth,T=r.cellHeight,S=Math.ceil(m/y),C=Math.ceil(x/T),E=y,P=T,M=y-(S*y-m),R=T-(C*T-x),A=r.showCells,O=r.showAltCells,F=r.showOutline,I=0,w=0,b=0,Y=0,U=0;if(F&&(E--,P--,M===y&&M--,R===T&&R--),A&&r.fillAlpha>0)for(s(u,r),w=0;w<C;w++)for(O&&(b=w%2),I=0;I<S;I++){if(O&&b){b=0;continue}b++,Y=I<S-1?E:M,U=w<C-1?P:R,u.fillRect(d+I*y,c+w*T,Y,U)}if(O&&r.altFillAlpha>0)for(s(u,r,r.altFillColor,r.altFillAlpha*g),w=0;w<C;w++)for(O&&(b=w%2),I=0;I<S;I++){if(O&&!b){b=1;continue}b=0,Y=I<S-1?E:M,U=w<C-1?P:R,u.fillRect(d+I*y,c+w*T,Y,U)}if(F&&r.outlineFillAlpha>0){for(l(u,r,r.outlineFillColor,r.outlineFillAlpha*g),I=1;I<S;I++){var W=I*y;u.beginPath(),u.moveTo(W+d,c),u.lineTo(W+d,x+c),u.stroke()}for(w=1;w<C;w++){var D=w*T;u.beginPath(),u.moveTo(d,D+c),u.lineTo(d+m,D+c),u.stroke()}}u.restore()}};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1110),l=e(1111),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=e(12),n=function(o,h,r,a){r.addToRenderList(h);var v=o.pipelines.set(h.pipeline),u=s(h,r,a),d=v.calcMatrix.copyFrom(u.calc),c=h.width,g=h.height,m=c/2,x=c/h.projection,y=r.alpha*h.alpha;if(!!h.isFilled){var T,S,C,E,P,M,R,A,O;o.pipelines.preBatch(h),h.showTop&&(T=l.getTintAppendFloatAlpha(h.fillTop,y),S=d.getX(-m,-g),C=d.getY(-m,-g),E=d.getX(0,-x-g),P=d.getY(0,-x-g),M=d.getX(m,-g),R=d.getY(m,-g),A=d.getX(0,x-g),O=d.getY(0,x-g),v.batchQuad(h,S,C,E,P,M,R,A,O,0,0,1,1,T,T,T,T,2)),h.showLeft&&(T=l.getTintAppendFloatAlpha(h.fillLeft,y),S=d.getX(-m,0),C=d.getY(-m,0),E=d.getX(0,x),P=d.getY(0,x),M=d.getX(0,x-g),R=d.getY(0,x-g),A=d.getX(-m,-g),O=d.getY(-m,-g),v.batchQuad(h,S,C,E,P,M,R,A,O,0,0,1,1,T,T,T,T,2)),h.showRight&&(T=l.getTintAppendFloatAlpha(h.fillRight,y),S=d.getX(m,0),C=d.getY(m,0),E=d.getX(0,x),P=d.getY(0,x),M=d.getX(0,x-g),R=d.getY(0,x-g),A=d.getX(m,-g),O=d.getY(m,-g),v.batchQuad(h,S,C,E,P,M,R,A,O,0,0,1,1,T,T,T,T,2)),o.pipelines.postBatch(h)}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(48),l=e(30),n=function(o,h,r,a){r.addToRenderList(h);var v=o.currentContext;if(l(o,v,h,r,a)&&h.isFilled){var u=h.width,d=h.height,c=u/2,g=u/h.projection;h.showTop&&(s(v,h,h.fillTop),v.beginPath(),v.moveTo(-c,-d),v.lineTo(0,-g-d),v.lineTo(c,-d),v.lineTo(c,-1),v.lineTo(0,g-1),v.lineTo(-c,-1),v.lineTo(-c,-d),v.fill()),h.showLeft&&(s(v,h,h.fillLeft),v.beginPath(),v.moveTo(-c,0),v.lineTo(0,g),v.lineTo(0,g-d),v.lineTo(-c,-d),v.lineTo(-c,0),v.fill()),h.showRight&&(s(v,h,h.fillRight),v.beginPath(),v.moveTo(c,0),v.lineTo(0,g),v.lineTo(0,g-d),v.lineTo(c,-d),v.lineTo(c,0),v.fill()),v.restore()}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1113),l=e(1114),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=e(12),n=function(o,h,r,a){r.addToRenderList(h);var v=o.pipelines.set(h.pipeline),u=s(h,r,a),d=v.calcMatrix.copyFrom(u.calc),c=h.width,g=h.height,m=c/2,x=c/h.projection,y=h.isReversed,T=r.alpha*h.alpha;if(!!h.isFilled){o.pipelines.preBatch(h);var S,C,E,P,M,R,A;if(h.showTop&&y){S=l.getTintAppendFloatAlpha(h.fillTop,T),C=d.getX(-m,-g),E=d.getY(-m,-g),P=d.getX(0,-x-g),M=d.getY(0,-x-g),R=d.getX(m,-g),A=d.getY(m,-g);var O=d.getX(0,x-g),F=d.getY(0,x-g);v.batchQuad(h,C,E,P,M,R,A,O,F,0,0,1,1,S,S,S,S,2)}h.showLeft&&(S=l.getTintAppendFloatAlpha(h.fillLeft,T),y?(C=d.getX(-m,-g),E=d.getY(-m,-g),P=d.getX(0,x),M=d.getY(0,x),R=d.getX(0,x-g),A=d.getY(0,x-g)):(C=d.getX(-m,0),E=d.getY(-m,0),P=d.getX(0,x),M=d.getY(0,x),R=d.getX(0,x-g),A=d.getY(0,x-g)),v.batchTri(h,C,E,P,M,R,A,0,0,1,1,S,S,S,2)),h.showRight&&(S=l.getTintAppendFloatAlpha(h.fillRight,T),y?(C=d.getX(m,-g),E=d.getY(m,-g),P=d.getX(0,x),M=d.getY(0,x),R=d.getX(0,x-g),A=d.getY(0,x-g)):(C=d.getX(m,0),E=d.getY(m,0),P=d.getX(0,x),M=d.getY(0,x),R=d.getX(0,x-g),A=d.getY(0,x-g)),v.batchTri(h,C,E,P,M,R,A,0,0,1,1,S,S,S,2)),o.pipelines.postBatch(h)}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(48),l=e(30),n=function(o,h,r,a){r.addToRenderList(h);var v=o.currentContext;if(l(o,v,h,r,a)&&h.isFilled){var u=h.width,d=h.height,c=u/2,g=u/h.projection,m=h.isReversed;h.showTop&&m&&(s(v,h,h.fillTop),v.beginPath(),v.moveTo(-c,-d),v.lineTo(0,-g-d),v.lineTo(c,-d),v.lineTo(0,g-d),v.fill()),h.showLeft&&(s(v,h,h.fillLeft),v.beginPath(),m?(v.moveTo(-c,-d),v.lineTo(0,g),v.lineTo(0,g-d)):(v.moveTo(-c,0),v.lineTo(0,g),v.lineTo(0,g-d)),v.fill()),h.showRight&&(s(v,h,h.fillRight),v.beginPath(),m?(v.moveTo(c,-d),v.lineTo(0,g),v.lineTo(0,g-d)):(v.moveTo(c,0),v.lineTo(0,g),v.lineTo(0,g-d)),v.fill()),v.restore()}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1116),l=e(1117),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=e(12),n=function(o,h,r,a){r.addToRenderList(h);var v=o.pipelines.set(h.pipeline),u=s(h,r,a);v.calcMatrix.copyFrom(u.calc);var d=h._displayOriginX,c=h._displayOriginY,g=r.alpha*h.alpha;if(o.pipelines.preBatch(h),h.isStroked){var m=v.strokeTint,x=l.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*g);m.TL=x,m.TR=x,m.BL=x,m.BR=x;var y=h._startWidth,T=h._endWidth;v.batchLine(h.geom.x1-d,h.geom.y1-c,h.geom.x2-d,h.geom.y2-c,y,T,1,0,!1,u.sprite,u.camera)}o.pipelines.postBatch(h)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(60),l=e(30),n=function(o,h,r,a){r.addToRenderList(h);var v=o.currentContext;if(l(o,v,h,r,a)){var u=h._displayOriginX,d=h._displayOriginY;h.isStroked&&(s(v,h),v.beginPath(),v.moveTo(h.geom.x1-u,h.geom.y1-d),v.lineTo(h.geom.x2-u,h.geom.y2-d),v.stroke()),v.restore()}};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1119),l=e(1120),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(114),l=e(19),n=e(81),o=function(h,r,a,v){a.addToRenderList(r);var u=h.pipelines.set(r.pipeline),d=l(r,a,v),c=u.calcMatrix.copyFrom(d.calc),g=r._displayOriginX,m=r._displayOriginY,x=a.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&s(u,c,r,x,g,m),r.isStroked&&n(u,r,x,g,m),h.pipelines.postBatch(r)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(48),l=e(60),n=e(30),o=function(h,r,a,v){a.addToRenderList(r);var u=h.currentContext;if(n(h,u,r,a,v)){var d=r._displayOriginX,c=r._displayOriginY,g=r.pathData,m=g.length-1,x=g[0]-d,y=g[1]-c;u.beginPath(),u.moveTo(x,y),r.closePath||(m-=2);for(var T=2;T<m;T+=2){var S=g[T]-d,C=g[T+1]-c;u.lineTo(S,C)}u.closePath(),r.isFilled&&(s(u,r),u.fill()),r.isStroked&&(l(u,r),u.stroke()),u.restore()}};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1122),l=e(1123),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=e(81),n=e(12),o=function(h,r,a,v){a.addToRenderList(r);var u=h.pipelines.set(r.pipeline),d=s(r,a,v);u.calcMatrix.copyFrom(d.calc);var c=r._displayOriginX,g=r._displayOriginY,m=a.alpha*r.alpha;if(h.pipelines.preBatch(r),r.isFilled){var x=u.fillTint,y=n.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y,u.batchFillRect(-c,-g,r.width,r.height)}r.isStroked&&l(u,r,m,c,g),h.pipelines.postBatch(r)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(48),l=e(60),n=e(30),o=function(h,r,a,v){a.addToRenderList(r);var u=h.currentContext;if(n(h,u,r,a,v)){var d=r._displayOriginX,c=r._displayOriginY;r.isFilled&&(s(u,r),u.fillRect(-d,-c,r.width,r.height)),r.isStroked&&(l(u,r),u.beginPath(),u.rect(-d,-c,r.width,r.height),u.stroke()),u.restore()}};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1125),l=e(1126),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(114),l=e(19),n=e(81),o=function(h,r,a,v){a.addToRenderList(r);var u=h.pipelines.set(r.pipeline),d=l(r,a,v),c=u.calcMatrix.copyFrom(d.calc),g=r._displayOriginX,m=r._displayOriginY,x=a.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&s(u,c,r,x,g,m),r.isStroked&&n(u,r,x,g,m),h.pipelines.postBatch(r)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(48),l=e(60),n=e(30),o=function(h,r,a,v){a.addToRenderList(r);var u=h.currentContext;if(n(h,u,r,a,v)){var d=r._displayOriginX,c=r._displayOriginY,g=r.pathData,m=g.length-1,x=g[0]-d,y=g[1]-c;u.beginPath(),u.moveTo(x,y),r.closePath||(m-=2);for(var T=2;T<m;T+=2){var S=g[T]-d,C=g[T+1]-c;u.lineTo(S,C)}u.closePath(),r.isFilled&&(s(u,r),u.fill()),r.isStroked&&(l(u,r),u.stroke()),u.restore()}};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1128),l=e(1129),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=e(81),n=e(12),o=function(h,r,a,v){a.addToRenderList(r);var u=h.pipelines.set(r.pipeline),d=s(r,a,v);u.calcMatrix.copyFrom(d.calc);var c=r._displayOriginX,g=r._displayOriginY,m=a.alpha*r.alpha;if(h.pipelines.preBatch(r),r.isFilled){var x=u.fillTint,y=n.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y;var T=r.geom.x1-c,S=r.geom.y1-g,C=r.geom.x2-c,E=r.geom.y2-g,P=r.geom.x3-c,M=r.geom.y3-g;u.batchFillTriangle(T,S,C,E,P,M,d.sprite,d.camera)}r.isStroked&&l(u,r,m,c,g),h.pipelines.postBatch(r)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(48),l=e(60),n=e(30),o=function(h,r,a,v){a.addToRenderList(r);var u=h.currentContext;if(n(h,u,r,a,v)){var d=r._displayOriginX,c=r._displayOriginY,g=r.geom.x1-d,m=r.geom.y1-c,x=r.geom.x2-d,y=r.geom.y2-c,T=r.geom.x3-d,S=r.geom.y3-c;u.beginPath(),u.moveTo(g,m),u.lineTo(x,y),u.lineTo(T,S),u.closePath(),r.isFilled&&(s(u,r),u.fill()),r.isStroked&&(l(u,r),u.stroke()),u.restore()}};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(213),l=e(5);l.register("blitter",function(n,o,h,r){return this.displayList.add(new s(this.scene,n,o,h,r))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(214),l=e(5);l.register("container",function(n,o,h){return this.displayList.add(new s(this.scene,n,o,h))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(442),l=e(5);l.register("dom",function(n,o,h,r,a){var v=new s(this.scene,n,o,h,r,a);return this.displayList.add(v),v})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(215),l=e(5);l.register("dynamicBitmapText",function(n,o,h,r,a){return this.displayList.add(new s(this.scene,n,o,h,r,a))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(444),l=e(5);l.register("extern",function(){var n=new s(this.scene);return this.displayList.add(n),n})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(216),l=e(5);l.register("graphics",function(n){return this.displayList.add(new s(this.scene,n))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(113),l=e(5);l.register("group",function(n,o){return this.updateList.add(new s(this.scene,n,o))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(125),l=e(5);l.register("image",function(n,o,h,r){return this.displayList.add(new s(this.scene,n,o,h,r))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(219),l=e(5);l.register("layer",function(n){return this.displayList.add(new s(this.scene,n))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(220);s.register("particles",function(n,o,h){return this.displayList.add(new l(this.scene,n,o,h))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(457);s.register("follower",function(n,o,h,r,a){var v=new l(this.scene,n,o,h,r,a);return this.displayList.add(v),this.updateList.add(v),v})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(221);s.register("renderTexture",function(n,o,h,r,a,v){return this.displayList.add(new l(this.scene,n,o,h,r,a,v))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(223),l=e(5);l.register("rope",function(n,o,h,r,a,v,u,d){return this.displayList.add(new s(this.scene,n,o,h,r,a,v,u,d))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(73);s.register("sprite",function(n,o,h,r){var a=new l(this.scene,n,o,h,r);return this.displayList.add(a),a})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(148),l=e(5);l.register("bitmapText",function(n,o,h,r,a,v){return this.displayList.add(new s(this.scene,n,o,h,r,a,v))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(224),l=e(5);l.register("text",function(n,o,h,r){return this.displayList.add(new s(this.scene,n,o,h,r))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(225),l=e(5);l.register("tileSprite",function(n,o,h,r,a,v){return this.displayList.add(new s(this.scene,n,o,h,r,a,v))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(129),l=e(5);l.register("zone",function(n,o,h,r){return this.displayList.add(new s(this.scene,n,o,h,r))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(226),l=e(5);l.register("video",function(n,o,h){return this.displayList.add(new s(this.scene,n,o,h))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(461),l=e(5);l.register("arc",function(n,o,h,r,a,v,u,d){return this.displayList.add(new s(this.scene,n,o,h,r,a,v,u,d))}),l.register("circle",function(n,o,h,r,a){return this.displayList.add(new s(this.scene,n,o,h,0,360,!1,r,a))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(462);s.register("curve",function(n,o,h,r,a){return this.displayList.add(new l(this.scene,n,o,h,r,a))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(463),l=e(5);l.register("ellipse",function(n,o,h,r,a,v){return this.displayList.add(new s(this.scene,n,o,h,r,a,v))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(464);s.register("grid",function(n,o,h,r,a,v,u,d,c,g){return this.displayList.add(new l(this.scene,n,o,h,r,a,v,u,d,c,g))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(465);s.register("isobox",function(n,o,h,r,a,v,u){return this.displayList.add(new l(this.scene,n,o,h,r,a,v,u))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(466);s.register("isotriangle",function(n,o,h,r,a,v,u,d){return this.displayList.add(new l(this.scene,n,o,h,r,a,v,u,d))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(467);s.register("line",function(n,o,h,r,a,v,u,d){return this.displayList.add(new l(this.scene,n,o,h,r,a,v,u,d))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(468);s.register("polygon",function(n,o,h,r,a){return this.displayList.add(new l(this.scene,n,o,h,r,a))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(473);s.register("rectangle",function(n,o,h,r,a,v){return this.displayList.add(new l(this.scene,n,o,h,r,a,v))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(474),l=e(5);l.register("star",function(n,o,h,r,a,v,u){return this.displayList.add(new s(this.scene,n,o,h,r,a,v,u))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(475);s.register("triangle",function(n,o,h,r,a,v,u,d,c,g){return this.displayList.add(new l(this.scene,n,o,h,r,a,v,u,d,c,g))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(213),l=e(28),n=e(16),o=e(13);n.register("blitter",function(h,r){h===void 0&&(h={});var a=o(h,"key",null),v=o(h,"frame",null),u=new s(this.scene,0,0,a,v);return r!==void 0&&(h.add=r),l(this.scene,u,h),u})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(28),l=e(214),n=e(16),o=e(13);n.register("container",function(h,r){h===void 0&&(h={});var a=o(h,"x",0),v=o(h,"y",0),u=o(h,"children",null),d=new l(this.scene,a,v,u);return r!==void 0&&(h.add=r),s(this.scene,d,h),d})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(215),l=e(28),n=e(16),o=e(13);n.register("dynamicBitmapText",function(h,r){h===void 0&&(h={});var a=o(h,"font",""),v=o(h,"text",""),u=o(h,"size",!1),d=new s(this.scene,0,0,a,v,u);return r!==void 0&&(h.add=r),l(this.scene,d,h),d})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(16),l=e(216);s.register("graphics",function(n,o){n===void 0&&(n={}),o!==void 0&&(n.add=o);var h=new l(this.scene,n);return n.add&&this.scene.sys.displayList.add(h),h})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(16),l=e(113);s.register("group",function(n){return new l(this.scene,null,n)})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(28),l=e(16),n=e(13),o=e(125);l.register("image",function(h,r){h===void 0&&(h={});var a=n(h,"key",null),v=n(h,"frame",null),u=new o(this.scene,0,0,a,v);return r!==void 0&&(h.add=r),s(this.scene,u,h),u})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(28),l=e(219),n=e(16),o=e(13);n.register("layer",function(h,r){h===void 0&&(h={});var a=o(h,"children",null),v=new l(this.scene,a);return r!==void 0&&(h.add=r),s(this.scene,v,h),v})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(16),l=e(13),n=e(2),o=e(220);s.register("particles",function(h,r){h===void 0&&(h={});var a=l(h,"key",null),v=l(h,"frame",null),u=n(h,"emitters",null),d=new o(this.scene,a,v,u);r!==void 0&&(h.add=r);var c=n(h,"add",!1);return c?this.displayList.add(d):this.updateList.add(d),d})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(28),l=e(16),n=e(13),o=e(221);l.register("renderTexture",function(h,r){h===void 0&&(h={});var a=n(h,"x",0),v=n(h,"y",0),u=n(h,"width",32),d=n(h,"height",32),c=n(h,"key",void 0),g=n(h,"frame",void 0),m=new o(this.scene,a,v,u,d,c,g);return r!==void 0&&(h.add=r),s(this.scene,m,h),m})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(28),l=e(16),n=e(13),o=e(6),h=e(223);l.register("rope",function(r,a){r===void 0&&(r={});var v=n(r,"key",null),u=n(r,"frame",null),d=n(r,"horizontal",!0),c=o(r,"points",void 0),g=o(r,"colors",void 0),m=o(r,"alphas",void 0),x=new h(this.scene,0,0,v,u,c,d,g,m);return a!==void 0&&(r.add=a),s(this.scene,x,r),r.add||this.updateList.add(x),x})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(28),l=e(439),n=e(16),o=e(13),h=e(73);n.register("sprite",function(r,a){r===void 0&&(r={});var v=o(r,"key",null),u=o(r,"frame",null),d=new h(this.scene,0,0,v,u);return a!==void 0&&(r.add=a),s(this.scene,d,r),l(d,r),d})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(148),l=e(28),n=e(16),o=e(13),h=e(6);n.register("bitmapText",function(r,a){r===void 0&&(r={});var v=h(r,"font",""),u=o(r,"text",""),d=o(r,"size",!1),c=h(r,"align",0),g=new s(this.scene,0,0,v,u,d,c);return a!==void 0&&(r.add=a),l(this.scene,g,r),g})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(28),l=e(16),n=e(13),o=e(224);l.register("text",function(h,r){h===void 0&&(h={});var a=n(h,"text",""),v=n(h,"style",null),u=n(h,"padding",null);u!==null&&(v.padding=u);var d=new o(this.scene,0,0,a,v);return r!==void 0&&(h.add=r),s(this.scene,d,h),d.autoRound=n(h,"autoRound",!0),d.resolution=n(h,"resolution",1),d})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(28),l=e(16),n=e(13),o=e(225);l.register("tileSprite",function(h,r){h===void 0&&(h={});var a=n(h,"x",0),v=n(h,"y",0),u=n(h,"width",512),d=n(h,"height",512),c=n(h,"key",""),g=n(h,"frame",""),m=new o(this.scene,a,v,u,d,c,g);return r!==void 0&&(h.add=r),s(this.scene,m,h),m})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(16),l=e(13),n=e(129);s.register("zone",function(o){var h=l(o,"x",0),r=l(o,"y",0),a=l(o,"width",1),v=l(o,"height",a);return new n(this.scene,h,r,a,v)})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(28),l=e(16),n=e(13),o=e(226);l.register("video",function(h,r){h===void 0&&(h={});var a=n(h,"key",null),v=new o(this.scene,0,0,a);return r!==void 0&&(h.add=r),s(this.scene,v,h),h.add||this.updateList.add(v),v})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1177),l=e(1178),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=function(n,o,h,r){if(!!o.shader){if(h.addToRenderList(o),n.pipelines.clear(),o.renderToTexture)o.load(),o.flush();else{var a=s(o,h,r).calc;(n.width!==o._rendererWidth||n.height!==o._rendererHeight)&&o.projOrtho(0,n.width,n.height,0),o.load(a.matrix),o.flush()}n.pipelines.rebind()}};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(){};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1180),l=e(1181),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=function(n,o,h,r){var a=o.faces,v=a.length;if(v!==0){h.addToRenderList(o);var u=n.pipelines.set(o.pipeline,o),d=s(o,h,r).calc,c=u.setGameObject(o),g=u.vertexViewF32,m=u.vertexViewU32,x=u.vertexCount*u.currentShader.vertexComponentCount-1,y=o.tintFill,T=[],S=o.debugCallback,C=d.a,E=d.b,P=d.c,M=d.d,R=d.e,A=d.f,O=o.viewPosition.z,F=o.hideCCW,I=h.roundPixels,w=h.alpha*o.alpha,b=0;n.pipelines.preBatch(o);for(var Y=0;Y<v;Y++){var U=a[Y];!U.isInView(h,F,O,w,C,E,P,M,R,A,I)||(u.shouldFlush(3)&&(u.flush(),x=0),x=U.load(g,m,x,c,y),b++,u.vertexCount+=3,S&&T.push(U))}o.totalFrame+=b,S&&S.call(o,o,T),n.pipelines.postBatch(o)}};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(){};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1183),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(19),l=function(n,o,h,r){h.addToRenderList(o);var a=n.pipelines.set(o.pipeline),v=s(o,h,r).calc,u=o.width,d=o.height,c=-o._radius,g=-o._radius,m=c+u,x=g+d,y=v.getX(0,0),T=v.getY(0,0),S=v.getX(c,g),C=v.getY(c,g),E=v.getX(c,x),P=v.getY(c,x),M=v.getX(m,x),R=v.getY(m,x),A=v.getX(m,g),O=v.getY(m,g);n.pipelines.preBatch(o),a.batchPointLight(o,h,S,C,E,P,M,R,A,O,y,T),n.pipelines.postBatch(o)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(229),l=e(5);l.register("shader",function(n,o,h,r,a,v,u){return this.displayList.add(new s(this.scene,n,o,h,r,a,v,u))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(230),l=e(5);l.register("mesh",function(n,o,h,r,a,v,u,d,c,g,m){return this.displayList.add(new s(this.scene,n,o,h,r,a,v,u,d,c,g,m))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(150);s.register("pointlight",function(n,o,h,r,a,v){return this.displayList.add(new l(this.scene,n,o,h,r,a,v))})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(28),l=e(16),n=e(13),o=e(229);l.register("shader",function(h,r){h===void 0&&(h={});var a=n(h,"key",null),v=n(h,"x",0),u=n(h,"y",0),d=n(h,"width",128),c=n(h,"height",128),g=new o(this.scene,a,v,u,d,c);return r!==void 0&&(h.add=r),s(this.scene,g,h),g})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(28),l=e(16),n=e(13),o=e(6),h=e(230);l.register("mesh",function(r,a){r===void 0&&(r={});var v=n(r,"key",null),u=n(r,"frame",null),d=o(r,"vertices",[]),c=o(r,"uvs",[]),g=o(r,"indicies",[]),m=o(r,"containsZ",!1),x=o(r,"normals",[]),y=o(r,"colors",16777215),T=o(r,"alphas",1),S=new h(this.scene,0,0,v,u,d,c,g,m,x,y,T);return a!==void 0&&(r.add=a),s(this.scene,S,r),S})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(28),l=e(16),n=e(13),o=e(150);l.register("pointlight",function(h,r){h===void 0&&(h={});var a=n(h,"color",16777215),v=n(h,"radius",128),u=n(h,"intensity",1),d=n(h,"attenuation",.1),c=new o(this.scene,0,0,a,v,u,d);return r!==void 0&&(h.add=r),s(this.scene,c,h),c})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(482),n=e(24),o=e(20),h=new s({Extends:l,initialize:function(a){this.scene=a,this.systems=a.sys,a.sys.settings.isBooted||a.sys.events.once(o.BOOT,this.boot,this),l.call(this)},boot:function(){var r=this.systems.events;r.on(o.SHUTDOWN,this.shutdown,this),r.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});n.register("LightsPlugin",h,"lights"),t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(65);s.Area=e(1192),s.Circumference=e(302),s.CircumferencePoint=e(169),s.Clone=e(1193),s.Contains=e(66),s.ContainsPoint=e(1194),s.ContainsRect=e(1195),s.CopyFrom=e(1196),s.Equals=e(1197),s.GetBounds=e(1198),s.GetPoint=e(300),s.GetPoints=e(301),s.Offset=e(1199),s.OffsetPoint=e(1200),s.Random=e(170),t.exports=s},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.radius>0?Math.PI*s.radius*s.radius:0};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(65),l=function(n){return new s(n.x,n.y,n.radius)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(66),l=function(n,o){return s(n,o.x,o.y)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(66),l=function(n,o){return s(n,o.x,o.y)&&s(n,o.right,o.y)&&s(n,o.x,o.bottom)&&s(n,o.right,o.bottom)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l.setTo(s.x,s.y,s.radius)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.x===l.x&&s.y===l.y&&s.radius===l.radius};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10),l=function(n,o){return o===void 0&&(o=new s),o.x=n.left,o.y=n.top,o.width=n.diameter,o.height=n.diameter,o};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return s.x+=l,s.y+=n,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.x+=l.x,s.y+=l.y,s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(111);s.Area=e(1202),s.Circumference=e(447),s.CircumferencePoint=e(218),s.Clone=e(1203),s.Contains=e(112),s.ContainsPoint=e(1204),s.ContainsRect=e(1205),s.CopyFrom=e(1206),s.Equals=e(1207),s.GetBounds=e(1208),s.GetPoint=e(445),s.GetPoints=e(446),s.Offset=e(1209),s.OffsetPoint=e(1210),s.Random=e(180),t.exports=s},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.isEmpty()?0:s.getMajorRadius()*s.getMinorRadius()*Math.PI};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(111),l=function(n){return new s(n.x,n.y,n.width,n.height)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(112),l=function(n,o){return s(n,o.x,o.y)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(112),l=function(n,o){return s(n,o.x,o.y)&&s(n,o.right,o.y)&&s(n,o.x,o.bottom)&&s(n,o.right,o.bottom)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l.setTo(s.x,s.y,s.width,s.height)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.x===l.x&&s.y===l.y&&s.width===l.width&&s.height===l.height};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10),l=function(n,o){return o===void 0&&(o=new s),o.x=n.left,o.y=n.top,o.width=n.width,o.height=n.height,o};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return s.x+=l,s.y+=n,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.x+=l.x,s.y+=l.y,s};t.exports=e},function(t,f,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=e(231),n=function(o,h,r){if(r===void 0&&(r=[]),l(o,h)){var a=o.x,v=o.y,u=o.radius,d=h.x,c=h.y,g=h.radius,m,x,y,T,S;if(v===c)S=(g*g-u*u-d*d+a*a)/(2*(a-d)),m=1,x=-2*c,y=d*d+S*S-2*d*S+c*c-g*g,T=x*x-4*m*y,T===0?r.push(new s(S,-x/(2*m))):T>0&&(r.push(new s(S,(-x+Math.sqrt(T))/(2*m))),r.push(new s(S,(-x-Math.sqrt(T))/(2*m))));else{var C=(a-d)/(v-c),E=(g*g-u*u-d*d+a*a-c*c+v*v)/(2*(v-c));m=C*C+1,x=2*v*C-2*E*C-2*a,y=a*a+v*v+E*E-u*u-2*v*E,T=x*x-4*m*y,T===0?(S=-x/(2*m),r.push(new s(S,E-S*C))):T>0&&(S=(-x+Math.sqrt(T))/(2*m),r.push(new s(S,E-S*C)),S=(-x-Math.sqrt(T))/(2*m),r.push(new s(S,E-S*C)))}}return r};t.exports=n},function(t,f,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(232),l=e(151),n=function(o,h,r){if(r===void 0&&(r=[]),l(o,h)){var a=h.getLineA(),v=h.getLineB(),u=h.getLineC(),d=h.getLineD();s(a,o,r),s(v,o,r),s(u,o,r),s(d,o,r)}return r};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(140),l=e(487),n=e(47),o=new n;function h(v,u,d,c,g){var m=Math.cos(v),x=Math.sin(v);o.setTo(u,d,u+m,d+x);var y=l(o,c);y&&g.push(new s(y.x,y.y,v,y.w))}function r(v,u){return v.z-u.z}var a=function(v,u,d){Array.isArray(d)||(d=[d]);for(var c=[],g=[],m=0;m<d.length;m++)for(var x=d[m].points,y=0;y<x.length;y++){var T=Math.atan2(x[y].y-u,x[y].x-v);g.indexOf(T)===-1&&(h(T,v,u,d,c),h(T-1e-5,v,u,d,c),h(T+1e-5,v,u,d,c),g.push(T))}return c.sort(r)};t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10),l=e(152),n=function(o,h,r){return r===void 0&&(r=new s),l(o,h)&&(r.x=Math.max(o.x,h.x),r.y=Math.max(o.y,h.y),r.width=Math.min(o.right,h.right)-r.x,r.height=Math.min(o.bottom,h.bottom)-r.y),r};t.exports=n},function(t,f,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(234),l=e(152),n=function(o,h,r){if(r===void 0&&(r=[]),l(o,h)){var a=o.getLineA(),v=o.getLineB(),u=o.getLineC(),d=o.getLineD();s(a,h,r),s(v,h,r),s(u,h,r),s(d,h,r)}return r};t.exports=n},function(t,f,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(489),l=e(234),n=function(o,h,r){if(r===void 0&&(r=[]),s(o,h)){var a=h.getLineA(),v=h.getLineB(),u=h.getLineC();l(a,o,r),l(v,o,r),l(u,o,r)}return r};t.exports=n},function(t,f,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(232),l=e(491),n=function(o,h,r){if(r===void 0&&(r=[]),l(o,h)){var a=o.getLineA(),v=o.getLineB(),u=o.getLineC();s(a,h,r),s(v,h,r),s(u,h,r)}return r};t.exports=n},function(t,f,e){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(494),l=e(492),n=function(o,h,r){if(r===void 0&&(r=[]),s(o,h)){var a=h.getLineA(),v=h.getLineB(),u=h.getLineC();l(o,a,r),l(o,v,r),l(o,u,r)}return r};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(496),l=function(n,o){if(!s(n,o))return!1;var h=Math.min(o.x1,o.x2),r=Math.max(o.x1,o.x2),a=Math.min(o.y1,o.y2),v=Math.max(o.y1,o.y2);return n.x>=h&&n.x<=r&&n.y>=a&&n.y<=v};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h,r){return r===void 0&&(r=0),!(l>s.right+r||n<s.left-r||o>s.bottom+r||h<s.top-r)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(47);s.Angle=e(97),s.BresenhamPoints=e(317),s.CenterOn=e(1222),s.Clone=e(1223),s.CopyFrom=e(1224),s.Equals=e(1225),s.Extend=e(1226),s.GetEasedPoints=e(1227),s.GetMidPoint=e(1228),s.GetNearestPoint=e(1229),s.GetNormal=e(1230),s.GetPoint=e(307),s.GetPoints=e(172),s.GetShortestDistance=e(1231),s.Height=e(1232),s.Length=e(67),s.NormalAngle=e(497),s.NormalX=e(1233),s.NormalY=e(1234),s.Offset=e(1235),s.PerpSlope=e(1236),s.Random=e(173),s.ReflectAngle=e(1237),s.Rotate=e(1238),s.RotateAroundPoint=e(1239),s.RotateAroundXY=e(236),s.SetToAngle=e(1240),s.Slope=e(1241),s.Width=e(1242),t.exports=s},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=l-(s.x1+s.x2)/2,h=n-(s.y1+s.y2)/2;return s.x1+=o,s.y1+=h,s.x2+=o,s.y2+=h,s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(47),l=function(n){return new s(n.x1,n.y1,n.x2,n.y2)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l.setTo(s.x1,s.y1,s.x2,s.y2)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.x1===l.x1&&s.y1===l.y1&&s.x2===l.x2&&s.y2===l.y2};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(67),l=function(n,o,h){h===void 0&&(h=o);var r=s(n),a=n.x2-n.x1,v=n.y2-n.y1;return o&&(n.x1=n.x1-a/r*o,n.y1=n.y1-v/r*o),h&&(n.x2=n.x2+a/r*h,n.y2=n.y2+v/r*h),n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(352),l=e(80),n=e(4),o=function(h,r,a,v,u){v===void 0&&(v=0),u===void 0&&(u=[]);var d=[],c=h.x1,g=h.y1,m=h.x2-c,x=h.y2-g,y=l(r,u),T,S,C=a-1;for(T=0;T<C;T++)S=y(T/C),d.push(new n(c+m*S,g+x*S));if(S=y(1),d.push(new n(c+m*S,g+x*S)),v>0){var E=d[0],P=[E];for(T=1;T<d.length-1;T++){var M=d[T];s(E,M)>=v&&(P.push(M),E=M)}var R=d[d.length-1];return s(E,R)<v&&P.pop(),P.push(R),P}else return d};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o){return o===void 0&&(o=new s),o.x=(n.x1+n.x2)/2,o.y=(n.y1+n.y2)/2,o};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o,h){h===void 0&&(h=new s);var r=n.x1,a=n.y1,v=n.x2,u=n.y2,d=(v-r)*(v-r)+(u-a)*(u-a);if(d===0)return h;var c=((o.x-r)*(v-r)+(o.y-a)*(u-a))/d;return h.x=r+c*(v-r),h.y=a+c*(u-a),h};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(14),l=e(97),n=e(4),o=function(h,r){r===void 0&&(r=new n);var a=l(h)-s.TAU;return r.x=Math.cos(a),r.y=Math.sin(a),r};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=s.x1,o=s.y1,h=s.x2,r=s.y2,a=(h-n)*(h-n)+(r-o)*(r-o);if(a===0)return!1;var v=((o-l.y)*(h-n)-(n-l.x)*(r-o))/a;return Math.abs(v)*Math.sqrt(a)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return Math.abs(s.y1-s.y2)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(14),l=e(97),n=function(o){return Math.cos(l(o)-s.TAU)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(14),l=e(97),n=function(o){return Math.sin(l(o)-s.TAU)};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return s.x1+=l,s.y1+=n,s.x2+=l,s.y2+=n,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return-((s.x2-s.x1)/(s.y2-s.y1))};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(97),l=e(497),n=function(o,h){return 2*l(h)-Math.PI-s(o)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(236),l=function(n,o){var h=(n.x1+n.x2)/2,r=(n.y1+n.y2)/2;return s(n,h,r,o)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(236),l=function(n,o,h){return s(n,o.x,o.y,h)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o,h){return s.x1=l,s.y1=n,s.x2=l+Math.cos(o)*h,s.y2=n+Math.sin(o)*h,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return(s.y2-s.y1)/(s.x2-s.x1)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return Math.abs(s.x1-s.x2)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Face:e(116),GenerateGridVerts:e(1244),GenerateObjVerts:e(480),GenerateVerts:e(479),ParseObj:e(498),ParseObjMaterial:e(499),RotateFace:e(1245),Vertex:e(117)};t.exports=s},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(116),l=e(2),n=e(69),o=e(39),h=e(117),r=new o,a=new o,v=new n,u=function(d){var c=l(d,"mesh"),g=l(d,"texture",null),m=l(d,"frame"),x=l(d,"width",1),y=l(d,"height",x),T=l(d,"widthSegments",1),S=l(d,"heightSegments",T),C=l(d,"x",0),E=l(d,"y",0),P=l(d,"z",0),M=l(d,"rotateX",0),R=l(d,"rotateY",0),A=l(d,"rotateZ",0),O=l(d,"zIsUp",!0),F=l(d,"isOrtho",c?c.dirtyCache[11]:!1),I=l(d,"colors",[16777215]),w=l(d,"alphas",[1]),b=l(d,"tile",!1),Y=l(d,"flipY",!1),U=l(d,"width",null),W={faces:[],verts:[]};if(r.set(C,E,P),a.set(M,R,A),v.fromRotationXYTranslation(a,r,O),!g&&c)g=c.texture;else if(c&&typeof g=="string")g=c.scene.sys.textures.get(g);else return W;var D=g.get(m);!U&&F&&g&&c&&(x=D.width/c.height,y=D.height/c.height);var L=x/2,B=y/2,G=Math.floor(T),N=Math.floor(S),V=G+1,z=N+1,X=x/G,H=y/N,K=[],J=[],Z,Q,q=0,k=1,_=0,ot=1;D&&(q=D.u0,k=D.u1,Y?(_=D.v1,ot=D.v0):(_=D.v0,ot=D.v1));var nt=k-q,et=ot-_;for(Q=0;Q<z;Q++){var j=Q*H-B;for(Z=0;Z<V;Z++){var ht=Z*X-L;J.push(ht,-j);var it=q+nt*(Z/G),at=_+et*(Q/N);K.push(it,at)}}Array.isArray(I)||(I=[I]),Array.isArray(w)||(w=[w]);var Kt=0,Jt=0;for(Q=0;Q<N;Q++)for(Z=0;Z<G;Z++){var Tt=(Z+V*Q)*2,dt=(Z+V*(Q+1))*2,At=(Z+1+V*(Q+1))*2,Mt=(Z+1+V*Q)*2,Et=I[Jt],Zt=w[Kt],Xe=new h(J[Tt],J[Tt+1],0,K[Tt],K[Tt+1],Et,Zt).transformMat4(v),We=new h(J[dt],J[dt+1],0,K[dt],K[dt+1],Et,Zt).transformMat4(v),He=new h(J[Mt],J[Mt+1],0,K[Mt],K[Mt+1],Et,Zt).transformMat4(v),$e=new h(J[dt],J[dt+1],0,K[dt],K[dt+1],Et,Zt).transformMat4(v),Ke=new h(J[At],J[At+1],0,K[At],K[At+1],Et,Zt).transformMat4(v),Je=new h(J[Mt],J[Mt+1],0,K[Mt],K[Mt+1],Et,Zt).transformMat4(v);b&&(Xe.setUVs(q,ot),We.setUVs(q,_),He.setUVs(k,ot),$e.setUVs(q,_),Ke.setUVs(k,_),Je.setUVs(k,ot)),Jt++,Jt===I.length&&(Jt=0),Kt++,Kt===w.length&&(Kt=0),W.verts.push(Xe,We,He,$e,Ke,Je),W.faces.push(new s(Xe,We,He),new s($e,Ke,Je))}return c&&(c.faces=c.faces.concat(W.faces),c.vertices=c.vertices.concat(W.verts)),W};t.exports=u},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){var h,r;if(n===void 0&&o===void 0){var a=s.getInCenter();h=a.x,r=a.y}var v=Math.cos(l),u=Math.sin(l),d=s.vertex1,c=s.vertex2,g=s.vertex3,m=d.x-h,x=d.y-r;d.set(m*v-x*u+h,m*u+x*v+r),m=c.x-h,x=c.y-r,c.set(m*v-x*u+h,m*u+x*v+r),m=g.x-h,x=g.y-r,g.set(m*v-x*u+h,m*u+x*v+r)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4);s.Ceil=e(1247),s.Clone=e(1248),s.CopyFrom=e(1249),s.Equals=e(1250),s.Floor=e(1251),s.GetCentroid=e(1252),s.GetMagnitude=e(500),s.GetMagnitudeSq=e(501),s.GetRectangleFromPoints=e(1253),s.Interpolate=e(1254),s.Invert=e(1255),s.Negative=e(1256),s.Project=e(1257),s.ProjectUnit=e(1258),s.SetMagnitude=e(1259),t.exports=s},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.setTo(Math.ceil(s.x),Math.ceil(s.y))};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n){return new s(n.x,n.y)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l.setTo(s.x,s.y)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.x===l.x&&s.y===l.y};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.setTo(Math.floor(s.x),Math.floor(s.y))};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o){if(o===void 0&&(o=new s),!Array.isArray(n))throw new Error("GetCentroid points argument must be an array");var h=n.length;if(h<1)throw new Error("GetCentroid points array must not be empty");if(h===1)o.x=n[0].x,o.y=n[0].y;else{for(var r=0;r<h;r++)o.x+=n[r].x,o.y+=n[r].y;o.x/=h,o.y/=h}return o};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10),l=function(n,o){o===void 0&&(o=new s);for(var h=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY,u=0;u<n.length;u++){var d=n[u];d.x>h&&(h=d.x),d.x<r&&(r=d.x),d.y>a&&(a=d.y),d.y<v&&(v=d.y)}return o.x=r,o.y=v,o.width=h-r,o.height=a-v,o};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o,h,r){return h===void 0&&(h=0),r===void 0&&(r=new s),r.x=n.x+(o.x-n.x)*h,r.y=n.y+(o.y-n.y)*h,r};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.setTo(s.y,s.x)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o){return o===void 0&&(o=new s),o.setTo(-n.x,-n.y)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=e(501),n=function(o,h,r){r===void 0&&(r=new s);var a=o.x*h.x+o.y*h.y,v=a/l(h);return v!==0&&(r.x=v*h.x,r.y=v*h.y),r};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o,h){h===void 0&&(h=new s);var r=n.x*o.x+n.y*o.y;return r!==0&&(h.x=r*o.x,h.y=r*o.y),h};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(500),l=function(n,o){if(n.x!==0||n.y!==0){var h=s(n);n.x/=h,n.y/=h}return n.x*=o,n.y*=o,n};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(227);s.Clone=e(1261),s.Contains=e(228),s.ContainsPoint=e(1262),s.Earcut=e(59),s.GetAABB=e(469),s.GetNumberArray=e(1263),s.GetPoints=e(470),s.Perimeter=e(471),s.Reverse=e(1264),s.Simplify=e(1265),s.Smooth=e(472),s.Translate=e(1266),t.exports=s},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(227),l=function(n){return new s(n.points)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(228),l=function(n,o){return s(n,o.x,o.y)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){l===void 0&&(l=[]);for(var n=0;n<s.points.length;n++)l.push(s.points[n].x),l.push(s.points[n].y);return l};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.points.reverse(),s};t.exports=e},function(t,f){function e(r,a){var v=r.x-a.x,u=r.y-a.y;return v*v+u*u}function s(r,a,v){var u=a.x,d=a.y,c=v.x-u,g=v.y-d;if(c!==0||g!==0){var m=((r.x-u)*c+(r.y-d)*g)/(c*c+g*g);m>1?(u=v.x,d=v.y):m>0&&(u+=c*m,d+=g*m)}return c=r.x-u,g=r.y-d,c*c+g*g}function l(r,a){for(var v=r[0],u=[v],d,c=1,g=r.length;c<g;c++)d=r[c],e(d,v)>a&&(u.push(d),v=d);return v!==d&&u.push(d),u}function n(r,a,v,u,d){for(var c=u,g,m=a+1;m<v;m++){var x=s(r[m],r[a],r[v]);x>c&&(g=m,c=x)}c>u&&(g-a>1&&n(r,a,g,u,d),d.push(r[g]),v-g>1&&n(r,g,v,u,d))}function o(r,a){var v=r.length-1,u=[r[0]];return n(r,0,v,a,u),u.push(r[v]),u}var h=function(r,a,v){a===void 0&&(a=1),v===void 0&&(v=!1);var u=r.points;if(u.length>2){var d=a*a;v||(u=l(u,d)),r.setTo(o(u,d))}return r};t.exports=h},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){for(var o=s.points,h=0;h<o.length;h++)o[h].x+=l,o[h].y+=n;return s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.width*s.height};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s.width=Math.ceil(s.width),s.height=Math.ceil(s.height),s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10),l=function(n){return new s(n.x,n.y,n.width,n.height)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(57),l=function(n,o){return s(n,o.x,o.y)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l.setTo(s.x,s.y,s.width,s.height)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.x===l.x&&s.y===l.y&&s.width===l.width&&s.height===l.height};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(237),l=function(n,o){var h=s(n);return h<s(o)?n.setSize(o.height*h,o.height):n.setSize(o.width,o.width/h),n.setPosition(o.centerX-n.width/2,o.centerY-n.height/2)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(237),l=function(n,o){var h=s(n);return h>s(o)?n.setSize(o.height*h,o.height):n.setSize(o.width,o.width/h),n.setPosition(o.centerX-n.width/2,o.centerY-n.height/2)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s.width=Math.floor(s.width),s.height=Math.floor(s.height),s};t.exports=e},function(t,f,e){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10),l=function(n,o,h,r,a){return a===void 0&&(a=new s),a.setTo(Math.min(n,h),Math.min(o,r),Math.abs(n-h),Math.abs(o-r))};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o){return o===void 0&&(o=new s),o.x=n.centerX,o.y=n.centerY,o};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=function(n,o){return o===void 0&&(o=new s),o.x=n.width,o.y=n.height,o};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(190),l=function(n,o,h){var r=n.centerX,a=n.centerY;return n.setSize(n.width+o*2,n.height+h*2),s(n,r,a)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(10),l=e(152),n=function(o,h,r){return r===void 0&&(r=new s),l(o,h)?(r.x=Math.max(o.x,h.x),r.y=Math.max(o.y,h.y),r.width=Math.min(o.right,h.right)-r.x,r.height=Math.min(o.bottom,h.bottom)-r.y):r.setEmpty(),r};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){for(var n=s.x,o=s.right,h=s.y,r=s.bottom,a=0;a<l.length;a++)n=Math.min(n,l[a].x),o=Math.max(o,l[a].x),h=Math.min(h,l[a].y),r=Math.max(r,l[a].y);return s.x=n,s.y=h,s.width=o-n,s.height=r-h,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){var n=Math.min(s.x,l.x),o=Math.max(s.right,l.right);s.x=n,s.width=o-n;var h=Math.min(s.y,l.y),r=Math.max(s.bottom,l.bottom);return s.y=h,s.height=r-h,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){var o=Math.min(s.x,l),h=Math.max(s.right,l);s.x=o,s.width=h-o;var r=Math.min(s.y,n),a=Math.max(s.bottom,n);return s.y=r,s.height=a-r,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return s.x+=l,s.y+=n,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.x+=l.x,s.y+=l.y,s};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.x<l.right&&s.right>l.x&&s.y<l.bottom&&s.bottom>l.y};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(4),l=e(36),n=function(o,h,r){r===void 0&&(r=new s),h=l(h);var a=Math.sin(h),v=Math.cos(h),u=v>0?o.width/2:o.width/-2,d=a>0?o.height/2:o.height/-2;return Math.abs(u*a)<Math.abs(d*v)?d=u*a/v:u=d*v/a,r.x=u+o.centerX,r.y=d+o.centerY,r};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(195),l=e(503),n=e(4),o=function(h,r,a){if(a===void 0&&(a=new n),l(h,r))switch(s(0,3)){case 0:a.x=h.x+Math.random()*(r.right-h.x),a.y=h.y+Math.random()*(r.top-h.y);break;case 1:a.x=r.x+Math.random()*(h.right-r.x),a.y=r.bottom+Math.random()*(h.bottom-r.bottom);break;case 2:a.x=h.x+Math.random()*(r.x-h.x),a.y=r.y+Math.random()*(h.bottom-r.y);break;case 3:a.x=r.right+Math.random()*(h.right-r.right),a.y=h.y+Math.random()*(r.bottom-h.y);break}return a};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.width===l.width&&s.height===l.height};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n){return n===void 0&&(n=l),s.width*=l,s.height*=n,s};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(82);s.Area=e(1294),s.BuildEquilateral=e(1295),s.BuildFromPolygon=e(1296),s.BuildRight=e(1297),s.CenterOn=e(1298),s.Centroid=e(504),s.CircumCenter=e(1299),s.CircumCircle=e(1300),s.Clone=e(1301),s.Contains=e(115),s.ContainsArray=e(235),s.ContainsPoint=e(1302),s.CopyFrom=e(1303),s.Decompose=e(495),s.Equals=e(1304),s.GetPoint=e(476),s.GetPoints=e(477),s.InCenter=e(506),s.Perimeter=e(1305),s.Offset=e(505),s.Random=e(181),s.Rotate=e(1306),s.RotateAroundPoint=e(1307),s.RotateAroundXY=e(238),t.exports=s},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){var l=s.x1,n=s.y1,o=s.x2,h=s.y2,r=s.x3,a=s.y3;return Math.abs(((r-l)*(h-n)-(o-l)*(a-n))/2)};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(82),l=function(n,o,h){var r=h*(Math.sqrt(3)/2),a=n,v=o,u=n+h/2,d=o+r,c=n-h/2,g=o+r;return new s(a,v,u,d,c,g)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(59),l=e(82),n=function(o,h,r,a,v){h===void 0&&(h=null),r===void 0&&(r=1),a===void 0&&(a=1),v===void 0&&(v=[]);for(var u=s(o,h),d,c,g,m,x,y,T,S,C,E=0;E<u.length;E+=3)d=u[E],c=u[E+1],g=u[E+2],m=o[d*2]*r,x=o[d*2+1]*a,y=o[c*2]*r,T=o[c*2+1]*a,S=o[g*2]*r,C=o[g*2+1]*a,v.push(new l(m,x,y,T,S,C));return v};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(82),l=function(n,o,h,r){r===void 0&&(r=h);var a=n,v=o,u=n,d=o-r,c=n+h,g=o;return new s(a,v,u,d,c,g)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(504),l=e(505),n=function(o,h,r,a){a===void 0&&(a=s);var v=a(o),u=h-v.x,d=r-v.y;return l(o,u,d)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(3);function l(o,h,r,a){return o*a-h*r}var n=function(o,h){h===void 0&&(h=new s);var r=o.x3,a=o.y3,v=o.x1-r,u=o.y1-a,d=o.x2-r,c=o.y2-a,g=2*l(v,u,d,c),m=l(u,v*v+u*u,c,d*d+c*c),x=l(v,v*v+u*u,d,d*d+c*c);return h.x=r-m/g,h.y=a+x/g,h};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(65),l=function(n,o){o===void 0&&(o=new s);var h=n.x1,r=n.y1,a=n.x2,v=n.y2,u=n.x3,d=n.y3,c=a-h,g=v-r,m=u-h,x=d-r,y=c*(h+a)+g*(r+v),T=m*(h+u)+x*(r+d),S=2*(c*(d-v)-g*(u-a)),C,E;if(Math.abs(S)<1e-6){var P=Math.min(h,a,u),M=Math.min(r,v,d);C=(Math.max(h,a,u)-P)*.5,E=(Math.max(r,v,d)-M)*.5,o.x=P+C,o.y=M+E,o.radius=Math.sqrt(C*C+E*E)}else o.x=(x*y-g*T)/S,o.y=(c*T-m*y)/S,C=o.x-h,E=o.y-r,o.radius=Math.sqrt(C*C+E*E);return o};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(82),l=function(n){return new s(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(115),l=function(n,o){return s(n,o.x,o.y)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l.setTo(s.x1,s.y1,s.x2,s.y2,s.x3,s.y3)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.x1===l.x1&&s.y1===l.y1&&s.x2===l.x2&&s.y2===l.y2&&s.x3===l.x3&&s.y3===l.y3};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(67),l=function(n){var o=n.getLineA(),h=n.getLineB(),r=n.getLineC();return s(o)+s(h)+s(r)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(238),l=e(506),n=function(o,h){var r=l(o);return s(o,r.x,r.y,h)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(238),l=function(n,o,h){return s(n,o.x,o.y,h)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(203),l=e(17),n={CreatePixelPerfectHandler:e(507),CreateInteractiveObject:e(508),Events:e(51),Gamepad:e(1309),InputManager:e(409),InputPlugin:e(1321),InputPluginCache:e(153),Keyboard:e(1322),Mouse:e(1336),Pointer:e(412),Touch:e(1337)};n=l(!1,n,s),t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Axis:e(509),Button:e(510),Events:e(239),Gamepad:e(511),GamepadPlugin:e(1316),Configs:e(1317)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="down"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="up"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="connected"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="disconnected"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="down"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="up"},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(9),n=e(239),o=e(511),h=e(6),r=e(153),a=e(51),v=new s({Extends:l,initialize:function(d){l.call(this),this.scene=d.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=d,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,d.pluginEvents.once(a.BOOT,this.boot,this),d.pluginEvents.on(a.START,this.start,this)},boot:function(){var u=this.scene.sys.game,d=this.settings.input,c=u.config;this.enabled=h(d,"gamepad",c.inputGamepad)&&u.device.input.gamepads,this.target=h(d,"gamepad.target",c.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(a.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(a.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var u=this,d=this.target,c=function(g){g.defaultPrevented||!u.isActive()||(u.refreshPads(),u.queue.push(g))};this.onGamepadHandler=c,d.addEventListener("gamepadconnected",c,!1),d.addEventListener("gamepaddisconnected",c,!1),this.sceneInputPlugin.pluginEvents.on(a.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(a.UPDATE,this.update);for(var u=0;u<this.gamepads.length;u++)this.gamepads[u].removeAllListeners()},disconnectAll:function(){for(var u=0;u<this.gamepads.length;u++)this.gamepads[u].pad.connected=!1},refreshPads:function(){var u=navigator.getGamepads();if(!u)this.disconnectAll();else for(var d=this.gamepads,c=0;c<u.length;c++){var g=u[c];if(!!g){var m=g.id,x=g.index,y=d[x];if(y)y.id!==m?(y.destroy(),d[x]=new o(this,g)):y.update(g);else{var T=new o(this,g);d[x]=T,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=T):this._pad3=T:this._pad2=T:this._pad1=T}}}},getAll:function(){for(var u=[],d=this.gamepads,c=0;c<d.length;c++)d[c]&&u.push(d[c]);return u},getPad:function(u){for(var d=this.gamepads,c=0;c<d.length;c++)if(d[c]&&d[c].index===u)return d[c]},update:function(){if(!!this.enabled){this.refreshPads();var u=this.queue.length;if(u!==0)for(var d=this.queue.splice(0,u),c=0;c<u;c++){var g=d[c],m=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(n.CONNECTED,m,g):g.type==="gamepaddisconnected"&&this.emit(n.DISCONNECTED,m,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var u=0;u<this.gamepads.length;u++)this.gamepads[u]&&this.gamepads[u].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",v,"gamepad","gamepad","inputGamepad"),t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={DUALSHOCK_4:e(1318),SNES_USB:e(1319),XBOX_360:e(1320)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(65),l=e(66),n=e(0),o=e(203),h=e(508),r=e(507),a=e(50),v=e(111),u=e(112),d=e(51),c=e(9),g=e(2),m=e(56),x=e(153),y=e(7),T=e(24),S=e(10),C=e(57),E=e(20),P=e(82),M=e(115),R=new n({Extends:c,initialize:function(O){c.call(this),this.scene=O,this.systems=O.sys,this.settings=O.sys.settings,this.manager=O.sys.game.input,this.pluginEvents=new c,this.enabled=!0,this.displayList,this.cameras,x.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var F={cancelled:!1};this._eventContainer={stopPropagation:function(){F.cancelled=!0}},this._eventData=F,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,O.sys.events.once(E.BOOT,this.boot,this),O.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(d.BOOT)},start:function(){var A=this.systems.events;A.on(E.TRANSITION_START,this.transitionIn,this),A.on(E.TRANSITION_OUT,this.transitionOut,this),A.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),A.on(E.PRE_UPDATE,this.preUpdate,this),A.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(d.GAME_OUT,this.onGameOut,this),this.manager.events.on(d.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(d.START)},onGameOver:function(A){this.isActive()&&this.emit(d.GAME_OVER,A.timeStamp,A)},onGameOut:function(A){this.isActive()&&this.emit(d.GAME_OUT,A.timeStamp,A)},preUpdate:function(){this.pluginEvents.emit(d.PRE_UPDATE);var A=this._pendingRemoval,O=this._pendingInsertion,F=A.length,I=O.length;if(!(F===0&&I===0)){for(var w=this._list,b=0;b<F;b++){var Y=A[b],U=w.indexOf(Y);U>-1&&(w.splice(U,1),this.clear(Y,!0))}A.length=0,this._pendingRemoval.length=0,this._list=w.concat(O.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(A,O){if(!this.isActive())return!1;if(this.pluginEvents.emit(d.UPDATE,A,O),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var F,I=this.manager,w=I.pointers,b=I.pointersTotal;for(F=0;F<b;F++)w[F].updateMotion();if(this._list.length===0)return!1;var Y=this.pollRate;if(Y===-1)return!1;if(Y>0)if(this._pollTimer-=O,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var U=!1;for(F=0;F<b;F++){var W=0,D=w[F];this._tempZones=[],this._temp=this.hitTestPointer(D),this.sortGameObjects(this._temp,D),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),W+=this.processOverOutEvents(D),this.getDragState(D)===2&&this.processDragThresholdEvent(D,A),W>0&&(U=!0)}return U},update:function(A,O){if(!this.isActive())return!1;for(var F=O.length,I=!1,w=0;w<F;w++){var b=0,Y=O[w];switch(this._tempZones=[],this._temp=this.hitTestPointer(Y),this.sortGameObjects(this._temp,Y),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),A){case o.MOUSE_DOWN:b+=this.processDragDownEvent(Y),b+=this.processDownEvents(Y),b+=this.processOverOutEvents(Y);break;case o.MOUSE_UP:b+=this.processDragUpEvent(Y),b+=this.processUpEvents(Y),b+=this.processOverOutEvents(Y);break;case o.TOUCH_START:b+=this.processDragDownEvent(Y),b+=this.processDownEvents(Y),b+=this.processOverEvents(Y);break;case o.TOUCH_END:case o.TOUCH_CANCEL:b+=this.processDragUpEvent(Y),b+=this.processUpEvents(Y),b+=this.processOutEvents(Y);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:b+=this.processDragMoveEvent(Y),b+=this.processMoveEvents(Y),b+=this.processOverOutEvents(Y);break;case o.MOUSE_WHEEL:b+=this.processWheelEvent(Y);break}b>0&&(I=!0)}return this._updatedThisFrame=!0,I},clear:function(A,O){O===void 0&&(O=!1);var F=A.input;if(!!F){O||this.queueForRemoval(A),F.gameObject=void 0,F.target=void 0,F.hitArea=void 0,F.hitAreaCallback=void 0,F.callbackContext=void 0,A.input=null;var I=this._draggable.indexOf(A);return I>-1&&this._draggable.splice(I,1),I=this._drag[0].indexOf(A),I>-1&&this._drag[0].splice(I,1),I=this._over[0].indexOf(A),I>-1&&(this._over[0].splice(I,1),this.manager.resetCursor(F)),A}},disable:function(A){A.input.enabled=!1},enable:function(A,O,F,I){return I===void 0&&(I=!1),A.input?A.input.enabled=!0:this.setHitArea(A,O,F),A.input&&I&&!A.input.dropZone&&(A.input.dropZone=I),this},hitTestPointer:function(A){for(var O=this.cameras.getCamerasBelowPointer(A),F=0;F<O.length;F++){for(var I=O[F],w=this.manager.hitTest(A,this._list,I),b=0;b<w.length;b++){var Y=w[b];Y.input.dropZone&&this._tempZones.push(Y)}if(w.length>0)return A.camera=I,w}return A.camera=O[0],[]},processDownEvents:function(A){var O=0,F=this._temp,I=this._eventData,w=this._eventContainer;I.cancelled=!1;for(var b=!1,Y=0;Y<F.length;Y++){var U=F[Y];if(!!U.input){if(O++,U.emit(d.GAMEOBJECT_POINTER_DOWN,A,U.input.localX,U.input.localY,w),I.cancelled||!U.input){b=!0;break}if(this.emit(d.GAMEOBJECT_DOWN,A,U,w),I.cancelled||!U.input){b=!0;break}}}return!b&&this.manager&&(A.downElement===this.manager.game.canvas?this.emit(d.POINTER_DOWN,A,F):this.emit(d.POINTER_DOWN_OUTSIDE,A)),O},getDragState:function(A){return this._dragState[A.id]},setDragState:function(A,O){this._dragState[A.id]=O},processDragThresholdEvent:function(A,O){var F=!1,I=this.dragTimeThreshold,w=this.dragDistanceThreshold;if((w>0&&a(A.x,A.y,A.downX,A.downY)>=w||I>0&&O>=A.downTime+I)&&(F=!0),F)return this.setDragState(A,3),this.processDragStartList(A)},processDragStartList:function(A){if(this.getDragState(A)!==3)return 0;for(var O=this._drag[A.id],F=0;F<O.length;F++){var I=O[F],w=I.input;w.dragState=2,w.dragStartX=I.x,w.dragStartY=I.y,w.dragStartXGlobal=A.worldX,w.dragStartYGlobal=A.worldY,w.dragX=w.dragStartXGlobal-w.dragStartX,w.dragY=w.dragStartYGlobal-w.dragStartY,I.emit(d.GAMEOBJECT_DRAG_START,A,w.dragX,w.dragY),this.emit(d.DRAG_START,A,I)}return this.setDragState(A,4),O.length},processDragDownEvent:function(A){var O=this._temp;if(this._draggable.length===0||O.length===0||!A.primaryDown||this.getDragState(A)!==0)return 0;this.setDragState(A,1);for(var F=[],I=0;I<O.length;I++){var w=O[I];w.input.draggable&&w.input.dragState===0&&F.push(w)}return F.length===0?(this.setDragState(A,0),0):(F.length>1&&(this.sortGameObjects(F,A),this.topOnly&&F.splice(1)),this._drag[A.id]=F,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(A,3),this.processDragStartList(A)):(this.setDragState(A,2),0))},processDragMoveEvent:function(A){if(this.getDragState(A)===2&&this.processDragThresholdEvent(A,this.manager.game.loop.now),this.getDragState(A)!==4)return 0;for(var O=this._tempZones,F=this._drag[A.id],I=0;I<F.length;I++){var w=F[I],b=w.input,Y=b.target;if(Y){var U=O.indexOf(Y);U===0?(w.emit(d.GAMEOBJECT_DRAG_OVER,A,Y),this.emit(d.DRAG_OVER,A,w,Y)):U>0?(w.emit(d.GAMEOBJECT_DRAG_LEAVE,A,Y),this.emit(d.DRAG_LEAVE,A,w,Y),b.target=O[0],Y=b.target,w.emit(d.GAMEOBJECT_DRAG_ENTER,A,Y),this.emit(d.DRAG_ENTER,A,w,Y)):(w.emit(d.GAMEOBJECT_DRAG_LEAVE,A,Y),this.emit(d.DRAG_LEAVE,A,w,Y),O[0]?(b.target=O[0],Y=b.target,w.emit(d.GAMEOBJECT_DRAG_ENTER,A,Y),this.emit(d.DRAG_ENTER,A,w,Y)):b.target=null)}else!Y&&O[0]&&(b.target=O[0],Y=b.target,w.emit(d.GAMEOBJECT_DRAG_ENTER,A,Y),this.emit(d.DRAG_ENTER,A,w,Y));var W,D;if(!w.parentContainer)W=A.worldX-b.dragX,D=A.worldY-b.dragY;else{var L=A.worldX-b.dragStartXGlobal,B=A.worldY-b.dragStartYGlobal,G=w.getParentRotation(),N=L*Math.cos(G)+B*Math.sin(G),V=B*Math.cos(G)-L*Math.sin(G);N*=1/w.parentContainer.scaleX,V*=1/w.parentContainer.scaleY,W=N+b.dragStartX,D=V+b.dragStartY}w.emit(d.GAMEOBJECT_DRAG,A,W,D),this.emit(d.DRAG,A,w,W,D)}return F.length},processDragUpEvent:function(A){for(var O=this._drag[A.id],F=0;F<O.length;F++){var I=O[F],w=I.input;if(w&&w.dragState===2){w.dragState=0,w.dragX=w.localX-I.displayOriginX,w.dragY=w.localY-I.displayOriginY;var b=!1,Y=w.target;Y&&(I.emit(d.GAMEOBJECT_DROP,A,Y),this.emit(d.DROP,A,I,Y),w.target=null,b=!0),I.input&&(I.emit(d.GAMEOBJECT_DRAG_END,A,w.dragX,w.dragY,b),this.emit(d.DRAG_END,A,I,b))}}return this.setDragState(A,0),O.splice(0),0},processMoveEvents:function(A){var O=0,F=this._temp,I=this._eventData,w=this._eventContainer;I.cancelled=!1;for(var b=!1,Y=0;Y<F.length;Y++){var U=F[Y];if(!!U.input){if(O++,U.emit(d.GAMEOBJECT_POINTER_MOVE,A,U.input.localX,U.input.localY,w),I.cancelled||!U.input){b=!0;break}if(this.emit(d.GAMEOBJECT_MOVE,A,U,w),I.cancelled||!U.input){b=!0;break}if(this.topOnly)break}}return b||this.emit(d.POINTER_MOVE,A,F),O},processWheelEvent:function(A){var O=0,F=this._temp,I=this._eventData,w=this._eventContainer;I.cancelled=!1;for(var b=!1,Y=A.deltaX,U=A.deltaY,W=A.deltaZ,D=0;D<F.length;D++){var L=F[D];if(!!L.input){if(O++,L.emit(d.GAMEOBJECT_POINTER_WHEEL,A,Y,U,W,w),I.cancelled||!L.input){b=!0;break}if(this.emit(d.GAMEOBJECT_WHEEL,A,L,Y,U,W,w),I.cancelled||!L.input){b=!0;break}}}return b||this.emit(d.POINTER_WHEEL,A,F,Y,U,W),O},processOverEvents:function(A){var O=this._temp,F=0,I=O.length,w=[];if(I>0){var b=this.manager,Y=this._eventData,U=this._eventContainer;Y.cancelled=!1;for(var W=!1,D=0;D<I;D++){var L=O[D];if(!!L.input){if(w.push(L),b.setCursor(L.input),L.emit(d.GAMEOBJECT_POINTER_OVER,A,L.input.localX,L.input.localY,U),F++,Y.cancelled||!L.input){W=!0;break}if(this.emit(d.GAMEOBJECT_OVER,A,L,U),Y.cancelled||!L.input){W=!0;break}}}W||this.emit(d.POINTER_OVER,A,w)}return this._over[A.id]=w,F},processOutEvents:function(A){var O=this._over[A.id],F=0,I=O.length;if(I>0){var w=this.manager,b=this._eventData,Y=this._eventContainer;b.cancelled=!1;var U=!1;this.sortGameObjects(O,A);for(var W=0;W<I;W++){var D=O[W];if(D=O[W],!!D.input){if(w.resetCursor(D.input),D.emit(d.GAMEOBJECT_POINTER_OUT,A,Y),F++,b.cancelled||!D.input){U=!0;break}if(this.emit(d.GAMEOBJECT_OUT,A,D,Y),b.cancelled||!D.input){U=!0;break}U||this.emit(d.POINTER_OUT,A,O)}}this._over[A.id]=[]}return F},processOverOutEvents:function(A){var O=this._temp,F,I,w=[],b=[],Y=[],U=this._over[A.id],W=this._drag[A.id],D=this.manager;for(F=0;F<U.length;F++)I=U[F],O.indexOf(I)===-1&&W.indexOf(I)===-1?w.push(I):Y.push(I);for(F=0;F<O.length;F++)I=O[F],U.indexOf(I)===-1&&b.push(I);var L=w.length,B=0,G=this._eventData,N=this._eventContainer;G.cancelled=!1;var V=!1;if(L>0){for(this.sortGameObjects(w,A),F=0;F<L;F++)if(I=w[F],!!I.input){if(D.resetCursor(I.input),I.emit(d.GAMEOBJECT_POINTER_OUT,A,N),B++,G.cancelled||!I.input){V=!0;break}if(this.emit(d.GAMEOBJECT_OUT,A,I,N),G.cancelled||!I.input){V=!0;break}}V||this.emit(d.POINTER_OUT,A,w)}if(L=b.length,G.cancelled=!1,V=!1,L>0){for(this.sortGameObjects(b,A),F=0;F<L;F++)if(I=b[F],!!I.input){if(D.setCursor(I.input),I.emit(d.GAMEOBJECT_POINTER_OVER,A,I.input.localX,I.input.localY,N),B++,G.cancelled||!I.input){V=!0;break}if(this.emit(d.GAMEOBJECT_OVER,A,I,N),G.cancelled||!I.input){V=!0;break}}V||this.emit(d.POINTER_OVER,A,b)}return U=Y.concat(b),this._over[A.id]=this.sortGameObjects(U,A),B},processUpEvents:function(A){var O=this._temp,F=this._eventData,I=this._eventContainer;F.cancelled=!1;for(var w=!1,b=0;b<O.length;b++){var Y=O[b];if(!!Y.input){if(Y.emit(d.GAMEOBJECT_POINTER_UP,A,Y.input.localX,Y.input.localY,I),F.cancelled||!Y.input){w=!0;break}if(this.emit(d.GAMEOBJECT_UP,A,Y,I),F.cancelled||!Y.input){w=!0;break}}}return!w&&this.manager&&(A.upElement===this.manager.game.canvas?this.emit(d.POINTER_UP,A,O):this.emit(d.POINTER_UP_OUTSIDE,A)),O.length},queueForInsertion:function(A){return this._pendingInsertion.indexOf(A)===-1&&this._list.indexOf(A)===-1&&this._pendingInsertion.push(A),this},queueForRemoval:function(A){return this._pendingRemoval.push(A),this},setDraggable:function(A,O){O===void 0&&(O=!0),Array.isArray(A)||(A=[A]);for(var F=0;F<A.length;F++){var I=A[F];I.input.draggable=O;var w=this._draggable.indexOf(I);O&&w===-1?this._draggable.push(I):!O&&w>-1&&this._draggable.splice(w,1)}return this},makePixelPerfect:function(A){A===void 0&&(A=1);var O=this.systems.textures;return r(O,A)},setHitArea:function(A,O,F){if(O===void 0)return this.setHitAreaFromTexture(A);Array.isArray(A)||(A=[A]);var I=!1,w=!1,b=!1,Y=!1,U=!1,W=!0;if(y(O)){var D=O;O=g(D,"hitArea",null),F=g(D,"hitAreaCallback",null),I=g(D,"draggable",!1),w=g(D,"dropZone",!1),b=g(D,"cursor",!1),Y=g(D,"useHandCursor",!1),U=g(D,"pixelPerfect",!1);var L=g(D,"alphaTolerance",1);U&&(O={},F=this.makePixelPerfect(L)),(!O||!F)&&(this.setHitAreaFromTexture(A),W=!1)}else typeof O=="function"&&!F&&(F=O,O={});for(var B=0;B<A.length;B++){var G=A[B];if(U&&G.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var N=G.input?G.input:h(G,O,F);N.customHitArea=W,N.dropZone=w,N.cursor=Y?"pointer":b,G.input=N,I&&this.setDraggable(G),this.queueForInsertion(G)}return this},setHitAreaCircle:function(A,O,F,I,w){w===void 0&&(w=l);var b=new s(O,F,I);return this.setHitArea(A,b,w)},setHitAreaEllipse:function(A,O,F,I,w,b){b===void 0&&(b=u);var Y=new v(O,F,I,w);return this.setHitArea(A,Y,b)},setHitAreaFromTexture:function(A,O){O===void 0&&(O=C),Array.isArray(A)||(A=[A]);for(var F=0;F<A.length;F++){var I=A[F],w=I.frame,b=0,Y=0;if(I.width?(b=I.width,Y=I.height):w&&(b=w.realWidth,Y=w.realHeight),I.type==="Container"&&(b===0||Y===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}b!==0&&Y!==0&&(I.input=h(I,new S(0,0,b,Y),O),this.queueForInsertion(I))}return this},setHitAreaRectangle:function(A,O,F,I,w,b){b===void 0&&(b=C);var Y=new S(O,F,I,w);return this.setHitArea(A,Y,b)},setHitAreaTriangle:function(A,O,F,I,w,b,Y,U){U===void 0&&(U=M);var W=new P(O,F,I,w,b,Y);return this.setHitArea(A,W,U)},enableDebug:function(A,O){O===void 0&&(O=65280);var F=A.input;if(!F||!F.hitArea)return this;var I=F.hitArea,w=I.type,b=F.hitAreaDebug,Y=this.systems.add,U=this.systems.updateList;b&&(U.remove(b),b.destroy(),b=null);var W=0,D=0;switch(w){case m.CIRCLE:b=Y.arc(0,0,I.radius),W=I.x-I.radius,D=I.y-I.radius;break;case m.ELLIPSE:b=Y.ellipse(0,0,I.width,I.height),W=I.x-I.width/2,D=I.y-I.height/2;break;case m.LINE:b=Y.line(0,0,I.x1,I.y1,I.x2,I.y2);break;case m.POLYGON:b=Y.polygon(0,0,I.points);break;case m.RECTANGLE:b=Y.rectangle(0,0,I.width,I.height),W=I.x,D=I.y;break;case m.TRIANGLE:b=Y.triangle(0,0,I.x1,I.y1,I.x2,I.y2,I.x3,I.y3);break}return b&&(b.isFilled=!1,b.preUpdate=function(){b.setStrokeStyle(1/A.scale,O),b.setDisplayOrigin(A.displayOriginX,A.displayOriginY);var L=A.x,B=A.y,G=A.rotation,N=A.scaleX,V=A.scaleY;if(A.parentContainer){var z=A.getWorldTransformMatrix();L=z.tx,B=z.ty,G=z.rotation,N=z.scaleX,V=z.scaleY}b.setRotation(G),b.setScale(N,V),b.setPosition(L+W,B+D),b.setScrollFactor(A.scrollFactorX,A.scrollFactorY),b.setDepth(A.depth)},U.add(b),F.hitAreaDebug=b),this},removeDebug:function(A){var O=A.input;if(O&&O.hitAreaDebug){var F=O.hitAreaDebug;this.systems.updateList.remove(F),F.destroy(),O.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(A){return this.pollRate=A,this._pollTimer=0,this},setGlobalTopOnly:function(A){return this.manager.globalTopOnly=A,this},setTopOnly:function(A){return this.topOnly=A,this},sortGameObjects:function(A,O){if(A.length<2)return A;var F=O.camera.renderList;return A.sort(function(I,w){return F.indexOf(w)-F.indexOf(I)})},sortDropZones:function(A){return A.length<2?A:(this.scene.sys.depthSort(),A.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(A,O){if(!A.parentContainer&&!O.parentContainer)return this.displayList.getIndex(O)-this.displayList.getIndex(A);if(A.parentContainer===O.parentContainer)return O.parentContainer.getIndex(O)-A.parentContainer.getIndex(A);if(A.parentContainer===O)return-1;if(O.parentContainer===A)return 1;for(var F=A.getIndexList(),I=O.getIndexList(),w=Math.min(F.length,I.length),b=0;b<w;b++){var Y=F[b],U=I[b];if(Y!==U)return U-Y}return I.length-F.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(A){return this.manager.addPointer(A)},setDefaultCursor:function(A){return this.manager.setDefaultCursor(A),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(d.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var A=0;A<10;A++)this._drag[A]=[],this._over[A]=[];this.removeAllListeners();var O=this.manager;O.canvas.style.cursor=O.defaultCursor;var F=this.systems.events;F.off(E.TRANSITION_START,this.transitionIn,this),F.off(E.TRANSITION_OUT,this.transitionOut,this),F.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),F.off(E.PRE_UPDATE,this.preUpdate,this),O.events.off(d.GAME_OUT,this.onGameOut,this),O.events.off(d.GAME_OVER,this.onGameOver,this),F.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(d.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",R,"input"),t.exports=R},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Events:e(154),KeyboardManager:e(410),KeyboardPlugin:e(1330),Key:e(512),KeyCodes:e(143),KeyCombo:e(513),AdvanceKeyCombo:e(515),ProcessKeyCombo:e(514),ResetKeyCombo:e(516),JustDown:e(1332),JustUp:e(1333),DownDuration:e(1334),UpDuration:e(1335)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="keydown"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="keyup"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="keycombomatch"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="down"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="keydown-"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="keyup-"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="up"},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(9),n=e(154),o=e(22),h=e(6),r=e(51),a=e(153),v=e(512),u=e(143),d=e(513),c=e(1331),g=e(20),m=e(76),x=new s({Extends:l,initialize:function(T){l.call(this),this.game=T.systems.game,this.scene=T.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=T,this.manager=T.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,T.pluginEvents.once(r.BOOT,this.boot,this),T.pluginEvents.on(r.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=h(y,"keyboard",!0);var T=h(y,"keyboard.capture",null);T&&this.addCaptures(T),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:u.UP,down:u.DOWN,left:u.LEFT,right:u.RIGHT,space:u.SPACE,shift:u.SHIFT})},addKeys:function(y,T,S){T===void 0&&(T=!0),S===void 0&&(S=!1);var C={};if(typeof y=="string"){y=y.split(",");for(var E=0;E<y.length;E++){var P=y[E].trim();P&&(C[P]=this.addKey(P,T,S))}}else for(var M in y)C[M]=this.addKey(y[M],T,S);return C},addKey:function(y,T,S){T===void 0&&(T=!0),S===void 0&&(S=!1);var C=this.keys;if(y instanceof v){var E=C.indexOf(y);return E>-1?C[E]=y:C[y.keyCode]=y,T&&this.addCapture(y.keyCode),y.setEmitOnRepeat(S),y}return typeof y=="string"&&(y=u[y.toUpperCase()]),C[y]||(C[y]=new v(this,y),T&&this.addCapture(y),C[y].setEmitOnRepeat(S)),C[y]},removeKey:function(y,T){T===void 0&&(T=!1);var S=this.keys,C;if(y instanceof v){var E=S.indexOf(y);E>-1&&(C=this.keys[E],this.keys[E]=void 0)}else typeof y=="string"&&(y=u[y.toUpperCase()]);return S[y]&&(C=S[y],S[y]=void 0),C&&(C.plugin=null,T&&C.destroy()),this},removeAllKeys:function(y){for(var T=this.keys,S=0;S<T.length;S++){var C=T[S];C&&(T[S]=void 0,y&&C.destroy())}return this},createCombo:function(y,T){return new d(this,y,T)},checkDown:function(y,T){if(T===void 0&&(T=0),this.enabled&&y.isDown){var S=m(this.time-y.timeDown,T);if(S>y._tick)return y._tick=S,!0}return!1},update:function(){var y=this.manager.queue,T=y.length;if(!(!this.isActive()||T===0))for(var S=this.keys,C=0;C<T;C++){var E=y[C],P=E.keyCode,M=S[P],R=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(P===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=P,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(M&&(R=M.isDown,M.onDown(E)),!E.cancelled&&(!M||!R)&&(c[P]&&this.emit(n.KEY_DOWN+c[P],E),E.cancelled||this.emit(n.ANY_KEY_DOWN,E))):(M&&M.onUp(E),E.cancelled||(c[P]&&this.emit(n.KEY_UP+c[P],E),E.cancelled||this.emit(n.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});a.register("KeyboardPlugin",x,"keyboard","keyboard","inputKeyboard"),t.exports=x},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(143),l={};for(var n in s)l[s[n]]=n;t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s._justDown?(s._justDown=!1,!0):!1};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s._justUp?(s._justUp=!1,!0):!1};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){l===void 0&&(l=50);var n=s.plugin.game.loop.time-s.timeDown;return s.isDown&&n<l};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){l===void 0&&(l=50);var n=s.plugin.game.loop.time-s.timeUp;return s.isUp&&n<l};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={MouseManager:e(411)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={TouchManager:e(413)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(21),l=e(17),n={Events:e(95),FileTypes:e(1339),File:e(23),FileTypesManager:e(8),GetURL:e(155),LoaderPlugin:e(1365),MergeXHRSettings:e(240),MultiFile:e(49),XHRLoader:e(517),XHRSettings:e(156)};n=l(!1,n,s),t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={AnimationJSONFile:e(1340),AsepriteFile:e(1341),AtlasJSONFile:e(1342),AtlasXMLFile:e(1343),AudioFile:e(518),AudioSpriteFile:e(1344),BinaryFile:e(1345),BitmapFontFile:e(1346),CSSFile:e(1347),GLSLFile:e(1348),HTML5AudioFile:e(519),HTMLFile:e(1349),HTMLTextureFile:e(1350),ImageFile:e(71),JSONFile:e(61),MultiAtlasFile:e(1351),MultiScriptFile:e(1352),OBJFile:e(1353),PackFile:e(1354),PluginFile:e(1355),SceneFile:e(1356),ScenePluginFile:e(1357),ScriptFile:e(520),SpriteSheetFile:e(1358),SVGFile:e(1359),TextFile:e(242),TilemapCSVFile:e(1360),TilemapImpactFile:e(1361),TilemapJSONFile:e(1362),UnityAtlasFile:e(1363),VideoFile:e(1364),XMLFile:e(241)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(8),n=e(61),o=e(95),h=new s({Extends:n,initialize:function(a,v,u,d,c){n.call(this,a,v,u,d,c),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),n.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});l.register("animation",function(r,a,v,u){if(Array.isArray(r))for(var d=0;d<r.length;d++)this.addFile(new h(this,r[d]));else this.addFile(new h(this,r,a,u,v));return this}),t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(8),n=e(2),o=e(71),h=e(7),r=e(61),a=e(49),v=new s({Extends:a,initialize:function(d,c,g,m,x,y){var T,S;if(h(c)){var C=c;c=n(C,"key"),T=new o(d,{key:c,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new r(d,{key:c,url:n(C,"atlasURL"),extension:n(C,"atlasExtension","json"),xhrSettings:n(C,"atlasXhrSettings")})}else T=new o(d,c,g,x),S=new r(d,c,m,y);T.linkFile?a.call(this,d,"atlasjson",c,[T,S,T.linkFile]):a.call(this,d,"atlasjson",c,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],d=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(u.key,u.data,d.data,c),d.addToCache(),this.complete=!0}}});l.register("aseprite",function(u,d,c,g,m){var x;if(Array.isArray(u))for(var y=0;y<u.length;y++)x=new v(this,u[y]),this.addFile(x.files);else x=new v(this,u,d,c,g,m),this.addFile(x.files);return this}),t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(8),n=e(2),o=e(71),h=e(7),r=e(61),a=e(49),v=new s({Extends:a,initialize:function(d,c,g,m,x,y){var T,S;if(h(c)){var C=c;c=n(C,"key"),T=new o(d,{key:c,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new r(d,{key:c,url:n(C,"atlasURL"),extension:n(C,"atlasExtension","json"),xhrSettings:n(C,"atlasXhrSettings")})}else T=new o(d,c,g,x),S=new r(d,c,m,y);T.linkFile?a.call(this,d,"atlasjson",c,[T,S,T.linkFile]):a.call(this,d,"atlasjson",c,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],d=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(u.key,u.data,d.data,c),d.pendingDestroy(),this.complete=!0}}});l.register("atlas",function(u,d,c,g,m){var x;if(Array.isArray(u))for(var y=0;y<u.length;y++)x=new v(this,u[y]),this.addFile(x.files);else x=new v(this,u,d,c,g,m),this.addFile(x.files);return this}),t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(8),n=e(2),o=e(71),h=e(7),r=e(49),a=e(241),v=new s({Extends:r,initialize:function(d,c,g,m,x,y){var T,S;if(h(c)){var C=c;c=n(C,"key"),T=new o(d,{key:c,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new a(d,{key:c,url:n(C,"atlasURL"),extension:n(C,"atlasExtension","xml"),xhrSettings:n(C,"atlasXhrSettings")})}else T=new o(d,c,g,x),S=new a(d,c,m,y);T.linkFile?r.call(this,d,"atlasxml",c,[T,S,T.linkFile]):r.call(this,d,"atlasxml",c,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],d=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(u.key,u.data,d.data,c),d.pendingDestroy(),this.complete=!0}}});l.register("atlasXML",function(u,d,c,g,m){var x;if(Array.isArray(u))for(var y=0;y<u.length;y++)x=new v(this,u[y]),this.addFile(x.files);else x=new v(this,u,d,c,g,m),this.addFile(x.files);return this}),t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(518),l=e(0),n=e(8),o=e(2),h=e(7),r=e(61),a=e(49),v=new l({Extends:a,initialize:function(d,c,g,m,x,y,T){if(h(c)){var S=c;c=o(S,"key"),g=o(S,"jsonURL"),m=o(S,"audioURL"),x=o(S,"audioConfig"),y=o(S,"audioXhrSettings"),T=o(S,"jsonXhrSettings")}var C;if(!m)C=new r(d,c,g,T),a.call(this,d,"audiosprite",c,[C]),this.config.resourceLoad=!0,this.config.audioConfig=x,this.config.audioXhrSettings=y;else{var E=s.create(d,c,m,x,y);E&&(C=new r(d,c,g,T),a.call(this,d,"audiosprite",c,[E,C]),this.config.resourceLoad=!1)}},onFileComplete:function(u){var d=this.files.indexOf(u);if(d!==-1&&(this.pending--,this.config.resourceLoad&&u.type==="json"&&u.data.hasOwnProperty("resources"))){var c=u.data.resources,g=o(this.config,"audioConfig"),m=o(this.config,"audioXhrSettings"),x=s.create(this.loader,u.key,c,g,m);x&&(this.addToMultiFile(x),this.loader.addFile(x))}},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],d=this.files[1];u.addToCache(),d.addToCache(),this.complete=!0}}});n.register("audioSprite",function(u,d,c,g,m,x){var y=this.systems.game,T=y.config.audio,S=y.device.audio;if(T&&T.noAudio||!S.webAudio&&!S.audioData)return this;var C;if(Array.isArray(u))for(var E=0;E<u.length;E++)C=new v(this,u[E]),C.files&&this.addFile(C.files);else C=new v(this,u,d,c,g,m,x),C.files&&this.addFile(C.files);return this})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=new s({Extends:n,initialize:function(u,d,c,g,m){var x="bin";if(r(d)){var y=d;d=h(y,"key"),c=h(y,"url"),g=h(y,"xhrSettings"),x=h(y,"extension",x),m=h(y,"dataType",m)}var T={type:"binary",cache:u.cacheManager.binary,extension:x,responseType:"arraybuffer",key:d,url:c,xhrSettings:g,config:{dataType:m}};n.call(this,u,T)},onProcess:function(){this.state=l.FILE_PROCESSING;var v=this.config.dataType;this.data=v?new v(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",function(v,u,d,c){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new a(this,v[g]));else this.addFile(new a(this,v,u,c,d));return this}),t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(8),n=e(2),o=e(71),h=e(7),r=e(49),a=e(212),v=e(241),u=new s({Extends:r,initialize:function(c,g,m,x,y,T){var S,C;if(h(g)){var E=g;g=n(E,"key"),S=new o(c,{key:g,url:n(E,"textureURL"),extension:n(E,"textureExtension","png"),normalMap:n(E,"normalMap"),xhrSettings:n(E,"textureXhrSettings")}),C=new v(c,{key:g,url:n(E,"fontDataURL"),extension:n(E,"fontDataExtension","xml"),xhrSettings:n(E,"fontDataXhrSettings")})}else S=new o(c,g,m,y),C=new v(c,g,x,T);S.linkFile?r.call(this,c,"bitmapfont",g,[S,C,S.linkFile]):r.call(this,c,"bitmapfont",g,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1];d.addToCache(),c.pendingDestroy();var g=d.cache.get(d.key),m=a(c.data,d.cache.getFrame(d.key),0,0,g);this.loader.cacheManager.bitmapFont.add(d.key,{data:m,texture:d.key,frame:null}),this.complete=!0}}});l.register("bitmapFont",function(d,c,g,m,x){var y;if(Array.isArray(d))for(var T=0;T<d.length;T++)y=new u(this,d[T]),this.addFile(y.files);else y=new u(this,d,c,g,m,x),this.addFile(y.files);return this}),t.exports=u},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=new s({Extends:n,initialize:function(u,d,c,g){var m="css";if(r(d)){var x=d;d=h(x,"key"),c=h(x,"url"),g=h(x,"xhrSettings"),m=h(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:d,url:c,xhrSettings:g};n.call(this,u,y)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",function(v,u,d){if(Array.isArray(v))for(var c=0;c<v.length;c++)this.addFile(new a(this,v[c]));else this.addFile(new a(this,v,u,d));return this}),t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=e(396),v=new s({Extends:n,initialize:function(d,c,g,m,x){var y="glsl";if(r(c)){var T=c;c=h(T,"key"),g=h(T,"url"),m=h(T,"shaderType","fragment"),x=h(T,"xhrSettings"),y=h(T,"extension",y)}else m===void 0&&(m="fragment");var S={type:"glsl",cache:d.cacheManager.shader,extension:y,responseType:"text",key:c,url:g,config:{shaderType:m},xhrSettings:x};n.call(this,d,S)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u=this.data.split(`
`),d=this.extractBlock(u,0);if(d)for(;d;){var c=this.getShaderName(d.header),g=this.getShaderType(d.header),m=this.getShaderUniforms(d.header),x=d.shader;if(this.cache.has(c)){var y=this.cache.get(c);g==="fragment"?y.fragmentSrc=x:y.vertexSrc=x,y.uniforms||(y.uniforms=m)}else g==="fragment"?this.cache.add(c,new a(c,x,"",m)):this.cache.add(c,new a(c,"",x,m));d=this.extractBlock(u,d.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new a(this.key,this.data)):this.cache.add(this.key,new a(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(u){for(var d=0;d<u.length;d++){var c=u[d].trim();if(c.substring(0,5)==="name:")return c.substring(5).trim()}return this.key},getShaderType:function(u){for(var d=0;d<u.length;d++){var c=u[d].trim();if(c.substring(0,5)==="type:")return c.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(u){for(var d={},c=0;c<u.length;c++){var g=u[c].trim();if(g.substring(0,8)==="uniform."){var m=g.indexOf(":");if(m){var x=g.substring(8,m);try{d[x]=JSON.parse(g.substring(m+1))}catch{console.warn("Invalid uniform JSON: "+x)}}}}return d},extractBlock:function(u,d){for(var c=-1,g=-1,m=-1,x=!1,y=!1,T=[],S=[],C=d;C<u.length;C++){var E=u[C].trim();if(E==="---")if(c===-1)c=C,x=!0;else if(x)g=C,x=!1,y=!0;else{y=!1;break}else x?T.push(E):y&&(S.push(E),m=C)}return!x&&g!==-1?{header:T,shader:S.join(`
`),offset:m}:null}});o.register("glsl",function(u,d,c,g){if(Array.isArray(u))for(var m=0;m<u.length;m++)this.addFile(new v(this,u[m]));else this.addFile(new v(this,u,d,c,g));return this}),t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=new s({Extends:n,initialize:function(u,d,c,g){var m="html";if(r(d)){var x=d;d=h(x,"key"),c=h(x,"url"),g=h(x,"xhrSettings"),m=h(x,"extension",m)}var y={type:"text",cache:u.cacheManager.html,extension:m,responseType:"text",key:d,url:c,xhrSettings:g};n.call(this,u,y)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",function(v,u,d){if(Array.isArray(v))for(var c=0;c<v.length;c++)this.addFile(new a(this,v[c]));else this.addFile(new a(this,v,u,d));return this}),t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=new s({Extends:n,initialize:function(u,d,c,g,m,x){g===void 0&&(g=512),m===void 0&&(m=512);var y="html";if(r(d)){var T=d;d=h(T,"key"),c=h(T,"url"),x=h(T,"xhrSettings"),y=h(T,"extension",y),g=h(T,"width",g),m=h(T,"height",m)}var S={type:"html",cache:u.textureManager,extension:y,responseType:"text",key:d,url:c,xhrSettings:x,config:{width:g,height:m}};n.call(this,u,S)},onProcess:function(){this.state=l.FILE_PROCESSING;var v=this.config.width,u=this.config.height,d=[];d.push('<svg width="'+v+'px" height="'+u+'px" viewBox="0 0 '+v+" "+u+'" xmlns="http://www.w3.org/2000/svg">'),d.push('<foreignObject width="100%" height="100%">'),d.push('<body xmlns="http://www.w3.org/1999/xhtml">'),d.push(this.xhrLoader.responseText),d.push("</body>"),d.push("</foreignObject>"),d.push("</svg>");var c=[d.join(`
`)],g=this;try{var m=new window.Blob(c,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=l.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){n.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(g.data),g.onProcessError()},n.createObjectURL(this.data,m,"image/svg+xml")},addToCache:function(){var v=this.cache.addImage(this.key,this.data);this.pendingDestroy(v)}});o.register("htmlTexture",function(v,u,d,c,g){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new a(this,v[m]));else this.addFile(new a(this,v,u,d,c,g));return this}),t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(8),n=e(2),o=e(71),h=e(7),r=e(61),a=e(49),v=new s({Extends:a,initialize:function(d,c,g,m,x,y,T){if(h(c)){var S=c;c=n(S,"key"),n(S,"url",!1)?g=n(S,"url"):g=n(S,"atlasURL"),y=n(S,"xhrSettings"),m=n(S,"path"),x=n(S,"baseURL"),T=n(S,"textureXhrSettings")}var C=new r(d,c,g,y);a.call(this,d,"multiatlas",c,[C]),this.config.path=m,this.config.baseURL=x,this.config.textureXhrSettings=T},onFileComplete:function(u){var d=this.files.indexOf(u);if(d!==-1&&(this.pending--,u.type==="json"&&u.data.hasOwnProperty("textures"))){var c=u.data.textures,g=this.config,m=this.loader,x=m.baseURL,y=m.path,T=m.prefix,S=n(g,"baseURL",this.baseURL),C=n(g,"path",this.path),E=n(g,"prefix",this.prefix),P=n(g,"textureXhrSettings");m.setBaseURL(S),m.setPath(C),m.setPrefix(E);for(var M=0;M<c.length;M++){var R=c[M].image,A="MA"+this.multiKeyIndex+"_"+R,O=new o(m,A,R,P);if(this.addToMultiFile(O),m.addFile(O),c[M].normalMap){var F=new o(m,A,c[M].normalMap,P);F.type="normalMap",O.setLink(F),this.addToMultiFile(F),m.addFile(F)}}m.setBaseURL(x),m.setPath(y),m.setPrefix(T)}},addToCache:function(){if(this.isReadyToProcess()){for(var u=this.files[0],d=[],c=[],g=[],m=1;m<this.files.length;m++){var x=this.files[m];if(x.type!=="normalMap")for(var y=x.key.indexOf("_"),T=x.key.substr(y+1),S=x.data,C=0;C<u.data.textures.length;C++){var E=u.data.textures[C];if(E.image===T){c.push(S),d.push(E),x.linkFile&&g.push(x.linkFile.data);break}}}for(g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,c,d,g),this.complete=!0,m=0;m<this.files.length;m++)this.files[m].pendingDestroy()}}});l.register("multiatlas",function(u,d,c,g,m){var x;if(Array.isArray(u))for(var y=0;y<u.length;y++)x=new v(this,u[y]),this.addFile(x.files);else x=new v(this,u,d,c,g,m),this.addFile(x.files);return this}),t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(8),n=e(2),o=e(7),h=e(49),r=e(520),a=new s({Extends:h,initialize:function(u,d,c,g){var m="js",x=[];if(o(d)){var y=d;d=n(y,"key"),c=n(y,"url"),g=n(y,"xhrSettings"),m=n(y,"extension",m)}Array.isArray(c)||(c=[c]);for(var T=0;T<c.length;T++){var S=new r(u,{key:d+"_"+T.toString(),url:c[T],extension:m,xhrSettings:g});S.onProcess=function(){this.onProcessComplete()},x.push(S)}h.call(this,u,"scripts",d,x)},addToCache:function(){if(this.isReadyToProcess()){for(var v=0;v<this.files.length;v++){var u=this.files[v];u.data=document.createElement("script"),u.data.language="javascript",u.data.type="text/javascript",u.data.defer=!1,u.data.text=u.xhrLoader.responseText,document.head.appendChild(u.data)}this.complete=!0}}});l.register("scripts",function(v,u,d){var c;if(Array.isArray(v))for(var g=0;g<v.length;g++)c=new a(this,v[g]),this.addFile(c.files);else c=new a(this,v,u,d),this.addFile(c.files);return this}),t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(8),n=e(2),o=e(7),h=e(49),r=e(498),a=e(499),v=e(242),u=new s({Extends:h,initialize:function(c,g,m,x,y,T){var S,C,E=c.cacheManager.obj;if(o(g)){var P=g;g=n(P,"key"),S=new v(c,{key:g,type:"obj",cache:E,url:n(P,"url"),extension:n(P,"extension","obj"),xhrSettings:n(P,"xhrSettings"),config:{flipUV:n(P,"flipUV",y)}}),x=n(P,"matURL"),x&&(C=new v(c,{key:g,type:"mat",cache:E,url:x,extension:n(P,"matExtension","mat"),xhrSettings:n(P,"xhrSettings")}))}else S=new v(c,{key:g,url:m,type:"obj",cache:E,extension:"obj",xhrSettings:T,config:{flipUV:y}}),x&&(C=new v(c,{key:g,url:x,type:"mat",cache:E,extension:"mat",xhrSettings:T}));h.call(this,c,"obj",g,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],g=r(d.data,d.config.flipUV);c&&(g.materials=a(c.data)),d.cache.add(d.key,g),this.complete=!0}}});l.register("obj",function(d,c,g,m,x){var y;if(Array.isArray(d))for(var T=0;T<d.length;T++)y=new u(this,d[T]),this.addFile(y.files);else y=new u(this,d,c,g,m,x),this.addFile(y.files);return this}),t.exports=u},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(8),o=e(61),h=new s({Extends:o,initialize:function(a,v,u,d,c){o.call(this,a,v,u,d,c),this.type="packfile"},onProcess:function(){this.state!==l.FILE_POPULATED&&(this.state=l.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});n.register("pack",function(r,a,v,u){if(Array.isArray(r))for(var d=0;d<r.length;d++)this.addFile(new h(this,r[d]));else this.addFile(new h(this,r,a,u,v));return this}),t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=new s({Extends:n,initialize:function(u,d,c,g,m,x){var y="js";if(r(d)){var T=d;d=h(T,"key"),c=h(T,"url"),x=h(T,"xhrSettings"),y=h(T,"extension",y),g=h(T,"start"),m=h(T,"mapping")}var S={type:"plugin",cache:!1,extension:y,responseType:"text",key:d,url:c,xhrSettings:x,config:{start:g,mapping:m}};n.call(this,u,S),typeof c=="function"&&(this.data=c,this.state=l.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,u=this.config,d=h(u,"start",!1),c=h(u,"mapping",null);if(this.state===l.FILE_POPULATED)v.install(this.key,this.data,d,c);else{this.state=l.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=v.install(this.key,window[this.key],d,c);(d||c)&&(this.loader.systems[c]=g,this.loader.scene[c]=g)}this.onProcessComplete()}});o.register("plugin",function(v,u,d,c,g){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new a(this,v[m]));else this.addFile(new a(this,v,u,d,c,g));return this}),t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=new s({Extends:n,initialize:function(u,d,c,g){var m="js";if(r(d)){var x=d;d=h(x,"key"),c=h(x,"url"),g=h(x,"xhrSettings"),m=h(x,"extension",m)}var y={type:"text",extension:m,responseType:"text",key:d,url:c,xhrSettings:g};n.call(this,u,y)},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var v=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),u=eval;this.loader.sceneManager.add(this.key,u(v)),this.complete=!0}});o.register("sceneFile",function(v,u,d){if(Array.isArray(v))for(var c=0;c<v.length;c++)this.addFile(new a(this,v[c]));else this.addFile(new a(this,v,u,d));return this}),t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=new s({Extends:n,initialize:function(u,d,c,g,m,x){var y="js";if(r(d)){var T=d;d=h(T,"key"),c=h(T,"url"),x=h(T,"xhrSettings"),y=h(T,"extension",y),g=h(T,"systemKey"),m=h(T,"sceneKey")}var S={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:d,url:c,xhrSettings:x,config:{systemKey:g,sceneKey:m}};n.call(this,u,S),typeof c=="function"&&(this.data=c,this.state=l.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,u=this.config,d=this.key,c=h(u,"systemKey",d),g=h(u,"sceneKey",d);this.state===l.FILE_POPULATED?v.installScenePlugin(c,this.data,g,this.loader.scene,!0):(this.state=l.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),v.installScenePlugin(c,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",function(v,u,d,c,g){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new a(this,v[m]));else this.addFile(new a(this,v,u,d,c,g));return this}),t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(8),n=e(71),o=new s({Extends:n,initialize:function(r,a,v,u,d){n.call(this,r,a,v,d,u),this.type="spritesheet"},addToCache:function(){var h=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(h)}});l.register("spritesheet",function(h,r,a,v){if(Array.isArray(h))for(var u=0;u<h.length;u++)this.addFile(new o(this,h[u]));else this.addFile(new o(this,h,r,a,v));return this}),t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=new s({Extends:n,initialize:function(u,d,c,g,m){var x="svg";if(r(d)){var y=d;d=h(y,"key"),c=h(y,"url"),g=h(y,"svgConfig",{}),m=h(y,"xhrSettings"),x=h(y,"extension",x)}var T={type:"svg",cache:u.textureManager,extension:x,responseType:"text",key:d,url:c,xhrSettings:m,config:{width:h(g,"width"),height:h(g,"height"),scale:h(g,"scale")}};n.call(this,u,T)},onProcess:function(){this.state=l.FILE_PROCESSING;var v=this.xhrLoader.responseText,u=[v],d=this.config.width,c=this.config.height,g=this.config.scale;t:if(d&&c||g){var m=null,x=new DOMParser;m=x.parseFromString(v,"text/xml");var y=m.getElementsByTagName("svg")[0],T=y.hasAttribute("viewBox"),S=parseFloat(y.getAttribute("width")),C=parseFloat(y.getAttribute("height"));if(!T&&S&&C)y.setAttribute("viewBox","0  0 "+S+" "+C);else if(T&&!S&&!C){var E=y.getAttribute("viewBox").split(/\s+|,/);S=E[2],C=E[3]}if(g)if(S&&C)d=S*g,c=C*g;else break t;y.setAttribute("width",d.toString()+"px"),y.setAttribute("height",c.toString()+"px"),u=[new XMLSerializer().serializeToString(y)]}try{var P=new window.Blob(u,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var M=this,R=!1;this.data.onload=function(){R||n.revokeObjectURL(M.data),M.onProcessComplete()},this.data.onerror=function(){R?M.onProcessError():(R=!0,n.revokeObjectURL(M.data),M.data.src="data:image/svg+xml,"+encodeURIComponent(u.join("")))},n.createObjectURL(this.data,P,"image/svg+xml")},addToCache:function(){var v=this.cache.addImage(this.key,this.data);this.pendingDestroy(v)}});o.register("svg",function(v,u,d,c){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new a(this,v[g]));else this.addFile(new a(this,v,u,d,c));return this}),t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(2),r=e(7),a=e(40),v=new s({Extends:n,initialize:function(d,c,g,m){var x="csv";if(r(c)){var y=c;c=h(y,"key"),g=h(y,"url"),m=h(y,"xhrSettings"),x=h(y,"extension",x)}var T={type:"tilemapCSV",cache:d.cacheManager.tilemap,extension:x,responseType:"text",key:c,url:g,xhrSettings:m};n.call(this,d,T),this.tilemapFormat=a.CSV},onProcess:function(){this.state=l.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,u),this.pendingDestroy(u)}});o.register("tilemapCSV",function(u,d,c){if(Array.isArray(u))for(var g=0;g<u.length;g++)this.addFile(new v(this,u[g]));else this.addFile(new v(this,u,d,c));return this}),t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(8),n=e(61),o=e(40),h=new s({Extends:n,initialize:function(a,v,u,d){n.call(this,a,v,u,d),this.type="tilemapJSON",this.cache=a.cacheManager.tilemap},addToCache:function(){var r={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,r),this.pendingDestroy(r)}});l.register("tilemapImpact",function(r,a,v){if(Array.isArray(r))for(var u=0;u<r.length;u++)this.addFile(new h(this,r[u]));else this.addFile(new h(this,r,a,v));return this}),t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(8),n=e(61),o=e(40),h=new s({Extends:n,initialize:function(a,v,u,d){n.call(this,a,v,u,d),this.type="tilemapJSON",this.cache=a.cacheManager.tilemap},addToCache:function(){var r={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,r),this.pendingDestroy(r)}});l.register("tilemapTiledJSON",function(r,a,v){if(Array.isArray(r))for(var u=0;u<r.length;u++)this.addFile(new h(this,r[u]));else this.addFile(new h(this,r,a,v));return this}),t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(8),n=e(2),o=e(71),h=e(7),r=e(49),a=e(242),v=new s({Extends:r,initialize:function(d,c,g,m,x,y){var T,S;if(h(c)){var C=c;c=n(C,"key"),T=new o(d,{key:c,url:n(C,"textureURL"),extension:n(C,"textureExtension","png"),normalMap:n(C,"normalMap"),xhrSettings:n(C,"textureXhrSettings")}),S=new a(d,{key:c,url:n(C,"atlasURL"),extension:n(C,"atlasExtension","txt"),xhrSettings:n(C,"atlasXhrSettings")})}else T=new o(d,c,g,x),S=new a(d,c,m,y);T.linkFile?r.call(this,d,"unityatlas",c,[T,S,T.linkFile]):r.call(this,d,"unityatlas",c,[T,S])},addToCache:function(){if(this.isReadyToProcess()){var u=this.files[0],d=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(u.key,u.data,d.data,c),d.pendingDestroy(),this.complete=!0}}});l.register("unityAtlas",function(u,d,c,g,m){var x;if(Array.isArray(u))for(var y=0;y<u.length;y++)x=new v(this,u[y]),this.addFile(x.files);else x=new v(this,u,d,c,g,m),this.addFile(x.files);return this}),t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(23),o=e(8),h=e(155),r=e(2),a=e(7),v=new s({Extends:n,initialize:function(d,c,g,m,x,y,T){m===void 0&&(m="loadeddata"),x===void 0&&(x=!1),y===void 0&&(y=!1),m!=="loadeddata"&&m!=="canplay"&&m!=="canplaythrough"&&(m="loadeddata");var S={type:"video",cache:d.cacheManager.video,extension:g.type,responseType:"blob",key:c,url:g.url,xhrSettings:T,config:{loadEvent:m,asBlob:x,noAudio:y}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),n.call(this,d,S)},onProcess:function(){if(this.state=l.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var u=this.createVideoElement();this.data=u;var d=this;this.data.onloadeddata=function(){d.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(d.data),d.onProcessError()},n.createObjectURL(u,this.xhrLoader.response,""),u.load()},createVideoElement:function(){var u=document.createElement("video");return u.controls=!1,u.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(u.muted=!0,u.defaultMuted=!0,u.setAttribute("autoplay","autoplay")),u.setAttribute("playsinline","playsinline"),u.setAttribute("preload","auto"),u},onVideoLoadHandler:function(u){var d=u.target;d.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),d.removeEventListener("error",this.onErrorCallback,!0),this.data=d,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(u){var d=u.target;d&&(d.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),d.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var u=this.config.loadEvent;if(this.config.asBlob)n.prototype.load.call(this);else{this.percentComplete=0;var d=this.createVideoElement();d.addEventListener(u,this.onLoadCallback,!0),d.addEventListener("error",this.onErrorCallback,!0),d.src=h(this,this.loader.baseURL),d.load()}}});v.create=function(u,d,c,g,m,x,y){var T=u.systems.game;a(d)&&(c=r(d,"url",[]),g=r(d,"loadEvent","loadeddata"),m=r(d,"asBlob",!1),x=r(d,"noAudio",!1),y=r(d,"xhrSettings"),d=r(d,"key"));var S=v.getVideoURL(T,c);if(S)return new v(u,d,S,g,m,x,y)},v.getVideoURL=function(u,d){Array.isArray(d)||(d=[d]);for(var c=0;c<d.length;c++){var g=r(d[c],"url",d[c]);if(g.indexOf("blob:")===0)return{url:g,type:""};var m;if(g.indexOf("data:")===0?m=g.split(",")[0].match(/\/(.*?);/):m=g.match(/\.([a-zA-Z0-9]+)($|\?)/),m=r(d[c],"type",m?m[1]:"").toLowerCase(),u.device.video[m])return{url:g,type:m}}return null},o.register("video",function(u,d,c,g,m,x){var y;if(Array.isArray(u))for(var T=0;T<u.length;T++)y=v.create(this,u[T]),y&&this.addFile(y);else y=v.create(this,u,d,c,g,m,x),y&&this.addFile(y);return this}),t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(21),n=e(149),o=e(9),h=e(95),r=e(8),a=e(2),v=e(24),u=e(20),d=e(156),c=new s({Extends:o,initialize:function(m){o.call(this);var x=m.sys.game.config,y=m.sys.settings.loader;this.scene=m,this.systems=m.sys,this.cacheManager=m.sys.cache,this.textureManager=m.sys.textures,this.sceneManager=m.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(a(y,"baseURL",x.loaderBaseURL)),this.setPath(a(y,"path",x.loaderPath)),this.setPrefix(a(y,"prefix",x.loaderPrefix)),this.maxParallelDownloads=a(y,"maxParallelDownloads",x.loaderMaxParallelDownloads),this.xhr=d(a(y,"responseType",x.loaderResponseType),a(y,"async",x.loaderAsync),a(y,"user",x.loaderUser),a(y,"password",x.loaderPassword),a(y,"timeout",x.loaderTimeout),a(y,"withCredentials",x.loaderWithCredentials)),this.crossOrigin=a(y,"crossOrigin",x.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new n,this.inflight=new n,this.queue=new n,this._deleteQueue=new n,this.totalFailed=0,this.totalComplete=0,this.state=l.LOADER_IDLE,this.multiKeyIndex=0,m.sys.events.once(u.BOOT,this.boot,this),m.sys.events.on(u.START,this.pluginStart,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(u.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++){var x=g[m];this.keyExists(x)||(this.list.set(x),this.emit(h.ADD,x.key,x.type,this,x),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var m=g.hasCacheConflict();return m||this.list.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),!m&&this.isLoading()&&(this.inflight.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),this.queue.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1})),m},addPack:function(g,m){m&&g.hasOwnProperty(m)&&(g={packKey:g[m]});var x=0,y=this.baseURL,T=this.path,S=this.prefix;for(var C in g)if(!!Object.prototype.hasOwnProperty.call(g,C)){var E=g[C],P=a(E,"baseURL",y),M=a(E,"path",T),R=a(E,"prefix",S),A=a(E,"files",null),O=a(E,"defaultType","void");if(Array.isArray(A)){this.setBaseURL(P),this.setPath(M),this.setPrefix(R);for(var F=0;F<A.length;F++){var I=A[F],w=I.hasOwnProperty("type")?I.type:O;this[w]&&(this[w](I),x++)}}}return this.setBaseURL(y),this.setPath(T),this.setPrefix(S),x>0},isLoading:function(){return this.state===l.LOADER_LOADING||this.state===l.LOADER_PROCESSING},isReady:function(){return this.state===l.LOADER_IDLE||this.state===l.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),this.list.size===0?this.loadComplete():(this.state=l.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(u.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===l.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===l.FILE_POPULATED||g.state===l.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,m){!this.inflight||(this.inflight.delete(g),this.updateProgress(),m?(this.totalComplete++,this.queue.set(g),this.emit(h.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(h.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===l.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===l.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&g.multiFile.addToCache():g.addToCache()),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=l.LOADER_COMPLETE,this.systems.events.off(u.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,m){return this.save(JSON.stringify(g),m)},save:function(g,m,x){m===void 0&&(m="file.json"),x===void 0&&(x="application/json");var y=new Blob([g],{type:x}),T=URL.createObjectURL(y),S=document.createElement("a");return S.download=m,S.textContent="Download "+m,S.href=T,S.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,m=this.systems.settings.loader;this.setBaseURL(a(m,"baseURL",g.loaderBaseURL)),this.setPath(a(m,"path",g.loaderPath)),this.setPrefix(a(m,"prefix",g.loaderPrefix)),this.state=l.LOADER_IDLE},shutdown:function(){this.reset(),this.state=l.LOADER_SHUTDOWN,this.systems.events.off(u.UPDATE,this.update,this),this.systems.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=l.LOADER_DESTROYED,this.systems.events.off(u.UPDATE,this.update,this),this.systems.events.off(u.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});v.register("Loader",c,"load"),t.exports=c},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(62),l=e(17),n={ArcadePhysics:e(1367),Body:e(527),Collider:e(528),Components:e(243),Events:e(245),Factory:e(521),GetOverlapX:e(246),GetOverlapY:e(247),SeparateX:e(537),SeparateY:e(538),Group:e(524),Image:e(522),Sprite:e(157),StaticBody:e(539),StaticGroup:e(525),Tilemap:e(1391),World:e(526)};n=l(!1,n,s),t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(36),n=e(50),o=e(353),h=e(521),r=e(2),a=e(127),v=e(523),u=e(244),d=e(24),c=e(20),g=e(3),m=e(526),x=new s({initialize:function(T){this.scene=T,this.systems=T.sys,this.config=this.getConfig(),this.world,this.add,T.sys.events.once(c.BOOT,this.boot,this),T.sys.events.on(c.START,this.start,this)},boot:function(){this.world=new m(this.scene,this.config),this.add=new h(this.world),this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new m(this.scene,this.config),this.add=new h(this.world));var y=this.systems.events;r(this.config,"customUpdate",!1)||y.on(c.UPDATE,this.world.update,this.world),y.on(c.POST_UPDATE,this.world.postUpdate,this.world),y.once(c.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(c.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(c.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,T=this.systems.settings.physics,S=a(r(T,"arcade",{}),r(y,"arcade",{}));return S},overlap:function(y,T,S,C,E){return S===void 0&&(S=null),C===void 0&&(C=null),E===void 0&&(E=S),this.world.collideObjects(y,T,S,C,E,!0)},collide:function(y,T,S,C,E){return S===void 0&&(S=null),C===void 0&&(C=null),E===void 0&&(E=S),this.world.collideObjects(y,T,S,C,E,!1)},collideTiles:function(y,T,S,C,E){return this.world.collideTiles(y,T,S,C,E)},overlapTiles:function(y,T,S,C,E){return this.world.overlapTiles(y,T,S,C,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,T,S,C,E,P){C===void 0&&(C=60);var M=Math.atan2(S-y.y,T-y.x);return y.body.acceleration.setToPolar(M,C),E!==void 0&&P!==void 0&&y.body.maxVelocity.set(E,P),M},accelerateToObject:function(y,T,S,C,E){return this.accelerateTo(y,T.x,T.y,S,C,E)},closest:function(y,T){T||(T=this.world.bodies.entries);for(var S=Number.MAX_VALUE,C=null,E=y.x,P=y.y,M=T.length,R=0;R<M;R++){var A=T[R],O=A.body||A;if(!(y===A||y===O||y===O.gameObject||y===O.center)){var F=o(E,P,O.center.x,O.center.y);F<S&&(C=A,S=F)}}return C},furthest:function(y,T){T||(T=this.world.bodies.entries);for(var S=-1,C=null,E=y.x,P=y.y,M=T.length,R=0;R<M;R++){var A=T[R],O=A.body||A;if(!(y===A||y===O||y===O.gameObject||y===O.center)){var F=o(E,P,O.center.x,O.center.y);F>S&&(C=A,S=F)}}return C},moveTo:function(y,T,S,C,E){C===void 0&&(C=60),E===void 0&&(E=0);var P=Math.atan2(S-y.y,T-y.x);return E>0&&(C=n(y.x,y.y,T,S)/(E/1e3)),y.body.velocity.setToPolar(P,C),P},moveToObject:function(y,T,S,C){return this.moveTo(y,T.x,T.y,S,C)},velocityFromAngle:function(y,T,S){return T===void 0&&(T=60),S===void 0&&(S=new g),S.setToPolar(l(y),T)},velocityFromRotation:function(y,T,S){return T===void 0&&(T=60),S===void 0&&(S=new g),S.setToPolar(y,T)},overlapRect:function(y,T,S,C,E,P){return u(this.world,y,T,S,C,E,P)},overlapCirc:function(y,T,S,C,E){return v(this.world,y,T,S,C,E)},shutdown:function(){if(!!this.world){var y=this.systems.events;y.off(c.UPDATE,this.world.update,this.world),y.off(c.POST_UPDATE,this.world.postUpdate,this.world),y.off(c.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});d.register("ArcadePhysics",x,"arcadePhysics"),t.exports=x},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setAcceleration:function(s,l){return this.body.acceleration.set(s,l),this},setAccelerationX:function(s){return this.body.acceleration.x=s,this},setAccelerationY:function(s){return this.body.acceleration.y=s,this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setAngularVelocity:function(s){return this.body.angularVelocity=s,this},setAngularAcceleration:function(s){return this.body.angularAcceleration=s,this},setAngularDrag:function(s){return this.body.angularDrag=s,this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setBounce:function(s,l){return this.body.bounce.set(s,l),this},setBounceX:function(s){return this.body.bounce.x=s,this},setBounceY:function(s){return this.body.bounce.y=s,this},setCollideWorldBounds:function(s,l,n){return this.body.setCollideWorldBounds(s,l,n),this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setDebug:function(s,l,n){return this.debugShowBody=s,this.debugShowVelocity=l,this.debugBodyColor=n,this},setDebugBodyColor:function(s){return this.body.debugBodyColor=s,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(s){this.body.debugShowBody=s}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(s){this.body.debugShowVelocity=s}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(s){this.body.debugBodyColor=s}}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setDrag:function(s,l){return this.body.drag.set(s,l),this},setDragX:function(s){return this.body.drag.x=s,this},setDragY:function(s){return this.body.drag.y=s,this},setDamping:function(s){return this.body.useDamping=s,this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={enableBody:function(s,l,n,o,h){return s&&this.body.reset(l,n),o&&(this.body.gameObject.active=!0),h&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(s,l){return s===void 0&&(s=!1),l===void 0&&(l=!1),this.body.stop(),this.body.enable=!1,s&&(this.body.gameObject.active=!1),l&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setFriction:function(s,l){return this.body.friction.set(s,l),this},setFrictionX:function(s){return this.body.friction.x=s,this},setFrictionY:function(s){return this.body.friction.y=s,this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setGravity:function(s,l){return this.body.gravity.set(s,l),this},setGravityX:function(s){return this.body.gravity.x=s,this},setGravityY:function(s){return this.body.gravity.y=s,this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setImmovable:function(s){return s===void 0&&(s=!0),this.body.immovable=s,this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setMass:function(s){return this.body.mass=s,this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setPushable:function(s){return s===void 0&&(s=!0),this.body.pushable=s,this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setOffset:function(s,l){return this.body.setOffset(s,l),this},setSize:function(s,l,n){return this.body.setSize(s,l,n),this},setBodySize:function(s,l,n){return this.body.setSize(s,l,n),this},setCircle:function(s,l,n){return this.body.setCircle(s,l,n),this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setVelocity:function(s,l){return this.body.setVelocity(s,l),this},setVelocityX:function(s){return this.body.setVelocityX(s),this},setVelocityY:function(s){return this.body.setVelocityY(s),this},setMaxVelocity:function(s,l){return this.body.maxVelocity.set(s,l),this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="collide"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="overlap"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pause"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="resume"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="tilecollide"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="tileoverlap"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="worldbounds"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="worldstep"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e,s,l,n,o,h,r,a,v,u,d,c,g,m,x,y,T,S=function(A,O,F){e=A,s=O;var I=e.velocity.x,w=s.velocity.x;return l=e.pushable,v=e._dx<0,u=e._dx>0,d=e._dx===0,x=Math.abs(e.right-s.x)<=Math.abs(s.right-e.x),r=w-I*e.bounce.x,n=s.pushable,c=s._dx<0,g=s._dx>0,m=s._dx===0,y=!x,a=I-w*s.bounce.x,T=Math.abs(F),C()},C=function(){return u&&x&&s.blocked.right?(e.processX(-T,r,!1,!0),1):v&&y&&s.blocked.left?(e.processX(T,r,!0),1):g&&y&&e.blocked.right?(s.processX(-T,a,!1,!0),2):c&&x&&e.blocked.left?(s.processX(T,a,!0),2):0},E=function(){var A=e.velocity.x,O=s.velocity.x,F=Math.sqrt(O*O*s.mass/e.mass)*(O>0?1:-1),I=Math.sqrt(A*A*e.mass/s.mass)*(A>0?1:-1),w=(F+I)*.5;return F-=w,I-=w,o=w+F*e.bounce.x,h=w+I*s.bounce.x,v&&y?P(0):c&&x?P(1):u&&x?P(2):g&&y?P(3):!1},P=function(A){if(l&&n)T*=.5,A===0||A===3?(e.processX(T,o),s.processX(-T,h)):(e.processX(-T,o),s.processX(T,h));else if(l&&!n)A===0||A===3?e.processX(T,r,!0):e.processX(-T,r,!1,!0);else if(!l&&n)A===0||A===3?s.processX(-T,a,!1,!0):s.processX(T,a,!0);else{var O=T*.5;A===0?m?(e.processX(T,0,!0),s.processX(0,null,!1,!0)):g?(e.processX(O,0,!0),s.processX(-O,0,!1,!0)):(e.processX(O,s.velocity.x,!0),s.processX(-O,null,!1,!0)):A===1?d?(e.processX(0,null,!1,!0),s.processX(T,0,!0)):u?(e.processX(-O,0,!1,!0),s.processX(O,0,!0)):(e.processX(-O,null,!1,!0),s.processX(O,e.velocity.x,!0)):A===2?m?(e.processX(-T,0,!1,!0),s.processX(0,null,!0)):c?(e.processX(-O,0,!1,!0),s.processX(O,0,!0)):(e.processX(-O,s.velocity.x,!1,!0),s.processX(O,null,!0)):A===3&&(d?(e.processX(0,null,!0),s.processX(-T,0,!1,!0)):v?(e.processX(O,0,!0),s.processX(-O,0,!1,!0)):(e.processX(O,s.velocity.y,!0),s.processX(-O,null,!1,!0)))}return!0},M=function(A){A===1?s.velocity.x=0:x?s.processX(T,a,!0):s.processX(-T,a,!1,!0),e.moves&&(s.y+=(e.y-e.prev.y)*e.friction.y,s._dy=s.y-s.prev.y)},R=function(A){A===2?e.velocity.x=0:y?e.processX(T,r,!0):e.processX(-T,r,!1,!0),s.moves&&(e.y+=(s.y-s.prev.y)*s.friction.y,e._dy=e.y-e.prev.y)};t.exports={BlockCheck:C,Check:E,Set:S,Run:P,RunImmovableBody1:M,RunImmovableBody2:R}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e,s,l,n,o,h,r,a,v,u,d,c,g,m,x,y,T,S=function(A,O,F){e=A,s=O;var I=e.velocity.y,w=s.velocity.y;return l=e.pushable,v=e._dy<0,u=e._dy>0,d=e._dy===0,x=Math.abs(e.bottom-s.y)<=Math.abs(s.bottom-e.y),r=w-I*e.bounce.y,n=s.pushable,c=s._dy<0,g=s._dy>0,m=s._dy===0,y=!x,a=I-w*s.bounce.y,T=Math.abs(F),C()},C=function(){return u&&x&&s.blocked.down?(e.processY(-T,r,!1,!0),1):v&&y&&s.blocked.up?(e.processY(T,r,!0),1):g&&y&&e.blocked.down?(s.processY(-T,a,!1,!0),2):c&&x&&e.blocked.up?(s.processY(T,a,!0),2):0},E=function(){var A=e.velocity.y,O=s.velocity.y,F=Math.sqrt(O*O*s.mass/e.mass)*(O>0?1:-1),I=Math.sqrt(A*A*e.mass/s.mass)*(A>0?1:-1),w=(F+I)*.5;return F-=w,I-=w,o=w+F*e.bounce.y,h=w+I*s.bounce.y,v&&y?P(0):c&&x?P(1):u&&x?P(2):g&&y?P(3):!1},P=function(A){if(l&&n)T*=.5,A===0||A===3?(e.processY(T,o),s.processY(-T,h)):(e.processY(-T,o),s.processY(T,h));else if(l&&!n)A===0||A===3?e.processY(T,r,!0):e.processY(-T,r,!1,!0);else if(!l&&n)A===0||A===3?s.processY(-T,a,!1,!0):s.processY(T,a,!0);else{var O=T*.5;A===0?m?(e.processY(T,0,!0),s.processY(0,null,!1,!0)):g?(e.processY(O,0,!0),s.processY(-O,0,!1,!0)):(e.processY(O,s.velocity.y,!0),s.processY(-O,null,!1,!0)):A===1?d?(e.processY(0,null,!1,!0),s.processY(T,0,!0)):u?(e.processY(-O,0,!1,!0),s.processY(O,0,!0)):(e.processY(-O,null,!1,!0),s.processY(O,e.velocity.y,!0)):A===2?m?(e.processY(-T,0,!1,!0),s.processY(0,null,!0)):c?(e.processY(-O,0,!1,!0),s.processY(O,0,!0)):(e.processY(-O,s.velocity.y,!1,!0),s.processY(O,null,!0)):A===3&&(d?(e.processY(0,null,!0),s.processY(-T,0,!1,!0)):v?(e.processY(O,0,!0),s.processY(-O,0,!1,!0)):(e.processY(O,s.velocity.y,!0),s.processY(-O,null,!1,!0)))}return!0},M=function(A){A===1?s.velocity.y=0:x?s.processY(T,a,!0):s.processY(-T,a,!1,!0),e.moves&&(s.x+=(e.x-e.prev.x)*e.friction.x,s._dx=s.x-s.prev.x)},R=function(A){A===2?e.velocity.y=0:y?e.processY(T,r,!0):e.processY(-T,r,!1,!0),s.moves&&(e.x+=(s.x-s.prev.x)*s.friction.x,e._dx=e.x-e.prev.x)};t.exports={BlockCheck:C,Check:E,Set:S,Run:P,RunImmovableBody1:M,RunImmovableBody2:R}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ProcessTileCallbacks:e(530),ProcessTileSeparationX:e(534),ProcessTileSeparationY:e(536),SeparateTile:e(532),TileCheckX:e(533),TileCheckY:e(535),TileIntersectsBody:e(248)};t.exports=s},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(3),n=new s({initialize:function(){this.boundsCenter=new l,this.centerDiff=new l},parseBody:function(o){if(o=o.hasOwnProperty("body")?o.body:o,!o.hasOwnProperty("bounds")||!o.hasOwnProperty("centerOfMass"))return!1;var h=this.boundsCenter,r=this.centerDiff,a=o.bounds.max.x-o.bounds.min.x,v=o.bounds.max.y-o.bounds.min.y,u=a*o.centerOfMass.x,d=v*o.centerOfMass.y;return h.set(a/2,v/2),r.set(u-h.x,d-h.y),!0},getTopLeft:function(o,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(o)){var a=this.boundsCenter,v=this.centerDiff;return new l(h+a.x+v.x,r+a.y+v.y)}return!1},getTopCenter:function(o,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(o)){var a=this.boundsCenter,v=this.centerDiff;return new l(h+v.x,r+a.y+v.y)}return!1},getTopRight:function(o,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(o)){var a=this.boundsCenter,v=this.centerDiff;return new l(h-(a.x-v.x),r+a.y+v.y)}return!1},getLeftCenter:function(o,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(o)){var a=this.boundsCenter,v=this.centerDiff;return new l(h+a.x+v.x,r+v.y)}return!1},getCenter:function(o,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(o)){var a=this.centerDiff;return new l(h+a.x,r+a.y)}return!1},getRightCenter:function(o,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(o)){var a=this.boundsCenter,v=this.centerDiff;return new l(h-(a.x-v.x),r+v.y)}return!1},getBottomLeft:function(o,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(o)){var a=this.boundsCenter,v=this.centerDiff;return new l(h+a.x+v.x,r-(a.y-v.y))}return!1},getBottomCenter:function(o,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(o)){var a=this.boundsCenter,v=this.centerDiff;return new l(h+v.x,r-(a.y-v.y))}return!1},getBottomRight:function(o,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(o)){var a=this.boundsCenter,v=this.centerDiff;return new l(h-(a.x-v.x),r-(a.y-v.y))}return!1}});t.exports=n},function(t,f){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={decomp:A,quickDecomp:w,isSimple:F,removeCollinearPoints:b,removeDuplicatePoints:Y,makeCCW:x};function e(D,L,B){B=B||0;var G=[0,0],N,V,z,X,H,K,J;return N=D[1][1]-D[0][1],V=D[0][0]-D[1][0],z=N*D[0][0]+V*D[0][1],X=L[1][1]-L[0][1],H=L[0][0]-L[1][0],K=X*L[0][0]+H*L[0][1],J=N*H-X*V,U(J,0,B)||(G[0]=(H*z-V*K)/J,G[1]=(N*K-X*z)/J),G}function s(D,L,B,G){var N=L[0]-D[0],V=L[1]-D[1],z=G[0]-B[0],X=G[1]-B[1];if(z*V-X*N===0)return!1;var H=(N*(B[1]-D[1])+V*(D[0]-B[0]))/(z*V-X*N),K=(z*(D[1]-B[1])+X*(B[0]-D[0]))/(X*N-z*V);return H>=0&&H<=1&&K>=0&&K<=1}function l(D,L,B){return(L[0]-D[0])*(B[1]-D[1])-(B[0]-D[0])*(L[1]-D[1])}function n(D,L,B){return l(D,L,B)>0}function o(D,L,B){return l(D,L,B)>=0}function h(D,L,B){return l(D,L,B)<0}function r(D,L,B){return l(D,L,B)<=0}var a=[],v=[];function u(D,L,B,G){if(G){var N=a,V=v;N[0]=L[0]-D[0],N[1]=L[1]-D[1],V[0]=B[0]-L[0],V[1]=B[1]-L[1];var z=N[0]*V[0]+N[1]*V[1],X=Math.sqrt(N[0]*N[0]+N[1]*N[1]),H=Math.sqrt(V[0]*V[0]+V[1]*V[1]),K=Math.acos(z/(X*H));return K<G}else return l(D,L,B)===0}function d(D,L){var B=L[0]-D[0],G=L[1]-D[1];return B*B+G*G}function c(D,L){var B=D.length;return D[L<0?L%B+B:L%B]}function g(D){D.length=0}function m(D,L,B,G){for(var N=B;N<G;N++)D.push(L[N])}function x(D){for(var L=0,B=D,G=1;G<D.length;++G)(B[G][1]<B[L][1]||B[G][1]===B[L][1]&&B[G][0]>B[L][0])&&(L=G);return n(c(D,L-1),c(D,L),c(D,L+1))?!1:(y(D),!0)}function y(D){for(var L=[],B=D.length,G=0;G!==B;G++)L.push(D.pop());for(var G=0;G!==B;G++)D[G]=L[G]}function T(D,L){return h(c(D,L-1),c(D,L),c(D,L+1))}var S=[],C=[];function E(D,L,B){var G,N,V=S,z=C;if(o(c(D,L+1),c(D,L),c(D,B))&&r(c(D,L-1),c(D,L),c(D,B)))return!1;N=d(c(D,L),c(D,B));for(var X=0;X!==D.length;++X)if(!((X+1)%D.length===L||X===L)&&o(c(D,L),c(D,B),c(D,X+1))&&r(c(D,L),c(D,B),c(D,X))&&(V[0]=c(D,L),V[1]=c(D,B),z[0]=c(D,X),z[1]=c(D,X+1),G=e(V,z),d(c(D,L),G)<N))return!1;return!0}function P(D,L,B){for(var G=0;G!==D.length;++G)if(!(G===L||G===B||(G+1)%D.length===L||(G+1)%D.length===B)&&s(c(D,L),c(D,B),c(D,G),c(D,G+1)))return!1;return!0}function M(D,L,B,G){var N=G||[];if(g(N),L<B)for(var V=L;V<=B;V++)N.push(D[V]);else{for(var V=0;V<=B;V++)N.push(D[V]);for(var V=L;V<D.length;V++)N.push(D[V])}return N}function R(D){for(var L=[],B=[],G=[],N=[],V=Number.MAX_VALUE,z=0;z<D.length;++z)if(T(D,z)){for(var X=0;X<D.length;++X)if(E(D,z,X)){B=R(M(D,z,X,N)),G=R(M(D,X,z,N));for(var H=0;H<G.length;H++)B.push(G[H]);B.length<V&&(L=B,V=B.length,L.push([c(D,z),c(D,X)]))}}return L}function A(D){var L=R(D);return L.length>0?O(D,L):[D]}function O(D,L){if(L.length===0)return[D];if(L instanceof Array&&L.length&&L[0]instanceof Array&&L[0].length===2&&L[0][0]instanceof Array){for(var B=[D],G=0;G<L.length;G++)for(var N=L[G],V=0;V<B.length;V++){var z=B[V],X=O(z,N);if(X){B.splice(V,1),B.push(X[0],X[1]);break}}return B}else{var N=L,G=D.indexOf(N[0]),V=D.indexOf(N[1]);return G!==-1&&V!==-1?[M(D,G,V),M(D,V,G)]:!1}}function F(D){var L=D,B;for(B=0;B<L.length-1;B++)for(var G=0;G<B-1;G++)if(s(L[B],L[B+1],L[G],L[G+1]))return!1;for(B=1;B<L.length-2;B++)if(s(L[0],L[L.length-1],L[B],L[B+1]))return!1;return!0}function I(D,L,B,G,N){N=N||0;var V=L[1]-D[1],z=D[0]-L[0],X=V*D[0]+z*D[1],H=G[1]-B[1],K=B[0]-G[0],J=H*B[0]+K*B[1],Z=V*K-H*z;return U(Z,0,N)?[0,0]:[(K*X-z*J)/Z,(V*J-H*X)/Z]}function w(D,L,B,G,N,V,z){V=V||100,z=z||0,N=N||25,L=typeof L!="undefined"?L:[],B=B||[],G=G||[];var X=[0,0],H=[0,0],K=[0,0],J=0,Z=0,Q=0,q=0,k=0,_=0,ot=0,nt=[],et=[],j=D,ht=D;if(ht.length<3)return L;if(z++,z>V)return console.warn("quickDecomp: max level ("+V+") reached."),L;for(var it=0;it<D.length;++it)if(T(j,it)){B.push(j[it]),J=Z=Number.MAX_VALUE;for(var at=0;at<D.length;++at)n(c(j,it-1),c(j,it),c(j,at))&&r(c(j,it-1),c(j,it),c(j,at-1))&&(K=I(c(j,it-1),c(j,it),c(j,at),c(j,at-1)),h(c(j,it+1),c(j,it),K)&&(Q=d(j[it],K),Q<Z&&(Z=Q,H=K,_=at))),n(c(j,it+1),c(j,it),c(j,at+1))&&r(c(j,it+1),c(j,it),c(j,at))&&(K=I(c(j,it+1),c(j,it),c(j,at),c(j,at+1)),n(c(j,it-1),c(j,it),K)&&(Q=d(j[it],K),Q<J&&(J=Q,X=K,k=at)));if(_===(k+1)%D.length)K[0]=(H[0]+X[0])/2,K[1]=(H[1]+X[1])/2,G.push(K),it<k?(m(nt,j,it,k+1),nt.push(K),et.push(K),_!==0&&m(et,j,_,j.length),m(et,j,0,it+1)):(it!==0&&m(nt,j,it,j.length),m(nt,j,0,k+1),nt.push(K),et.push(K),m(et,j,_,it+1));else{if(_>k&&(k+=D.length),q=Number.MAX_VALUE,k<_)return L;for(var at=_;at<=k;++at)o(c(j,it-1),c(j,it),c(j,at))&&r(c(j,it+1),c(j,it),c(j,at))&&(Q=d(c(j,it),c(j,at)),Q<q&&P(j,it,at)&&(q=Q,ot=at%D.length));it<ot?(m(nt,j,it,ot+1),ot!==0&&m(et,j,ot,ht.length),m(et,j,0,it+1)):(it!==0&&m(nt,j,it,ht.length),m(nt,j,0,ot+1),m(et,j,ot,it+1))}return nt.length<et.length?(w(nt,L,B,G,N,V,z),w(et,L,B,G,N,V,z)):(w(et,L,B,G,N,V,z),w(nt,L,B,G,N,V,z)),L}return L.push(D),L}function b(D,L){for(var B=0,G=D.length-1;D.length>3&&G>=0;--G)u(c(D,G-1),c(D,G),c(D,G+1),L)&&(D.splice(G%D.length,1),B++);return B}function Y(D,L){for(var B=D.length-1;B>=1;--B)for(var G=D[B],N=B-1;N>=0;--N)if(W(G,D[N],L)){D.splice(B,1);continue}}function U(D,L,B){return B=B||0,Math.abs(D-L)<=B}function W(D,L,B){return U(D[0],L[0],B)&&U(D[1],L[1],B)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(86),l=e(0),n=e(591),o=e(128),h=e(592),r=e(1395),a=e(1396),v=e(1397),u=e(593),d=e(589),c=e(590),g=e(1398),m=e(64),x=new l({initialize:function(T){this.world=T,this.scene=T.scene,this.sys=T.scene.sys},rectangle:function(y,T,S,C,E){var P=s.rectangle(y,T,S,C,E);return this.world.add(P),P},trapezoid:function(y,T,S,C,E,P){var M=s.trapezoid(y,T,S,C,E,P);return this.world.add(M),M},circle:function(y,T,S,C,E){var P=s.circle(y,T,S,C,E);return this.world.add(P),P},polygon:function(y,T,S,C,E){var P=s.polygon(y,T,S,C,E);return this.world.add(P),P},fromVertices:function(y,T,S,C,E,P,M){typeof S=="string"&&(S=m.fromPath(S));var R=s.fromVertices(y,T,S,C,E,P,M);return this.world.add(R),R},fromPhysicsEditor:function(y,T,S,C,E){E===void 0&&(E=!0);var P=d.parseBody(y,T,S,C);return E&&!this.world.has(P)&&this.world.add(P),P},fromSVG:function(y,T,S,C,E,P){C===void 0&&(C=1),E===void 0&&(E={}),P===void 0&&(P=!0);for(var M=S.getElementsByTagName("path"),R=[],A=0;A<M.length;A++){var O=h.pathToVertices(M[A],30);C!==1&&m.scale(O,C,C),R.push(O)}var F=s.fromVertices(y,T,R,E);return P&&this.world.add(F),F},fromJSON:function(y,T,S,C,E){C===void 0&&(C={}),E===void 0&&(E=!0);var P=c.parseBody(y,T,S,C);return P&&E&&this.world.add(P),P},imageStack:function(y,T,S,C,E,P,M,R,A){M===void 0&&(M=0),R===void 0&&(R=0),A===void 0&&(A={});var O=this.world,F=this.sys.displayList;A.addToWorld=!1;var I=n.stack(S,C,E,P,M,R,function(w,b){var Y=new a(O,w,b,y,T,A);return F.add(Y),Y.body});return O.add(I),I},stack:function(y,T,S,C,E,P,M){var R=n.stack(y,T,S,C,E,P,M);return this.world.add(R),R},pyramid:function(y,T,S,C,E,P,M){var R=n.pyramid(y,T,S,C,E,P,M);return this.world.add(R),R},chain:function(y,T,S,C,E,P){return n.chain(y,T,S,C,E,P)},mesh:function(y,T,S,C,E){return n.mesh(y,T,S,C,E)},newtonsCradle:function(y,T,S,C,E){var P=n.newtonsCradle(y,T,S,C,E);return this.world.add(P),P},car:function(y,T,S,C,E){var P=n.car(y,T,S,C,E);return this.world.add(P),P},softBody:function(y,T,S,C,E,P,M,R,A,O){var F=n.softBody(y,T,S,C,E,P,M,R,A,O);return this.world.add(F),F},joint:function(y,T,S,C,E){return this.constraint(y,T,S,C,E)},spring:function(y,T,S,C,E){return this.constraint(y,T,S,C,E)},constraint:function(y,T,S,C,E){C===void 0&&(C=1),E===void 0&&(E={}),E.bodyA=y.type==="body"?y:y.body,E.bodyB=T.type==="body"?T:T.body,isNaN(S)||(E.length=S),E.stiffness=C;var P=o.create(E);return this.world.add(P),P},worldConstraint:function(y,T,S,C){S===void 0&&(S=1),C===void 0&&(C={}),C.bodyB=y.type==="body"?y:y.body,isNaN(T)||(C.length=T),C.stiffness=S;var E=o.create(C);return this.world.add(E),E},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var T=new g(this.scene,this.world,y);return this.world.add(T.constraint),T},image:function(y,T,S,C,E){var P=new a(this.world,y,T,S,C,E);return this.sys.displayList.add(P),P},tileBody:function(y,T){return new u(this.world,y,T)},sprite:function(y,T,S,C,E){var P=new v(this.world,y,T,S,C,E);return this.sys.displayList.add(P),this.sys.updateList.add(P),P},gameObject:function(y,T,S){return r(this.world,y,T,S)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=x},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(249),l=e(2),n=e(3);function o(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}var h=function(r,a,v,u){v===void 0&&(v={}),u===void 0&&(u=!0);var d=a.x,c=a.y;a.body={temp:!0,position:{x:d,y:c}};var g=[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity];if(g.forEach(function(x){for(var y in x)o(x[y])?Object.defineProperty(a,y,{get:x[y].get,set:x[y].set}):Object.defineProperty(a,y,{value:x[y]})}),a.world=r,a._tempVec2=new n(d,c),v.hasOwnProperty("type")&&v.type==="body")a.setExistingBody(v,u);else{var m=l(v,"shape",null);m||(m="rectangle"),v.addToWorld=u,a.setBody(m,v)}return a};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(249),n=e(15),o=e(2),h=e(125),r=e(167),a=e(3),v=new s({Extends:h,Mixins:[l.Bounce,l.Collision,l.Force,l.Friction,l.Gravity,l.Mass,l.Sensor,l.SetBody,l.Sleep,l.Static,l.Transform,l.Velocity,r],initialize:function(d,c,g,m,x,y){n.call(this,d.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(m,x),this.setSizeToFrame(),this.setOrigin(),this.world=d,this._tempVec2=new a(c,g);var T=o(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(c,g),this.initPipeline()}});t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(164),l=e(0),n=e(249),o=e(15),h=e(2),r=e(167),a=e(73),v=e(3),u=new l({Extends:a,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,r],initialize:function(c,g,m,x,y,T){o.call(this,c.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(x,y),this.setSizeToFrame(),this.setOrigin(),this.world=c,this._tempVec2=new v(g,m);var S=h(T,"shape",null);S?this.setBody(S,T):this.setRectangle(this.width,this.height,T),this.setPosition(g,m),this.initPipeline()}});t.exports=u},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(84),l=e(0),n=e(118),o=e(128),h=e(273),r=e(272),a=e(51),v=e(127),u=e(165),d=e(3),c=e(64),g=new l({initialize:function(x,y,T){T===void 0&&(T={});var S={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=x,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new d,this.body=null,this.part=null,this.constraint=o.create(v(T,S)),this.world.on(r.BEFORE_UPDATE,this.update,this),x.sys.input.on(a.POINTER_DOWN,this.onDown,this),x.sys.input.on(a.POINTER_UP,this.onUp,this)},onDown:function(m){this.pointer||(this.pointer=m,this.camera=m.camera)},onUp:function(m){m===this.pointer&&(this.pointer=null)},getBody:function(m){var x=this.position,y=this.constraint;this.camera.getWorldPoint(m.x,m.y,x);for(var T=n.allBodies(this.world.localWorld),S=0;S<T.length;S++){var C=T[S];if(!C.ignorePointer&&s.contains(C.bounds,x)&&h.canCollide(C.collisionFilter,y.collisionFilter)&&this.hitTestBody(C,x))return this.world.emit(r.DRAG_START,C,this.part,this),!0}return!1},hitTestBody:function(m,x){for(var y=this.constraint,T=m.parts.length,S=T>1?1:0,C=S;C<T;C++){var E=m.parts[C];if(c.contains(E.vertices,x))return y.pointA=x,y.pointB={x:x.x-m.position.x,y:x.y-m.position.y},y.bodyB=m,y.angleB=m.angle,u.set(m,!1),this.part=E,this.body=m,!0}return!1},update:function(){var m=this.pointer,x=this.body;if(!this.active||!m){x&&this.stopDrag();return}if(!m.isDown&&x){this.stopDrag();return}else if(m.isDown){if(!x&&!this.getBody(m))return;x=this.body;var y=this.position,T=this.constraint;this.camera.getWorldPoint(m.x,m.y,y),T.pointA.x=y.x,T.pointA.y=y.y,u.set(x,!1),this.world.emit(r.DRAG,x,this)}},stopDrag:function(){var m=this.body,x=this.constraint;x.bodyB=null,x.pointB=null,this.pointer=null,this.body=null,this.part=null,m&&this.world.emit(r.DRAG_END,m,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(a.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(a.POINTER_UP,this.onUp,this)}});t.exports=g},function(t,f,e){var s={};t.exports=s;var l=e(595),n=e(32);(function(){s.name="matter-js",s.version="0.14.2",s.uses=[],s.used=[],s.use=function(){l.use(s,Array.prototype.slice.call(arguments))},s.before=function(o,h){return o=o.replace(/^Matter./,""),n.chainPathBefore(s,o,h)},s.after=function(o,h){return o=o.replace(/^Matter./,""),n.chainPathAfter(s,o,h)}})()},function(t,f,e){var s={};t.exports=s;var l=e(83),n=e(274),o=e(84),h=e(86),r=e(64);(function(){s.collides=function(a,v){for(var u=[],d=0;d<v.length;d++){var c=v[d];if(a!==c&&o.overlaps(c.bounds,a.bounds))for(var g=c.parts.length===1?0:1;g<c.parts.length;g++){var m=c.parts[g];if(o.overlaps(m.bounds,a.bounds)){var x=n.collides(m,a);if(x.collided){u.push(x);break}}}}return u},s.ray=function(a,v,u,d){d=d||1e-100;for(var c=l.angle(v,u),g=l.magnitude(l.sub(v,u)),m=(u.x+v.x)*.5,x=(u.y+v.y)*.5,y=h.rectangle(m,x,g,d,{angle:c}),T=s.collides(y,a),S=0;S<T.length;S+=1){var C=T[S];C.body=C.bodyB=C.bodyA}return T},s.region=function(a,v,u){for(var d=[],c=0;c<a.length;c++){var g=a[c],m=o.overlaps(g.bounds,v);(m&&!u||!m&&u)&&d.push(g)}return d},s.point=function(a,v){for(var u=[],d=0;d<a.length;d++){var c=a[d];if(o.contains(c.bounds,v))for(var g=c.parts.length===1?0:1;g<c.parts.length;g++){var m=c.parts[g];if(o.contains(m.bounds,v)&&r.contains(m.vertices,v)){u.push(c);break}}}return u}})()},function(t,f,e){var s={};t.exports=s;var l=e(596),n=e(165),o=e(599),h=e(598),r=e(1523),a=e(597),v=e(166),u=e(118),d=e(128),c=e(32),g=e(41);(function(){s.create=function(m,x){x=c.isElement(m)?x:m,m=c.isElement(m)?m:null,x=x||{},(m||x.render)&&c.warn("Engine.create: engine.render is deprecated (see docs)");var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:a}},T=c.extend(y,x);return T.world=x.world||l.create(T.world),T.pairs=h.create(),T.broadphase=T.broadphase.controller.create(T.broadphase),T.metrics=T.metrics||{extended:!1},T.metrics=r.create(T.metrics),T},s.update=function(m,x,y){x=x||1e3/60,y=y||1;var T=m.world,S=m.timing,C=m.broadphase,E=[],P;S.timestamp+=x*S.timeScale;var M={timestamp:S.timestamp};v.trigger(m,"beforeUpdate",M);var R=u.allBodies(T),A=u.allConstraints(T);for(r.reset(m.metrics),m.enableSleeping&&n.update(R,S.timeScale),s._bodiesApplyGravity(R,T.gravity),s._bodiesUpdate(R,x,S.timeScale,y,T.bounds),d.preSolveAll(R),P=0;P<m.constraintIterations;P++)d.solveAll(A,S.timeScale);d.postSolveAll(R),C.controller?(T.isModified&&C.controller.clear(C),C.controller.update(C,R,m,T.isModified),E=C.pairsList):E=R,T.isModified&&u.setModified(T,!1,!1,!0);var O=C.detector(E,m),F=m.pairs,I=S.timestamp;for(h.update(F,O,I),h.removeOld(F,I),m.enableSleeping&&n.afterCollisions(F.list,S.timeScale),F.collisionStart.length>0&&v.trigger(m,"collisionStart",{pairs:F.collisionStart}),o.preSolvePosition(F.list),P=0;P<m.positionIterations;P++)o.solvePosition(F.list,R,S.timeScale);for(o.postSolvePosition(R),d.preSolveAll(R),P=0;P<m.constraintIterations;P++)d.solveAll(A,S.timeScale);for(d.postSolveAll(R),o.preSolveVelocity(F.list),P=0;P<m.velocityIterations;P++)o.solveVelocity(F.list,S.timeScale);return F.collisionActive.length>0&&v.trigger(m,"collisionActive",{pairs:F.collisionActive}),F.collisionEnd.length>0&&v.trigger(m,"collisionEnd",{pairs:F.collisionEnd}),r.update(m.metrics,m),s._bodiesClearForces(R),v.trigger(m,"afterUpdate",M),m},s.merge=function(m,x){if(c.extend(m,x),x.world){m.world=x.world,s.clear(m);for(var y=u.allBodies(m.world),T=0;T<y.length;T++){var S=y[T];n.set(S,!1),S.id=c.nextId()}}},s.clear=function(m){var x=m.world;h.clear(m.pairs);var y=m.broadphase;if(y.controller){var T=u.allBodies(x);y.controller.clear(y),y.controller.update(y,T,m,!0)}},s._bodiesClearForces=function(m){for(var x=0;x<m.length;x++){var y=m[x];y.force.x=0,y.force.y=0,y.torque=0}},s._bodiesApplyGravity=function(m,x){var y=typeof x.scale!="undefined"?x.scale:.001;if(!(x.x===0&&x.y===0||y===0))for(var T=0;T<m.length;T++){var S=m[T];S.ignoreGravity||S.isStatic||S.isSleeping||(S.force.x+=S.mass*x.x*y*S.gravityScale.x,S.force.y+=S.mass*x.y*y*S.gravityScale.y)}},s._bodiesUpdate=function(m,x,y,T,S){for(var C=0;C<m.length;C++){var E=m[C];E.isStatic||E.isSleeping||g.update(E,x,y,T)}}})()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(86),l=e(41),n=e(0),o=e(32),h=e(118),r=e(1401),a=e(9),v=e(272),u=e(2),d=e(6),c=e(41),g=e(166),m=e(593),x=e(596),y=e(83),T=new n({Extends:a,initialize:function(C,E){a.call(this),this.scene=C,this.engine=r.create(E),this.localWorld=this.engine.world;var P=d(E,"gravity",null);P?this.setGravity(P.x,P.y,P.scale):P===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=d(E,"enabled",!0),this.correction=d(E,"correction",1),this.getDelta=d(E,"getDelta",this.update60Hz);var M=u(E,"runner",{}),R=u(M,"fps",!1),A=u(M,"fps",60),O=u(M,"delta",1e3/A),F=u(M,"deltaMin",1e3/A),I=u(M,"deltaMax",1e3/(A*.5));R||(A=1e3/O),this.runner={fps:A,correction:u(M,"correction",1),deltaSampleSize:u(M,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:u(M,"isFixed",!1),delta:O,deltaMin:F,deltaMax:I},this.autoUpdate=d(E,"autoUpdate",!0);var w=d(E,"debug",!1);if(this.drawDebug=typeof w=="object"?!0:w,this.debugGraphic,this.debugConfig={showAxes:u(w,"showAxes",!1),showAngleIndicator:u(w,"showAngleIndicator",!1),angleColor:u(w,"angleColor",15208787),showBroadphase:u(w,"showBroadphase",!1),broadphaseColor:u(w,"broadphaseColor",16757760),showBounds:u(w,"showBounds",!1),boundsColor:u(w,"boundsColor",16777215),showVelocity:u(w,"showVelocity",!1),velocityColor:u(w,"velocityColor",44783),showCollisions:u(w,"showCollisions",!1),collisionColor:u(w,"collisionColor",16094476),showSeparations:u(w,"showSeparations",!1),separationColor:u(w,"separationColor",16753920),showBody:u(w,"showBody",!0),showStaticBody:u(w,"showStaticBody",!0),showInternalEdges:u(w,"showInternalEdges",!1),renderFill:u(w,"renderFill",!1),renderLine:u(w,"renderLine",!0),fillColor:u(w,"fillColor",1075465),fillOpacity:u(w,"fillOpacity",1),lineColor:u(w,"lineColor",2678297),lineOpacity:u(w,"lineOpacity",1),lineThickness:u(w,"lineThickness",1),staticFillColor:u(w,"staticFillColor",857979),staticLineColor:u(w,"staticLineColor",1255396),showSleeping:u(w,"showSleeping",!1),staticBodySleepOpacity:u(w,"staticBodySleepOpacity",.7),sleepFillColor:u(w,"sleepFillColor",4605510),sleepLineColor:u(w,"sleepLineColor",10066585),showSensors:u(w,"showSensors",!0),sensorFillColor:u(w,"sensorFillColor",857979),sensorLineColor:u(w,"sensorLineColor",1255396),showPositions:u(w,"showPositions",!0),positionSize:u(w,"positionSize",4),positionColor:u(w,"positionColor",14697178),showJoint:u(w,"showJoint",!0),jointColor:u(w,"jointColor",14737474),jointLineOpacity:u(w,"jointLineOpacity",1),jointLineThickness:u(w,"jointLineThickness",2),pinSize:u(w,"pinSize",4),pinColor:u(w,"pinColor",4382944),springColor:u(w,"springColor",14697184),anchorColor:u(w,"anchorColor",15724527),anchorSize:u(w,"anchorSize",4),showConvexHulls:u(w,"showConvexHulls",!1),hullColor:u(w,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),u(E,"setBounds",!1)){var b=E.setBounds;if(typeof b=="boolean")this.setBounds();else{var Y=u(b,"x",0),U=u(b,"y",0),W=u(b,"width",C.sys.scale.width),D=u(b,"height",C.sys.scale.height),L=u(b,"thickness",64),B=u(b,"left",!0),G=u(b,"right",!0),N=u(b,"top",!0),V=u(b,"bottom",!0);this.setBounds(Y,U,W,D,L,B,G,N,V)}}},setCompositeRenderStyle:function(S){var C=S.bodies,E=S.constraints,P=S.composites,M,R,A;for(M=0;M<C.length;M++)R=C[M],A=R.render,this.setBodyRenderStyle(R,A.lineColor,A.lineOpacity,A.lineThickness,A.fillColor,A.fillOpacity);for(M=0;M<E.length;M++)R=E[M],A=R.render,this.setConstraintRenderStyle(R,A.lineColor,A.lineOpacity,A.lineThickness,A.pinSize,A.anchorColor,A.anchorSize);for(M=0;M<P.length;M++)R=P[M],this.setCompositeRenderStyle(R);return this},setBodyRenderStyle:function(S,C,E,P,M,R){var A=S.render,O=this.debugConfig;return A?(C==null&&(C=S.isStatic?O.staticLineColor:O.lineColor),E==null&&(E=O.lineOpacity),P==null&&(P=O.lineThickness),M==null&&(M=S.isStatic?O.staticFillColor:O.fillColor),R==null&&(R=O.fillOpacity),C!==!1&&(A.lineColor=C),E!==!1&&(A.lineOpacity=E),P!==!1&&(A.lineThickness=P),M!==!1&&(A.fillColor=M),R!==!1&&(A.fillOpacity=R),this):this},setConstraintRenderStyle:function(S,C,E,P,M,R,A){var O=S.render,F=this.debugConfig;if(!O)return this;if(C==null){var I=O.type;I==="line"?C=F.jointColor:I==="pin"?C=F.pinColor:I==="spring"&&(C=F.springColor)}return E==null&&(E=F.jointLineOpacity),P==null&&(P=F.jointLineThickness),M==null&&(M=F.pinSize),R==null&&(R=F.anchorColor),A==null&&(A=F.anchorSize),C!==!1&&(O.lineColor=C),E!==!1&&(O.lineOpacity=E),P!==!1&&(O.lineThickness=P),M!==!1&&(O.pinSize=M),R!==!1&&(O.anchorColor=R),A!==!1&&(O.anchorSize=A),this},setEventsProxy:function(){var S=this,C=this.engine,E=this.localWorld;this.drawDebug&&(g.on(E,"compositeModified",function(P){S.setCompositeRenderStyle(P)}),g.on(E,"beforeAdd",function(P){for(var M=[].concat(P.object),R=0;R<M.length;R++){var A=M[R],O=A.render;A.type==="body"?S.setBodyRenderStyle(A,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity):A.type==="composite"?S.setCompositeRenderStyle(A):A.type==="constraint"&&S.setConstraintRenderStyle(A,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize)}})),g.on(E,"beforeAdd",function(P){S.emit(v.BEFORE_ADD,P)}),g.on(E,"afterAdd",function(P){S.emit(v.AFTER_ADD,P)}),g.on(E,"beforeRemove",function(P){S.emit(v.BEFORE_REMOVE,P)}),g.on(E,"afterRemove",function(P){S.emit(v.AFTER_REMOVE,P)}),g.on(C,"beforeUpdate",function(P){S.emit(v.BEFORE_UPDATE,P)}),g.on(C,"afterUpdate",function(P){S.emit(v.AFTER_UPDATE,P)}),g.on(C,"collisionStart",function(P){var M=P.pairs,R,A;M.length>0&&(R=M[0].bodyA,A=M[0].bodyB),S.emit(v.COLLISION_START,P,R,A)}),g.on(C,"collisionActive",function(P){var M=P.pairs,R,A;M.length>0&&(R=M[0].bodyA,A=M[0].bodyB),S.emit(v.COLLISION_ACTIVE,P,R,A)}),g.on(C,"collisionEnd",function(P){var M=P.pairs,R,A;M.length>0&&(R=M[0].bodyA,A=M[0].bodyB),S.emit(v.COLLISION_END,P,R,A)})},setBounds:function(S,C,E,P,M,R,A,O,F){return S===void 0&&(S=0),C===void 0&&(C=0),E===void 0&&(E=this.scene.sys.scale.width),P===void 0&&(P=this.scene.sys.scale.height),M===void 0&&(M=64),R===void 0&&(R=!0),A===void 0&&(A=!0),O===void 0&&(O=!0),F===void 0&&(F=!0),this.updateWall(R,"left",S-M,C-M,M,P+M*2),this.updateWall(A,"right",S+E,C-M,M,P+M*2),this.updateWall(O,"top",S,C-M,E,M),this.updateWall(F,"bottom",S,C+P,E,M),this},updateWall:function(S,C,E,P,M,R){var A=this.walls[C];S?(A&&x.remove(this.localWorld,A),E+=M/2,P+=R/2,this.walls[C]=this.create(E,P,M,R,{isStatic:!0,friction:0,frictionStatic:0})):(A&&x.remove(this.localWorld,A),this.walls[C]=null)},createDebugGraphic:function(){var S=this.scene.sys.add.graphics({x:0,y:0});return S.setDepth(Number.MAX_VALUE),this.debugGraphic=S,this.drawDebug=!0,S},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(S,C,E){return S===void 0&&(S=0),C===void 0&&(C=1),this.localWorld.gravity.x=S,this.localWorld.gravity.y=C,E!==void 0&&(this.localWorld.gravity.scale=E),this},create:function(S,C,E,P,M){var R=s.rectangle(S,C,E,P,M);return x.add(this.localWorld,R),R},add:function(S){return x.add(this.localWorld,S),this},remove:function(S,C){Array.isArray(S)||(S=[S]);for(var E=0;E<S.length;E++){var P=S[E],M=P.body?P.body:P;h.remove(this.localWorld,M,C)}return this},removeConstraint:function(S,C){return h.remove(this.localWorld,S,C),this},convertTilemapLayer:function(S,C){var E=S.layer,P=S.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(P,C),this},convertTiles:function(S,C){if(S.length===0)return this;for(var E=0;E<S.length;E++)new m(this,S[E],C);return this},nextGroup:function(S){return c.nextGroup(S)},nextCategory:function(){return c.nextCategory()},pause:function(){return this.enabled=!1,this.emit(v.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(v.RESUME),this},update:function(S,C){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,P=this.runner,M=E.timing,R=this.correction;P.isFixed?C=this.getDelta(S,C):(C=S-P.timePrev||P.delta,P.timePrev=S,P.deltaHistory.push(C),P.deltaHistory=P.deltaHistory.slice(-P.deltaSampleSize),C=Math.min.apply(null,P.deltaHistory),C=C<P.deltaMin?P.deltaMin:C,C=C>P.deltaMax?P.deltaMax:C,R=C/P.delta,P.delta=C),P.timeScalePrev!==0&&(R*=M.timeScale/P.timeScalePrev),M.timeScale===0&&(R=0),P.timeScalePrev=M.timeScale,P.correction=R,P.frameCounter+=1,S-P.counterTimestamp>=1e3&&(P.fps=P.frameCounter*((S-P.counterTimestamp)/1e3),P.counterTimestamp=S,P.frameCounter=0),r.update(E,C,R)}},step:function(S,C){r.update(this.engine,S,C)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(S){var C=S.hasOwnProperty("body")?S.body:S;return h.get(this.localWorld,C.id,C.type)!==null},getAllBodies:function(){return h.allBodies(this.localWorld)},getAllConstraints:function(){return h.allConstraints(this.localWorld)},getAllComposites:function(){return h.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var S=this.debugConfig,C=this.engine,E=this.debugGraphic,P=h.allBodies(this.localWorld);this.debugGraphic.clear(),S.showBroadphase&&C.broadphase.controller&&this.renderGrid(C.broadphase,E,S.broadphaseColor,.5),S.showBounds&&this.renderBodyBounds(P,E,S.boundsColor,.5),(S.showBody||S.showStaticBody)&&this.renderBodies(P),S.showJoint&&this.renderJoints(),(S.showAxes||S.showAngleIndicator)&&this.renderBodyAxes(P,E,S.showAxes,S.angleColor,.5),S.showVelocity&&this.renderBodyVelocity(P,E,S.velocityColor,1,2),S.showSeparations&&this.renderSeparations(C.pairs.list,E,S.separationColor),S.showCollisions&&this.renderCollisions(C.pairs.list,E,S.collisionColor)}},renderGrid:function(S,C,E,P){C.lineStyle(1,E,P);for(var M=o.keys(S.buckets),R=0;R<M.length;R++){var A=M[R];if(!(S.buckets[A].length<2)){var O=A.split(/C|R/);C.strokeRect(parseInt(O[1],10)*S.bucketWidth,parseInt(O[2],10)*S.bucketHeight,S.bucketWidth,S.bucketHeight)}}return this},renderSeparations:function(S,C,E){C.lineStyle(1,E,1);for(var P=0;P<S.length;P++){var M=S[P];if(!!M.isActive){var R=M.collision,A=R.bodyA,O=R.bodyB,F=A.position,I=O.position,w=R.penetration,b=!A.isStatic&&!O.isStatic?4:1;O.isStatic&&(b=0),C.lineBetween(I.x,I.y,I.x-w.x*b,I.y-w.y*b),b=!A.isStatic&&!O.isStatic?4:1,A.isStatic&&(b=0),C.lineBetween(F.x,F.y,F.x-w.x*b,F.y-w.y*b)}}return this},renderCollisions:function(S,C,E){C.lineStyle(1,E,.5),C.fillStyle(E,1);var P,M;for(P=0;P<S.length;P++)if(M=S[P],!!M.isActive)for(var R=0;R<M.activeContacts.length;R++){var A=M.activeContacts[R],O=A.vertex;C.fillRect(O.x-2,O.y-2,5,5)}for(P=0;P<S.length;P++)if(M=S[P],!!M.isActive){var F=M.collision,I=M.activeContacts;if(I.length>0){var w=I[0].vertex.x,b=I[0].vertex.y;I.length===2&&(w=(I[0].vertex.x+I[1].vertex.x)/2,b=(I[0].vertex.y+I[1].vertex.y)/2),F.bodyB===F.supports[0].body||F.bodyA.isStatic?C.lineBetween(w-F.normal.x*8,b-F.normal.y*8,w,b):C.lineBetween(w+F.normal.x*8,b+F.normal.y*8,w,b)}}return this},renderBodyBounds:function(S,C,E,P){C.lineStyle(1,E,P);for(var M=0;M<S.length;M++){var R=S[M];if(!!R.render.visible){var A=R.bounds;if(A)C.strokeRect(A.min.x,A.min.y,A.max.x-A.min.x,A.max.y-A.min.y);else for(var O=R.parts,F=O.length>1?1:0;F<O.length;F++){var I=O[F];C.strokeRect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}}return this},renderBodyAxes:function(S,C,E,P,M){C.lineStyle(1,P,M);for(var R=0;R<S.length;R++){var A=S[R],O=A.parts;if(!!A.render.visible){var F,I,w;if(E)for(I=O.length>1?1:0;I<O.length;I++)for(F=O[I],w=0;w<F.axes.length;w++){var b=F.axes[w];C.lineBetween(F.position.x,F.position.y,F.position.x+b.x*20,F.position.y+b.y*20)}else for(I=O.length>1?1:0;I<O.length;I++)for(F=O[I],w=0;w<F.axes.length;w++)C.lineBetween(F.position.x,F.position.y,(F.vertices[0].x+F.vertices[F.vertices.length-1].x)/2,(F.vertices[0].y+F.vertices[F.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(S,C,E,P,M){C.lineStyle(M,E,P);for(var R=0;R<S.length;R++){var A=S[R];!A.render.visible||C.lineBetween(A.position.x,A.position.y,A.position.x+(A.position.x-A.positionPrev.x)*2,A.position.y+(A.position.y-A.positionPrev.y)*2)}return this},renderBodies:function(S){for(var C=this.debugGraphic,E=this.debugConfig,P=E.showBody,M=E.showStaticBody,R=E.showSleeping,A=E.showInternalEdges,O=E.showConvexHulls,F=E.renderFill,I=E.renderLine,w=E.staticBodySleepOpacity,b=E.sleepFillColor,Y=E.sleepLineColor,U=E.hullColor,W=0;W<S.length;W++){var D=S[W];if(!!D.render.visible&&!(!M&&D.isStatic||!P&&!D.isStatic)){var L=D.render.lineColor,B=D.render.lineOpacity,G=D.render.lineThickness,N=D.render.fillColor,V=D.render.fillOpacity;R&&D.isSleeping&&(D.isStatic?(B*=w,V*=w):(L=Y,N=b)),F||(N=null),I||(L=null),this.renderBody(D,C,A,L,B,G,N,V);var z=D.parts.length;O&&z>1&&this.renderConvexHull(D,C,U,G)}}},renderBody:function(S,C,E,P,M,R,A,O){P===void 0&&(P=null),M===void 0&&(M=null),R===void 0&&(R=1),A===void 0&&(A=null),O===void 0&&(O=null);for(var F=this.debugConfig,I=F.sensorFillColor,w=F.sensorLineColor,b=S.parts,Y=b.length,U=Y>1?1:0;U<Y;U++){var W=b[U],D=W.render,L=D.opacity;if(!(!D.visible||L===0||W.isSensor&&!F.showSensors)){var B=W.circleRadius;if(C.beginPath(),W.isSensor?(A!==null&&C.fillStyle(I,O*L),P!==null&&C.lineStyle(R,w,M*L)):(A!==null&&C.fillStyle(A,O*L),P!==null&&C.lineStyle(R,P,M*L)),B)C.arc(W.position.x,W.position.y,B,0,2*Math.PI);else{var G=W.vertices,N=G.length;C.moveTo(G[0].x,G[0].y);for(var V=1;V<N;V++){var z=G[V];if(!G[V-1].isInternal||E?C.lineTo(z.x,z.y):C.moveTo(z.x,z.y),V<N&&z.isInternal&&!E){var X=(V+1)%N;C.moveTo(G[X].x,G[X].y)}}C.closePath()}A!==null&&C.fillPath(),P!==null&&C.strokePath()}}if(F.showPositions&&!S.isStatic){var H=S.position.x,K=S.position.y,J=Math.ceil(F.positionSize/2);C.fillStyle(F.positionColor,1),C.fillRect(H-J,K-J,F.positionSize,F.positionSize)}return this},renderConvexHull:function(S,C,E,P){P===void 0&&(P=1);var M=S.parts,R=M.length;if(R>1){var A=S.vertices;C.lineStyle(P,E),C.beginPath(),C.moveTo(A[0].x,A[0].y);for(var O=1;O<A.length;O++)C.lineTo(A[O].x,A[O].y);C.lineTo(A[0].x,A[0].y),C.strokePath()}return this},renderJoints:function(){for(var S=this.debugGraphic,C=h.allConstraints(this.localWorld),E=0;E<C.length;E++){var P=C[E].render,M=P.lineColor,R=P.lineOpacity,A=P.lineThickness,O=P.pinSize,F=P.anchorColor,I=P.anchorSize;this.renderConstraint(C[E],S,M,R,A,O,F,I)}},renderConstraint:function(S,C,E,P,M,R,A,O){var F=S.render;if(!F.visible||!S.pointA||!S.pointB)return this;C.lineStyle(M,E,P);var I=S.bodyA,w=S.bodyB,b,Y;if(I?b=y.add(I.position,S.pointA):b=S.pointA,F.type==="pin")C.strokeCircle(b.x,b.y,R);else{if(w?Y=y.add(w.position,S.pointB):Y=S.pointB,C.beginPath(),C.moveTo(b.x,b.y),F.type==="spring")for(var U=y.sub(Y,b),W=y.perp(y.normalise(U)),D=Math.ceil(o.clamp(S.length/5,12,20)),L,B=1;B<D;B+=1)L=B%2===0?1:-1,C.lineTo(b.x+U.x*(B/D)+W.x*L*4,b.y+U.y*(B/D)+W.y*L*4);C.lineTo(Y.x,Y.y)}return C.strokePath(),F.anchors&&O>0&&(C.fillStyle(A),C.fillCircle(b.x,b.y,O),C.fillCircle(Y.x,Y.y,O)),this},resetCollisionIDs:function(){return l._nextCollidingGroupId=1,l._nextNonCollidingGroupId=-1,l._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),x.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});t.exports=T},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={BasePlugin:e(540),DefaultPlugins:e(197),PluginCache:e(24),PluginManager:e(414),ScenePlugin:e(1404)}},function(t,f,e){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=e(540),l=e(0),n=e(20),o=new l({Extends:s,initialize:function(r,a,v){s.call(this,a),this.scene=r,this.systems=r.sys,this.pluginKey=v,r.sys.events.once(n.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Canvas:e(1406),Events:e(91),Snapshot:e(1407),WebGL:e(1408)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={CanvasRenderer:e(368),GetBlendModes:e(370),SetTransform:e(30)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Canvas:e(369),WebGL:e(383)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(107),l=e(17),n={PipelineManager:e(372),Pipelines:e(1409),RenderTarget:e(141),Utils:e(12),WebGLPipeline:e(58),WebGLRenderer:e(371),WebGLShader:e(375)};n=l(!1,n,s),t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(92),l=e(17),n={BitmapMaskPipeline:e(373),Events:e(374),GraphicsPipeline:e(376),LightPipeline:e(377),MultiPipeline:e(108),PointLightPipeline:e(378),PostFXPipeline:e(1410),RopePipeline:e(379),SinglePipeline:e(380),UtilityPipeline:e(381)};n=l(!1,n,s),t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(198),n=e(2),o=e(1411),h=e(382),r=e(58),a=new s({Extends:r,initialize:function(u){u.renderTarget=n(u,"renderTarget",1),u.fragShader=n(u,"fragShader",o),u.vertShader=n(u,"vertShader",h),u.attributes=n(u,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),u.batchSize=1,u.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,u),this.isPostFX=!0,this.gameObject,this.colorMatrix=new l,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){r.prototype.boot.call(this);var v=this.manager.UTILITY_PIPELINE;this.fullFrame1=v.fullFrame1,this.fullFrame2=v.fullFrame2,this.halfFrame1=v.halfFrame1,this.halfFrame2=v.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(v){this.bindAndDraw(v)},copyFrame:function(v,u,d,c,g){this.manager.copyFrame(v,u,d,c,g)},copyToGame:function(v){this.manager.copyToGame(v)},drawFrame:function(v,u,d){this.manager.drawFrame(v,u,d,this.colorMatrix)},blendFrames:function(v,u,d,c,g){this.manager.blendFrames(v,u,d,c,g)},blendFramesAdditive:function(v,u,d,c,g){this.manager.blendFramesAdditive(v,u,d,c,g)},clearFrame:function(v,u){this.manager.clearFrame(v,u)},blitFrame:function(v,u,d,c,g,m){this.manager.blitFrame(v,u,d,c,g,m)},copyFrameRect:function(v,u,d,c,g,m,x,y){this.manager.copyFrameRect(v,u,d,c,g,m,x,y)},bindAndDraw:function(v,u,d,c,g){d===void 0&&(d=!0),c===void 0&&(c=!0);var m=this.gl,x=this.renderer;this.bind(g),this.set1i("uMainSampler",0),u?(m.viewport(0,0,u.width,u.height),m.bindFramebuffer(m.FRAMEBUFFER,u.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u.texture,0),d&&(c?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT))):(x.popFramebuffer(!1,!1,!1),x.currentFramebuffer||m.viewport(0,0,x.width,x.height)),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,v.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),u?(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,null)):x.resetTextures()}});t.exports=a},function(t,f){t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(17),l=e(201),n={Center:e(403),Events:e(104),Orientation:e(404),ScaleManager:e(415),ScaleModes:e(405),Zoom:e(406)};n=s(!1,n,l.CENTER),n=s(!1,n,l.ORIENTATION),n=s(!1,n,l.SCALE_MODE),n=s(!1,n,l.ZOOM),t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(144),l=e(17),n={Events:e(20),GetPhysicsPlugins:e(419),GetScenePlugins:e(420),SceneManager:e(417),ScenePlugin:e(1414),Settings:e(421),Systems:e(204)};n=l(!1,n,s),t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(18),l=e(0),n=e(20),o=e(2),h=e(24),r=new l({initialize:function(v){this.scene=v,this.systems=v.sys,this.settings=v.sys.settings,this.key=v.sys.settings.key,this.manager=v.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,v.sys.events.once(n.BOOT,this.boot,this),v.sys.events.on(n.START,this.pluginStart,this)},boot:function(){this.systems.events.once(n.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(n.SHUTDOWN,this.shutdown,this)},start:function(a,v){return a===void 0&&(a=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",a,v),this},restart:function(a){var v=this.key;return this.manager.queueOp("stop",v),this.manager.queueOp("start",v,a),this},transition:function(a){a===void 0&&(a={});var v=o(a,"target",!1),u=this.manager.getScene(v);if(!v||!this.checkValidTransition(u))return!1;var d=o(a,"duration",1e3);this._elapsed=0,this._target=u,this._duration=d,this._willSleep=o(a,"sleep",!1),this._willRemove=o(a,"remove",!1);var c=o(a,"onUpdate",null);c&&(this._onUpdate=c,this._onUpdateScope=o(a,"onUpdateScope",this.scene));var g=o(a,"allowInput",!1);this.settings.transitionAllowInput=g;var m=u.sys.settings;return m.isTransition=!0,m.transitionFrom=this.scene,m.transitionDuration=d,m.transitionAllowInput=g,o(a,"moveAbove",!1)?this.manager.moveAbove(this.key,v):o(a,"moveBelow",!1)&&this.manager.moveBelow(this.key,v),u.sys.isSleeping()?u.sys.wake(o(a,"data")):this.manager.start(v,o(a,"data")),this.systems.events.emit(n.TRANSITION_OUT,u,d),this.systems.events.on(n.UPDATE,this.step,this),!0},checkValidTransition:function(a){return!(!a||a.sys.isActive()||a.sys.isTransitioning()||a===this.scene||this.systems.isTransitioning())},step:function(a,v){this._elapsed+=v,this.transitionProgress=s(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var a=this._target.sys,v=this._target.sys.settings;this.systems.events.off(n.UPDATE,this.step,this),a.events.emit(n.TRANSITION_COMPLETE,this.scene),v.isTransition=!1,v.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(a,v,u,d){return this.manager.add(a,v,u,d)},launch:function(a,v){return a&&a!==this.key&&this.manager.queueOp("start",a,v),this},run:function(a,v){return a&&a!==this.key&&this.manager.queueOp("run",a,v),this},pause:function(a,v){return a===void 0&&(a=this.key),this.manager.queueOp("pause",a,v),this},resume:function(a,v){return a===void 0&&(a=this.key),this.manager.queueOp("resume",a,v),this},sleep:function(a,v){return a===void 0&&(a=this.key),this.manager.queueOp("sleep",a,v),this},wake:function(a,v){return a===void 0&&(a=this.key),this.manager.queueOp("wake",a,v),this},switch:function(a){return a!==this.key&&this.manager.queueOp("switch",this.key,a),this},stop:function(a,v){return a===void 0&&(a=this.key),this.manager.queueOp("stop",a,v),this},setActive:function(a,v,u){v===void 0&&(v=this.key);var d=this.manager.getScene(v);return d&&d.sys.setActive(a,u),this},setVisible:function(a,v){v===void 0&&(v=this.key);var u=this.manager.getScene(v);return u&&u.sys.setVisible(a),this},isSleeping:function(a){return a===void 0&&(a=this.key),this.manager.isSleeping(a)},isActive:function(a){return a===void 0&&(a=this.key),this.manager.isActive(a)},isPaused:function(a){return a===void 0&&(a=this.key),this.manager.isPaused(a)},isVisible:function(a){return a===void 0&&(a=this.key),this.manager.isVisible(a)},swapPosition:function(a,v){return v===void 0&&(v=this.key),a!==v&&this.manager.swapPosition(a,v),this},moveAbove:function(a,v){return v===void 0&&(v=this.key),a!==v&&this.manager.moveAbove(a,v),this},moveBelow:function(a,v){return v===void 0&&(v=this.key),a!==v&&this.manager.moveBelow(a,v),this},remove:function(a){return a===void 0&&(a=this.key),this.manager.remove(a),this},moveUp:function(a){return a===void 0&&(a=this.key),this.manager.moveUp(a),this},moveDown:function(a){return a===void 0&&(a=this.key),this.manager.moveDown(a),this},bringToTop:function(a){return a===void 0&&(a=this.key),this.manager.bringToTop(a),this},sendToBack:function(a){return a===void 0&&(a=this.key),this.manager.sendToBack(a),this},get:function(a){return this.manager.getScene(a)},getIndex:function(a){return a===void 0&&(a=this.key),this.manager.getIndex(a)},shutdown:function(){var a=this.systems.events;a.off(n.SHUTDOWN,this.shutdown,this),a.off(n.POST_UPDATE,this.step,this),a.off(n.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});h.register("ScenePlugin",r,"scenePlugin"),t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Events:e(438),List:e(110),Map:e(102),ProcessQueue:e(211),RTree:e(531),Set:e(149),Size:e(416)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(17),l=e(1417),n={CanvasTexture:e(423),Events:e(106),FilterMode:l,Frame:e(109),Parsers:e(425),Texture:e(206),TextureManager:e(422),TextureSource:e(424)};n=s(!1,n,l),t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={LINEAR:0,NEAREST:1};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(17),l=e(1419),n={Components:e(251),Parsers:e(1452),Formats:e(40),ImageCollection:e(576),ParseToTilemap:e(262),Tile:e(85),Tilemap:e(580),TilemapCreator:e(1459),TilemapFactory:e(1460),Tileset:e(122),TilemapLayer:e(581),Orientation:e(29),LayerData:e(120),MapData:e(121),ObjectLayer:e(572)};n=s(!1,n,l.ORIENTATION),t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ORIENTATION:e(29)};t.exports=s},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=e(63),n=function(o,h,r,a,v,u,d,c){d===void 0&&(d=!0),o<0&&(o=0),h<0&&(h=0);for(var g=s(o,h,r,a,null,c),m=v-o,x=u-h,y=0;y<g.length;y++){var T=g[y].x+m,S=g[y].y+x;T>=0&&T<c.width&&S>=0&&S<c.height&&c.data[S][T]&&c.data[S][T].copy(g[y])}d&&l(v-1,u-1,r+2,a+2,c)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=e(542),n=function(o,h,r,a,v,u){r||(r={}),Array.isArray(o)||(o=[o]);var d=u.tilemapLayer;a||(a=d.scene),v||(v=a.cameras.main);var c=s(0,0,u.width,u.height,null,u),g=[],m;for(m=0;m<c.length;m++){var x=c[m];if(o.indexOf(x.index)!==-1){var y=d.tileToWorldXY(x.x,x.y,void 0,v,u);r.x=y.x,r.y=y.y,g.push(a.make.sprite(r))}}if(typeof h=="number")for(m=0;m<o.length;m++)l(o[m],h,0,0,u.width,u.height,u);else if(Array.isArray(h))for(m=0;m<o.length;m++)l(o[m],h[m],0,0,u.width,u.height,u);return g};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=e(63),n=e(72),o=function(h,r,a,v,u,d,c){for(var g=c.collideIndexes.indexOf(h)!==-1,m=s(r,a,v,u,null,c),x=0;x<m.length;x++)m[x].index=h,n(m[x],g);d&&l(r-1,a-1,v+2,u+2,c)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=function(n,o,h,r,a,v,u,d){var c=s(h,r,a,v,u,d);return c.filter(n,o)};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){l===void 0&&(l=0),n===void 0&&(n=!1);var h=0,r,a,v;if(n){for(a=o.height-1;a>=0;a--)for(r=o.width-1;r>=0;r--)if(v=o.data[a][r],v&&v.index===s){if(h===l)return v;h+=1}}else for(a=0;a<o.height;a++)for(r=0;r<o.width;r++)if(v=o.data[a][r],v&&v.index===s){if(h===l)return v;h+=1}return null};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=function(n,o,h,r,a,v,u,d){var c=s(h,r,a,v,u,d);return c.find(n,o)||null};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=function(n,o,h,r,a,v,u,d){var c=s(h,r,a,v,u,d);c.forEach(n,o)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(29),l=e(544),n=e(545),o=e(547),h=e(1),r=e(548),a=function(v){return v===s.ORTHOGONAL?l:v===s.HEXAGONAL?n:v===s.STAGGERED?r:v===s.ISOMETRIC?o:h};t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(158),l=e(3),n=new l,o=function(h,r,a,v,u){return u.tilemapLayer.worldToTileXY(h,r,!0,n,v),s(n.x,n.y,a,u)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(483),l=e(26),n=e(484),o=e(1),h=e(3),r=function(c,g){return n.RectangleToTriangle(g,c)},a=new h,v=new h,u=new h,d=function(c,g,m,x){if(c===void 0)return[];var y=o;c instanceof s.Circle?y=n.CircleToRectangle:c instanceof s.Rectangle?y=n.RectangleToRectangle:c instanceof s.Triangle?y=r:c instanceof s.Line&&(y=n.LineToRectangle),x.tilemapLayer.worldToTileXY(c.left,c.top,!0,v,m);var T=v.x,S=v.y;x.tilemapLayer.worldToTileXY(c.right,c.bottom,!0,u,m);var C=Math.ceil(u.x),E=Math.ceil(u.y),P=Math.max(C-T,1),M=Math.max(E-S,1),R=l(T,S,P,M,g,x),A=x.tileWidth,O=x.tileHeight;x.tilemapLayer&&(A*=x.tilemapLayer.scaleX,O*=x.tilemapLayer.scaleY);for(var F=[],I=new s.Rectangle(0,0,A,O),w=0;w<R.length;w++){var b=R[w];x.tilemapLayer.tileToWorldXY(b.x,b.y,a,m),I.x=a.x,I.y=a.y,y(c,I)&&F.push(b)}return F};t.exports=d},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(29),l=e(1),n=e(253),o=function(h){return h===s.ORTHOGONAL?n:l};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(29),l=e(550),n=e(551),o=e(1),h=e(552),r=e(553),a=function(v){return v===s.ORTHOGONAL?r:v===s.ISOMETRIC?n:v===s.HEXAGONAL?l:v===s.STAGGERED?h:o};t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(29),l=e(554),n=e(1),o=e(555),h=e(254),r=function(a){return a===s.ORTHOGONAL?h:a===s.HEXAGONAL?l:a===s.STAGGERED?o:n};t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(29),l=e(1),n=e(255),o=function(h){return h===s.ORTHOGONAL?n:l};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(29),l=e(556),n=e(557),o=e(1),h=e(558),r=e(559),a=function(v){return v===s.ORTHOGONAL?r:v===s.ISOMETRIC?n:v===s.HEXAGONAL?l:v===s.STAGGERED?h:o};t.exports=a},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(29),l=e(560),n=e(1),o=e(561),h=e(256),r=function(a){return a===s.ORTHOGONAL?h:a===s.HEXAGONAL?l:a===s.STAGGERED?o:n};t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(562),l=e(3),n=new l,o=function(h,r,a,v){v.tilemapLayer.worldToTileXY(h,r,!0,n,a);var u=n.x,d=n.y;return s(u,d,v)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(257),l=e(3),n=new l,o=function(h,r,a,v,u,d){return d.tilemapLayer.worldToTileXY(r,a,!0,n,u,d),s(h,n.x,n.y,v,d)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(63),l=e(257),n=function(o,h,r,a,v){if(a===void 0&&(a=!0),!Array.isArray(o))return null;Array.isArray(o[0])||(o=[o]);for(var u=o.length,d=o[0].length,c=0;c<u;c++)for(var g=0;g<d;g++){var m=o[c][g];l(m,h+g,r+c,!1,v)}a&&s(h-1,r-1,d+2,u+2,v)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=e(210),n=function(o,h,r,a,v,u){var d,c=s(o,h,r,a,{},u);if(!v)for(v=[],d=0;d<c.length;d++)v.indexOf(c[d].index)===-1&&v.push(c[d].index);for(d=0;d<c.length;d++)c[d].index=l(v)};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(563),l=e(3),n=new l,o=function(h,r,a,v,u,d){return d.tilemapLayer.worldToTileXY(h,r,!0,n,u,d),s(n.x,n.y,a,v,d)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=e(397),n=new l(105,210,231,150),o=new l(243,134,48,200),h=new l(40,39,37,150),r=function(a,v,u){v===void 0&&(v={});var d=v.tileColor!==void 0?v.tileColor:n,c=v.collidingTileColor!==void 0?v.collidingTileColor:o,g=v.faceColor!==void 0?v.faceColor:h,m=s(0,0,u.width,u.height,null,u);a.translateCanvas(u.tilemapLayer.x,u.tilemapLayer.y),a.scaleCanvas(u.tilemapLayer.scaleX,u.tilemapLayer.scaleY);for(var x=0;x<m.length;x++){var y=m[x],T=y.width,S=y.height,C=y.pixelX,E=y.pixelY,P=y.collides?c:d;P!==null&&(a.fillStyle(P.color,P.alpha/255),a.fillRect(C,E,T,S)),C+=1,E+=1,T-=2,S-=2,g!==null&&(a.lineStyle(1,g.color,g.alpha/255),y.faceTop&&a.lineBetween(C,E,C+T,E),y.faceRight&&a.lineBetween(C+T,E,C+T,E+S),y.faceBottom&&a.lineBetween(C,E+S,C+T,E+S),y.faceLeft&&a.lineBetween(C,E,C,E+S))}};t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(72),l=e(63),n=e(160),o=function(h,r,a,v,u){r===void 0&&(r=!0),a===void 0&&(a=!0),u===void 0&&(u=!0),Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++)n(h[d],r,v);if(u)for(var c=0;c<v.height;c++)for(var g=0;g<v.width;g++){var m=v.data[c][g];m&&h.indexOf(m.index)!==-1&&s(m,r)}a&&l(0,0,v.width,v.height,v)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(72),l=e(63),n=e(160),o=function(h,r,a,v,u,d){if(a===void 0&&(a=!0),v===void 0&&(v=!0),d===void 0&&(d=!0),!(h>r)){for(var c=h;c<=r;c++)n(c,a,u);if(d)for(var g=0;g<u.height;g++)for(var m=0;m<u.width;m++){var x=u.data[g][m];x&&x.index>=h&&x.index<=r&&s(x,a)}v&&l(0,0,u.width,u.height,u)}};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(72),l=e(63),n=e(160),o=function(h,r,a,v){r===void 0&&(r=!0),a===void 0&&(a=!0),Array.isArray(h)||(h=[h]);for(var u=0;u<v.height;u++)for(var d=0;d<v.width;d++){var c=v.data[u][d];c&&h.indexOf(c.index)===-1&&(s(c,r),n(c.index,r,v))}a&&l(0,0,v.width,v.height,v)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(72),l=e(63),n=e(126),o=function(h,r,a,v){r===void 0&&(r=!0),a===void 0&&(a=!0);for(var u=0;u<v.height;u++)for(var d=0;d<v.width;d++){var c=v.data[u][d];if(!!c){for(var g in h)if(!!n(c.properties,g)){var m=h[g];Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)c.properties[g]===m[x]&&s(c,r)}}}a&&l(0,0,v.width,v.height,v)};t.exports=o},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(72),l=e(63),n=function(o,h,r){o===void 0&&(o=!0),h===void 0&&(h=!0);for(var a=0;a<r.height;a++)for(var v=0;v<r.width;v++){var u=r.data[a][v];if(!!u){var d=u.getCollisionGroup();d&&d.objects&&d.objects.length>0&&s(u,o)}}h&&l(0,0,r.width,r.height,r)};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l,n,o){if(typeof s=="number")o.callbacks[s]=l!==null?{callback:l,callbackContext:n}:void 0;else for(var h=0,r=s.length;h<r;h++)o.callbacks[s[h]]=l!==null?{callback:l,callbackContext:n}:void 0};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=function(n,o,h,r,a,v,u){for(var d=s(n,o,h,r,null,u),c=0;c<d.length;c++)d[c].setCollisionCallback(a,v)};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=e(131),n=function(o,h,r,a,v){var u=s(o,h,r,a,null,v),d=u.map(function(g){return g.index});l(d);for(var c=0;c<u.length;c++)u[c].index=d[c]};t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=function(n,o,h,r,a,v,u){for(var d=s(h,r,a,v,null,u),c=0;c<d.length;c++)d[c]&&(d[c].index===n?d[c].index=o:d[c].index===o&&(d[c].index=n))};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(26),l=function(n,o,h,r,a,v){if(!!a){var u,d=s(n,o,h,r,null,v),c=0;for(u=0;u<a.length;u++)c+=a[u].weight;if(!(c<=0))for(u=0;u<d.length;u++){for(var g=Math.random()*c,m=0,x=-1,y=0;y<a.length;y++)if(m+=a[y].weight,g<=m){var T=a[y].index;x=Array.isArray(T)?T[Math.floor(Math.random()*T.length)]:T;break}d[u].index=x}}};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={FromOrientationString:e(258),Parse:e(564),Parse2DArray:e(259),ParseCSV:e(565),Impact:e(1454),Tiled:e(1455)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){for(var n=0;n<s.length;n++){var o=s[n],h=n;if(o.name&&o.name!==""&&(h=o.name),Array.isArray(o.wangtiles)&&o.wangtiles.length>0){var r={},a={},v,u,d;if(Array.isArray(o.edgecolors))for(v=0;v<o.edgecolors.length;v++)d=1+v,u=o.edgecolors[v],u.name!==""&&(r[d]=u.name);if(Array.isArray(o.cornercolors))for(v=0;v<o.cornercolors.length;v++)d=1+v,u=o.cornercolors[v],u.name!==""&&(a[d]=u.name);if(Array.isArray(o.colors))for(v=0;v<o.colors.length;v++)u=o.colors[v],d=1+v,u.name!==""&&(r[d]=a[d]=u.name);for(var c=[r,a,r,a,r,a,r,a],g=0;g<o.wangtiles.length;g++){var m=o.wangtiles[g],x=l[m.tileid]||(l[m.tileid]={});x=x.wangid||(x.wangid={});for(var y=[],T=0;T<Math.min(c.length,m.wangid.length);T++){if(u=m.wangid[T],u===0){y.push(void 0);continue}var S=c[T][u];if(S!==void 0){y.push(S);continue}y.push(u)}x[h]=y}}}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ParseTileLayers:e(578),ParseTilesets:e(579),ParseWeltmeister:e(577)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={AssignTileProperties:e(567),Base64Decode:e(574),BuildTilesetIndex:e(568),CreateGroupLayer:e(161),ParseGID:e(261),ParseImageLayers:e(569),ParseJSONTiled:e(566),ParseObject:e(260),ParseObjectLayers:e(570),ParseTileLayers:e(573),ParseTilesets:e(575)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(1),l=e(1);s=e(1457),l=e(1458),t.exports={renderWebGL:s,renderCanvas:l}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(12),l=function(n,o,h){var r=o.cull(h),a=r.length,v=h.alpha*o.alpha;if(!(a===0||v<=0)){var u=o.gidMap,d=n.pipelines.set(o.pipeline,o),c=s.getTintAppendFloatAlpha,g=o.scrollFactorX,m=o.scrollFactorY,x=o.x,y=o.y,T=o.scaleX,S=o.scaleY;n.pipelines.preBatch(o);for(var C=0;C<a;C++){var E=r[C],P=u[E.index];if(!!P){var M=P.getTileTextureCoordinates(E.index);if(M!==null){var R=P.glTexture,A=d.setTexture2D(R,o),O=P.tileWidth,F=P.tileHeight,I=M.x,w=M.y,b=P.tileWidth*.5,Y=P.tileHeight*.5,U=c(E.tint,v*E.alpha);d.batchTexture(o,R,R.width,R.height,x+(b+E.pixelX)*T,y+(Y+E.pixelY)*S,E.width,E.height,T,S,E.rotation,E.flipX,E.flipY,g,m,b,Y,I,w,O,F,U,U,U,U,!1,0,0,h,null,!0,A)}}}n.pipelines.postBatch(o)}};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(25),l=new s,n=new s,o=new s,h=function(r,a,v,u){var d=a.cull(v),c=d.length,g=v.alpha*a.alpha;if(!(c===0||g<=0)){var m=l,x=n,y=o;x.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),m.copyFrom(v.matrix);var T=r.currentContext,S=a.gidMap;T.save(),u?(m.multiplyWithOffset(u,-v.scrollX*a.scrollFactorX,-v.scrollY*a.scrollFactorY),x.e=a.x,x.f=a.y,m.multiply(x,y),y.copyToContext(T)):(x.e-=v.scrollX*a.scrollFactorX,x.f-=v.scrollY*a.scrollFactorY,x.copyToContext(T)),(!r.antialias||a.scaleX>1||a.scaleY>1)&&(T.imageSmoothingEnabled=!1);for(var C=0;C<c;C++){var E=d[C],P=S[E.index];if(!!P){var M=P.image.getSourceImage(),R=P.getTileTextureCoordinates(E.index);if(R!==null){var A=P.tileWidth,O=P.tileHeight,F=A*.5,I=O*.5;T.save(),T.translate(E.pixelX+F,E.pixelY+I),E.rotation!==0&&T.rotate(E.rotation),(E.flipX||E.flipY)&&T.scale(E.flipX?-1:1,E.flipY?-1:1),T.globalAlpha=g*E.alpha,T.drawImage(M,R.x,R.y,A,O,-F,-I,A,O),T.restore()}}}T.restore()}};t.exports=h},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(16),l=e(262);s.register("tilemap",function(n){var o=n!==void 0?n:{};return l(this.scene,o.key,o.tileWidth,o.tileHeight,o.width,o.height,o.data,o.insertNull)})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(5),l=e(262);s.register("tilemap",function(n,o,h,r,a,v,u){return n===null&&(n=void 0),o===null&&(o=void 0),h===null&&(h=void 0),r===null&&(r=void 0),a===null&&(a=void 0),l(this.scene,n,o,h,r,a,v,u)})},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Clock:e(1462),TimerEvent:e(582)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(0),l=e(24),n=e(20),o=e(582),h=e(93),r=new s({initialize:function(v){this.scene=v,this.systems=v.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],v.sys.events.once(n.BOOT,this.boot,this),v.sys.events.on(n.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){var a=this.systems.events;a.on(n.PRE_UPDATE,this.preUpdate,this),a.on(n.UPDATE,this.update,this),a.once(n.SHUTDOWN,this.shutdown,this)},addEvent:function(a){var v;return a instanceof o?(v=a,this.removeEvent(v),v.elapsed=v.startAt,v.hasDispatched=!1,v.repeatCount=v.repeat===-1||v.loop?999999999999:v.repeat):v=new o(a),this._pendingInsertion.push(v),v},delayedCall:function(a,v,u,d){return this.addEvent({delay:a,callback:v,args:u,callbackScope:d})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(a){Array.isArray(a)||(a=[a]);for(var v=0;v<a.length;v++){var u=a[v];h(this._pendingRemoval,u),h(this._pendingInsertion,u),h(this._active,u)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var a=this._pendingRemoval.length,v=this._pendingInsertion.length;if(!(a===0&&v===0)){var u,d;for(u=0;u<a;u++){d=this._pendingRemoval[u];var c=this._active.indexOf(d);c>-1&&this._active.splice(c,1),d.destroy()}for(u=0;u<v;u++)d=this._pendingInsertion[u],this._active.push(d);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(a,v){if(this.now=a,!this.paused){v*=this.timeScale;for(var u=0;u<this._active.length;u++){var d=this._active[u];if(!d.paused&&(d.elapsed+=v*d.timeScale,d.elapsed>=d.delay)){var c=d.elapsed-d.delay;d.elapsed=d.delay,!d.hasDispatched&&d.callback&&(d.hasDispatched=!0,d.callback.apply(d.callbackScope,d.args)),d.repeatCount>0?(d.repeatCount--,d.elapsed=c,d.hasDispatched=!1):this._pendingRemoval.push(d)}}}},shutdown:function(){var a;for(a=0;a<this._pendingInsertion.length;a++)this._pendingInsertion[a].destroy();for(a=0;a<this._active.length;a++)this._active[a].destroy();for(a=0;a<this._pendingRemoval.length;a++)this._pendingRemoval[a].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var v=this.systems.events;v.off(n.PRE_UPDATE,this.preUpdate,this),v.off(n.UPDATE,this.update,this),v.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});l.register("Clock",r,"time"),t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(100),l=e(17),n={Builders:e(1464),Events:e(267),TweenManager:e(1480),Tween:e(266),TweenData:e(268),Timeline:e(588)};n=l(!1,n,s),t.exports=n},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={GetBoolean:e(99),GetEaseFunction:e(80),GetNewValue:e(162),GetProps:e(583),GetTargets:e(263),GetTweens:e(584),GetValueOp:e(264),NumberTweenBuilder:e(585),StaggerBuilder:e(586),TimelineBuilder:e(587),TweenBuilder:e(163)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="complete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="loop"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pause"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="resume"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="start"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="update"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="active"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="complete"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="loop"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="repeat"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="start"},function(t,f){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="stop"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="update"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="yoyo"},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(93),l=e(0),n=e(585),o=e(24),h=e(20),r=e(586),a=e(587),v=e(100),u=e(163),d=new l({initialize:function(g){this.scene=g,this.systems=g.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,g.sys.events.once(h.BOOT,this.boot,this),g.sys.events.on(h.START,this.start,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){var c=this.systems.events;c.on(h.PRE_UPDATE,this.preUpdate,this),c.on(h.UPDATE,this.update,this),c.once(h.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(c){return a(this,c)},timeline:function(c){var g=a(this,c);return g.paused||(this._add.push(g),this._toProcess++),g},create:function(c){return u(this,c)},add:function(c){var g=u(this,c);return this._add.push(g),this._toProcess++,g},existing:function(c){return this._add.push(c),this._toProcess++,this},addCounter:function(c){var g=n(this,c);return this._add.push(g),this._toProcess++,g},stagger:function(c,g){return r(c,g)},preUpdate:function(){if(this._toProcess!==0){var c=this._destroy,g=this._active,m=this._pending,x,y;for(x=0;x<c.length;x++){y=c[x];var T=g.indexOf(y);T===-1?(T=m.indexOf(y),T>-1&&(y.state=v.REMOVED,m.splice(T,1))):(y.state=v.REMOVED,g.splice(T,1))}for(c.length=0,c=this._add,x=0;x<c.length;x++)y=c[x],y.state===v.PENDING_ADD&&(y.init()?(y.play(),this._active.push(y)):this._pending.push(y));c.length=0,this._toProcess=0}},update:function(c,g){var m=this._active,x;g*=this.timeScale;for(var y=0;y<m.length;y++)x=m[y],x.update(c,g)&&(this._destroy.push(x),this._toProcess++)},remove:function(c){return s(this._add,c),s(this._pending,c),s(this._active,c),s(this._destroy,c),c.state=v.REMOVED,this},makeActive:function(c){if(this._add.indexOf(c)!==-1||this._active.indexOf(c)!==-1)return this;var g=this._pending.indexOf(c);return g!==-1&&this._pending.splice(g,1),this._add.push(c),c.state=v.PENDING_ADD,this._toProcess++,this},each:function(c,g){for(var m=[null],x=1;x<arguments.length;x++)m.push(arguments[x]);for(var y in this.list)m[0]=this.list[y],c.apply(g,m)},getAllTweens:function(){for(var c=this._active,g=[],m=0;m<c.length;m++)g.push(c[m]);return g},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(c,g){g===void 0&&(g=!1);var m=this._active,x,y=[],T,S;for(Array.isArray(c)||(c=[c]),T=0;T<m.length;T++)for(x=m[T],S=0;S<c.length;S++)x.hasTarget(c[S])&&y.push(x);if(g)for(m=this._pending,T=0;T<m.length;T++)for(x=m[T],S=0;S<c.length;S++)x.hasTarget(c[S])&&y.push(x);return y},isTweening:function(c){for(var g=this._active,m,x=0;x<g.length;x++)if(m=g[x],m.hasTarget(c)&&m.isPlaying())return!0;return!1},killAll:function(){for(var c=this.getAllTweens(),g=0;g<c.length;g++)c[g].stop();return this},killTweensOf:function(c){for(var g=this.getTweensOf(c),m=0;m<g.length;m++)g[m].stop();return this},pauseAll:function(){for(var c=this._active,g=0;g<c.length;g++)c[g].pause();return this},resumeAll:function(){for(var c=this._active,g=0;g<c.length;g++)c[g].resume();return this},setGlobalTimeScale:function(c){return this.timeScale=c,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var c=this.systems.events;c.off(h.PRE_UPDATE,this.preUpdate,this),c.off(h.UPDATE,this.update,this),c.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});o.register("TweenManager",d,"tweens"),t.exports=d},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Array:e(208),Base64:e(1482),Objects:e(1484),String:e(1488),NOOP:e(1)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={ArrayBufferToBase64:e(1483),Base64ToArrayBuffer:e(433)}},function(t,f){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(l,n){for(var o=new Uint8Array(l),h=o.length,r=n?"data:"+n+";base64,":"",a=0;a<h;a+=3)r+=e[o[a]>>2],r+=e[(o[a]&3)<<4|o[a+1]>>4],r+=e[(o[a+1]&15)<<2|o[a+2]>>6],r+=e[o[a+2]&63];return h%3===2?r=r.substring(0,r.length-1)+"=":h%3===1&&(r=r.substring(0,r.length-2)+"=="),r};t.exports=s},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Clone:e(77),DeepCopy:e(175),Extend:e(17),GetAdvancedValue:e(13),GetFastValue:e(2),GetMinMaxValue:e(1485),GetValue:e(6),HasAll:e(1486),HasAny:e(455),HasValue:e(126),IsPlainObject:e(7),Merge:e(127),MergeRight:e(1487),Pick:e(571),SetValue:e(478)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(6),l=e(18),n=function(o,h,r,a,v){v===void 0&&(v=r);var u=s(o,h,v);return l(u,r,a)};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){for(var n=0;n<l.length;n++)if(!s.hasOwnProperty(l[n]))return!1;return!0};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(77),l=function(n,o){var h=s(n);for(var r in o)h.hasOwnProperty(r)&&(h[r]=o[r]);return h};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Format:e(1489),Pad:e(186),RemoveAt:e(1490),Reverse:e(1491),UppercaseFirst:e(205),UUID:e(222)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return s.replace(/%([0-9]+)/g,function(n,o){return l[Number(o)-1]})};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s,l){return l===0?s.slice(1):s.slice(0,l-1)+s.slice(l)};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=function(s){return s.split("").reverse().join("")};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={SoundManagerCreator:e(426),Events:e(70),BaseSound:e(146),BaseSoundManager:e(145),WebAudioSound:e(434),WebAudioSoundManager:e(432),HTML5AudioSound:e(429),HTML5AudioSoundManager:e(427),NoAudioSound:e(431),NoAudioSoundManager:e(430)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={Arcade:e(1366),Matter:e(1494)}},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports={BodyBounds:e(1392),Components:e(249),Events:e(272),Factory:e(1394),MatterGameObject:e(1395),Image:e(1396),Matter:e(594),MatterPhysics:e(1524),PolyDecomp:e(1393),Sprite:e(1397),TileBody:e(593),PhysicsEditorParser:e(589),PhysicsJSONParser:e(590),PointerConstraint:e(1398),World:e(1402)}},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setBounce:function(s){return this.body.restitution=s,this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setCollisionCategory:function(s){return this.body.collisionFilter.category=s,this},setCollisionGroup:function(s){return this.body.collisionFilter.group=s,this},setCollidesWith:function(s){var l=0;if(!Array.isArray(s))l=s;else for(var n=0;n<s.length;n++)l|=s[n];return this.body.collisionFilter.mask=l,this},setOnCollide:function(s){return this.body.onCollideCallback=s,this},setOnCollideEnd:function(s){return this.body.onCollideEndCallback=s,this},setOnCollideActive:function(s){return this.body.onCollideActiveCallback=s,this},setOnCollideWith:function(s,l){Array.isArray(s)||(s=[s]);for(var n=0;n<s.length;n++){var o=s[n].hasOwnProperty("body")?s[n].body:s[n];this.body.setOnCollideWith(o,l)}return this}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(41),l={applyForce:function(n){return this._tempVec2.set(this.body.position.x,this.body.position.y),s.applyForce(this.body,this._tempVec2,n),this},applyForceFrom:function(n,o){return s.applyForce(this.body,n,o),this},thrust:function(n){var o=this.body.angle;return this._tempVec2.set(n*Math.cos(o),n*Math.sin(o)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(n){var o=this.body.angle-Math.PI/2;return this._tempVec2.set(n*Math.cos(o),n*Math.sin(o)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(n){var o=this.body.angle+Math.PI/2;return this._tempVec2.set(n*Math.cos(o),n*Math.sin(o)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(n){var o=this.body.angle-Math.PI;return this._tempVec2.set(n*Math.cos(o),n*Math.sin(o)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};t.exports=l},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setFriction:function(s,l,n){return this.body.friction=s,l!==void 0&&(this.body.frictionAir=l),n!==void 0&&(this.body.frictionStatic=n),this},setFrictionAir:function(s){return this.body.frictionAir=s,this},setFrictionStatic:function(s){return this.body.frictionStatic=s,this}};t.exports=e},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setIgnoreGravity:function(s){return this.body.ignoreGravity=s,this}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(41),l=e(3),n={setMass:function(o){return s.setMass(this.body,o),this},setDensity:function(o){return s.setDensity(this.body,o),this},centerOfMass:{get:function(){return new l(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};t.exports=n},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={setSensor:function(s){return this.body.isSensor=s,this},isSensor:function(){return this.body.isSensor}};t.exports=e},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(86),l=e(41),n=e(124),o=e(2),h=e(589),r=e(590),a=e(64),v={setRectangle:function(u,d,c){return this.setBody({type:"rectangle",width:u,height:d},c)},setCircle:function(u,d){return this.setBody({type:"circle",radius:u},d)},setPolygon:function(u,d,c){return this.setBody({type:"polygon",sides:d,radius:u},c)},setTrapezoid:function(u,d,c,g){return this.setBody({type:"trapezoid",width:u,height:d,slope:c},g)},setExistingBody:function(u,d){d===void 0&&(d=!0),this.body&&this.world.remove(this.body,!0),this.body=u;for(var c=0;c<u.parts.length;c++)u.parts[c].gameObject=this;var g=this;if(u.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},d&&(this.world.has(u)&&this.world.remove(u,!0),this.world.add(u)),this._originComponent){var m=u.render.sprite.xOffset,x=u.render.sprite.yOffset,y=u.centerOfMass.x,T=u.centerOfMass.y;if(n(y,.5)&&n(T,.5))this.setOrigin(m+.5,x+.5);else{var S=u.centerOffset.x,C=u.centerOffset.y;this.setOrigin(m+S/this.displayWidth,x+C/this.displayHeight)}}return this},setBody:function(u,d){if(!u)return this;var c;typeof u=="string"&&(u={type:u});var g=o(u,"type","rectangle"),m=o(u,"x",this._tempVec2.x),x=o(u,"y",this._tempVec2.y),y=o(u,"width",this.width),T=o(u,"height",this.height);switch(g){case"rectangle":c=s.rectangle(m,x,y,T,d);break;case"circle":var S=o(u,"radius",Math.max(y,T)/2),C=o(u,"maxSides",25);c=s.circle(m,x,S,d,C);break;case"trapezoid":var E=o(u,"slope",.5);c=s.trapezoid(m,x,y,T,E,d);break;case"polygon":var P=o(u,"sides",5),M=o(u,"radius",Math.max(y,T)/2);c=s.polygon(m,x,P,M,d);break;case"fromVertices":case"fromVerts":var R=o(u,"verts",null);if(R)if(typeof R=="string"&&(R=a.fromPath(R)),this.body&&!this.body.hasOwnProperty("temp"))l.setVertices(this.body,R),c=this.body;else{var A=o(u,"flagInternal",!1),O=o(u,"removeCollinear",.01),F=o(u,"minimumArea",10);c=s.fromVertices(m,x,R,d,A,O,F)}break;case"fromPhysicsEditor":c=h.parseBody(m,x,u,d);break;case"fromPhysicsTracer":c=r.parseBody(m,x,u,d);break}return c&&this.setExistingBody(c,u.addToWorld),this}};t.exports=v},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(272),l=e(165),n=e(166),o={setToSleep:function(){return l.set(this.body,!0),this},setAwake:function(){return l.set(this.body,!1),this},setSleepThreshold:function(h){return h===void 0&&(h=60),this.body.sleepThreshold=h,this},setSleepEvents:function(h,r){return this.setSleepStartEvent(h),this.setSleepEndEvent(r),this},setSleepStartEvent:function(h){if(h){var r=this.world;n.on(this.body,"sleepStart",function(a){r.emit(s.SLEEP_START,a,this)})}else n.off(this.body,"sleepStart");return this},setSleepEndEvent:function(h){if(h){var r=this.world;n.on(this.body,"sleepEnd",function(a){r.emit(s.SLEEP_END,a,this)})}else n.off(this.body,"sleepEnd");return this}};t.exports=o},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="afteradd"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="afterremove"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="afterupdate"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="beforeadd"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="beforeremove"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="beforeupdate"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="collisionactive"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="collisionend"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="collisionstart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="dragend"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="drag"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="dragstart"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="pause"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="resume"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="sleepend"},function(t,f){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t.exports="sleepstart"},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(41),l={setStatic:function(n){return s.setStatic(this.body,n),this},isStatic:function(){return this.body.isStatic}};t.exports=l},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(41),l=e(14),n=e(269),o=e(270),h=4,r={x:{get:function(){return this.body.position.x},set:function(a){this._tempVec2.set(a,this.y),s.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(a){this._tempVec2.set(this.x,a),s.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(a){var v=1/this._scaleX,u=1/this._scaleY;this._scaleX=a,this._scaleX===0?this.renderFlags&=~h:this.renderFlags|=h,s.scale(this.body,v,u),s.scale(this.body,a,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(a){var v=1/this._scaleX,u=1/this._scaleY;this._scaleY=a,this._scaleY===0?this.renderFlags&=~h:this.renderFlags|=h,s.scale(this.body,v,u),s.scale(this.body,this._scaleX,a)}},angle:{get:function(){return o(this.body.angle*l.RAD_TO_DEG)},set:function(a){this.rotation=o(a)*l.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(a){this._rotation=n(a),s.setAngle(this.body,this._rotation)}},setPosition:function(a,v){return a===void 0&&(a=0),v===void 0&&(v=a),this._tempVec2.set(a,v),s.setPosition(this.body,this._tempVec2),this},setRotation:function(a){return a===void 0&&(a=0),this._rotation=n(a),s.setAngle(this.body,a),this},setFixedRotation:function(){return s.setInertia(this.body,1/0),this},setAngle:function(a){return a===void 0&&(a=0),this.angle=a,s.setAngle(this.body,this.rotation),this},setScale:function(a,v,u){a===void 0&&(a=1),v===void 0&&(v=a);var d=1/this._scaleX,c=1/this._scaleY;return this._scaleX=a,this._scaleY=v,s.scale(this.body,d,c,u),s.scale(this.body,a,v,u),this}};t.exports=r},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(41),l={setAngularVelocity:function(n){return s.setAngularVelocity(this.body,n),this},setVelocityX:function(n){return this._tempVec2.set(n,this.body.velocity.y),s.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(n){return this._tempVec2.set(this.body.velocity.x,n),s.setVelocity(this.body,this._tempVec2),this},setVelocity:function(n,o){return this._tempVec2.set(n,o),s.setVelocity(this.body,this._tempVec2),this}};t.exports=l},function(t,f,e){var s={};t.exports=s;var l=e(118),n=e(32);(function(){s.create=function(o){var h={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return n.extend(h,!1,o)},s.reset=function(o){o.extended&&(o.narrowDetections=0,o.narrowphaseTests=0,o.narrowReuse=0,o.narrowReuseCount=0,o.midphaseTests=0,o.broadphaseTests=0,o.narrowEff=0,o.midEff=0,o.broadEff=0,o.collisions=0,o.buckets=0,o.pairs=0,o.bodies=0)},s.update=function(o,h){if(o.extended){var r=h.world,a=l.allBodies(r);o.collisions=o.narrowDetections,o.pairs=h.pairs.list.length,o.bodies=a.length,o.midEff=(o.narrowDetections/(o.midphaseTests||1)).toFixed(2),o.narrowEff=(o.narrowDetections/(o.narrowphaseTests||1)).toFixed(2),o.broadEff=(1-o.broadphaseTests/(a.length||1)).toFixed(2),o.narrowReuse=(o.narrowReuseCount/(o.narrowphaseTests||1)).toFixed(2)}}})()},function(t,f,e){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=e(123),l=e(271),n=e(86),o=e(41),h=e(1392),r=e(84),a=e(0),v=e(118),u=e(591),d=e(128),c=e(273),g=e(50),m=e(1394),x=e(2),y=e(6),T=e(597),S=e(1525),C=e(1526),E=e(1399),P=e(1527),M=e(127),R=e(250),A=e(598),O=e(595),F=e(24),I=e(1400),w=e(599),b=e(274),Y=e(20),U=e(592),W=e(83),D=e(64),L=e(1402),B=new a({initialize:function(N){this.scene=N,this.systems=N.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=v,this.detector=c,this.grid=T,this.pair=R,this.pairs=A,this.query=I,this.resolver=w,this.sat=b,this.constraint=d,this.bodies=n,this.composites=u,this.axes=l,this.bounds=r,this.svg=U,this.vector=W,this.vertices=D,this.verts=D,this._tempVec2=W.create(),y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),w._restingThresh=y(this.config,"restingThresh",4),w._restingThreshTangent=y(this.config,"restingThreshTangent",6),w._positionDampen=y(this.config,"positionDampen",.9),w._positionWarming=y(this.config,"positionWarming",.8),w._frictionNormalMultiplier=y(this.config,"frictionNormalMultiplier",5),N.sys.events.once(Y.BOOT,this.boot,this),N.sys.events.on(Y.START,this.start,this)},boot:function(){this.world=new L(this.scene,this.config),this.add=new m(this.world),this.bodyBounds=new h,this.systems.events.once(Y.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new L(this.scene,this.config),this.add=new m(this.world));var G=this.systems.events;G.on(Y.UPDATE,this.world.update,this.world),G.on(Y.POST_UPDATE,this.world.postUpdate,this.world),G.once(Y.SHUTDOWN,this.shutdown,this)},getConfig:function(){var G=this.systems.game.config.physics,N=this.systems.settings.physics,V=M(x(N,"matter",{}),x(G,"matter",{}));return V},enableAttractorPlugin:function(){return O.register(S),O.use(E,S),this},enableWrapPlugin:function(){return O.register(P),O.use(E,P),this},enableCollisionEventsPlugin:function(){return O.register(C),O.use(E,C),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(G,N){this.world.step(G,N)},containsPoint:function(G,N,V){G=this.getMatterBodies(G);var z=W.create(N,V),X=I.point(G,z);return X.length>0},intersectPoint:function(G,N,V){V=this.getMatterBodies(V);var z=W.create(G,N),X=[],H=I.point(V,z);return H.forEach(function(K){X.indexOf(K)===-1&&X.push(K)}),X},intersectRect:function(G,N,V,z,X,H){X===void 0&&(X=!1),H=this.getMatterBodies(H);var K={min:{x:G,y:N},max:{x:G+V,y:N+z}},J=[],Z=I.region(H,K,X);return Z.forEach(function(Q){J.indexOf(Q)===-1&&J.push(Q)}),J},intersectRay:function(G,N,V,z,X,H){X===void 0&&(X=1),H=this.getMatterBodies(H);for(var K=[],J=I.ray(H,W.create(G,N),W.create(V,z),X),Z=0;Z<J.length;Z++)K.push(J[Z].body);return K},intersectBody:function(G,N){N=this.getMatterBodies(N);for(var V=[],z=I.collides(G,N),X=0;X<z.length;X++){var H=z[X];H.bodyA===G?V.push(H.bodyB):V.push(H.bodyA)}return V},overlap:function(G,N,V,z,X){V===void 0&&(V=null),z===void 0&&(z=null),X===void 0&&(X=V),Array.isArray(G)||(G=[G]),G=this.getMatterBodies(G),N=this.getMatterBodies(N);for(var H=!1,K=0;K<G.length;K++)for(var J=G[K],Z=I.collides(J,N),Q=0;Q<Z.length;Q++){var q=Z[Q],k=q.bodyA.id===J.id?q.bodyB:q.bodyA;if(!z||z.call(X,J,k,q)){if(H=!0,V)V.call(X,J,k,q);else if(!z)return!0}}return H},setCollisionCategory:function(G,N){return G=this.getMatterBodies(G),G.forEach(function(V){V.collisionFilter.category=N}),this},setCollisionGroup:function(G,N){return G=this.getMatterBodies(G),G.forEach(function(V){V.collisionFilter.group=N}),this},setCollidesWith:function(G,N){G=this.getMatterBodies(G);var V=0;if(!Array.isArray(N))V=N;else for(var z=0;z<N.length;z++)V|=N[z];return G.forEach(function(X){X.collisionFilter.mask=V}),this},getMatterBodies:function(G){if(!G)return this.world.getAllBodies();Array.isArray(G)||(G=[G]);for(var N=[],V=0;V<G.length;V++){var z=G[V].hasOwnProperty("body")?G[V].body:G[V];N.push(z)}return N},setVelocity:function(G,N,V){G=this.getMatterBodies(G);var z=this._tempVec2;return z.x=N,z.y=V,G.forEach(function(X){o.setVelocity(X,z)}),this},setVelocityX:function(G,N){G=this.getMatterBodies(G);var V=this._tempVec2;return V.x=N,G.forEach(function(z){V.y=z.velocity.y,o.setVelocity(z,V)}),this},setVelocityY:function(G,N){G=this.getMatterBodies(G);var V=this._tempVec2;return V.y=N,G.forEach(function(z){V.x=z.velocity.x,o.setVelocity(z,V)}),this},setAngularVelocity:function(G,N){return G=this.getMatterBodies(G),G.forEach(function(V){o.setAngularVelocity(V,N)}),this},applyForce:function(G,N){G=this.getMatterBodies(G);var V=this._tempVec2;return G.forEach(function(z){V.x=z.position.x,V.y=z.position.y,o.applyForce(z,V,N)}),this},applyForceFromPosition:function(G,N,V,z){G=this.getMatterBodies(G);var X=this._tempVec2;return G.forEach(function(H){z===void 0&&(z=H.angle),X.x=V*Math.cos(z),X.y=V*Math.sin(z),o.applyForce(H,N,X)}),this},applyForceFromAngle:function(G,N,V){G=this.getMatterBodies(G);var z=this._tempVec2;return G.forEach(function(X){V===void 0&&(V=X.angle),z.x=N*Math.cos(V),z.y=N*Math.sin(V),o.applyForce(X,{x:X.position.x,y:X.position.y},z)}),this},getConstraintLength:function(G){var N=G.pointA.x,V=G.pointA.y,z=G.pointB.x,X=G.pointB.y;return G.bodyA&&(N+=G.bodyA.position.x,V+=G.bodyA.position.y),G.bodyB&&(z+=G.bodyB.position.x,X+=G.bodyB.position.y),g(N,V,z,X)},alignBody:function(G,N,V,z){G=G.hasOwnProperty("body")?G.body:G;var X;switch(z){case s.TOP_LEFT:case s.LEFT_TOP:X=this.bodyBounds.getTopLeft(G,N,V);break;case s.TOP_CENTER:X=this.bodyBounds.getTopCenter(G,N,V);break;case s.TOP_RIGHT:case s.RIGHT_TOP:X=this.bodyBounds.getTopRight(G,N,V);break;case s.LEFT_CENTER:X=this.bodyBounds.getLeftCenter(G,N,V);break;case s.CENTER:X=this.bodyBounds.getCenter(G,N,V);break;case s.RIGHT_CENTER:X=this.bodyBounds.getRightCenter(G,N,V);break;case s.LEFT_BOTTOM:case s.BOTTOM_LEFT:X=this.bodyBounds.getBottomLeft(G,N,V);break;case s.BOTTOM_CENTER:X=this.bodyBounds.getBottomCenter(G,N,V);break;case s.BOTTOM_RIGHT:case s.RIGHT_BOTTOM:X=this.bodyBounds.getBottomRight(G,N,V);break}return X&&o.setPosition(G,X),this},shutdown:function(){var G=this.systems.events;this.world&&(G.off(Y.UPDATE,this.world.update,this.world),G.off(Y.POST_UPDATE,this.world.postUpdate,this.world)),G.off(Y.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(Y.START,this.start,this),this.scene=null,this.systems=null}});F.register("MatterPhysics",B,"matterPhysics"),t.exports=B},function(t,f,e){var s=e(594),l={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Body.create",function(){l.Body.init(this)}),n.before("Engine.update",function(o){l.Engine.update(o)})},Body:{init:function(n){n.plugin.attractors=n.plugin.attractors||[]}},Engine:{update:function(n){for(var o=s.Composite.allBodies(n.world),h=0;h<o.length;h++){var r=o[h],a=r.plugin.attractors;if(a&&a.length>0)for(var v=0;v<o.length;v++){var u=o[v];if(h!==v)for(var d=0;d<a.length;d++){var c=a[d],g=c;s.Common.isFunction(c)&&(g=c(r,u)),g&&s.Body.applyForce(u,u.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(n,o){var h=s.Vector.sub(o.position,n.position),r=s.Vector.magnitudeSquared(h)||1e-4,a=s.Vector.normalise(h),v=-l.Attractors.gravityConstant*(n.mass*o.mass/r),u=s.Vector.mult(a,v);s.Body.applyForce(n,n.position,s.Vector.neg(u)),s.Body.applyForce(o,o.position,u)}}};t.exports=l},function(t,f){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Engine.create",function(){s.Events.on(this,"collisionStart",function(l){l.pairs.map(function(n){var o=n.bodyA,h=n.bodyB;o.gameObject&&o.gameObject.emit("collide",o,h,n),h.gameObject&&h.gameObject.emit("collide",h,o,n),s.Events.trigger(o,"onCollide",{pair:n}),s.Events.trigger(h,"onCollide",{pair:n}),o.onCollideCallback&&o.onCollideCallback(n),h.onCollideCallback&&h.onCollideCallback(n),o.onCollideWith[h.id]&&o.onCollideWith[h.id](h,n),h.onCollideWith[o.id]&&h.onCollideWith[o.id](o,n)})}),s.Events.on(this,"collisionActive",function(l){l.pairs.map(function(n){var o=n.bodyA,h=n.bodyB;o.gameObject&&o.gameObject.emit("collideActive",o,h,n),h.gameObject&&h.gameObject.emit("collideActive",h,o,n),s.Events.trigger(o,"onCollideActive",{pair:n}),s.Events.trigger(h,"onCollideActive",{pair:n}),o.onCollideActiveCallback&&o.onCollideActiveCallback(n),h.onCollideActiveCallback&&h.onCollideActiveCallback(n)})}),s.Events.on(this,"collisionEnd",function(l){l.pairs.map(function(n){var o=n.bodyA,h=n.bodyB;o.gameObject&&o.gameObject.emit("collideEnd",o,h,n),h.gameObject&&h.gameObject.emit("collideEnd",h,o,n),s.Events.trigger(o,"onCollideEnd",{pair:n}),s.Events.trigger(h,"onCollideEnd",{pair:n}),o.onCollideEndCallback&&o.onCollideEndCallback(n),h.onCollideEndCallback&&h.onCollideEndCallback(n)})})})}};t.exports=e},function(t,f,e){var s=e(594),l={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Engine.update",function(){l.Engine.update(this)})},Engine:{update:function(n){for(var o=n.world,h=s.Composite.allBodies(o),r=s.Composite.allComposites(o),a=0;a<h.length;a+=1){var v=h[a];v.plugin.wrap&&l.Body.wrap(v,v.plugin.wrap)}for(a=0;a<r.length;a+=1){var u=r[a];u.plugin.wrap&&l.Composite.wrap(u,u.plugin.wrap)}}},Bounds:{wrap:function(n,o){var h=null,r=null;if(typeof o.min.x!="undefined"&&typeof o.max.x!="undefined"&&(n.min.x>o.max.x?h=o.min.x-n.max.x:n.max.x<o.min.x&&(h=o.max.x-n.min.x)),typeof o.min.y!="undefined"&&typeof o.max.y!="undefined"&&(n.min.y>o.max.y?r=o.min.y-n.max.y:n.max.y<o.min.y&&(r=o.max.y-n.min.y)),h!==null||r!==null)return{x:h||0,y:r||0}}},Body:{wrap:function(n,o){var h=l.Bounds.wrap(n.bounds,o);return h&&s.Body.translate(n,h),h}},Composite:{bounds:function(n){for(var o=s.Composite.allBodies(n),h=[],r=0;r<o.length;r+=1){var a=o[r];h.push(a.bounds.min,a.bounds.max)}return s.Bounds.create(h)},wrap:function(n,o){var h=l.Bounds.wrap(l.Composite.bounds(n),o);return h&&s.Composite.translate(n,h),h}}};t.exports=l},function(t,f,e){(function(s){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var l=e(33),n=e(17),o={Actions:e(275),Animations:e(723),BlendModes:e(35),Cache:e(735),Cameras:e(738),Core:e(806),Class:e(0),Create:e(888),Curves:e(894),Data:e(896),Display:e(898),DOM:e(917),Events:e(918),Game:e(920),GameObjects:e(1011),Geom:e(483),Input:e(1308),Loader:e(1338),Math:e(193),Physics:e(1493),Plugins:e(1403),Renderer:e(1405),Scale:e(1412),ScaleModes:e(168),Scene:e(418),Scenes:e(1413),Structs:e(1415),Textures:e(1416),Tilemaps:e(1418),Time:e(1461),Tweens:e(1463),Utils:e(1481)};o.Sound=e(1492),o=n(!1,o,l),t.exports=o,s.Phaser=o}).call(this,e(600))}])})})(Ds);var Ha=(p=>(p[p.FRANSEN=0]="FRANSEN",p[p.PROPOSE=1]="PROPOSE",p))(Ha||{});let $a=0;class yt{static get DURATION(){return 4}static get SAFE_DISTANCE(){return 46}static get DELTA_T(){return 10}static secondsToHMS(i){var t=Math.floor(i%86400/3600),f=Math.floor(i%3600/60),e=Math.floor(i%60),s=t>=10?t:"0"+t,l=f>=10?f:"0"+f,n=e>=10?e:"0"+e;return s+":"+l+":"+n}static changeMode(i){$a=i}static validDestination(i,t,f,e){if((t==14||t==13)&&(i>=0&&i<=5||i>=45&&i<=50))return!1;var s=Math.sqrt((i-f)**2+(t-e)**2);return!(s*32<10)}static minDistance(i,t){let f=1/0;return t.forEach(e=>{let s=Math.sqrt((e.x-i.x)**2+(e.y-i.y)**2);f>s&&(f=s)}),f}static numberOfEdges(i,t,f){let e=0;for(let s=0;s<i;s++)for(let l=0;l<t;l++)e+=f[s][l].nodeE!=null?1:0,e+=f[s][l].nodeS!=null?1:0,e+=f[s][l].nodeW!=null?1:0,e+=f[s][l].nodeN!=null?1:0,e+=f[s][l].nodeVE!=null?1:0,e+=f[s][l].nodeVS!=null?1:0,e+=f[s][l].nodeVW!=null?1:0,e+=f[s][l].nodeVN!=null?1:0;return e}}$(yt,"getLateness",i=>5*i);const Yn=class extends Ds.exports.Physics.Arcade.Sprite{constructor(t,f,e,s,l){super(t,f,e,s,l);$(this,"agvID");$(this,"expectedTime",0);$(this,"collidedActors");t.add.existing(this),t.physics.add.existing(this),this.getBody().setCollideWorldBounds(!0),s=="agv"?(Yn._id++,this.agvID=Yn._id):this.agvID=-1,this.collidedActors=new Set}getBody(){return this.body}getAgvID(){return this.agvID}getExpectedTime(){return this.expectedTime}estimateArrivalTime(t,f,e,s){this.expectedTime=this.getSnene().sec+Math.floor(Math.sqrt((e-t)**2+(s-f)**2)*.085)}writeDeadline(t){if(this.agvID!=-1){var f="";t.text.length>0&&(f=`
`),t.text="DES_"+this.agvID+": "+yt.secondsToHMS(this.expectedTime)+" \xB1 "+yt.DURATION+f+t.text}}eraseDeadline(t){if(this.agvID!=-1){var f="";t.text.length>0&&(f=`
`);let e="DES_"+this.agvID+": "+yt.secondsToHMS(this.expectedTime)+" \xB1 "+yt.DURATION+f;t.text=t.text.replace(e,"")}}freeze(t){this.collidedActors.add(t)}getSnene(){return this.scene}};let ts=Yn;$(ts,"_id",0);class es extends Ds.exports.GameObjects.Text{constructor(i,t,f,e,s="16px",l){super(i,t,f,e,{fontSize:s,color:l||"#fff",stroke:"#000",strokeThickness:4}),this.setOrigin(0,0),this.setDepth(1),i.add.existing(this)}}const Ve=Object.create(null);Ve.open="0";Ve.close="1";Ve.ping="2";Ve.pong="3";Ve.message="4";Ve.upgrade="5";Ve.noop="6";const An=Object.create(null);Object.keys(Ve).forEach(p=>{An[Ve[p]]=p});const Cc={type:"error",data:"parser error"},Ec=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Pc=typeof ArrayBuffer=="function",Mc=p=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(p):p&&p.buffer instanceof ArrayBuffer,uf=({type:p,data:i},t,f)=>Ec&&i instanceof Blob?t?f(i):fh(i,f):Pc&&(i instanceof ArrayBuffer||Mc(i))?t?f(i):fh(new Blob([i]),f):f(Ve[p]+(i||"")),fh=(p,i)=>{const t=new FileReader;return t.onload=function(){const f=t.result.split(",")[1];i("b"+f)},t.readAsDataURL(p)},dh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ms=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let p=0;p<dh.length;p++)Ms[dh.charCodeAt(p)]=p;const Ac=p=>{let i=p.length*.75,t=p.length,f,e=0,s,l,n,o;p[p.length-1]==="="&&(i--,p[p.length-2]==="="&&i--);const h=new ArrayBuffer(i),r=new Uint8Array(h);for(f=0;f<t;f+=4)s=Ms[p.charCodeAt(f)],l=Ms[p.charCodeAt(f+1)],n=Ms[p.charCodeAt(f+2)],o=Ms[p.charCodeAt(f+3)],r[e++]=s<<2|l>>4,r[e++]=(l&15)<<4|n>>2,r[e++]=(n&3)<<6|o&63;return h},Rc=typeof ArrayBuffer=="function",ff=(p,i)=>{if(typeof p!="string")return{type:"message",data:df(p,i)};const t=p.charAt(0);return t==="b"?{type:"message",data:Oc(p.substring(1),i)}:An[t]?p.length>1?{type:An[t],data:p.substring(1)}:{type:An[t]}:Cc},Oc=(p,i)=>{if(Rc){const t=Ac(p);return df(t,i)}else return{base64:!0,data:p}},df=(p,i)=>{switch(i){case"blob":return p instanceof ArrayBuffer?new Blob([p]):p;case"arraybuffer":default:return p}},vf=String.fromCharCode(30),Lc=(p,i)=>{const t=p.length,f=new Array(t);let e=0;p.forEach((s,l)=>{uf(s,!1,n=>{f[l]=n,++e===t&&i(f.join(vf))})})},Fc=(p,i)=>{const t=p.split(vf),f=[];for(let e=0;e<t.length;e++){const s=ff(t[e],i);if(f.push(s),s.type==="error")break}return f},cf=4;function Rt(p){if(p)return Ic(p)}function Ic(p){for(var i in Rt.prototype)p[i]=Rt.prototype[i];return p}Rt.prototype.on=Rt.prototype.addEventListener=function(p,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+p]=this._callbacks["$"+p]||[]).push(i),this};Rt.prototype.once=function(p,i){function t(){this.off(p,t),i.apply(this,arguments)}return t.fn=i,this.on(p,t),this};Rt.prototype.off=Rt.prototype.removeListener=Rt.prototype.removeAllListeners=Rt.prototype.removeEventListener=function(p,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+p];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+p],this;for(var f,e=0;e<t.length;e++)if(f=t[e],f===i||f.fn===i){t.splice(e,1);break}return t.length===0&&delete this._callbacks["$"+p],this};Rt.prototype.emit=function(p){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),t=this._callbacks["$"+p],f=1;f<arguments.length;f++)i[f-1]=arguments[f];if(t){t=t.slice(0);for(var f=0,e=t.length;f<e;++f)t[f].apply(this,i)}return this};Rt.prototype.emitReserved=Rt.prototype.emit;Rt.prototype.listeners=function(p){return this._callbacks=this._callbacks||{},this._callbacks["$"+p]||[]};Rt.prototype.hasListeners=function(p){return!!this.listeners(p).length};const vi=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function pf(p,...i){return i.reduce((t,f)=>(p.hasOwnProperty(f)&&(t[f]=p[f]),t),{})}const Dc=setTimeout,Bc=clearTimeout;function Un(p,i){i.useNativeTimers?(p.setTimeoutFn=Dc.bind(vi),p.clearTimeoutFn=Bc.bind(vi)):(p.setTimeoutFn=setTimeout.bind(vi),p.clearTimeoutFn=clearTimeout.bind(vi))}const wc=1.33;function Gc(p){return typeof p=="string"?Nc(p):Math.ceil((p.byteLength||p.size)*wc)}function Nc(p){let i=0,t=0;for(let f=0,e=p.length;f<e;f++)i=p.charCodeAt(f),i<128?t+=1:i<2048?t+=2:i<55296||i>=57344?t+=3:(f++,t+=4);return t}class bc extends Error{constructor(i,t,f){super(i),this.description=t,this.context=f,this.type="TransportError"}}class gf extends Rt{constructor(i){super(),this.writable=!1,Un(this,i),this.opts=i,this.query=i.query,this.readyState="",this.socket=i.socket}onError(i,t,f){return super.emitReserved("error",new bc(i,t,f)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(i){this.readyState==="open"&&this.write(i)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(i){const t=ff(i,this.socket.binaryType);this.onPacket(t)}onPacket(i){super.emitReserved("packet",i)}onClose(i){this.readyState="closed",super.emitReserved("close",i)}}const mf="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Sa=64,Vc={};let vh=0,Js=0,ch;function ph(p){let i="";do i=mf[p%Sa]+i,p=Math.floor(p/Sa);while(p>0);return i}function xf(){const p=ph(+new Date);return p!==ch?(vh=0,ch=p):p+"."+ph(vh++)}for(;Js<Sa;Js++)Vc[mf[Js]]=Js;function yf(p){let i="";for(let t in p)p.hasOwnProperty(t)&&(i.length&&(i+="&"),i+=encodeURIComponent(t)+"="+encodeURIComponent(p[t]));return i}function zc(p){let i={},t=p.split("&");for(let f=0,e=t.length;f<e;f++){let s=t[f].split("=");i[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return i}let Tf=!1;try{Tf=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{}const Yc=Tf;function Sf(p){const i=p.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!i||Yc))return new XMLHttpRequest}catch{}if(!i)try{return new vi[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Uc(){}const Xc=function(){return new Sf({xdomain:!1}).responseType!=null}();class Wc extends gf{constructor(i){if(super(i),this.polling=!1,typeof location!="undefined"){const f=location.protocol==="https:";let e=location.port;e||(e=f?"443":"80"),this.xd=typeof location!="undefined"&&i.hostname!==location.hostname||e!==i.port,this.xs=i.secure!==f}const t=i&&i.forceBase64;this.supportsBinary=Xc&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(i){this.readyState="pausing";const t=()=>{this.readyState="paused",i()};if(this.polling||!this.writable){let f=0;this.polling&&(f++,this.once("pollComplete",function(){--f||t()})),this.writable||(f++,this.once("drain",function(){--f||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(i){const t=f=>{if(this.readyState==="opening"&&f.type==="open"&&this.onOpen(),f.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(f)};Fc(i,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const i=()=>{this.write([{type:"close"}])};this.readyState==="open"?i():this.once("open",i)}write(i){this.writable=!1,Lc(i,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let i=this.query||{};const t=this.opts.secure?"https":"http";let f="";this.opts.timestampRequests!==!1&&(i[this.opts.timestampParam]=xf()),!this.supportsBinary&&!i.sid&&(i.b64=1),this.opts.port&&(t==="https"&&Number(this.opts.port)!==443||t==="http"&&Number(this.opts.port)!==80)&&(f=":"+this.opts.port);const e=yf(i),s=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+f+this.opts.path+(e.length?"?"+e:"")}request(i={}){return Object.assign(i,{xd:this.xd,xs:this.xs},this.opts),new Ne(this.uri(),i)}doWrite(i,t){const f=this.request({method:"POST",data:i});f.on("success",t),f.on("error",(e,s)=>{this.onError("xhr post error",e,s)})}doPoll(){const i=this.request();i.on("data",this.onData.bind(this)),i.on("error",(t,f)=>{this.onError("xhr poll error",t,f)}),this.pollXhr=i}}class Ne extends Rt{constructor(i,t){super(),Un(this,t),this.opts=t,this.method=t.method||"GET",this.uri=i,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.create()}create(){const i=pf(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");i.xdomain=!!this.opts.xd,i.xscheme=!!this.opts.xs;const t=this.xhr=new Sf(i);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let f in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(f)&&t.setRequestHeader(f,this.opts.extraHeaders[f])}}catch{}if(this.method==="POST")try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{t.readyState===4&&(t.status===200||t.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof t.status=="number"?t.status:0)},0))},t.send(this.data)}catch(f){this.setTimeoutFn(()=>{this.onError(f)},0);return}typeof document!="undefined"&&(this.index=Ne.requestsCount++,Ne.requests[this.index]=this)}onError(i){this.emitReserved("error",i,this.xhr),this.cleanup(!0)}cleanup(i){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=Uc,i)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete Ne.requests[this.index],this.xhr=null}}onLoad(){const i=this.xhr.responseText;i!==null&&(this.emitReserved("data",i),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Ne.requestsCount=0;Ne.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",gh);else if(typeof addEventListener=="function"){const p="onpagehide"in vi?"pagehide":"unload";addEventListener(p,gh,!1)}}function gh(){for(let p in Ne.requests)Ne.requests.hasOwnProperty(p)&&Ne.requests[p].abort()}const Hc=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?i=>Promise.resolve().then(i):(i,t)=>t(i,0))(),Zs=vi.WebSocket||vi.MozWebSocket,mh=!0,$c="arraybuffer",xh=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Kc extends gf{constructor(i){super(i),this.supportsBinary=!i.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const i=this.uri(),t=this.opts.protocols,f=xh?{}:pf(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(f.headers=this.opts.extraHeaders);try{this.ws=mh&&!xh?t?new Zs(i,t):new Zs(i):new Zs(i,t,f)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType||$c,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=i=>this.onClose({description:"websocket connection closed",context:i}),this.ws.onmessage=i=>this.onData(i.data),this.ws.onerror=i=>this.onError("websocket error",i)}write(i){this.writable=!1;for(let t=0;t<i.length;t++){const f=i[t],e=t===i.length-1;uf(f,this.supportsBinary,s=>{const l={};try{mh&&this.ws.send(s)}catch{}e&&Hc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let i=this.query||{};const t=this.opts.secure?"wss":"ws";let f="";this.opts.port&&(t==="wss"&&Number(this.opts.port)!==443||t==="ws"&&Number(this.opts.port)!==80)&&(f=":"+this.opts.port),this.opts.timestampRequests&&(i[this.opts.timestampParam]=xf()),this.supportsBinary||(i.b64=1);const e=yf(i),s=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+f+this.opts.path+(e.length?"?"+e:"")}check(){return!!Zs}}const Jc={websocket:Kc,polling:Wc},Zc=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Qc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ca(p){const i=p,t=p.indexOf("["),f=p.indexOf("]");t!=-1&&f!=-1&&(p=p.substring(0,t)+p.substring(t,f).replace(/:/g,";")+p.substring(f,p.length));let e=Zc.exec(p||""),s={},l=14;for(;l--;)s[Qc[l]]=e[l]||"";return t!=-1&&f!=-1&&(s.source=i,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=kc(s,s.path),s.queryKey=jc(s,s.query),s}function kc(p,i){const t=/\/{2,9}/g,f=i.replace(t,"/").split("/");return(i.substr(0,1)=="/"||i.length===0)&&f.splice(0,1),i.substr(i.length-1,1)=="/"&&f.splice(f.length-1,1),f}function jc(p,i){const t={};return i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(f,e,s){e&&(t[e]=s)}),t}class ui extends Rt{constructor(i,t={}){super(),i&&typeof i=="object"&&(t=i,i=null),i?(i=Ca(i),t.hostname=i.host,t.secure=i.protocol==="https"||i.protocol==="wss",t.port=i.port,i.query&&(t.query=i.query)):t.host&&(t.hostname=Ca(t.host).host),Un(this,t),this.secure=t.secure!=null?t.secure:typeof location!="undefined"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=t.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=zc(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(i){const t=Object.assign({},this.opts.query);t.EIO=cf,t.transport=i,this.id&&(t.sid=this.id);const f=Object.assign({},this.opts.transportOptions[i],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Jc[i](f)}open(){let i;if(this.opts.rememberUpgrade&&ui.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)i="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else i=this.transports[0];this.readyState="opening";try{i=this.createTransport(i)}catch{this.transports.shift(),this.open();return}i.open(),this.setTransport(i)}setTransport(i){this.transport&&this.transport.removeAllListeners(),this.transport=i,i.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(i){let t=this.createTransport(i),f=!1;ui.priorWebsocketSuccess=!1;const e=()=>{f||(t.send([{type:"ping",data:"probe"}]),t.once("packet",a=>{if(!f)if(a.type==="pong"&&a.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ui.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{f||this.readyState!=="closed"&&(r(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=t.name,this.emitReserved("upgradeError",v)}}))};function s(){f||(f=!0,r(),t.close(),t=null)}const l=a=>{const v=new Error("probe error: "+a);v.transport=t.name,s(),this.emitReserved("upgradeError",v)};function n(){l("transport closed")}function o(){l("socket closed")}function h(a){t&&a.name!==t.name&&s()}const r=()=>{t.removeListener("open",e),t.removeListener("error",l),t.removeListener("close",n),this.off("close",o),this.off("upgrading",h)};t.once("open",e),t.once("error",l),t.once("close",n),this.once("close",o),this.once("upgrading",h),t.open()}onOpen(){if(this.readyState="open",ui.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let i=0;const t=this.upgrades.length;for(;i<t;i++)this.probe(this.upgrades[i])}}onPacket(i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",i),this.emitReserved("heartbeat"),i.type){case"open":this.onHandshake(JSON.parse(i.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=i.data,this.onError(t);break;case"message":this.emitReserved("data",i.data),this.emitReserved("message",i.data);break}}onHandshake(i){this.emitReserved("handshake",i),this.id=i.sid,this.transport.query.sid=i.sid,this.upgrades=this.filterUpgrades(i.upgrades),this.pingInterval=i.pingInterval,this.pingTimeout=i.pingTimeout,this.maxPayload=i.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const i=this.getWritablePackets();this.transport.send(i),this.prevBufferLen=i.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let f=0;f<this.writeBuffer.length;f++){const e=this.writeBuffer[f].data;if(e&&(t+=Gc(e)),f>0&&t>this.maxPayload)return this.writeBuffer.slice(0,f);t+=2}return this.writeBuffer}write(i,t,f){return this.sendPacket("message",i,t,f),this}send(i,t,f){return this.sendPacket("message",i,t,f),this}sendPacket(i,t,f,e){if(typeof t=="function"&&(e=t,t=void 0),typeof f=="function"&&(e=f,f=null),this.readyState==="closing"||this.readyState==="closed")return;f=f||{},f.compress=f.compress!==!1;const s={type:i,data:t,options:f};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),e&&this.once("flush",e),this.flush()}close(){const i=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),i()},f=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?f():i()}):this.upgrading?f():i()),this}onError(i){ui.priorWebsocketSuccess=!1,this.emitReserved("error",i),this.onClose("transport error",i)}onClose(i,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",i,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(i){const t=[];let f=0;const e=i.length;for(;f<e;f++)~this.transports.indexOf(i[f])&&t.push(i[f]);return t}}ui.protocol=cf;function qc(p,i="",t){let f=p;t=t||typeof location!="undefined"&&location,p==null&&(p=t.protocol+"//"+t.host),typeof p=="string"&&(p.charAt(0)==="/"&&(p.charAt(1)==="/"?p=t.protocol+p:p=t.host+p),/^(https?|wss?):\/\//.test(p)||(typeof t!="undefined"?p=t.protocol+"//"+p:p="https://"+p),f=Ca(p)),f.port||(/^(http|ws)$/.test(f.protocol)?f.port="80":/^(http|ws)s$/.test(f.protocol)&&(f.port="443")),f.path=f.path||"/";const s=f.host.indexOf(":")!==-1?"["+f.host+"]":f.host;return f.id=f.protocol+"://"+s+":"+f.port+i,f.href=f.protocol+"://"+s+(t&&t.port===f.port?"":":"+f.port),f}const _c=typeof ArrayBuffer=="function",tp=p=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(p):p.buffer instanceof ArrayBuffer,Cf=Object.prototype.toString,ep=typeof Blob=="function"||typeof Blob!="undefined"&&Cf.call(Blob)==="[object BlobConstructor]",ip=typeof File=="function"||typeof File!="undefined"&&Cf.call(File)==="[object FileConstructor]";function Ka(p){return _c&&(p instanceof ArrayBuffer||tp(p))||ep&&p instanceof Blob||ip&&p instanceof File}function Rn(p,i){if(!p||typeof p!="object")return!1;if(Array.isArray(p)){for(let t=0,f=p.length;t<f;t++)if(Rn(p[t]))return!0;return!1}if(Ka(p))return!0;if(p.toJSON&&typeof p.toJSON=="function"&&arguments.length===1)return Rn(p.toJSON(),!0);for(const t in p)if(Object.prototype.hasOwnProperty.call(p,t)&&Rn(p[t]))return!0;return!1}function sp(p){const i=[],t=p.data,f=p;return f.data=Ea(t,i),f.attachments=i.length,{packet:f,buffers:i}}function Ea(p,i){if(!p)return p;if(Ka(p)){const t={_placeholder:!0,num:i.length};return i.push(p),t}else if(Array.isArray(p)){const t=new Array(p.length);for(let f=0;f<p.length;f++)t[f]=Ea(p[f],i);return t}else if(typeof p=="object"&&!(p instanceof Date)){const t={};for(const f in p)Object.prototype.hasOwnProperty.call(p,f)&&(t[f]=Ea(p[f],i));return t}return p}function np(p,i){return p.data=Pa(p.data,i),p.attachments=void 0,p}function Pa(p,i){if(!p)return p;if(p&&p._placeholder)return i[p.num];if(Array.isArray(p))for(let t=0;t<p.length;t++)p[t]=Pa(p[t],i);else if(typeof p=="object")for(const t in p)Object.prototype.hasOwnProperty.call(p,t)&&(p[t]=Pa(p[t],i));return p}const rp=5;var ft;(function(p){p[p.CONNECT=0]="CONNECT",p[p.DISCONNECT=1]="DISCONNECT",p[p.EVENT=2]="EVENT",p[p.ACK=3]="ACK",p[p.CONNECT_ERROR=4]="CONNECT_ERROR",p[p.BINARY_EVENT=5]="BINARY_EVENT",p[p.BINARY_ACK=6]="BINARY_ACK"})(ft||(ft={}));class ap{constructor(i){this.replacer=i}encode(i){return(i.type===ft.EVENT||i.type===ft.ACK)&&Rn(i)?(i.type=i.type===ft.EVENT?ft.BINARY_EVENT:ft.BINARY_ACK,this.encodeAsBinary(i)):[this.encodeAsString(i)]}encodeAsString(i){let t=""+i.type;return(i.type===ft.BINARY_EVENT||i.type===ft.BINARY_ACK)&&(t+=i.attachments+"-"),i.nsp&&i.nsp!=="/"&&(t+=i.nsp+","),i.id!=null&&(t+=i.id),i.data!=null&&(t+=JSON.stringify(i.data,this.replacer)),t}encodeAsBinary(i){const t=sp(i),f=this.encodeAsString(t.packet),e=t.buffers;return e.unshift(f),e}}class Ja extends Rt{constructor(i){super(),this.reviver=i}add(i){let t;if(typeof i=="string")t=this.decodeString(i),t.type===ft.BINARY_EVENT||t.type===ft.BINARY_ACK?(this.reconstructor=new op(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t);else if(Ka(i)||i.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(i),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+i)}decodeString(i){let t=0;const f={type:Number(i.charAt(0))};if(ft[f.type]===void 0)throw new Error("unknown packet type "+f.type);if(f.type===ft.BINARY_EVENT||f.type===ft.BINARY_ACK){const s=t+1;for(;i.charAt(++t)!=="-"&&t!=i.length;);const l=i.substring(s,t);if(l!=Number(l)||i.charAt(t)!=="-")throw new Error("Illegal attachments");f.attachments=Number(l)}if(i.charAt(t+1)==="/"){const s=t+1;for(;++t&&!(i.charAt(t)===","||t===i.length););f.nsp=i.substring(s,t)}else f.nsp="/";const e=i.charAt(t+1);if(e!==""&&Number(e)==e){const s=t+1;for(;++t;){const l=i.charAt(t);if(l==null||Number(l)!=l){--t;break}if(t===i.length)break}f.id=Number(i.substring(s,t+1))}if(i.charAt(++t)){const s=this.tryParse(i.substr(t));if(Ja.isPayloadValid(f.type,s))f.data=s;else throw new Error("invalid payload")}return f}tryParse(i){try{return JSON.parse(i,this.reviver)}catch{return!1}}static isPayloadValid(i,t){switch(i){case ft.CONNECT:return typeof t=="object";case ft.DISCONNECT:return t===void 0;case ft.CONNECT_ERROR:return typeof t=="string"||typeof t=="object";case ft.EVENT:case ft.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case ft.ACK:case ft.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class op{constructor(i){this.packet=i,this.buffers=[],this.reconPack=i}takeBinaryData(i){if(this.buffers.push(i),this.buffers.length===this.reconPack.attachments){const t=np(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var hp=Object.freeze(Object.defineProperty({__proto__:null,protocol:rp,get PacketType(){return ft},Encoder:ap,Decoder:Ja},Symbol.toStringTag,{value:"Module"}));function Re(p,i,t){return p.on(i,t),function(){p.off(i,t)}}const lp=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ef extends Rt{constructor(i,t,f){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=i,this.nsp=t,f&&f.auth&&(this.auth=f.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const i=this.io;this.subs=[Re(i,"open",this.onopen.bind(this)),Re(i,"packet",this.onpacket.bind(this)),Re(i,"error",this.onerror.bind(this)),Re(i,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...i){return i.unshift("message"),this.emit.apply(this,i),this}emit(i,...t){if(lp.hasOwnProperty(i))throw new Error('"'+i+'" is a reserved event name');t.unshift(i);const f={type:ft.EVENT,data:t};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const l=this.ids++,n=t.pop();this._registerAckCallback(l,n),f.id=l}const e=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!e||!this.connected)||(this.connected?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(i,t){const f=this.flags.timeout;if(f===void 0){this.acks[i]=t;return}const e=this.io.setTimeoutFn(()=>{delete this.acks[i];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===i&&this.sendBuffer.splice(s,1);t.call(this,new Error("operation has timed out"))},f);this.acks[i]=(...s)=>{this.io.clearTimeoutFn(e),t.apply(this,[null,...s])}}packet(i){i.nsp=this.nsp,this.io._packet(i)}onopen(){typeof this.auth=="function"?this.auth(i=>{this.packet({type:ft.CONNECT,data:i})}):this.packet({type:ft.CONNECT,data:this.auth})}onerror(i){this.connected||this.emitReserved("connect_error",i)}onclose(i,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",i,t)}onpacket(i){if(i.nsp===this.nsp)switch(i.type){case ft.CONNECT:if(i.data&&i.data.sid){const e=i.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ft.EVENT:case ft.BINARY_EVENT:this.onevent(i);break;case ft.ACK:case ft.BINARY_ACK:this.onack(i);break;case ft.DISCONNECT:this.ondisconnect();break;case ft.CONNECT_ERROR:this.destroy();const f=new Error(i.data.message);f.data=i.data.data,this.emitReserved("connect_error",f);break}}onevent(i){const t=i.data||[];i.id!=null&&t.push(this.ack(i.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(i){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const f of t)f.apply(this,i)}super.emit.apply(this,i)}ack(i){const t=this;let f=!1;return function(...e){f||(f=!0,t.packet({type:ft.ACK,id:i,data:e}))}}onack(i){const t=this.acks[i.id];typeof t=="function"&&(t.apply(this,i.data),delete this.acks[i.id])}onconnect(i){this.id=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(i=>this.emitEvent(i)),this.receiveBuffer=[],this.sendBuffer.forEach(i=>{this.notifyOutgoingListeners(i),this.packet(i)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(i=>i()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ft.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(i){return this.flags.compress=i,this}get volatile(){return this.flags.volatile=!0,this}timeout(i){return this.flags.timeout=i,this}onAny(i){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(i),this}prependAny(i){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(i),this}offAny(i){if(!this._anyListeners)return this;if(i){const t=this._anyListeners;for(let f=0;f<t.length;f++)if(i===t[f])return t.splice(f,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(i){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(i),this}prependAnyOutgoing(i){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(i),this}offAnyOutgoing(i){if(!this._anyOutgoingListeners)return this;if(i){const t=this._anyOutgoingListeners;for(let f=0;f<t.length;f++)if(i===t[f])return t.splice(f,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(i){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const f of t)f.apply(this,i.data)}}}function ss(p){p=p||{},this.ms=p.min||100,this.max=p.max||1e4,this.factor=p.factor||2,this.jitter=p.jitter>0&&p.jitter<=1?p.jitter:0,this.attempts=0}ss.prototype.duration=function(){var p=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var i=Math.random(),t=Math.floor(i*this.jitter*p);p=(Math.floor(i*10)&1)==0?p-t:p+t}return Math.min(p,this.max)|0};ss.prototype.reset=function(){this.attempts=0};ss.prototype.setMin=function(p){this.ms=p};ss.prototype.setMax=function(p){this.max=p};ss.prototype.setJitter=function(p){this.jitter=p};class Ma extends Rt{constructor(i,t){var f;super(),this.nsps={},this.subs=[],i&&typeof i=="object"&&(t=i,i=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Un(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((f=t.randomizationFactor)!==null&&f!==void 0?f:.5),this.backoff=new ss({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=i;const e=t.parser||hp;this.encoder=new e.Encoder,this.decoder=new e.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(i){return arguments.length?(this._reconnection=!!i,this):this._reconnection}reconnectionAttempts(i){return i===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=i,this)}reconnectionDelay(i){var t;return i===void 0?this._reconnectionDelay:(this._reconnectionDelay=i,(t=this.backoff)===null||t===void 0||t.setMin(i),this)}randomizationFactor(i){var t;return i===void 0?this._randomizationFactor:(this._randomizationFactor=i,(t=this.backoff)===null||t===void 0||t.setJitter(i),this)}reconnectionDelayMax(i){var t;return i===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=i,(t=this.backoff)===null||t===void 0||t.setMax(i),this)}timeout(i){return arguments.length?(this._timeout=i,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(i){if(~this._readyState.indexOf("open"))return this;this.engine=new ui(this.uri,this.opts);const t=this.engine,f=this;this._readyState="opening",this.skipReconnect=!1;const e=Re(t,"open",function(){f.onopen(),i&&i()}),s=Re(t,"error",l=>{f.cleanup(),f._readyState="closed",this.emitReserved("error",l),i?i(l):f.maybeReconnectOnOpen()});if(this._timeout!==!1){const l=this._timeout;l===0&&e();const n=this.setTimeoutFn(()=>{e(),t.close(),t.emit("error",new Error("timeout"))},l);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}return this.subs.push(e),this.subs.push(s),this}connect(i){return this.open(i)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const i=this.engine;this.subs.push(Re(i,"ping",this.onping.bind(this)),Re(i,"data",this.ondata.bind(this)),Re(i,"error",this.onerror.bind(this)),Re(i,"close",this.onclose.bind(this)),Re(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(i){this.decoder.add(i)}ondecoded(i){this.emitReserved("packet",i)}onerror(i){this.emitReserved("error",i)}socket(i,t){let f=this.nsps[i];return f||(f=new Ef(this,i,t),this.nsps[i]=f),f}_destroy(i){const t=Object.keys(this.nsps);for(const f of t)if(this.nsps[f].active)return;this._close()}_packet(i){const t=this.encoder.encode(i);for(let f=0;f<t.length;f++)this.engine.write(t[f],i.options)}cleanup(){this.subs.forEach(i=>i()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(i,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",i,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const i=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const f=this.setTimeoutFn(()=>{i.skipReconnect||(this.emitReserved("reconnect_attempt",i.backoff.attempts),!i.skipReconnect&&i.open(e=>{e?(i._reconnecting=!1,i.reconnect(),this.emitReserved("reconnect_error",e)):i.onreconnect()}))},t);this.opts.autoUnref&&f.unref(),this.subs.push(function(){clearTimeout(f)})}}onreconnect(){const i=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",i)}}const hs={};function On(p,i){typeof p=="object"&&(i=p,p=void 0),i=i||{};const t=qc(p,i.path||"/socket.io"),f=t.source,e=t.id,s=t.path,l=hs[e]&&s in hs[e].nsps,n=i.forceNew||i["force new connection"]||i.multiplex===!1||l;let o;return n?o=new Ma(f,i):(hs[e]||(hs[e]=new Ma(f,i)),o=hs[e]),t.query&&!i.query&&(i.query=t.queryKey),o.socket(t.path,i)}Object.assign(On,{Manager:Ma,Socket:Ef,io:On,connect:On});const Vt={newClient:"new-client",updateServerPlayerControl:"update-server-player-control",sendGameObjectToServer:"send-game-object-to-server",deleteAgentOnServer:"delete-agent-on-server",updateGameObjectsOnServer:"update-game-objects-on-server",tellClientMainAgvOverlapped:"tell-client-main-agv-overlapped",tellClientAutoAgvsOverlapped:"tell-client-auto-agvs-overlapped",tellClientLoadedDataFromVadere:"tell-client-loaded-data-from-vadere",userLoadedDataFromVadere:"user-loaded-data-from-vadere",agentRequestNewPath:"agent-request-new-path",sendAgentPathToClient:"send-agent-path-to-client",tellClientAgentsOverlapped:"tell-client-agents-overlapped",onClientLoadData:"on-client-load-data",onClientChangeAgvAlgorithm:"on-client-change-agv-algorithm",onClientSaveData:"on-client-save-data",onChangeMaxAgent:"on-change-max-agent",clientFinish:"client-finish"},up="http://localhost:5000",Bt=On(up);Bt.id;const Za={agv:"AGV",autoAgv:"AUTOAGV",agent:"AGENT"};function Qa(p){Bt.emit(Vt.sendGameObjectToServer,p)}function fp(p,i,t){const f=[{x:p.x,y:p.y}],e=[];i.forEach(l=>{e.push({x:l.x,y:l.y,serverId:l.serverId})});const s=[];t.forEach(l=>{s.push({x:l.x,y:l.y,serverId:l.serverId})}),Bt.emit(Vt.updateGameObjectsOnServer,f,e,s)}const dp=p=>{Bt.emit(Vt.userLoadedDataFromVadere,p)};class vp extends ts{constructor(t,f,e,s,l,n){super(t,f,e,"agv");$(this,"text");$(this,"keyW");$(this,"keyA");$(this,"keyS");$(this,"keyD");$(this,"pathLayer");$(this,"isImmortal",!1);$(this,"isDisable",!1);$(this,"desX");$(this,"desY");$(this,"desText");$(this,"justPressed",0);$(this,"sizeWidth",32);$(this,"sizeHeight",32);$(this,"overlapCount",0);$(this,"startTime",0);$(this,"overing",!1);$(this,"playerControl",{t:!0,l:!0,b:!0,r:!0,keyW:!1,keyA:!1,keyS:!1,keyD:!1,action:"hold"});$(this,"isAgentOverlapsed",!0);$(this,"curTile");this.startTime=Date.now()/1e3,this.desX=s,this.desY=l,this.pathLayer=n,this.curTile={x:f/32,y:e/32},this.text=new es(this.scene,this.x,this.y-this.height*.5,"AGV","16px","#00FF00"),this.desText=new es(this.scene,this.desX,this.desY,"DES","16px","#00FF00"),this.keyW=this.scene.input.keyboard.addKey("W"),this.keyA=this.scene.input.keyboard.addKey("A"),this.keyS=this.scene.input.keyboard.addKey("S"),this.keyD=this.scene.input.keyboard.addKey("D"),this.getBody().setSize(32,32),this.setOrigin(0,0),this.estimateArrivalTime(f,e,s,l),Qa({x:this.x,y:this.y,width:this.sizeWidth,height:this.sizeHeight,serverId:"",gameObjectType:Za.agv,desX:this.desX,desY:this.desY})}getTilesWithin(){return this.pathLayer.getTilesWithinWorldXY(this.x,this.y,31,31)}ToastInvalidMove(){this.scene.rexUI.add.toast({x:800,y:window.innerHeight-55,orientation:0,background:this.scene.rexUI.add.roundRectangle(0,0,2,2,20,16777215),text:this.scene.add.text(0,0,"",{fontSize:"24px",color:"#000000"}),space:{left:10,right:10,top:10,bottom:10},duration:{in:0,hold:500,out:0}}).showMessage("Di chuy\u1EC3n kh\xF4ng h\u1EE3p l\u1EC7!")}ToastOverLay(){this.scene.rexUI.add.toast({x:800,y:window.innerHeight-75,background:this.scene.rexUI.add.roundRectangle(0,0,2,2,20,16777215),text:this.scene.add.text(0,0,"",{fontSize:"24px",color:"#000000"}),space:{left:10,right:10,top:10,bottom:10},duration:{in:0,hold:100,out:0}}).showMessage(this.isAgentOverlapsed?"AGV va ch\u1EA1m v\u1EDBi Agent!":"AGV va ch\u1EA1m v\u1EDBi Auto AGV!")}Toastcomplete(){this.isDisable=!0;const t=Date.now()/1e3;this.scene.rexUI.add.toast({x:800,y:window.innerHeight-35,background:this.scene.rexUI.add.roundRectangle(0,0,2,2,20,16777215),text:this.scene.add.text(0,0,"",{fontSize:"24px",color:"#000000"}),space:{left:10,right:10,top:10,bottom:10},duration:{in:0,hold:1e4,out:0}}).showMessage("B\u1EA1n \u0111\xE3 di chuy\u1EC3n \u0111\u1EBFn \u0111\xEDch. S\u1ED1 l\u1EA7n va ch\u1EA1m: "+this.overlapCount+", Th\u1EDDi gian di chuy\u1EC3n: "+Math.floor(t-this.startTime)+"s")}update(){var n,o,h,r,a,v,u,d,c,g,m,x,y,T;if(this.getBody().setVelocity(0),this.text.setPosition(this.x,this.y-this.height*.5),this.isDisable)return;let t,f,e,s;t=!0,f=!0,e=!0,s=!0,this.playerControl.t=!0,this.playerControl.l=!0,this.playerControl.b=!0,this.playerControl.r=!0;const l=this.getTilesWithin();l.length==1&&(l[0].x!=this.curTile.x||l[0].y!=this.curTile.y)&&(this.getSnene().setBusyGridState(this.curTile.x,this.curTile.y,null),this.curTile={x:l[0].x,y:l[0].y},this.getSnene().setBusyGridState(this.curTile.x,this.curTile.y,"magv"));for(let S=0;S<l.length;S++){const C=this.getSnene().getBusyGridState(l[S].x,l[S].y);if(C&&C!="magv"){const E=C.split("_");if(E[0]=="agent"){const P=this.getSnene().getAgentByID(+E[1]);P?((n=P.nextPos)==null?void 0:n.x)===l[S].x&&((o=P.nextPos)==null?void 0:o.y)===l[S].y?(this.overlapCount++,this.isAgentOverlapsed=!0,this.ToastOverLay()):this.getSnene().setBusyGridState(l[S].x,l[S].y,"magv"):this.getSnene().setBusyGridState(l[S].x,l[S].y,"magv")}else{const P=this.getSnene().getAgvById(+E[1]);if(P){if(P.getExpectedTime()<this.getExpectedTime())return;this.getSnene().setBusyGridState(l[S].x,l[S].y,"magv")}else this.getSnene().setBusyGridState(l[S].x,l[S].y,"magv")}}l[S].properties.direction=="top"&&(e=!1,this.playerControl.b=!1,(h=this.keyS)!=null&&h.isDown&&this.ToastInvalidMove()),l[S].properties.direction=="left"&&(s=!1,this.playerControl.r=!1,(r=this.keyD)!=null&&r.isDown&&this.ToastInvalidMove()),l[S].properties.direction=="bottom"&&(t=!1,this.playerControl.t=!1,(a=this.keyW)!=null&&a.isDown&&this.ToastInvalidMove()),l[S].properties.direction=="right"&&(f=!1,this.playerControl.l=!1,(v=this.keyA)!=null&&v.isDown&&this.ToastInvalidMove())}(u=this.keyW)!=null&&u.isDown&&(this.playerControl.keyW=!0,this.justPressed>500?this.justPressed=2:this.justPressed++,t&&(this.body.velocity.y=-32)),(d=this.keyA)!=null&&d.isDown&&(this.playerControl.keyA=!0,this.justPressed>500?this.justPressed=2:this.justPressed++,f&&(this.body.velocity.x=-32)),(c=this.keyS)!=null&&c.isDown&&(this.playerControl.keyS=!0,this.justPressed>500?this.justPressed=2:this.justPressed++,e&&(this.body.velocity.y=32)),(g=this.keyD)!=null&&g.isDown&&(this.playerControl.keyD=!0,this.justPressed>500?this.justPressed=2:this.justPressed++,s&&(this.body.velocity.x=32)),this.justPressed==1&&(this.playerControl.action="hold",this.emitPlayerControl(this.playerControl)),this.playerControl.keyW&&((m=this.keyW)==null?void 0:m.isUp)&&(this.playerControl.keyW=!1,this.playerControl.action="release",this.justPressed=0,this.emitPlayerControl(this.playerControl)),this.playerControl.keyA&&((x=this.keyA)==null?void 0:x.isUp)&&(this.playerControl.keyA=!1,this.playerControl.action="release",this.justPressed=0,this.emitPlayerControl(this.playerControl)),this.playerControl.keyS&&((y=this.keyS)==null?void 0:y.isUp)&&(this.playerControl.keyS=!1,this.playerControl.action="release",this.justPressed=0,this.emitPlayerControl(this.playerControl)),this.playerControl.keyD&&((T=this.keyD)==null?void 0:T.isUp)&&(this.playerControl.keyD=!1,this.playerControl.action="release",this.justPressed=0,this.emitPlayerControl(this.playerControl))}emitPlayerControl(t){const f={t:t==null?void 0:t.t,l:t==null?void 0:t.l,b:t==null?void 0:t.b,r:t==null?void 0:t.r,keyW:t==null?void 0:t.keyW,keyA:t==null?void 0:t.keyA,keyS:t==null?void 0:t.keyS,keyD:t==null?void 0:t.keyD,action:t==null?void 0:t.action};Bt.emit(Vt.updateServerPlayerControl,f)}handleOverlap(t=!0){t?(this.isAgentOverlapsed=!0,this.overlapCount++):this.isAgentOverlapsed=!1,this.ToastOverLay(),this.isImmortal||(this.isDisable=!0,setTimeout(()=>{this.isImmortal=!0,this.isDisable=!1,setTimeout(()=>{this.isImmortal=!1},2e3)},1e3))}}class qe{constructor(i,t){$(this,"x");$(this,"y");this.x=i,this.y=t}static between(i,t){return Math.sqrt((i.x-t.x)**2+(i.y-t.y)**2)}validAgent(){return!(this.x===Ht.AGV_START_X&&this.y===Ht.AGV_START_Y||this.x===Ht.AGV_START_X&&this.y===Ht.AUTO_AGV_START_Y||this.x===Ht.EXIT_X&&Ht.EXIT_Y.includes(this.y))}}class cp{constructor(i){$(this,"content",[]);$(this,"scoreFunction");this.scoreFunction=i}push(i){this.content.push(i),this.sinkDown(this.content.length-1)}pop(){const i=this.content[0],t=this.content.pop();return this.content.length>0&&(t&&(this.content[0]=t),this.bubbleUp(0)),i}remove(i){const t=this.content.indexOf(i),f=this.content.pop();f&&t!==this.content.length-1&&(this.content[t]=f,this.scoreFunction(f)<this.scoreFunction(i)?this.sinkDown(t):this.bubbleUp(t))}size(){return this.content.length}rescoreElement(i){this.sinkDown(this.content.indexOf(i))}sinkDown(i){const t=this.content[i];for(;i>0;){const f=(i+1>>1)-1,e=this.content[f];if(this.scoreFunction(t)<this.scoreFunction(e))this.content[f]=t,this.content[i]=e,i=f;else break}}bubbleUp(i){const t=this.content.length,f=this.content[i],e=this.scoreFunction(f);for(;;){const l=i+1<<1,n=l-1;var s=null;let o=0;if(n<t){const h=this.content[n];o=this.scoreFunction(h),o<e&&(s=n)}if(l<t){const h=this.content[l];this.scoreFunction(h)<(s===null?e:o)&&(s=l)}if(s!==null)this.content[i]=this.content[s],this.content[s]=f,i=s;else break}}}class pp{constructor(i,t,f,e,s,l){$(this,"nodes",[]);$(this,"diagonal",!1);$(this,"grid",[]);$(this,"dirtyNodes",[]);this.diagonal=i,this.init(e,t,f,s,l)}init(i,t,f,e,s){this.dirtyNodes=[],this.nodes=[];for(const l of this.nodes)l.clean();this.grid=[],i.forEach(l=>{this.grid[l.x]||(this.grid[l.x]=[]),this.grid[l.x][l.y]=new As(l.x,l.y,1)}),e.forEach(l=>{this.grid[l.x]||(this.grid[l.x]=[]),this.grid[l.x][l.y]=new As(l.x,l.y,5)});for(let l=0;l<f;l++){this.grid[l]||(this.grid[l]=[]);for(let n=0;n<t;n++)this.grid[l][n]||(this.grid[l][n]=new As(l,n,0))}s&&(this.grid[s.x][s.y].weight=0),this.grid[50][13].weight=0,this.grid[50][14].weight=0,this.grid[1][14].weight=0,this.grid[1][13].weight=0}clearnDirty(){for(const i of this.dirtyNodes)i.clean();this.dirtyNodes=[]}markDirty(i){this.dirtyNodes.push(i)}neighbors(i){const t=[],f=i.x,e=i.y,s=this.grid;return s[f-1]&&s[f-1][e]&&t.push(s[f-1][e]),s[f+1]&&s[f+1][e]&&t.push(s[f+1][e]),s[f]&&s[f][e+1]&&t.push(s[f][e+1]),s[f]&&s[f][e-1]&&t.push(s[f][e-1]),this.diagonal&&(s[f-1]&&s[f-1][e-1]&&t.push(s[f-1][e-1]),s[f+1]&&s[f+1][e-1]&&t.push(s[f+1][e-1]),s[f-1]&&s[f-1][e+1]&&t.push(s[f-1][e+1]),s[f+1]&&s[f+1][e+1]&&t.push(s[f+1][e+1])),t}toString(){const i=this.grid,t=[];for(let f=0;f<i.length;f++){const e=i[f],s=[];for(let l=0;l<e.length;l++){const n=e[l];s.push(n.toString())}t.push(s.join(" "))}return t.join(`
`)}}class As{constructor(i,t,f){$(this,"x");$(this,"y");$(this,"weight");$(this,"parent",null);$(this,"f",0);$(this,"g",0);$(this,"h",0);$(this,"visited",!1);$(this,"closed",!1);this.x=i,this.y=t,this.weight=f}toString(){return`[${this.x} ${this.y}]`}getCost(i){return i&&i.x!==this.x&&i.y!==this.y?this.weight*1.41421:this.weight}isWall(){return this.weight===0}clean(){this.parent=null,this.f=0,this.g=0,this.h=0,this.visited=!1,this.closed=!1}}class gp{constructor(i,t,f,e,s){$(this,"heap");$(this,"graph");$(this,"heuristics",{manhattan:function(i,t){const f=Math.abs(t.x-i.x),e=Math.abs(t.y-i.y);return f+e},diagonal:function(i,t){const e=Math.sqrt(2),s=Math.abs(t.x-i.x),l=Math.abs(t.y-i.y);return 1*(s+l)+(e-2*1)*Math.min(s,l)}});this.heap=new cp(l=>l.f),this.graph=new pp(!0,i,t,f,e,s)}pathTo(i){let t=i;const f=[];for(;t.parent;)f.push(new qe(t.x,t.y)),t=t.parent;return f}search(i,t,f={}){const e=new As(i.x,i.y,1),s=new As(t.x,t.y,1);this.graph.clearnDirty();const{heuristic:l=this.heuristics.diagonal,closest:n=!0}=f;let o=e;for(e.h=l(e,s),this.graph.markDirty(e),this.heap.push(e);this.heap.size()>0;){const v=this.heap.pop();if(v===s)return this.pathTo(v);v.closed=!0;const u=this.graph.neighbors(v);for(var h=0,r=u.length;h<r;++h){var a=u[h];if(a.closed||a.isWall())continue;const d=v.g+a.getCost(v),c=a.visited;(!c||d<a.g)&&(a.visited=!0,a.parent=v,a.h=a.h||l(a,s),a.g=d,a.f=a.g+a.h,this.graph.markDirty(a),n&&(a.h<o.h||a.h===o.h&&a.g<o.g)&&(o=a),c?this.heap.rescoreElement(a):this.heap.push(a))}}return n?this.pathTo(o):[]}}var Os={exports:{}},mp={},xp=Object.freeze(Object.defineProperty({__proto__:null,default:mp},Symbol.toStringTag,{value:"Module"})),yp=Tc(xp),Pf=typeof process!="undefined"&&process.pid?process.pid.toString(36):"",Mf="";if(typeof __webpack_require__!="function"&&typeof Sc!="undefined"){var Tr="",yh=yp;if(yh.networkInterfaces)var Sr=yh.networkInterfaces();if(Sr){t:for(let p in Sr){const i=Sr[p],t=i.length;for(var wi=0;wi<t;wi++)if(i[wi]!==void 0&&i[wi].mac&&i[wi].mac!="00:00:00:00:00:00"){Tr=i[wi].mac;break t}}Mf=Tr?parseInt(Tr.replace(/\:|\D+/gi,"")).toString(36):""}}Os.exports=Os.exports.default=function(p,i){return(p||"")+Mf+Pf+Ls().toString(36)+(i||"")};Os.exports.process=function(p,i){return(p||"")+Pf+Ls().toString(36)+(i||"")};Os.exports.time=function(p,i){return(p||"")+Ls().toString(36)+(i||"")};function Ls(){var p=Date.now(),i=Ls.last||p;return Ls.last=p>i?p:i+1}var Af=Os.exports;class Tp extends ts{constructor(t,f,e,s){super(t,f.x*32,f.y*32,"tiles_spr",17);$(this,"startPos");$(this,"endPos");$(this,"vertexs");$(this,"endText");$(this,"agentText");$(this,"id");$(this,"isOverlap",!1);$(this,"speed",38);$(this,"activeTimer",0);$(this,"sizeWidth",32);$(this,"sizeHeight",32);$(this,"serverId");$(this,"currentPos");$(this,"nextPos");$(this,"stopTime",0);$(this,"stopTimer",0);this.scene=t,this.startPos=f,this.endPos=e,this.vertexs=[],this.id=s,this.speed=Math.floor(Math.random()*(this.speed-10))+10,this.endText=new es(this.scene,e.x*32+6,e.y*32,s.toString(),"28px"),this.agentText=new es(this.scene,f.x*32,f.y*32-16,s.toString()),this.getBody().setSize(31,31),this.setOrigin(0,0),this.serverId=Af(),this.currentPos=this.startPos,this.active=!1,Qa({x:this.x,y:this.y,width:this.sizeWidth,height:this.sizeHeight,serverId:this.serverId,gameObjectType:Za.agent,gameObjectAttrs:{id:this.id,startPos:this.startPos,endPos:this.endPos},clientId:this.id,desX:this.endPos.x,desY:this.endPos.y})}complete(){this.agentText.setText("DONE"),this.agentText.setFontSize(12),this.x=this.currentPos.x*32,this.y=this.currentPos.y*32,this.setVelocity(0,0),this.eliminate()}preUpdate(){if(this.stopTimer&&this.stopTime>10){const t=this.getSnene().getRandomAgentEndPos();return this.endPos=t,this.stopTime=0,clearInterval(this.stopTimer),this.recalculatePath(this.x,this.y,this.currentPos)}this.updatePre()}getStartPos(){return this.startPos}getEndPos(){return this.endPos}getId(){return this.id}eliminate(){if(this.getSnene().setBusyGridState(this.currentPos.x,this.currentPos.y,null),this.nextPos){const t=this.getSnene().getBusyGridState(this.nextPos.x,this.nextPos.y);t&&t==="agent_"+this.id&&this.getSnene().setBusyGridState(this.nextPos.x,this.nextPos.y,null)}this.getSnene().events.emit("destroyAgent",this),this.endText.destroy(),this.agentText.destroy(),this.destroy()}pause(){this.setVelocity(0,0),this.active=!1}restart(){this.active=!0}handleOverlap(){this.setVelocity(0,0),this.active=!1,this.activeTimer&&clearTimeout(this.activeTimer),this.activeTimer=setTimeout(()=>{this.active=!0,this.activeTimer=0},1e3),this.stopTimer||(this.stopTimer=setInterval(()=>{this.stopTime++},1e3))}setPath(t){if(!t.length)return this.complete();this.active=!0,this.vertexs=t,this.nextPos=this.vertexs.pop()}recalculatePath(t,f,e){const s=new gp(52,28,this.getSnene().groundPos,this.getSnene().pathPos,e);this.vertexs=s.search(new qe(t,f),this.endPos),this.active=!0,this.vertexs.length!=0&&(this.agentText.setX(this.x),this.agentText.setY(this.y-16),this.nextPos=this.vertexs.pop(),this.getSnene().setBusyGridState(this.currentPos.x,this.currentPos.y,"agent_"+this.id))}updatePre(){if(!this.active)return;const t="agent_"+this.id;if(this.agentText.setPosition(this.x+this.height*.15,this.y-this.height*.5),this.setVelocity(0,0),this.nextPos&&Math.abs(this.nextPos.x*32-this.x)<1&&Math.abs(this.nextPos.y*32-this.y)<1)return this.getSnene().setBusyGridState(this.currentPos.x,this.currentPos.y,null),this.currentPos=this.nextPos,this.nextPos=this.vertexs.pop(),this.nextPos?(this.getSnene().setBusyGridState(this.currentPos.x,this.currentPos.y,t),this.getSnene().getBusyGridState(this.nextPos.x,this.nextPos.y)||this.getSnene().setBusyGridState(this.nextPos.x,this.nextPos.y,t),this.move()):void 0;if(this.nextPos){const f=this.getSnene().getBusyGridState(this.nextPos.x,this.nextPos.y);if(!f){this.getSnene().setBusyGridState(this.nextPos.x,this.nextPos.y,t);return}if(f!==t){const e=f.split("_");if(e[0]!=="agent")return this.nextPos.x===this.endPos.x&&this.nextPos.y===this.endPos.y?this.complete():this.recalculatePath(this.currentPos.x,this.currentPos.y,this.nextPos);const l=+e[1],n=this.getSnene().getAgentByID(l);if(!n)return this.getSnene().setBusyGridState(this.nextPos.x,this.nextPos.y,null),this.move();if(l>this.id){const h=n.getEndPos();return h.x===this.nextPos.x&&h.y===this.nextPos.y?this.recalculatePath(this.currentPos.x,this.currentPos.y,this.nextPos):this.handleOverlap()}const o=n.getEndPos();return o.x===this.nextPos.x&&o.y===this.nextPos.y?this.handleOverlap():this.recalculatePath(this.currentPos.x,this.currentPos.y,this.nextPos)}this.move()}else{this.getSnene().setBusyGridState(this.currentPos.x,this.currentPos.y,null),this.eliminate();return}}move(){this.stopTimer&&(clearInterval(this.stopTimer),this.stopTimer=0),this.nextPos?this.getSnene().physics.moveTo(this,this.nextPos.x*32,this.nextPos.y*32,this.speed):this.complete()}}var ne=(p=>(p[p.EMPTY=0]="EMPTY",p[p.BUSY=1]="BUSY",p[p.NOT_ALLOW=2]="NOT_ALLOW",p))(ne||{});const Th=.4;class Rf{constructor(i,t,f=!1,e=2,s=.05,l=2e3,n=3e3){$(this,"x");$(this,"y");$(this,"nodeW",null);$(this,"nodeN",null);$(this,"nodeS",null);$(this,"nodeE",null);$(this,"w_edge_W",Number.MAX_SAFE_INTEGER);$(this,"w_edge_N",Number.MAX_SAFE_INTEGER);$(this,"w_edge_S",Number.MAX_SAFE_INTEGER);$(this,"w_edge_E",Number.MAX_SAFE_INTEGER);$(this,"w",0);$(this,"u",0);$(this,"state");$(this,"p_random");$(this,"t_min");$(this,"t_max");$(this,"nodeVW",null);$(this,"nodeVN",null);$(this,"nodeVS",null);$(this,"nodeVE",null);$(this,"w_edge_VW",Number.MAX_SAFE_INTEGER);$(this,"w_edge_VN",Number.MAX_SAFE_INTEGER);$(this,"w_edge_VS",Number.MAX_SAFE_INTEGER);$(this,"w_edge_VE",Number.MAX_SAFE_INTEGER);$(this,"isVirtualNode",!1);$(this,"_weight",0);this.x=i,this.y=t,this.state=e,this.p_random=s,this.t_min=l,this.t_max=n,this.isVirtualNode=f}getW(){return $a==Ha.FRANSEN?this.w:this.weight}get weight(){return this._weight}set weight(i){this._weight=i}setNeighbor(i){if(i!=null){if(i.isVirtualNode){this.x+1==i.x&&this.y==i.y?(this.nodeVE=i,this.w_edge_VE=1):this.x==i.x&&this.y+1==i.y?(this.nodeVS=i,this.w_edge_VS=1):this.x-1==i.x&&this.y==i.y?(this.nodeVW=i,this.w_edge_VW=1):this.x==i.x&&this.y-1==i.y&&(this.nodeVN=i,this.w_edge_VN=1);return}this.setRealNeighbor(i)}}setRealNeighbor(i){this.x+1==i.x&&this.y==i.y?(this.nodeE=i,this.w_edge_E=1):this.x==i.x&&this.y+1==i.y?(this.nodeS=i,this.w_edge_S=1):this.x-1==i.x&&this.y==i.y?(this.nodeW=i,this.w_edge_W=1):this.x==i.x&&this.y-1==i.y&&(this.nodeN=i,this.w_edge_N=1)}setState(i){this.state=i}equal(i){return i.isVirtualNode!=this.isVirtualNode?!1:this.x==i.x&&this.y==i.y}madeOf(i){return this.equal(i)}setU(i){this.u=Math.floor(i),this.updateW()}updateW(){this.w=(1-Th)*this.w+Th*this.u}}class Of{constructor(){}move(i){}}class Sp extends Of{constructor(t){super();$(this,"_start");$(this,"_calculated");this._start=t,this._calculated=!1}move(t){var o;if(performance.now()-this._start<yt.DURATION*1e3){if(!this._calculated){this._calculated=!0;var f=this._start/1e3,e=t.scene,s=t.getExpectedTime();if(f>=s-yt.DURATION&&f<=s+yt.DURATION)return;var l=Math.max(s-yt.DURATION-f,f-s-yt.DURATION),n=yt.getLateness(l);e.harmfullness=e.harmfullness+n}return}else{(o=t.firstText)==null||o.destroy();var e=t.scene;e!=null&&t.eraseDeadline(e.timeTable),t.hybridState=new Lf(!0),t.changeTarget()}}}class Cp{constructor(i,t=-1,f=0){$(this,"begin",-1);$(this,"end",-1);$(this,"duration",0);this.begin=i,this.end=t,this.duration=f}}class Lf extends Of{constructor(t=!1){super();$(this,"_isLastMoving");$(this,"_agvIsDestroyed");this._isLastMoving=t,this._agvIsDestroyed=!1}move(t){var s,l,n,o,h;if(this._agvIsDestroyed||!t.path)return;if(t.isDisable){t.setVelocity(0,0);return}if(t.cur==t.path.length-1){if(t.setVelocity(0,0),this._isLastMoving){const r=t.scene;r.autoAgvs.delete(t),(s=r.forcasting)==null||s.rememberDoneAutoAgv(t.getAgvID()),this._agvIsDestroyed=!0,t.destroy();return}else t.hybridState=new Sp(performance.now());return}t.cur+1>=t.path.length&&console.log("Loi roi do: "+(t.cur+1));const f=t.graph.nodes[t.path[t.cur+1].x][t.path[t.cur+1].y],e=yt.minDistance(t,t.collidedActors);if(f.state==ne.BUSY||e<yt.SAFE_DISTANCE){if(t.setVelocity(0,0),t.waitT)return;t.waitT=performance.now(),(l=t.getSnene().forcasting)==null||l.addDuration(t.getAgvID(),new Cp(Math.floor(t.waitT/1e3)))}else if(e>=yt.SAFE_DISTANCE&&t.collidedActors.clear(),t.waitT&&(t.curNode.setU((performance.now()-t.waitT)/1e3),(n=t.scene.forcasting)==null||n.updateDuration(t.getAgvID(),Math.floor(t.waitT/1e3),Math.floor(performance.now()/1e3)),t.waitT=0),Math.abs(t.x-f.x*32)>1||Math.abs(t.y-f.y*32)>1){const r=t.getSnene().getBusyGridState(f.x,f.y);if(r){const a=r.split("_"),v=a[0];if(v==="agent"){const u=t.getSnene().getAgentByID(+a[1]);if(u&&((o=u.nextPos)==null?void 0:o.x)===f.x&&((h=u.nextPos)==null?void 0:h.y)===f.y)return;t.getSnene().setBusyGridState(f.x,f.y,null),t.scene.physics.moveTo(t,f.x*32,f.y*32,32)}else if(v==="agv"){const u=t.getSnene().getAgvById(+a[1]);if(u){if(u.getExpectedTime()<t.getExpectedTime())return;u.handleOverlap()}t.getSnene().setBusyGridState(f.x,f.y,null),t.scene.physics.moveTo(t,f.x*32,f.y*32,32)}else{const u=t.getSnene().getMainAgv();if(u.getExpectedTime()<t.getExpectedTime())return;u.handleOverlap(!1)}return}t.scene.physics.moveTo(t,f.x*32,f.y*32,32)}else t.curNode.setState(ne.EMPTY),t.getSnene().setBusyGridState(t.curNode.x,t.curNode.y,null),t.curNode=f,t.getSnene().setBusyGridState(t.curNode.x,t.curNode.y,"agv_"+t.getAgvID()),t.curNode.setState(ne.BUSY),t.cur++,t.setX(t.curNode.x*32),t.setY(t.curNode.y*32),t.setVelocity(0,0),t.stepsMoved++,(t.stepsMoved%10==0||performance.now()-t.timesMoved>1e4)&&(t.timesMoved=performance.now(),t.cur=0,t.path=t.calPathAStar(t.curNode,t.endNode))}}class Sh extends ts{constructor(t,f,e,s,l,n){super(t,f*32,e*32,"agv");$(this,"graph");$(this,"path");$(this,"curNode");$(this,"endNode");$(this,"cur");$(this,"waitT");$(this,"stepsMoved");$(this,"timesMoved");$(this,"hybridState");$(this,"endX");$(this,"endY");$(this,"firstText");$(this,"startX");$(this,"startY");$(this,"sizeWidth",32);$(this,"sizeHeight",32);$(this,"serverId");$(this,"isDisable",!1);$(this,"disableTimer",null);this.startX=f*32,this.startY=e*32,this.endX=s*32,this.endY=l*32,this.graph=n,this.getBody().setSize(32,32),this.setOrigin(0,0),this.cur=0,this.waitT=0,this.curNode=this.graph.nodes[f][e],this.curNode.setState(ne.BUSY),this.endNode=this.graph.nodes[s][l],this.firstText=new es(this.scene,s*32,l*32,"DES","16px","#F00"),this.path=this.calPathAStar(this.curNode,this.endNode),this.stepsMoved=0,this.timesMoved=performance.now(),this.estimateArrivalTime(f*32,e*32,s*32,l*32),this.hybridState=new Lf,this.serverId=Af(),Qa({x:this.x,y:this.y,width:this.sizeWidth,height:this.sizeHeight,serverId:this.serverId,gameObjectType:Za.autoAgv,clientId:this.getAgvID()})}preUpdate(t,f){var e;(e=this.hybridState)==null||e.move(this)}calPathAStar(t,f){return this.graph.calPathAStar(t,f)}changeTarget(){const t=this.scene,f=t.mapOfExits.get("Gate1"),e=t.mapOfExits.get("Gate2"),s=f[2]<e[2]?"Gate1":"Gate2",l=t.mapOfExits.get(s);l[2]++,t.mapOfExits.set(s,l),this.startX=this.endX,this.startY=this.endY;const n=l[0],o=l[1];this.endX=n*32,this.endY=o*32;const h=t.mapOfExits.get(s)[2];this.endNode=this.graph.nodes[n][o],this.firstText=new es(this.scene,n*32,o*32,"DES_"+h,"16px","#F00"),this.path=this.calPathAStar(this.curNode,this.endNode),this.cur=0,this.stepsMoved=0,this.timesMoved=performance.now(),this.estimateArrivalTime(32*this.startX,32*this.startY,this.endX*32,this.endY*32)}update(){this.isDisable||super.update()}eliminate(){var t;(t=this.firstText)==null||t.destroy(),this.destroy()}toJson(){var t;return{x:this.x,y:this.y,sizeWidth:this.sizeWidth,sizeHeight:this.sizeHeight,serverId:this.serverId,endX:this.endX,endY:this.endY,startX:this.startX,startY:this.startY,cur:this.cur,waitT:this.waitT,stepsMoved:this.stepsMoved,timesMoved:this.timesMoved,firstText:((t=this.firstText)==null?void 0:t.text)||"",visible:this.visible,scale:this.scale,type:this.type,originX:this.originX,originY:this.originY,alpha:this.alpha,name:this.name,textureKey:this.texture.key}}handleOverlap(){this.isDisable=!0,this.disableTimer&&clearTimeout(this.disableTimer),this.disableTimer=setTimeout(()=>{this.isDisable=!1,this.disableTimer=null},3e3)}}class Ff{constructor(i,t,f,e){$(this,"nodes");$(this,"width");$(this,"height");$(this,"agents",[]);$(this,"busy",[]);$(this,"pathPos");$(this,"autoAgvs");this.width=i,this.height=t,this.nodes=new Array(i),this.pathPos=e;for(let s=0;s<i;s++){this.nodes[s]=[];for(let l=0;l<t;l++)this.nodes[s][l]=new Rf(s,l)}for(let s=0;s<i;s++)for(let l=0;l<t;l++)for(let n=0;n<f[s][l].length;n++){const o=f[s][l][n];this.nodes[s][l].setNeighbor(this.nodes[o.x][o.y])}for(const s of e)this.nodes[s.x][s.y].setState(ne.EMPTY);this.busy=new Array(52);for(let s=0;s<52;s++){this.busy[s]=new Array(28);for(let l=0;l<28;l++)this.nodes[s][l].state===ne.EMPTY?this.busy[s][l]=0:this.busy[s][l]=2}}setAutoAgvs(i){this.autoAgvs=i}getAutoAgvs(){return this.autoAgvs}setAgents(i){for(const t of this.pathPos)this.nodes[t.x][t.y].setState(ne.EMPTY);this.busy=new Array(52);for(let t=0;t<52;t++){this.busy[t]=new Array(28);for(let f=0;f<28;f++)this.nodes[t][f].state==ne.EMPTY?this.busy[t][f]=0:this.busy[t][f]=2}this.agents=i}updateState(){const i=new Array(52);for(let t=0;t<52;t++){i[t]=new Array(28);for(let f=0;f<28;f++)i[t][f]=0}for(let t=0;t<this.agents.length;t++){const f=this.agents[t];if(f.active){const e=Math.floor(f.x/32),s=Math.floor((f.x+31)/32),l=Math.floor(f.y/32),n=Math.floor((f.y+31)/32);i[e][l]=1,i[e][n]=1,i[s][l]=1,i[s][n]=1}}for(let t=0;t<52;t++)for(let f=0;f<28;f++)if(this.busy[t][f]!==2)if(this.busy[t][f]===0){if(i[t][f]===0)continue;this.nodes[t][f].setState(ne.BUSY),this.busy[t][f]=1}else{if(i[t][f]===1)continue;this.nodes[t][f].setState(ne.EMPTY),this.busy[t][f]=0}}removeAgent(i){var e;const t=Math.floor(i.x/32),f=Math.floor(i.y/32);!((e=this.nodes[t])!=null&&e[f])||(this.nodes[t][f].setState(ne.EMPTY),this.busy[t][f]=0)}calPathAStar(i,t){const f=[],e=[],s=[],l=new Array(this.width),n=new Array(this.width),o=new Array(this.width),h=new Array(this.width);for(let r=0;r<this.width;r++){l[r]=new Array(this.height),n[r]=new Array(this.height),o[r]=new Array(this.height),h[r]=new Array(this.height);for(let a=0;a<this.height;a++)l[r][a]=0,n[r][a]=0,o[r][a]=0}for(f.push(this.nodes[i.x][i.y]);f.length>0;){let r=0;for(let u=0;u<f.length;u++)l[f[u].x][f[u].y]<l[f[r].x][f[r].y]&&(r=u);let a=f[r];if(f[r].equal(t)){let u=this.nodes[t.x][t.y];for(s.push(u);h[u.x][u.y]!=null;)s.push(h[u.x][u.y]),u=h[u.x][u.y];return s.reverse(),s}f.splice(r,1),e.push(a);const v=[a.nodeN,a.nodeE,a.nodeS,a.nodeW,a.nodeVN,a.nodeVE,a.nodeVS,a.nodeVW];for(let u=0;u<v.length;u++){let d=v[u];if(d!=null){let c=0;h[a.x][a.y]&&d.x!=h[a.x][a.y].x&&d.y!=h[a.x][a.y].y&&(c=1);let g=n[a.x][a.y]+1+a.getW()+c;if(!this.isInclude(d,e))this.isInclude(d,f)?g<n[d.x][d.y]&&(n[d.x][d.y]=g):(n[d.x][d.y]=g,f.push(d)),o[d.x][d.y]=this.heuristic(d,t),l[d.x][d.y]=o[d.x][d.y]+n[d.x][d.y],h[d.x][d.y]=a;else if(g<n[d.x][d.y]){f.push(d);const m=e.indexOf(d);m>-1&&e.splice(m,1)}}}}return console.log("Path not found!"),null}isInclude(i,t){for(let f=0;f<t.length;f++)if(i.equal(t[f]))return!0;return!1}heuristic(i,t){return Math.abs(i.x-t.x)+Math.abs(i.y-t.y)}}var Aa;(p=>{class i{constructor(h=Math.random){$(this,"_rng01");$(this,"_rng11");this._rng01=h,this._rng11=()=>(h()*4294967296|0)/4294967296*2}uniform(h=0,r=1){return new t(this._rng01,h,r)}normal(h=0,r=1){return new f(this._rng11,h,r)}exponential(h=1){return new e(this._rng01,h)}logNormal(h=0,r=1){return new s(this._rng11,h,r)}poisson(h=1){return new l(this._rng01,h)}bimodal(h=1){return new n(this._rng01,h)}}p.Prob=i,(o=>{o[o.Unknown=0]="Unknown",o[o.Continuous=1]="Continuous",o[o.Discrete=2]="Discrete"})(p.DistributionType||(p.DistributionType={}));class t{constructor(h,r,a){$(this,"_rng01");$(this,"_min");$(this,"_max");$(this,"_range");$(this,"_mean");$(this,"_variance");$(this,"_type");this._rng01=h,this._min=r,this._max=a,this._range=a-r,this._mean=r+this._range/2,this._variance=(a-r)*(a-r)/12,this._type=1}get min(){return this._min}get max(){return this._max}get mean(){return this._mean}get variance(){return this._variance}get type(){return this._type}random(){return this._min+this._rng01()*this._range}}p.UniformDistribution=t;class f{constructor(h,r,a){$(this,"_rng11");$(this,"_min");$(this,"_max");$(this,"_mean");$(this,"_sd");$(this,"_variance");$(this,"_type");$(this,"_y1");$(this,"_y2");this._rng11=h,this._min=Number.NEGATIVE_INFINITY,this._max=Number.POSITIVE_INFINITY,this._mean=r,this._sd=a,this._variance=a*a,this._type=1,this._y1=null,this._y2=null}get min(){return this._min}get max(){return this._max}get mean(){return this._mean}get variance(){return this._variance}get type(){return this._type}random(){let h=1/(this._sd*Math.sqrt(Math.PI*2)),r=this._rng11()-this.mean,a=Math.exp(-r*r/(2*this._variance));return h*a}}p.NormalDistribution=f;class e{constructor(h,r){$(this,"_rng01");$(this,"_min");$(this,"_max");$(this,"_mean");$(this,"_variance");$(this,"_type");this._rng01=h,this._min=0,this._max=Number.POSITIVE_INFINITY,this._mean=1/r,this._variance=Math.pow(r,-2),this._type=1}get min(){return this._min}get max(){return this._max}get mean(){return this._mean}get variance(){return this._variance}get type(){return this._type}random(){return-1*Math.log(this._rng01())*this._mean}}p.ExponentialDistribution=e;class s{constructor(h,r,a){$(this,"_rng11");$(this,"_min");$(this,"_max");$(this,"_mean");$(this,"_variance");$(this,"_type");$(this,"_nf");this._rng11=h,this._min=0,this._max=Number.POSITIVE_INFINITY,this._mean=Math.exp(r+a*a/2),this._variance=(Math.exp(a*a)-1)*Math.exp(2*r+a*a),this._type=1,this._nf=new f(h,r,a)}get min(){return this._min}get max(){return this._max}get mean(){return this._mean}get variance(){return this._variance}get type(){return this._type}random(){return Math.exp(this._nf.random())}}p.LogNormalDistribution=s;class l{constructor(h,r){$(this,"_rng01");$(this,"_min");$(this,"_max");$(this,"_mean");$(this,"_variance");$(this,"_type");$(this,"_L");this._rng01=h,this._min=0,this._max=Number.POSITIVE_INFINITY,this._mean=r,this._variance=r,this._type=2,this._L=Math.exp(-r)}get min(){return this._min}get max(){return this._max}get mean(){return this._mean}get variance(){return this._variance}get type(){return this._type}random(){let h=1;for(;h=h*this._rng01(),!(h<=this._L););return h}}p.PoissonDistribution=l;class n{constructor(h,r){$(this,"_rng01");$(this,"_min");$(this,"_max");$(this,"_mean");$(this,"_variance");$(this,"_type");$(this,"_p");this._rng01=h,this._min=0,this._max=Number.POSITIVE_INFINITY,this._mean=r,this._variance=r,this._type=2;let a=Math.abs(r);a<1&&a!=0?this._p=a:a==0?this._p=.6:this._p=1/a}get min(){return this._min}get max(){return this._max}get mean(){return this._mean}get variance(){return this._variance}get type(){return this._type}random(){let h=3628800,r=Math.floor(this._rng01()*9),a=Math.pow(this._p,r),v=Math.pow(1-this._p,10-r),u=1;for(let d=1;d<=r;d++)u=u*d*(10-d);return h/u*a*v}}p.BimodalDistribution=n})(Aa||(Aa={}));class Ch{constructor(){$(this,"_name")}getProbability(){let i=new Aa.Prob,t=Math.random();switch(Math.floor(t*4)){case 0:let e=i.poisson();return this._name="Poisson",e.random();case 1:let s=i.uniform(0,1);return this._name="Uniform",s.random();case 2:return this._name="Bimodal",i.bimodal().random()}return this._name="Normal",i.normal().random()}getName(){return this._name}}class Ep extends Ff{constructor(t,f,e,s){super(t,f,e,s);$(this,"virtualNodes");this.virtualNodes=new Array(t);for(let l=0;l<t;l++){this.virtualNodes[l]=[];for(let n=0;n<f;n++)this.virtualNodes[l][n]=new Rf(l,n,!0)}for(let l=0;l<t;l++)for(let n=0;n<f;n++)for(let o=0;o<e[l][n].length;o++){let h=e[l][n][o];this.nodes[l][n].setNeighbor(this.virtualNodes[h.x][h.y]),this.virtualNodes[l][n].setNeighbor(this.virtualNodes[h.x][h.y]),this.virtualNodes[l][n].setNeighbor(this.nodes[h.x][h.y])}for(let l of s)this.virtualNodes[l.x][l.y].setState(ne.EMPTY)}updateState(){super.updateState();for(let t=0;t<this.width;t++)for(let f=0;f<this.height;f++){let e=this.nodes[t][f].x,s=this.nodes[t][f].y;this.nodes[t][f].weight=0,this.virtualNodes[t][f].weight=0;for(let l=0;l<this.agents.length;l++)Math.sqrt((e-this.agents[l].x)**2+(s-this.agents[l].y)**2)/this.agents[l].speed<yt.DELTA_T&&this.nodes[t][f].weight++;this.getAutoAgvs()!=null&&this.getAutoAgvs().forEach(l=>{if(l.path)for(let n=0;n<l.path.length;n++)l.path[n].isVirtualNode?l.path[n].x==this.virtualNodes[t][f].x&&l.path[n].y==this.virtualNodes[t][f].y&&this.virtualNodes[t][f].weight++:l.path[n].equal(this.nodes[t][f])&&this.nodes[t][f].weight++})}}calPathAStar(t,f){const e=[],s=[],l=[],n=new Array(this.width),o=new Array(this.width),h=new Array(this.width),r=new Array(this.width);for(let a=0;a<this.width;a++){n[a]=new Array(this.height),o[a]=new Array(this.height),h[a]=new Array(this.height),r[a]=new Array(this.height);for(let v=0;v<this.height;v++)n[a][v]=0,o[a][v]=0,h[a][v]=0}for(e.push(this.nodes[t.x][t.y]);e.length>0;){let a=0;for(let d=0;d<e.length;d++)n[e[d].x][e[d].y]<n[e[a].x][e[a].y]&&(a=d);let v=e[a];if(e[a].equal(f)){let d=this.nodes[f.x][f.y];for(l.push(d);r[d.x][d.y]!=null;)l.push(r[d.x][d.y]),d=r[d.x][d.y];return l.reverse(),l}e.splice(a,1),s.push(v);const u=[v.nodeN,v.nodeE,v.nodeS,v.nodeW,v.nodeVN,v.nodeVE,v.nodeVS,v.nodeVW];for(let d=0;d<u.length;d++){let c=u[d];if(c!=null&&!this.isInclude(c,s)){let g=0;r[v.x][v.y]&&c.x!=r[v.x][v.y].x&&c.y!=r[v.x][v.y].y&&(g=1);let m=o[v.x][v.y]+1+v.weight+g;super.isInclude(c,e)?m<o[c.x][c.y]&&(o[c.x][c.y]=m):(o[c.x][c.y]=m,e.push(c)),h[c.x][c.y]=this.heuristic(c,f),n[c.x][c.y]=h[c.x][c.y]+o[c.x][c.y],r[c.x][c.y]=v}}}return console.log("Path not found!"),null}}class Pp{constructor(){$(this,"waitingAutoAgv");$(this,"doneAutoAgv");$(this,"doNothing",0);$(this,"averageAverageWaitingTime",0);this.waitingAutoAgv=new Map,this.doneAutoAgv=new Set}rememberDoneAutoAgv(i){this.doneAutoAgv==null&&(this.doneAutoAgv=new Set),this.doneAutoAgv.has(i)||this.doneAutoAgv.add(i)}removeAutoAgv(i){this.waitingAutoAgv!=null&&this.waitingAutoAgv.size!=0&&this.waitingAutoAgv.has(i)&&this.waitingAutoAgv.delete(i)}removeDuration(i){var t,f,e;if(this.waitingAutoAgv!=null&&this.waitingAutoAgv.has(i)){let s=Math.floor(performance.now()/1e3),l=new Array;(t=this.waitingAutoAgv.get(i))==null||t.forEach(n=>{n.end!=-1&&n.end<s-yt.DELTA_T&&l.push(n)}),l.forEach(n=>{var o,h;(h=(o=this.waitingAutoAgv)==null?void 0:o.get(i))==null||h.delete(n)}),((f=this.waitingAutoAgv.get(i))==null?void 0:f.size)==0&&(e=this.doneAutoAgv)!=null&&e.has(i)&&(this.waitingAutoAgv.delete(i),this.doneAutoAgv.delete(i)),l=[]}}addDuration(i,t){this.waitingAutoAgv==null&&(this.waitingAutoAgv=new Map),this.waitingAutoAgv.has(i)||this.waitingAutoAgv.set(i,new Set);let f=this.waitingAutoAgv.get(i);f.add(t),this.waitingAutoAgv.set(i,f)}updateDuration(i,t,f){var e;this.waitingAutoAgv!=null&&this.waitingAutoAgv.has(i)&&((e=this.waitingAutoAgv.get(i))==null||e.forEach(s=>{s.begin==t&&(s.end=f,s.duration=s.end-s.begin)}))}totalAverageWaitingTime(){let i=0;if(this.waitingAutoAgv==null)return this.waitingAutoAgv=new Map,0;if(this.waitingAutoAgv.size==0)return 0;let t=Math.floor(performance.now()/1e3);return this.waitingAutoAgv.forEach((f,e)=>{let s=0,l=0;this.removeDuration(e),f.forEach(n=>{l++,n.end==-1?s+=t-n.begin:s+=n.duration}),l==0?s=0:s=s/l,i+=s}),i=Math.floor(i*100)/100,i}log(i){var s,l,n;let t=this.totalAverageWaitingTime(),f=(s=this.waitingAutoAgv)==null?void 0:s.size,e=0;f!=0&&(e=t/f),e=Math.floor(e*100)/100,i.setText("Tu giay: "+Math.floor(performance.now()/1e3-yt.DELTA_T)+", #AutoAgv: "+f+" totalTime: "+t+" avg: "+e+"#Stop: "+((n=(l=this.waitingAutoAgv)==null?void 0:l.get(2))==null?void 0:n.size))}calculate(){var f;let i=this.totalAverageWaitingTime(),t=(f=this.waitingAutoAgv)==null?void 0:f.size;t!=0&&(this.averageAverageWaitingTime=i/t),this.averageAverageWaitingTime=Math.floor(this.averageAverageWaitingTime*100)/100}}const Ae=class extends Ds.exports.Scene{constructor(){super("main-scene");$(this,"agv");$(this,"autoAgvs");$(this,"map");$(this,"tileset");$(this,"groundLayer");$(this,"elevatorLayer");$(this,"roomLayer");$(this,"gateLayer");$(this,"wallLayer");$(this,"doorLayer");$(this,"pathLayer");$(this,"noPathLayer");$(this,"bedLayer");$(this,"groundPos");$(this,"pathPos");$(this,"listTile");$(this,"saveButton");$(this,"loadButton");$(this,"loadVadereButton");$(this,"mapData",{});$(this,"spaceGraph");$(this,"emergencyGraph");$(this,"doorPos");$(this,"timeText");$(this,"sec",0);$(this,"timeTable");$(this,"harmfulTable");$(this,"harmfulTableText");$(this,"_harmfullness",0);$(this,"agents");$(this,"rememberAgents",[]);$(this,"MAX_AGENT",10);$(this,"desDom");$(this,"mapOfExits",new Map([["Gate1",[Ae.EXIT_X,Ae.EXIT_Y[0],0]],["Gate2",[Ae.EXIT_X,Ae.EXIT_Y[1],0]]]));$(this,"count",0);$(this,"forcasting");$(this,"busyGrid",{});this.agents=new Array,this.groundPos=new Array,this.pathPos=new Array,this.listTile=new Array(52),this.doorPos=new Array,this.autoAgvs=new Set,this.forcasting=new Pp;for(let t=0;t<this.listTile.length;t++){this.listTile[t]=new Array(28);for(let f=0;f<this.listTile[t].length;f++)this.listTile[t][f]=[]}}getMainAgv(){return this.agv}setBusyGridState(t,f,e){!t||!f||t===Ae.EXIT_X&&(f===Ae.EXIT_Y[0]||f===Ae.EXIT_Y[1])||(this.busyGrid[t]||(this.busyGrid[t]={}),this.busyGrid[t][f]=e)}getBusyGridState(t,f){var e;return((e=this.busyGrid[t])==null?void 0:e[f])||null}preload(){this.load.baseURL="assets/",this.load.image({key:"tiles",url:"tilemaps/tiles/hospital.png"}),this.load.tilemapTiledJSON("hospital","tilemaps/json/hospital.json"),this.load.image("agv","sprites/agv.png"),this.load.spritesheet("tiles_spr","tilemaps/tiles/hospital.png",{frameWidth:32,frameHeight:32}),this.load.image("instruction","sprites/instruction.png"),this.load.html("setNumAgentForm","setNumAgents.html"),this.load.html("setAlgorithm","setAlgorithm.html"),this.load.html("des","des.html")}create(){var h;this.initMap(),this.initTileMap(),Bt.emit(Vt.newClient,{groundPos:this.groundPos,doorPos:this.doorPos,listTile:this.listTile,pathPos:this.pathPos}),this.desDom=this.add.dom(1790,600).createFromCache("des"),this.desDom.setPerspective(800);let t=Math.floor(Math.random()*this.pathPos.length);for(;!yt.validDestination(this.pathPos[t].x,this.pathPos[t].y,1,14);)t=Math.floor(Math.random()*this.pathPos.length);this.agv=new vp(this,1*32,14*32,this.pathPos[t].x*32,this.pathPos[t].y*32,this.pathLayer),this.agv.setPushable(!1),this.addButton(),this.timeTable&&this.agv.writeDeadline(this.timeTable);const f=document.getElementById("des");if(f){for(;f.childNodes.length>=1;)f.firstChild&&f.removeChild(f.firstChild);f.appendChild(f.ownerDocument.createTextNode(((h=this.timeTable)==null?void 0:h.text)||""))}this.createRandomAutoAgv(),this.events.on("destroyAgent",this.destroyAgentHandler,this),this.createAgents(this.MAX_AGENT,1e3),this.physics.add.collider(this.agv,this.noPathLayer),this.openLinkInstruction(),setInterval(()=>{var r;this.sec++,(r=this.timeText)==null||r.setText(yt.secondsToHMS(this.sec))},1e3);const e=this.add.dom(window.innerWidth-130,240).createFromCache("setNumAgentForm"),s=this.add.dom(window.innerWidth-130,25).createFromCache("setAlgorithm").setPerspective(800);e.setPerspective(800),e.addListener("click"),e.on("click",function(r){if(r.target.id==="submit"){let a=this.getChildByName("numOfAgents"),v=parseInt(a.value);!isNaN(v)&&v>0&&(Bt.emit(Vt.onChangeMaxAgent,v),this.scene.setMaxAgents(v))}});const l=s.getChildByID("select-agm");l&&l.addEventListener("change",()=>{Bt.emit(Vt.onClientChangeAgvAlgorithm,l.value),alert("\u0110\xE3 \u0111\u1ED5i thu\u1EADt to\xE1n th\xE0nh c\xF4ng!")}),this.spaceGraph=new Ff(52,28,this.listTile,this.pathPos),this.emergencyGraph=new Ep(52,28,this.listTile,this.pathPos),console.log(yt.numberOfEdges(52,28,this.emergencyGraph.nodes),yt.numberOfEdges(52,28,this.emergencyGraph.virtualNodes)),console.log(yt.numberOfEdges(52,28,this.graph.nodes));const n=yt.numberOfEdges(52,28,this.graph.nodes),o=yt.numberOfEdges(52,28,this.emergencyGraph.nodes)+yt.numberOfEdges(52,28,this.emergencyGraph.virtualNodes);console.log("NumOfAllEdges "+o+" as well as #RealEdges: "+n),console.assert(o==4*n,"NumOfAllEdges "+o+" != 4 times #RealEdges: "+n),setInterval(()=>{fp(this.agv,this.autoAgvs,this.agents)},500),Bt.on(Vt.tellClientMainAgvOverlapped,r=>{const a=r[0].overlappedAgents;this.agents.forEach(v=>{for(let u=0;u<a.length;u++)if(v.serverId===a[u].agentServerId){v.handleOverlap();break}}),this.agv.handleOverlap()}),Bt.on(Vt.tellClientAutoAgvsOverlapped,r=>{this.autoAgvs.forEach(a=>{for(let v=0;v<r.length;v++)if(a.serverId===r[v].agvServerId){const u=r[v].overlappedAgents;this.agents.forEach(d=>{u.findIndex(g=>g.agentServerId===d.serverId)!==-1&&a.freeze(d)});break}})}),Bt.on(Vt.tellClientAgentsOverlapped,r=>{const a=this.agents.find(v=>v.serverId===r);a&&a.handleOverlap()}),Bt.on(Vt.tellClientLoadedDataFromVadere,r=>{r.forEach(a=>{this.addAgent(a)})}),Bt.on(Vt.sendAgentPathToClient,({vertexs:r,id:a,end:v})=>{const u=this.agents.findIndex(d=>d.getId()===a);u!==-1&&(v?this.agents[u].complete():this.agents[u].setPath(r))}),Bt.on(Vt.clientFinish,()=>{this.agv.Toastcomplete()})}setMaxAgents(t){this.MAX_AGENT=t,alert("Thi\u1EBFt l\u1EADp s\u1ED1 Agents th\xE0nh c\xF4ng!")}get harmfullness(){return this._harmfullness}static formatHarmfullness(t){let f=t.toFixed(3).replace(/\d(?=(\d{3})+\.)/g,"$&,");if(f.length<9){const e=9-f.length;for(let s=0;s<e;s++)f=" "+f}return f}set harmfullness(t){var f;this._harmfullness=t,(f=this.harmfulTable)==null||f.setText("H.ness: "+Ae.formatHarmfullness(this._harmfullness))}createAgents(t,f){const e=[];for(;e.length<t*2;){var s=Math.floor(Math.random()*this.doorPos.length);e.indexOf(s)===-1&&e.push(s)}this.agents.length&&(this.agents.forEach(l=>{l.eliminate()}),this.agents=[]);for(let l=0;l<t;l++)this.addAgent({startPos:this.doorPos[e[l]],endPos:this.doorPos[e[l+t]],id:Math.floor(Math.random()*100)});setInterval(()=>{const l=Math.random();if(this.rememberAgents.length&&l>.3){const n=Math.floor(Math.random()*this.rememberAgents.length),o=this.rememberAgents[n];this.rememberAgents.splice(n,1);const h=o.endPos;if(new Ch().getProbability()>.37)return;const v=Math.floor(Math.random()*this.doorPos.length);this.addAgent({startPos:h,endPos:this.doorPos[v],id:o.id})}else{if(this.agents.length>=this.MAX_AGENT||new Ch().getProbability()>.37)return;const h=Math.floor(Math.random()*this.doorPos.length),r=Math.floor(Math.random()*this.doorPos.length);this.addAgent({startPos:this.doorPos[h],endPos:this.doorPos[r]})}this.count++,this.count==2&&(this.autoAgvs.size<this.MAX_AGENT&&this.createRandomAutoAgv(),this.count=0)},f)}addAgent(t){var o;const f=Math.floor(t.id||Math.random()*100),e=this.agents.findIndex(h=>h.getId()===f);e!==-1&&this.agents[e].eliminate();const s=new qe(Math.floor(t.startPos.x),Math.floor(t.startPos.y)),l=new qe(Math.floor(t.endPos.x),Math.floor(t.endPos.y));if(!s.validAgent()||!l.validAgent())return;const n=new Tp(this,s,l,f);n.setPushable(!1),this.physics.add.collider(n,this.roomLayer),this.agents.push(n),(o=this.graph)==null||o.setAgents(this.agents)}destroyAgentHandler(t){var s;const f=t.getEndPos().x,e=t.getEndPos().y;f===1&&e===1||f===50&&e===1||f===1&&e===26||f===50&&e===26||this.rememberAgents.push({startPos:t.getStartPos(),endPos:t.getEndPos(),id:t.getId()}),this.agents=this.agents.filter(l=>l.getId()!==t.getId()),(s=this.graph)==null||s.removeAgent(t),this.autoAgvs.forEach(l=>{l.collidedActors.has(t)&&l.collidedActors.delete(t)}),Bt.emit(Vt.deleteAgentOnServer,{clientId:t.getId(),serverId:t.serverId})}addButton(){this.saveButton=this.add.text(window.innerWidth-250,50,"Save data",{backgroundColor:"#eee",padding:{bottom:5,top:5,left:60,right:10},color:"#000",fontSize:"22px",fontStyle:"bold",fixedWidth:240}),this.loadButton=this.add.text(window.innerWidth-250,90,"Load data",{backgroundColor:"#eee",padding:{bottom:5,top:5,left:60,right:10},color:"#000",fontSize:"24px",fixedWidth:240,fontStyle:"bold"}),this.loadVadereButton=this.add.text(window.innerWidth-250,140,"Load data from Vadere",{fixedWidth:240,backgroundColor:"#eee",padding:{bottom:5,top:10,left:10,right:10},color:"#000",fontSize:"17px",fontStyle:"bold",align:"left",fixedHeight:35}),this.saveButton.setInteractive().on("pointerdown",()=>this.handleClickSaveButton()),this.loadButton.setInteractive().on("pointerdown",()=>this.handleClickLoadButton()),this.loadVadereButton.setInteractive().on("pointerdown",()=>this.handleClickLoadVadereButton()),this.timeText=this.add.text(window.innerWidth-190,290,"00:00:00",{color:"#D8202A",fontSize:"28px",fontStyle:"bold"}),this.timeTable=this.add.text(window.innerWidth-1910,870,"",{color:"#D8202A",fontSize:"28px",fontStyle:"bold"}),this.timeTable.setVisible(!1),this.harmfulTable=this.add.text(window.innerWidth-200,330,`  H.ness: 
   0.000`,{color:"#D8202A",fontSize:"22px",fontStyle:"bold",fixedWidth:200,wordWrap:{width:180}})}openLinkInstruction(){this.add.image(window.innerWidth-125,window.innerHeight-90,"instruction").setInteractive().on("pointerup",()=>{window.open("https://github.com/vunguyenkhanh/Happy_Hospital#readme")})}update(){var t,f;(t=this.graph)==null||t.updateState(),this.agv.update(),(f=this.forcasting)==null||f.calculate()}handleClickSaveButton(){var l;alert("\u0110\xE3 l\u01B0u map th\xE0nh c\xF4ng!"),this.mapData={},this.mapData.agv=this.agv,this.mapData._harmfullness=this._harmfullness,this.mapData.timeTableText=(l=this.timeTable)==null?void 0:l.text,this.mapData.sec=this.sec,this.mapData.autoAgvs=Array.from(this.autoAgvs).map(n=>n.toJson());const t=[];for(let n=0;n<this.agents.length;n++)t.push({startPos:{x:this.agents[n].getStartPos().x,y:this.agents[n].getStartPos().y},endPos:{x:this.agents[n].getEndPos().x,y:this.agents[n].getEndPos().y},id:this.agents[n].getId()});this.mapData.agents=t;const e=JSON.stringify(this.mapData,void 0,2),s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+e),s.setAttribute("download","save.json"),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s),Bt.emit(Vt.onClientSaveData,this.mapData)}handleClickLoadButton(){const t=document.createElement("input"),f=new FileReader,e=s=>{var l=s.target,n="json";if(l.files&&l.files[0]){var o=l.files[0].name.split(".").pop().toLowerCase(),h=n.indexOf(o)>-1;h?(f.onload=()=>{var r;typeof(f==null?void 0:f.result)=="string"&&(this.mapData=JSON.parse(f.result),this.autoAgvs.forEach(a=>a.eliminate()),this.autoAgvs=new Set,this.timeTable&&this.mapData.timeTableText&&(this.timeTable.text=this.mapData.timeTableText),this.mapData.sec&&(this.sec=this.mapData.sec),this.harmfulTable&&this.mapData._harmfullness&&(this.harmfulTable.setText(`  H.ness: 
`+Ae.formatHarmfullness(this.mapData._harmfullness)),this._harmfullness=this.mapData._harmfullness),this.mapData.agv&&(this.agv.setX(this.mapData.agv.x),this.agv.setY(this.mapData.agv.y)),this.mapData.autoAgvs&&this.mapData.autoAgvs.length>0&&this.mapData.autoAgvs.forEach(a=>{new Sh(this,Math.floor(a.x/32),Math.floor(a.y/32),a.endX/32,a.endY/32,this.graph)}),this.mapData.agents&&this.mapData.agents.length>0?(r=this.mapData.agents)==null||r.forEach(a=>{this.addAgent(a)}):this.agents.forEach(a=>{a.eliminate()}),Bt.emit(Vt.onClientLoadData,this.mapData),alert("\u0110\xE3 t\u1EA3i map th\xE0nh c\xF4ng!"))},f.readAsText(l.files[0])):alert("File kh\xF4ng \u0111\xFAng \u0111\u1ECBnh d\u1EA1ng. Vui l\xF2ng ch\u1ECDn file .json!")}};t.type="file",t.style.display="none",t.addEventListener("change",e,!1),document.body.appendChild(t),t.click(),document.body.removeChild(t)}readVadereData(t){const f=[],e=t.split(`
`),s=e[0].split(" ").filter(l=>l.trim()!=="");for(let l=1;l<e.length;l++){const n=e[l];if(n.trim()!==""){const o=n.split(" ").filter(r=>r.trim()!=="");if(o.length!==s.length)return alert("D\u1EEF li\u1EC7u kh\xF4ng \u0111\xFAng \u0111\u1ECBnh d\u1EA1ng! H\xE3y ki\u1EC3m tra d\xF2ng "+(l+1)),null;const h={};for(let r=0;r<o.length;r++)h[s[r]]=o[r];f.push(h)}}return f}handleClickLoadVadereButton(){const t=document.createElement("input"),f=new FileReader,e=s=>{var l=s.target,n="txt",o=!1;if(l.files&&l.files[0]){var h=l.files[0].name.split(".").pop().toLowerCase(),o=n.indexOf(h)>-1;o?(f.onload=()=>{if(typeof f.result=="string"){const a=this.readVadereData(f.result);if(a){const v=a.reduce((d,c)=>(d[c.pedestrianId]?d[c.pedestrianId].push(c):d[c.pedestrianId]=[c],d),{}),u=Object.entries(v).map(([d,c])=>({id:+d,startPos:{x:+c[0]["startX-PID1"],y:+c[0]["startY-PID1"]},endPos:{x:+c[c.length-1]["endX-PID1"],y:+c[c.length-1]["endY-PID1"]}}));dp(u)}}},f.readAsText(l.files[0])):alert("File kh\xF4ng \u0111\xFAng \u0111\u1ECBnh d\u1EA1ng. Vui l\xF2ng ch\u1ECDn file .txt!")}};t.type="file",t.style.display="none",t.addEventListener("change",e,!1),document.body.appendChild(t),t.click(),document.body.removeChild(t)}initMap(){this.map=this.make.tilemap({key:"hospital",tileHeight:32,tileWidth:32}),this.tileset=this.map.addTilesetImage("hospital","tiles"),this.noPathLayer=this.map.createLayer("nopath",this.tileset,0,0),this.groundLayer=this.map.createLayer("ground",this.tileset,0,0),this.roomLayer=this.map.createLayer("room",this.tileset,0,0),this.wallLayer=this.map.createLayer("wall",this.tileset,0,0),this.pathLayer=this.map.createLayer("path",this.tileset,0,0),this.doorLayer=this.map.createLayer("door",this.tileset,0,0),this.elevatorLayer=this.map.createLayer("elevator",this.tileset,0,0),this.gateLayer=this.map.createLayer("gate",this.tileset,0,0),this.bedLayer=this.map.createLayer("bed",this.tileset,0,0),this.noPathLayer.setCollisionByProperty({collides:!0}),this.roomLayer.setCollisionByProperty({collides:!0}),this.physics.world.setBounds(0,0,this.groundLayer.width,this.groundLayer.height),this.groundLayer.getTilesWithin().filter(t=>t.index!=-1).forEach(t=>{const f=new qe(t.x,t.y);this.groundPos.push(f)}),this.pathLayer.getTilesWithin().filter(t=>t.index!=-1).forEach(t=>{const f=new qe(t.x,t.y);this.pathPos.push(f)}),this.doorLayer.getTilesWithin().filter(t=>t.index!=-1).forEach(t=>{const f=new qe(t.x,t.y);this.doorPos.push(f)}),this.gateLayer.getTilesWithin().filter(t=>t.index!=-1).forEach(t=>{const f=new qe(t.x,t.y);this.doorPos.push(f)})}createRandomAutoAgv(){var f;let t=Math.floor(Math.random()*this.pathPos.length);for(;!yt.validDestination(this.pathPos[t].x,this.pathPos[t].y,1,13);)t=Math.floor(Math.random()*this.pathPos.length);if(this.graph){const e=new Sh(this,1,13,this.pathPos[t].x,this.pathPos[t].y,this.graph);this.timeTable&&e.writeDeadline(this.timeTable);const s=document.getElementById("des");if(s){for(;s.childNodes.length>=1;)s.firstChild&&s.removeChild(s.firstChild);s.appendChild(s.ownerDocument.createTextNode(((f=this.timeTable)==null?void 0:f.text)||""))}this.autoAgvs.add(e)}}get graph(){return $a==Ha.FRANSEN?this.spaceGraph:this.emergencyGraph}checkTilesUndirection(t,f){return t.x==f.x&&t.y==f.y+1&&(f.properties.direction=="top"||!f.properties.direction)||t.x+1==f.x&&t.y==f.y&&(f.properties.direction=="right"||!f.properties.direction)||t.x==f.x&&t.y+1==f.y&&(f.properties.direction=="bottom"||!f.properties.direction)||t.x==f.x+1&&t.y==f.y&&(f.properties.direction=="left"||!f.properties.direction)}checkTilesNeighbor(t,f){if(t.properties.direction){if(t.properties.direction=="top"&&t.x==f.x&&t.y==f.y+1||t.properties.direction=="right"&&t.x+1==f.x&&t.y==f.y||t.properties.direction=="bottom"&&t.x==f.x&&t.y+1==f.y||t.properties.direction=="left"&&t.x==f.x+1&&t.y==f.y)return!0}else if(this.checkTilesUndirection(t,f))return!0;return!1}initTileMap(){let t=[];this.pathLayer.getTilesWithin().filter(f=>f.index!=-1).forEach(f=>{t.push(f)});for(let f=0;f<t.length;f++)for(let e=0;e<t.length;e++)f!=e&&this.checkTilesNeighbor(t[f],t[e])&&this.listTile[t[f].x][t[f].y].push(new qe(t[e].x,t[e].y))}getAgentByID(t){const f=this.agents.findIndex(e=>e.getId()===t);return f===-1?null:this.agents[f]}getAgvById(t){let f=null;return this.autoAgvs.forEach(e=>e.getAgvID()===t?f=e:null),f}getRandomAgentEndPos(){const t=Math.floor(Math.random()*this.doorPos.length);return this.doorPos[t]}};let Ht=Ae;$(Ht,"AGV_START_X",1),$(Ht,"AGV_START_Y",14),$(Ht,"AUTO_AGV_START_Y",13),$(Ht,"AUTO_AGV_START_X",1),$(Ht,"EXIT_X",50),$(Ht,"EXIT_Y",[13,14]);class tt{constructor(i){this.scene=i,this.displayList=i.sys.displayList,this.updateList=i.sys.updateList,i.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(i,t){tt.prototype[i]=t}}var Mp=function(p){return p===void 0&&(p=Ap),this.getFrameNameCallback=p,this},Ap=function(p,i,t){return t==="__BASE"?`${p},${i}`:`${t}_${p},${i}`},Ra=function(p){var i,t,f;if(typeof p!="object"||p===null)return p;i=Array.isArray(p)?[]:{};for(f in p)t=p[f],i[f]=Ra(t);return i},Rp=function(p,i,t,f){Array.isArray(i)&&(f=t,t=i,i=void 0),i===void 0&&(i="__BASE"),t=Ra(t),f=Ra(f),this.textureKey=p,this.baseFrameName=i,this.columns.data=t,this.columns.count=t?t.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=f,this.rows.count=f?f.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var e=this.scene.sys.textures.get(p);if(!e)return this.clear(),this;if(!t||!f)return this.clear(),this;for(var s=e.frames[i],l=s.width,n=0,o=0,h=t.length;o<h;o++)t[o]===void 0?n++:typeof t[o]=="number"?l-=t[o]:l-=t[o].width;for(var r=l/n,a=s.height,v=0,o=0,h=f.length;o<h;o++)f[o]===void 0?v++:typeof f[o]=="number"?a-=f[o]:a-=f[o].width;for(var u=a/v,d,c,g,m,x,y=0,T=0,S=0,C=f.length;S<C;S++){f[S]===void 0&&(f[S]=u),typeof f[S]=="number"&&(f[S]={height:f[S],stretch:S%2}),d=f[S],g=d.height,this.rows.stretch+=d.stretch|0,this.rows.minHeight+=d.stretch>0?0:g,y=0;for(var o=0,E=t.length;o<E;o++){if(t[o]===void 0&&(t[o]=r),typeof t[o]=="number"&&(t[o]={width:t[o],stretch:o%2}),c=t[o],m=c.width,S===0&&(this.columns.stretch+=c.stretch|0,this.columns.minWidth+=c.stretch>0?0:m),m>=1&&g>=1){x=this.getFrameNameCallback(o,S,i);var P=typeof x;(P==="string"||P==="number")&&e.add(x,0,y+s.cutX,T+s.cutY,m,g)}y+=m}T+=g}return this.updateTexture(),this},Op=function(){if(this.clear(),this.textureKey===void 0)return this;var p=this.scene.sys.textures.get(this.textureKey);if(!p)return this;var i=this.columns.minWidth*this.maxFixedPartScaleX,t=this.rows.minHeight*this.maxFixedPartScaleY,f=this.width-i,e=this.height-t,s=f>=0?this.maxFixedPartScaleX:this.width/i,l=e>=0?this.maxFixedPartScaleY:this.height/t;if(this.preserveRatio){var n=Math.min(s,l);if(s>n){var o=(s-n)*i;f>=0?f+=o:f=o,s=n}if(l>n){var h=(l-n)*t;e>=0?e+=h:e=h,l=n}}this.columns.scale=s,this.rows.scale=l;var r;f>0?r=this.columns.stretch>0?f/this.columns.stretch:0:r=0;var a;e>0?a=this.rows.stretch>0?e/this.rows.stretch:0:a=0;for(var v,u,d,c,g,m=0,x=0,y,T=0,S=this.rows.count;T<S;T++){d=this.rows.data[T],g=d.stretch===0?d.height*l:a*d.stretch,m=0;for(var C=0,E=this.columns.count;C<E;C++)u=this.columns.data[C],c=u.stretch===0?u.width*s:r*u.stretch,v=this.getFrameNameCallback(C,T,this.baseFrameName),p.has(v)&&c>0&&g>0&&(d.stretch===0&&u.stretch===0||this.getStretchMode(C,T)===0?y=0:y=1,y===0?this._drawImage(this.textureKey,v,m,x,c,g):this._drawTileSprite(this.textureKey,v,m,x,c,g)),m+=c;x+=g}};const Lp=Phaser.Utils.Objects.IsPlainObject,Eh=Phaser.Utils.Objects.GetValue;var Fp=function(p){return Lp(p)?(this.stretchMode.edge=Cr(Eh(p,"edge",0)),this.stretchMode.internal=Cr(Eh(p,"internal",0))):(p=Cr(p),this.stretchMode.edge=p,this.stretchMode.internal=p),this},Cr=function(p){return typeof p=="string"&&(p=Ip[p]),p};const Ip={scale:0,repeat:1};var Dp=function(p,i){return p===0||p===this.columns.count-1||i===0||i===this.rows.count-1},Bp=function(p,i){return Dp.call(this,p,i)?this.stretchMode.edge:this.stretchMode.internal},wp=function(p){return p==null&&(p=!0),this.preserveRatio=p,this},Gp=function(p,i){return i===void 0&&(i=p),this.maxFixedPartScaleX=p,this.maxFixedPartScaleY=i,this},te=function(){},Np={_drawImage:te,_drawTileSprite:te,setGetFrameNameCallback:Mp,setTexture:Rp,updateTexture:Op,setStretchMode:Fp,getStretchMode:Bp,setPreserveRatio:wp,setMaxFixedPartScale:Gp};const ls=Phaser.Utils.Objects.IsPlainObject,pt=Phaser.Utils.Objects.GetValue;var If=function(p,i){class t extends p{constructor(e,s,l,n,o,h,r,a,v,u){ls(s)?(u=s,s=pt(u,"x",0),l=pt(u,"y",0),n=pt(u,"width",1),o=pt(u,"height",1),h=pt(u,"key",void 0),r=pt(u,"baseFrame",void 0),a=pt(u,"columns",void 0),v=pt(u,"rows",void 0)):ls(n)?(u=n,n=pt(u,"width",1),o=pt(u,"height",1),h=pt(u,"key",void 0),r=pt(u,"baseFrame",void 0),a=pt(u,"columns",void 0),v=pt(u,"rows",void 0)):ls(h)?(u=h,h=pt(u,"key",void 0),r=pt(u,"baseFrame",void 0),a=pt(u,"columns",void 0),v=pt(u,"rows",void 0)):ls(r)?(u=r,r=pt(u,"baseFrame",void 0),a=pt(u,"columns",void 0),v=pt(u,"rows",void 0)):Array.isArray(r)?(u=v,v=a,a=r,r=pt(u,"baseFrame",void 0)):ls(a)&&(u=a,a=pt(u,"columns",void 0),v=pt(u,"rows",void 0)),super(e),this.type=i,this.setPosition(s,l).setSize(n,o).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(pt(u,"getFrameNameCallback",void 0)),this.setStretchMode(pt(u,"stretchMode",0)),this.setPreserveRatio(pt(u,"preserveRatio",!0));var d=pt(u,"maxFixedPartScale",1),c=pt(u,"maxFixedPartScaleX",d),g=pt(u,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(c,g),this.setTexture(h,r,a,v)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(e,s){return this.width===e&&this.height===s?this:(super.resize(e,s),this.updateTexture(),this)}}return Object.assign(t.prototype,Np),t},Df=function(p,i,t){return t===void 0&&(t="image"),p[i]||(p[i]=p.scene.make[t]({add:!1,origin:{x:0,y:0}}),p.once("destroy",function(){p[i]&&(p[i].destroy(),p[i]=void 0)})),p[i]},bp=function(p,i,t,f,e,s){var l=Df(this,"_image","image").setTexture(p,i).setDisplaySize(e,s);this.draw(l,t,f)},Vp=function(p,i,t,f,e,s){var l=Df(this,"_tileSprite","tileSprite").setTexture(p,i).setSize(e,s);this.draw(l,t,f)},zp={_drawImage:bp,_drawTileSprite:Vp};const Yp=Phaser.GameObjects.RenderTexture;class ka extends If(Yp,"rexNinePatch"){}Object.assign(ka.prototype,zp);var Bf=function(p){return p==null||p===""||p.length===0},Up=function(p,i,t){var f=p;if(!Bf(i)){typeof i=="string"&&(i=i.split("."));for(var e,s=0,l=i.length;s<l;s++){if(e=i[s],f[e]==null||typeof f[e]!="object"){var n;s===l-1?t===void 0?n={}:n=t:n={},f[e]=n}f=f[e]}}return f},st=function(p,i,t){if(typeof p=="object"){if(Bf(i)){if(t==null)return;typeof t=="object"&&(p=t)}else{typeof i=="string"&&(i=i.split("."));var f=i.pop(),e=Up(p,i);e[f]=t}return p}};tt.register("ninePatch",function(p,i,t,f,e,s,l,n){var o=new ka(this.scene,p,i,t,f,e,s,l,n);return this.scene.add.existing(o),o});st(window,"RexPlugins.UI.NinePatch",ka);const Xp=Phaser.GameObjects.GetCalcMatrix;var Wp=function(p,i,t,f){var e=i.getRenderList();if(e.length!==0){t.addToRenderList(i);var s=p.pipelines.set(i.pipeline),l=i.frame.glTexture,n=s.setGameObject(i),o=t.roundPixels,h=Xp(i,t,f),r=s.calcMatrix.copyFrom(h.calc),a=i._displayOriginX,v=i._displayOriginY,u=t.alpha*i.alpha;p.pipelines.preBatch(i);for(var d=0,c=e.length;d<c;d++)e[d].webglRender(s,r,u,a,v,l,n,o);p.pipelines.postBatch(i)}};const Hp=Phaser.Renderer.Canvas.SetTransform;var $p=function(p,i,t,f){var e=p.currentContext,s=i.getRenderList();if(!(s.length===0||!Hp(p,e,i,t,f))){t.addToRenderList(i);var l=t.roundPixels,n=-i._displayOriginX,o=-i._displayOriginY;e.translate(n,o);for(var h=0,r=s.length;h<r;h++)s[h].canvasRender(e,n,o,l);e.restore()}},Kp={renderWebGL:Wp,renderCanvas:$p},wf=function(p,i){return this.texture=this.scene.sys.textures.get(p),this.frame=this.texture.get(i),this},Ph=function(p,i){if(this.width===p&&this.height===i)return this;this.width=p,this.height=i,this.updateDisplayOrigin();var t=this.input;return t&&!t.customHitArea&&(t.hitArea.width=p,t.hitArea.height=i),this},Jp=function(p){return this.lastAppendedChildren.length=0,Array.isArray(p)?(this.children.add(p),this.lastAppendedChildren.push(...p)):(this.children.add(p),this.lastAppendedChildren.push(p)),this};const Zp=Phaser.Utils.Array.Remove;var Qp=function(p){return this.poolManager&&this.poolManager.free(p),Zp(this.children.list,p),this.lastAppendedChildren.length=0,this.dirty=!0,this},Mh=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},kp=function(){return this.lastAppendedChildren},jp=function(){return this.children.list},qp={setTint(p){return this.tint=p,this.tintFill=!1,this},setTintFill(p){return this.tint=p,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}},Gf={setTexture:wf,resize:Ph,setSize:Ph,addChild:Jp,removeChild:Qp,removeChildren:Mh,clear:Mh,getLastAppendedChildren:kp,getChildren:jp};Object.assign(Gf,qp);class ti{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(i){return this.items.push(i),this}pushMultiple(i){return this.items.push.apply(this.items,i),i.length=0,this}clear(){return this.items.length=0,this}}const _p=Phaser.Utils.Objects.GetValue;var tg={};class eg{constructor(i){this.pools=_p(i,"pools",tg)}destroy(){this.pools=void 0}free(i){if(!this.pools)return this;var t=i.type;return this.pools.hasOwnProperty(t)||(this.pools[t]=new ti),this.pools[t].push(i),i.onFree(),this}freeMultiple(i){if(!this.pools)return this;for(var t=0,f=i.length;t<f;t++)this.free(i[t]);return this}allocate(i){return!this.pools||!this.pools.hasOwnProperty(i)?null:this.pools[i].pop()}}const ig=Phaser.GameObjects.GameObject,sg=Phaser.Utils.Objects.IsPlainObject,us=Phaser.Utils.Objects.GetValue,ng=Phaser.Structs.List,rg=Phaser.Utils.Array.StableSort;class Nf extends ig{constructor(i,t,f,e,s,l){sg(t)&&(l=t,t=us(l,"x",0),f=us(l,"y",0),e=us(l,"texture"),s=us(l,"frame")),t===void 0&&(t=0),f===void 0&&(f=0),super(i,"rexBlitter"),this.children=new ng,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var n=us(l,"reuseBob",!0);this.poolManager=n?new eg(l):void 0,this.setTexture(e,s).setPosition(t,f).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var i=!1,t=this.children.list,f=0,e=t.length;f<e;f++){var s=t[f];ag(s)&&(this.renderList.push(s),i||(i=s.depth!==0))}i&&rg(this.renderList,og),this.displayListDirty=!1}return this.renderList}}var ag=function(p){return p.active&&p.visible&&p.alpha>0},og=function(p,i){return p._depth-i._depth};const ye=Phaser.GameObjects.Components;Phaser.Class.mixin(Nf,[ye.Alpha,ye.BlendMode,ye.ComputedSize,ye.Depth,ye.GetBounds,ye.Mask,ye.Origin,ye.Pipeline,ye.ScrollFactor,ye.Transform,ye.Visible,Kp,Gf]);const bf="image";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var re=function(p,i,t){if(!p||typeof p=="number")return t;if(p.hasOwnProperty(i))return p[i];if(i.indexOf(".")!==-1){for(var f=i.split("."),e=p,s=t,l=0;l<f.length;l++)if(e.hasOwnProperty(f[l]))s=e[f[l]],e=e[f[l]];else{s=t;break}return s}else return t},ci=function(p){if(typeof p!="object"||p===null)return p;if(Array.isArray(p))p.length=0;else for(var i in p)delete p[i];return p},is=function(p,i){var t=Array.isArray(p);if(i===void 0?i=t?[]:{}:ci(i),t){i.length=p.length;for(var f=0,e=p.length;f<e;f++)i[f]=p[f]}else for(var s in p)i[s]=p[s];return i},Xn={enableData(){return this.data===void 0&&(this.data={}),this},getData(p,i){return this.enableData(),p===void 0?this.data:re(this.data,p,i)},setData(p,i){if(this.enableData(),arguments.length===1){var t=p;for(p in t)this.data[p]=t[p]}else this.data[p]=i;return this},incData(p,i,t){return t===void 0&&(t=0),this.enableData(),this.setData(p,this.getData(p,t)+i),this},mulData(p,i,t){return t===void 0&&(t=0),this.enableData(),this.setData(p,this.getData(p,t)*i),this},clearData(){return this.data&&ci(this.data),this}};class Vf{constructor(i,t){this.type=t,this.data=void 0,this.setParent(i).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(i){return this.parent=i,this}setDisplayListDirty(i){return i&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(i){this.setDisplayListDirty(this._active!=i),this._active=i}setActive(i){return i===void 0&&(i=!0),this.active=i,this}modifyPorperties(i){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}}Object.assign(Vf.prototype,Xn);const hg=Phaser.Math.DegToRad,lg=Phaser.Math.RadToDeg,Gi=Phaser.Utils.Objects.GetValue;class ug extends Vf{get visible(){return this._visible}set visible(i){this.setDisplayListDirty(this._visible!=i),this._visible=i}setVisible(i){return i===void 0&&(i=!0),this.visible=i,this}get alpha(){return this._alpha}set alpha(i){this.setDisplayListDirty(!!this._alpha!=!!i),this._alpha=i}setAlpha(i){return this.alpha=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setPosition(i,t){return this.x=i,this.y=t,this}setRotation(i){return this.rotation=i,this}get angle(){return lg(this.rotation)}set angle(i){this.rotation=hg(i)}setAngle(i){return this.angle=i,this}setScaleX(i){return this.scaleX=i,this}get width(){return this._width}set width(i){this._width=i}setWidth(i,t){return t===void 0&&(t=!1),this.width=i,t&&(this.scaleY=this.scaleX),this}setScaleY(i){return this.scaleY=i,this}setScale(i,t){return t===void 0&&(t=i),this.scaleX=i,this.scaleY=t,this}get height(){return this._height}set height(i){this._height=i}setHeight(i,t){return t===void 0&&(t=!1),this.height=i,t&&(this.scaleX=this.scaleY),this}setScale(i,t){return t===void 0&&(t=i),this.scaleX=i,this.scaleY=t,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(i){this.scaleX=i/this._width}setDisplayWidth(i,t){return t===void 0&&(t=!1),this.displayWidth=i,t&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(i){this.scaleY=i/this._height}setDisplayHeight(i,t){return t===void 0&&(t=!1),this.displayHeight=i,t&&(this.scaleX=this.scaleY),this}setOriginX(i){return this.originX=i,this._displayOriginX=this.width*i,this}setOriginY(i){return this.originY=i,this._displayOriginY=this.height*i,this}setOrigin(i,t){return t===void 0&&(t=i),this.setOriginX(i).setOriginY(t),this}get depth(){return this._depth}set depth(i){this.setDisplayListDirty(this._depth!=i),this._depth=i}setDepth(i){return i===void 0&&(i=0),this.depth=i,this}modifyPorperties(i){if(!i)return this;i.hasOwnProperty("x")&&this.setX(i.x),i.hasOwnProperty("y")&&this.setY(i.y),i.hasOwnProperty("rotation")?this.setRotation(i.rotation):i.hasOwnProperty("angle")&&this.setAngle(i.angle),i.hasOwnProperty("alpha")&&this.setAlpha(i.alpha);var t=Gi(i,"width",void 0),f=Gi(i,"height",void 0),e=Gi(i,"scale",void 0),s=Gi(i,"scaleX",e),l=Gi(i,"scaleY",e);t!==void 0?f===void 0&&l===void 0?this.setWidth(t,!0):this.setWidth(t):s!==void 0?this.setScaleX(s):i.hasOwnProperty("displayWidth")&&this.setDisplayWidth(i.displayWidth),f!==void 0?t===void 0&&s===void 0?this.setHeight(f,!0):this.setHeight(f):l!==void 0?this.setScaleY(l):i.hasOwnProperty("displayHeight")&&this.setDisplayHeight(i.displayHeight);var n=Gi(i,"origin",void 0);return n!==void 0?this.setOrigin(n):(i.hasOwnProperty("originX")&&this.setOriginX(i.originX),i.hasOwnProperty("originY")&&this.setOriginY(i.originY)),i.hasOwnProperty("depth")&&this.setDepth(i.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(i,t,f,e,s,l,n,o){}canvasRender(i,t,f,e){}}const fg=Phaser.GameObjects.Components.TransformMatrix,dg=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var Te=new fg,vg=function(p,i,t,f,e,s,l,n){var o=this._width,h=this._height,r=o*this.originX,a=h*this.originY,v=this.x-f,u=this.y-e,d=1,c=1;this.flipX&&(v+=o-r*2,d=-1),this.flipY&&(u+=h-a*2,c=-1),Te.applyITRS(v,u,this.rotation,this.scaleX*d,this.scaleY*c),i.multiply(Te,Te);var g=-r,m=-a,x=g+o,y=m+h,T=Te.getXRound(g,m,n),S=Te.getXRound(g,y,n),C=Te.getXRound(x,y,n),E=Te.getXRound(x,m,n),P=Te.getYRound(g,m,n),M=Te.getYRound(g,y,n),R=Te.getYRound(x,y,n),A=Te.getYRound(x,m,n),O=this.frame.u0,F=this.frame.v0,I=this.frame.u1,w=this.frame.v1,b=dg(this.tint,this.alpha*t);p.batchQuad(this.parent,T,P,S,M,C,R,E,A,O,F,I,w,b,b,b,b,this.tintFill,s,l)},cg=function(p,i,t,f){p.save();var e=this._width,s=this._height,l=e*this.originX,n=s*this.originY,o=this.x-l,h=this.y-n,r=1,a=1;this.flipX&&(o+=e,r=-1),this.flipY&&(h+=s,a=-1),f&&(o=Math.round(o),h=Math.round(h)),p.translate(o,h),p.rotate(this.rotation),p.scale(this.scaleX*r,this.scaleY*a);var v=this.frame;p.drawImage(v.source.image,v.cutX,v.cutY,e,s,0,0,e,s),p.restore()};const pg=Phaser.Utils.Objects.IsPlainObject;class zf extends ug{constructor(i,t){super(i,bf),this.setFrame(t)}get width(){return this._width}set width(i){}get height(){return this._height}set height(i){}setFrame(i){return arguments.length>0&&!pg(i)&&(i=this.parent.texture.get(i)),this.frame=i,this._width=i?i.width:0,this._height=i?i.height:0,this}setFlipX(i){return i===void 0&&(i=!0),this.flipX=i,this}setFlipY(i){return i===void 0&&(i=!0),this.flipY=i,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(i){this._tint=i}setTint(i){return this.tint=i,this.tintFill=!1,this}setTintFill(i){return this.tint=i,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(i){this._tintFill=i}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(i){return i?(i.hasOwnProperty("width")&&(i.displayWidth=i.width,delete i.width),i.hasOwnProperty("height")&&(i.displayHeight=i.height,delete i.height),i.hasOwnProperty("frame")&&this.setFrame(i.frame),super.modifyPorperties(i),i.hasOwnProperty("flipX")&&this.setFlipX(i.flipX),i.hasOwnProperty("flipY")&&this.setFlipY(i.flipY),i.hasOwnProperty("tint")&&this.setTint(i.tint),i.hasOwnProperty("tintFill")&&this.setTintFill(i.tintFill),this):this}}var gg={webglRender:vg,canvasRender:cg};Object.assign(zf.prototype,gg);var Yf=function(p,i){typeof i=="string"&&(i={frame:i});var t=p.poolManager?p.poolManager.allocate(bf):null;return t===null?t=new zf(p):t.setParent(p).setActive(),t.modifyPorperties(i),p.addChild(t),t},mg=function(p,i,t,f,e,s){Yf(this,{frame:i,x:t,y:f,width:e,height:s})},xg=function(p,i,t,f,e,s){var l=this.texture.get(i),n=l.width,o=l.height,h=Math.floor(e/n),r=Math.floor(s/o);t+=(e-h*n)/2,f+=(s-r*o)/2;for(var a=0;a<h;a++)for(var v=0;v<r;v++)Yf(this,{frame:i,x:t+a*n,y:f+v*o})},yg={_drawImage:mg,_drawTileSprite:xg};class ja extends If(Nf,"rexNinePatch2"){setTexture(i,t,f,e){return wf.call(this,i,"__BASE"),this.columns?(super.setTexture(i,t,f,e),this):this}}Object.assign(ja.prototype,yg);tt.register("ninePatch2",function(p,i,t,f,e,s,l,n){var o=new ja(this.scene,p,i,t,f,e,s,l,n);return this.scene.add.existing(o),o});st(window,"RexPlugins.UI.NinePatch2",ja);const li=Phaser.Utils.Objects.GetValue;class Uf{constructor(i,t,f,e,s){this.cornerRadius={},this._width=0,this._height=0,this.setTo(i,t,f,e,s)}setTo(i,t,f,e,s){return this.setPosition(i,t),this.setRadius(s),this.setSize(f,e),this}setPosition(i,t){return i===void 0&&(i=0),t===void 0&&(t=i),this.x=i,this.y=t,this}setRadius(i){return i===void 0&&(i=0),this.radius=i,this}setSize(i,t){return this.width=i,this.height=t,this}get minWidth(){var i=this.cornerRadius;return Math.max(i.tl.x+i.tr.x,i.bl.x+i.br.x)}get minHeight(){var i=this.cornerRadius;return Math.max(i.tl.y+i.bl.y,i.tr.y+i.br.y)}get width(){return this._width}set width(i){i==null&&(i=0),this._width=Math.max(i,this.minWidth)}get height(){return this._height}set height(i){i==null&&(i=0),this._height=Math.max(i,this.minHeight)}get radius(){var i=this.cornerRadius;return Math.max(i.tl.x,i.tl.y,i.tr.x,i.tr.y,i.bl.x,i.bl.y,i.br.x,i.br.y)}set radius(i){var t,f;typeof i=="number"?(t=i,f=i):(t=li(i,"x",0),f=li(i,"y",0));var e=this.cornerRadius;e.tl=Qs(li(i,"tl",void 0),t,f),e.tr=Qs(li(i,"tr",void 0),t,f),e.bl=Qs(li(i,"bl",void 0),t,f),e.br=Qs(li(i,"br",void 0),t,f)}get radiusTL(){var i=this.cornerRadius.tl;return Math.max(i.x,i.y)}set radiusTL(i){ks(this.cornerRadius.tl,i)}get radiusTR(){var i=this.cornerRadius.tr;return Math.max(i.x,i.y)}set radiusTR(i){ks(this.cornerRadius.tr,i)}get radiusBL(){var i=this.cornerRadius.bl;return Math.max(i.x,i.y)}set radiusBL(i){ks(this.cornerRadius.bl,i)}get radiusBR(){var i=this.cornerRadius.br;return Math.max(i.x,i.y)}set radiusBR(i){ks(this.cornerRadius.br,i)}}var Qs=function(p,i,t){return p===void 0?{x:i,y:t}:typeof p=="number"?{x:p,y:p}:p},ks=function(p,i){typeof i=="number"?(p.x=i,p.y=i):(p.x=li(i,"x",0),p.y=li(i,"y",0))},qi=function(p,i,t){var f=t.length;if(f>=2){var e=t[f-2],s=t[f-1];if(p===e&&i===s)return t}return t.push(p,i),t};const Ah=Phaser.Math.DegToRad;var _i=function(p,i,t,f,e,s,l,n,o){l&&s>e?s-=360:!l&&s<e&&(s+=360);var h=s-e,r=Ah(h)/n;e=Ah(e);for(var a=0;a<=n;a++){var v=e+r*a,u=p+t*Math.cos(v),d=i+f*Math.sin(v);qi(u,d,o)}return o},Tg=Phaser.Renderer.WebGL.Utils,Xf=function(p,i,t,f,e,s){for(var l=Tg.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*f),n=t.pathData,o=t.pathIndexes,h=0;h<o.length;h+=3){var r=o[h]*2,a=o[h+1]*2,v=o[h+2]*2,u=n[r+0]-e,d=n[r+1]-s,c=n[a+0]-e,g=n[a+1]-s,m=n[v+0]-e,x=n[v+1]-s,y=i.getX(u,d),T=i.getY(u,d),S=i.getX(c,g),C=i.getY(c,g),E=i.getX(m,x),P=i.getY(m,x);p.batchTri(t,y,T,S,C,E,P,0,0,1,1,l,l,l,2)}},Sg=Phaser.Renderer.WebGL.Utils,Wn=function(p,i,t,f,e){var s=p.strokeTint,l=Sg.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*t);s.TL=l,s.TR=l,s.BL=l,s.BR=l;var n=i.pathData,o=n.length-1,h=i.lineWidth,r=h/2,a=n[0]-f,v=n[1]-e;i.closePath||(o-=2);for(var u=2;u<o;u+=2){var d=n[u]-f,c=n[u+1]-e;p.batchLine(a,v,d,c,r,r,h,u-2,i.closePath?u===o-1:!1),a=d,v=c}};const Cg=Phaser.GameObjects.GetCalcMatrix;var Eg=function(p,i,t,f){i.dirty&&(i.updateData(),i.dirty=!1),t.addToRenderList(i);var e=p.pipelines.set(i.pipeline),s=Cg(i,t,f),l=e.calcMatrix.copyFrom(s.calc),n=i._displayOriginX,o=i._displayOriginY,h=t.alpha*i.alpha;p.pipelines.preBatch(i),i.isFilled&&Xf(e,l,i,h,n,o),i.isStroked&&Wn(e,i,h,n,o),p.pipelines.postBatch(i)},Bs=function(p,i,t,f){var e=t||i.fillColor,s=f||i.fillAlpha,l=(e&16711680)>>>16,n=(e&65280)>>>8,o=e&255;p.fillStyle="rgba("+l+","+n+","+o+","+s+")"},ws=function(p,i,t,f){var e=t||i.strokeColor,s=f||i.strokeAlpha,l=(e&16711680)>>>16,n=(e&65280)>>>8,o=e&255;p.strokeStyle="rgba("+l+","+n+","+o+","+s+")",p.lineWidth=i.lineWidth};const Pg=Phaser.Renderer.Canvas.SetTransform;var Mg=function(p,i,t,f){i.dirty&&(i.updateData(),i.dirty=!1),t.addToRenderList(i);var e=p.currentContext;if(Pg(p,e,i,t,f)){var s=i._displayOriginX,l=i._displayOriginY,n=i.pathData,o=n.length-1,h=n[0]-s,r=n[1]-l;e.beginPath(),e.moveTo(h,r),i.closePath||(o-=2);for(var a=2;a<o;a+=2){var v=n[a]-s,u=n[a+1]-l;e.lineTo(v,u)}e.closePath(),i.isFilled&&(Bs(e,i),e.fill()),i.isStroked&&(ws(e,i),e.stroke()),e.restore()}},Ag={renderWebGL:Eg,renderCanvas:Mg};const Rg=Phaser.GameObjects.Shape,Rh=Phaser.Utils.Objects.GetValue,Og=Phaser.Geom.Polygon.Earcut;class qa extends Rg{constructor(i,t,f,e,s,l,n,o){t===void 0&&(t=0),f===void 0&&(f=0);var h=new Uf;super(i,"rexRoundRectangleShape",h);var r=Rh(l,"radius",l);h.setTo(0,0,e,s,r);var a=Rh(l,"iteration",void 0);this.setIteration(a),this.setPosition(t,f),n!==void 0&&this.setFillStyle(n,o),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var i=this.geom,t=this.pathData;t.length=0;var f=i.cornerRadius,e,s=this.iteration+1;if(e=f.br,js(e)){var l=i.width-e.x,n=i.height-e.y;_i(l,n,e.x,e.y,0,90,!1,s,t)}else qi(i.width,i.height,t);if(e=f.bl,js(e)){var l=e.x,n=i.height-e.y;_i(l,n,e.x,e.y,90,180,!1,s,t)}else qi(0,i.height,t);if(e=f.tl,js(e)){var l=e.x,n=e.y;_i(l,n,e.x,e.y,180,270,!1,s,t)}else qi(0,0,t);if(e=f.tr,js(e)){var l=i.width-e.x,n=e.y;_i(l,n,e.x,e.y,270,360,!1,s,t)}else qi(i.width,0,t);return t.push(t[0],t[1]),this.pathIndexes=Og(t),this}get width(){return this.geom.width}set width(i){this.resize(i,this.height)}get height(){return this.geom.height}set height(i){this.resize(this.width,i)}setSize(i,t){if(t===void 0&&(t=i),this.geom.width===i&&this.geom.height===t)return this;this.geom.setSize(i,t),this.updateDisplayOrigin(),this.dirty=!0;var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=i,f.hitArea.height=t),this}resize(i,t){return this.setSize(i,t),this}get iteration(){return this._iteration}set iteration(i){if(this._iteration===void 0){this._iteration=i;return}this._iteration!==i&&(this._iteration=i,this.dirty=!0)}setIteration(i){return i===void 0&&(i=6),this.iteration=i,this}get radius(){return this.geom.radius}set radius(i){this.geom.setRadius(i),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(i){this.geom.radiusTL=i,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(i){this.geom.radiusTR=i,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(i){this.geom.radiusBL=i,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(i){this.geom.radiusBR=i,this.dirty=!0}setRadius(i){return i===void 0&&(i=0),this.radius=i,this}setRadiusTL(i){return i===void 0&&(i=0),this.radiusTL=i,this}setRadiusTR(i){return i===void 0&&(i=0),this.radiusTR=i,this}setRadiusBL(i){return i===void 0&&(i=0),this.radiuBL=i,this}setRadiusBR(i){return i===void 0&&(i=0),this.radiusBR=i,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(i){this.radius=i}setCornerRadius(i){return this.setRadius(i)}}var js=function(p){return p.x!==0&&p.y!==0};Object.assign(qa.prototype,Ag);tt.register("roundRectangle",function(p,i,t,f,e,s,l){var n=new qa(this.scene,p,i,t,f,e,s,l);return this.scene.add.existing(n),n});st(window,"RexPlugins.UI.RoundRectangle",qa);const Lg=Phaser.Renderer.WebGL.Utils;var Fg=function(p,i,t,f){if(i.dirty&&(i.updateTexture(),i.dirty=!1),!(i.width===0||i.height===0)){t.addToRenderList(i);var e=i.frame,s=e.width,l=e.height,n=Lg.getTintAppendFloatAlpha,o=p.pipelines.set(i.pipeline,i),h=o.setTexture2D(e.glTexture,i);p.pipelines.preBatch(i),o.batchTexture(i,e.glTexture,s,l,i.x,i.y,s/i.resolution,l/i.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,s,l,n(i.tintTopLeft,t.alpha*i._alphaTL),n(i.tintTopRight,t.alpha*i._alphaTR),n(i.tintBottomLeft,t.alpha*i._alphaBL),n(i.tintBottomRight,t.alpha*i._alphaBR),i.tintFill,0,0,t,f,!1,h),p.pipelines.postBatch(i)}},Ig=function(p,i,t,f){i.dirty&&(i.updateTexture(),i.dirty=!1),!(i.width===0||i.height===0)&&(t.addToRenderList(i),p.batchSprite(i,i.frame,t,f))},Dg={renderWebGL:Fg,renderCanvas:Ig};const Bg=Phaser.Display.Color;var wg={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(p){return this.context.fillStyle=p,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(p,i){var t=this,f=new Image;return f.onload=function(){t.width!==f.width||t.height!==f.height?t.resize(f.width,f.height):t.clear(),t.context.drawImage(f,0,0),t.updateTexture(),i&&i(),f.onload=null,f.src="",f.remove()},f.src=p,this},loadFromURLPromise(p){var i=this;return new Promise(function(t,f){i.loadFromURL(p,t)})},getDataURL(p,i){return this.canvas.toDataURL(p,i)},getPixel(p,i,t){t===void 0&&(t=new Bg);var f=this.context.getImageData(p,i,1,1);return t.setTo(f.data[0],f.data[1],f.data[2],f.data[3]),t},setPixel(p,i,t,f,e,s){if(typeof t!="number"){var l=t;t=l.red,f=l.green,e=l.blue,s=l.alpha}s===void 0&&(s=t!==0||f!==0||e!==0?255:0);var n=this.context.createImageData(1,1);return n.data[0]=t,n.data[1]=f,n.data[2]=e,n.data[3]=s,this.context.putImageData(n,p,i),this.dirty=!0,this}},Wf=function(p,i,t,f,e,s,l){var n=p.sys.textures,o=p.renderer;f===void 0&&(f=0),e===void 0&&(e=0),s===void 0&&(s=i.width),l===void 0&&(l=i.height);var h;n.exists(t)?h=n.get(t):h=n.createCanvas(t,s,l);var r=h.getSourceImage();r.width!==s&&(r.width=s),r.height!==l&&(r.height=l);var a=r.getContext("2d");a.clearRect(0,0,s,l),a.drawImage(i,f,e,s,l),o.gl&&h&&o.canvasToTexture(r,h.source[0].glTexture,!0,0)},Gg={updateTexture(p,i){p&&(i?p.call(i,this.canvas,this.context):p(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var t=this.input;return t&&!t.customHitArea&&(t.hitArea.width=this.width,t.hitArea.height=this.height),this},generateTexture(p,i,t,f,e){var s=this.canvas;return f===void 0?f=s.width:f*=this.resolution,e===void 0?e=s.height:e*=this.resolution,Wf(this.scene,s,p,i,t,f,e),this},loadTexture(p,i){var t=this.scene.sys.textures.getFrame(p,i);return t?(this.width!==t.cutWidth||this.height!==t.cutHeight?this.setSize(t.cutWidth,t.cutHeight):this.clear(),this.context.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this):this}};const Oh=Phaser.Display.Canvas.CanvasPool,Ng=Phaser.GameObjects.GameObject;class xi extends Ng{constructor(i,t,f,e,s){t===void 0&&(t=0),f===void 0&&(f=0),e===void 0&&(e=1),s===void 0&&(s=1),super(i,"rexCanvas"),this.renderer=i.sys.game.renderer,this.resolution=1,this._width=e,this._height=s,e=Math.max(Math.ceil(e*this.resolution),1),s=Math.max(Math.ceil(s*this.resolution),1),this.canvas=Oh.create(this,e,s),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(t,f),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=i.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0,i.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),Oh.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(i){this.setSize(i,this._height)}get height(){return this._height}set height(i){this.setSize(this._width,i)}setSize(i,t){return this._width===i&&this._height===t?this:(this._width=i,this._height=t,this.updateDisplayOrigin(),i=Math.max(Math.ceil(i*this.resolution),1),t=Math.max(Math.ceil(t*this.resolution),1),this.canvas.width=i,this.canvas.height=t,this.frame.setSize(i,t),this.dirty=!0,this)}get displayWidth(){return this.scaleX*this._width}set displayWidth(i){this.scaleX=i/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(i){this.scaleY=i/this._height}setDisplaySize(i,t){return this.displayWidth=i,this.displayHeight=t,this}getCanvas(i){return i||(this.dirty=!0),this.canvas}getContext(i){return i||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(i,t){return this.setSize(i,t),this}}const ee=Phaser.GameObjects.Components;Phaser.Class.mixin(xi,[ee.Alpha,ee.BlendMode,ee.Crop,ee.Depth,ee.Flip,ee.GetBounds,ee.Mask,ee.Origin,ee.Pipeline,ee.ScrollFactor,ee.Tint,ee.Transform,ee.Visible,Dg,wg,Gg]);const bg=Phaser.Utils.String.Pad;var lt=function(p,i,t){if(p==null)return p;switch(typeof p){case"string":return p;case"number":return`#${bg(Math.floor(p).toString(16),6,"0",1)}`;case"function":return p(i,t);case"object":return p.hasOwnProperty("r")?p.hasOwnProperty("a")?`rgba(${p.r},${p.g},${p.b},${p.a})`:`rgb(${p.r},${p.g},${p.b})`:p.hasOwnProperty("h")?p.hasOwnProperty("a")?`hsla(${p.h},${p.s},${p.l},${p.a})`:`hsl(${p.h},${p.s},${p.l})`:p;default:return p}};const Hn=Phaser.Math.DegToRad,Lh=Hn(0),Fh=Hn(90),Ih=Hn(180),Dh=Hn(270);var Hf=function(p,i,t,f,e,s,l){var n=new Uf(i,t,f,e,s),o=n.minWidth,h=n.minHeight,r=f>=o?1:f/o,a=e>=h?1:e/h,v=n.cornerRadius,u,d,c,g,m;p.save(),p.beginPath(),p.translate(i,t),u=v.br,d=u.x*r,c=u.y*a,g=f-d,m=e-c,p.moveTo(f,m),d>0&&c>0?qs(p,g,m,d,c,Lh,Fh,l):(p.lineTo(f,e),p.lineTo(g,e)),u=v.bl,d=u.x*r,c=u.y*a,g=d,m=e-c,p.lineTo(d,e),d>0&&c>0?qs(p,g,m,d,c,Fh,Ih,l):(p.lineTo(0,e),p.lineTo(0,m)),u=v.tl,d=u.x*r,c=u.y*a,g=d,m=c,p.lineTo(0,m),d>0&&c>0?qs(p,g,m,d,c,Ih,Dh,l):(p.lineTo(0,0),p.lineTo(g,0)),u=v.tr,d=u.x*r,c=u.y*a,g=f-d,m=c,p.lineTo(g,0),d>0&&c>0?qs(p,g,m,d,c,Dh,Lh,l):(p.lineTo(f,0),p.lineTo(f,m)),p.closePath(),p.restore()},qs=function(p,i,t,f,e,s,l,n){if(n==null)p.ellipse(i,t,f,e,0,s,l);else{n+=1;for(var o,h,r,a=(l-s)/n,v=0;v<=n;v++)r=s+a*v,o=i+f*Math.cos(r),h=t+e*Math.sin(r),p.lineTo(o,h)}},Vg=function(p,i,t,f,e,s,l,n,o,h,r,a,v){if(Hf(i,t,f,e,s,l,v),n!=null){if(r!=null){var u;a?u=i.createLinearGradient(0,0,e,0):u=i.createLinearGradient(0,0,0,s),u.addColorStop(0,n),u.addColorStop(1,r),n=u}i.fillStyle=n,i.fill()}o!=null&&h>0&&(i.strokeStyle=o,i.lineWidth=h,i.stroke())},_a=function(p,i,t,f,e,s,l,n){if(!(i==null&&t==null)){var o=p.canvas.width,h=p.canvas.height;t==null&&(f=0);var r=f/2;o-=f,h-=f,Vg(p.canvas,p.context,r,r,o,h,e,i,t,f,s,l,n)}},zg=function(){_a(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const Bh=Phaser.Utils.Objects.GetValue;class $f extends xi{constructor(i,t,f,e,s,l,n,o,h,r,a){super(i,t,f,e,s),this.type="rexRoundRectangleCanvas";var v=Bh(l,"radius",l),u=Bh(l,"iteration",void 0);this.setRadius(v),this.setIteration(u),this.setFillStyle(n,r,a),this.setStrokeStyle(o,h)}get radius(){return this._radius}set radius(i){this.dirty|=this._radius!=i,this._radius=i}setRadius(i){return this.radius=i,this}get iteration(){return this._iteration}set iteration(i){this.dirty|=this._iteration!=i,this._iteration=i}setIteration(i){return this.iteration=i,this}get fillStyle(){return this._fillStyle}set fillStyle(i){i=lt(i,this.canvas,this.context),this.dirty|=this._fillStyle!=i,this._fillStyle=i}get fillColor2(){return this._fillColor2}set fillColor2(i){i=lt(i,this.canvas,this.context),this.dirty|=this._fillColor2!=i,this._fillColor2=i}get isHorizontalGradient(){return this._fillStyle}set isHorizontalGradient(i){this.dirty|=this._isHorizontalGradient!=i,this._isHorizontalGradient=i}setFillStyle(i,t,f){return f===void 0&&(f=!0),this.fillStyle=i,this.fillColor2=t,this.isHorizontalGradient=f,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(i){i=lt(i,this.canvas,this.context),this.dirty|=this._strokeStyle!=i,this._strokeStyle=i}get lineWidth(){return this._lineWidth}set lineWidth(i){this.dirty|=this._lineWidth!=i,this._lineWidth=i}setStrokeStyle(i,t){return this.strokeStyle=i,this.lineWidth=t,this}updateTexture(){return this.clear(),zg.call(this),super.updateTexture(),this}}tt.register("roundRectangleCanvas",function(p,i,t,f,e,s,l,n,o,h){var r=new $f(this.scene,p,i,t,f,e,s,l,n,o,h);return this.scene.add.existing(r),r});st(window,"RexPlugins.UI.RoundRectangleCanvas",$f);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Yg=Phaser.Renderer.WebGL.Utils,Ug=function(p,i,t,f){if(!(i.width===0||i.height===0)){t.addToRenderList(i);var e=i.frame,s=e.width,l=e.height,n=Yg.getTintAppendFloatAlpha,o=p.pipelines.set(i.pipeline,i),h=o.setTexture2D(e.glTexture,i);p.pipelines.preBatch(i),o.batchTexture(i,e.glTexture,s,l,i.x,i.y,s/i.style.resolution,l/i.style.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,s,l,n(i.tintTopLeft,t.alpha*i._alphaTL),n(i.tintTopRight,t.alpha*i._alphaTR),n(i.tintBottomLeft,t.alpha*i._alphaBL),n(i.tintBottomRight,t.alpha*i._alphaBR),i.tintFill,0,0,t,f,!1,h),p.pipelines.postBatch(i)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Xg=function(p,i,t,f){i.width===0||i.height===0||(t.addToRenderList(i),p.batchSprite(i,i.frame,t,f))},Wg={renderWebGL:Ug,renderCanvas:Xg};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const _s=Phaser.Display.Canvas.CanvasPool;var wh=function(p){var i=_s.create(this),t=i.getContext("2d");p.syncFont(i,t);var f=t.measureText(p.testString);if("actualBoundingBoxAscent"in f){var e=f.actualBoundingBoxAscent,s=f.actualBoundingBoxDescent,h={ascent:e,descent:s,fontSize:e+s};return _s.remove(i),h}var l=Math.ceil(f.width*p.baselineX),n=l,o=2*n;n=n*p.baselineY|0,i.width=l,i.height=o,t.fillStyle="#f00",t.fillRect(0,0,l,o),t.font=p._font,t.textBaseline="alphabetic",t.fillStyle="#000",t.fillText(p.testString,0,n);var h={ascent:0,descent:0,fontSize:0};if(!t.getImageData(0,0,l,o))return h.ascent=n,h.descent=n+6,h.fontSize=h.ascent+h.descent,_s.remove(i),h;var r=t.getImageData(0,0,l,o).data,a=r.length,v=l*4,u,d,c=0,g=!1;for(u=0;u<n;u++){for(d=0;d<v;d+=4)if(r[c+d]!==255){g=!0;break}if(!g)c+=v;else break}for(h.ascent=n-u,c=a-v,g=!1,u=o;u>n;u--){for(d=0;d<v;d+=4)if(r[c+d]!==255){g=!0;break}if(!g)c-=v;else break}return h.descent=u-n,h.fontSize=h.ascent+h.descent,_s.remove(i),h},Ot={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const Hg=Phaser.Utils.Objects.GetAdvancedValue,Qt=Phaser.Utils.Objects.GetValue;var Er={backgroundColor:["backgroundColor",null,lt],backgroundColor2:["backgroundColor2",null,lt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,lt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",lt],stroke:["stroke","#fff",lt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",lt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",lt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};class to{constructor(i,t){this.parent=i,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(t,!1,!0);var f=Qt(t,"metrics",!1);f?this.metrics={ascent:Qt(f,"ascent",0),descent:Qt(f,"descent",0),fontSize:Qt(f,"fontSize",0)}:this.metrics=wh(this)}get canvas(){return this.parent.canvasText.canvas}get context(){return this.parent.canvasText.context}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Ot.NO_WRAP&&this.wrapWidth===0}setStyle(i,t,f){if(t===void 0&&(t=!0),f===void 0&&(f=!1),i&&i.hasOwnProperty("wrap")){var e=i.wrap;if(e.hasOwnProperty("mode")){var s=e.mode;typeof s=="string"&&(e.mode=Gh[s])}else e.hasOwnProperty("width")&&(e.mode=1)}i&&i.rtl&&f&&!i.hasOwnProperty("halign")&&(i.halign="right"),i&&i.hasOwnProperty("fontSize")&&typeof i.fontSize=="number"&&(i.fontSize=i.fontSize.toString()+"px");for(var l in Er){var n=Er[l],o=n[0],h=f?n[1]:this[l],r=n[2];if(l==="wrapCallback"||l==="wrapCallbackScope")this[l]=Qt(i,o,h);else{var a=Hg(i,o,h);r&&(a=r(a)),this[l]=a}}var v=Qt(i,"font",null);v===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=v;var u=Qt(i,"fill",null);u!==null&&(this.color=lt(u));var d=Qt(i,"images",void 0);return d&&this.parent.addImage(d),t?this.update(!0):this.parent}syncFont(i,t){t.font=this._font}syncStyle(i,t){t.textBaseline="alphabetic",t.fillStyle=this.color,t.strokeStyle=this.stroke,t.lineWidth=this.strokeThickness,t.lineCap="round",t.lineJoin="round"}syncShadow(i,t){t?(i.shadowOffsetX=this.shadowOffsetX,i.shadowOffsetY=this.shadowOffsetY,i.shadowColor=this.shadowColor,i.shadowBlur=this.shadowBlur):(i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowColor=0,i.shadowBlur=0)}update(i){return i&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=wh(this)),this.parent.updateText(i)}buildFont(){var i=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return i!==this._font&&(this._font=i),this}setFont(i){return typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=Qt(i,"fontFamily","Courier"),this.fontSize=Qt(i,"fontSize","16px"),this.fontStyle=Qt(i,"fontStyle","")),this.update(!0)}setFontFamily(i){return this.fontFamily=i,this.update(!0)}setFontStyle(i){return this.fontStyle=i,this.update(!0)}setFontSize(i){return typeof i=="number"&&(i=i.toString()+"px"),this.fontSize=i,this.update(!0)}setTestString(i){return this.testString=i,this.update(!0)}setFixedSize(i,t){return this.fixedWidth=i,this.fixedHeight=t,i&&(this.parent.width=i),t&&(this.parent.height=t),this.update(this.isWrapFitMode)}setResolution(i){return this.resolution=i,this.update(!1)}setLineSpacing(i){return this.lineSpacing=i,this.update(!1)}setXOffset(i){return this.xOffset=i,this.update(!1)}setBackgroundColor(i,t,f){return f===void 0&&(f=!0),this.backgroundColor=lt(i,this.canvas,this.context),this.backgroundColor2=lt(t,this.canvas,this.context),this.backgroundHorizontalGradient=f,this.update(!1)}setBackgroundStrokeColor(i,t){return this.backgroundStrokeColor=lt(i,this.canvas,this.context),this.backgroundStrokeLineWidth=t,this.update(!1)}setBackgroundCornerRadius(i,t){return this.backgroundCornerRadius=i,this.backgroundCornerIteration=t,this.update(!1)}setFill(i){return this.color=lt(i,this.canvas,this.context),this.update(!1)}setColor(i){return this.color=lt(i,this.canvas,this.context),this.update(!1)}setStroke(i,t){return i===void 0?this.strokeThickness=0:(t===void 0&&(t=this.strokeThickness),this.stroke=lt(i,this.canvas,this.context),this.strokeThickness=t),this.update(!0)}setShadow(i,t,f,e,s,l){return i===void 0&&(i=0),t===void 0&&(t=0),f===void 0&&(f="#000"),e===void 0&&(e=0),s===void 0&&(s=!1),l===void 0&&(l=!0),this.shadowOffsetX=i,this.shadowOffsetY=t,this.shadowColor=lt(f,this.canvas,this.context),this.shadowBlur=e,this.shadowStroke=s,this.shadowFill=l,this.update(!1)}setShadowOffset(i,t){return i===void 0&&(i=0),t===void 0&&(t=i),this.shadowOffsetX=i,this.shadowOffsetY=t,this.update(!1)}setShadowColor(i){return i===void 0&&(i="#000"),this.shadowColor=lt(i,this.canvas,this.context),this.update(!1)}setShadowBlur(i){return i===void 0&&(i=0),this.shadowBlur=i,this.update(!1)}setShadowStroke(i){return this.shadowStroke=i,this.update(!1)}setShadowFill(i){return this.shadowFill=i,this.update(!1)}setUnderline(i,t,f){return i===void 0&&(i="#000"),t===void 0&&(t=0),f===void 0&&(f=0),this.underlineColor=lt(i,this.canvas,this.context),this.underlineThickness=t,this.underlineOffset=f,this.update(!1)}setUnderlineColor(i){return i===void 0&&(i="#000"),this.underlineColor=lt(i,this.canvas,this.context),this.update(!1)}setUnderlineThickness(i){return i===void 0&&(i=0),this.underlineThickness=i,this.update(!1)}setUnderlineOffset(i){return i===void 0&&(i=0),this.underlineOffset=i,this.update(!1)}setWrapMode(i){return typeof i=="string"&&(i=Gh[i.toLowerCase()]||0),this.wrapMode=i,this.update(!0)}setWrapWidth(i){return this.wrapWidth=i,this.update(!1)}setAlign(i,t){return i===void 0&&(i="left"),t===void 0&&(t="top"),this.halign=i,this.valign=t,this.update(!1)}setHAlign(i){return i===void 0&&(i="left"),this.halign=i,this.update(!1)}setVAlign(i){return i===void 0&&(i="top"),this.valign=i,this.update(!1)}setMaxLines(i){return i===void 0&&(i=0),this.maxLines=i,this.update(!1)}getTextMetrics(){var i=this.metrics;return{ascent:i.ascent,descent:i.descent,fontSize:i.fontSize}}setTextMetrics(i,t){return this.metrics.ascent=i.ascent,this.metrics.descent=i.descent,this.metrics.fontSize=i.fontSize,typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=Qt(t,"fontFamily",this.fontFamily),this.fontSize=Qt(t,"fontSize",this.fontSize),this.fontStyle=Qt(t,"fontStyle",this.fontStyle)),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var i={};for(var t in Er)i[t]=this[t];return i.metrics=this.getTextMetrics(),i}destroy(){this.parent=void 0}}const Gh={none:Ot.NO_WRAP,word:Ot.WORD_WRAP,char:Ot.CHAR_WRAP,character:Ot.CHAR_WRAP},Pr=Phaser.Display.Canvas.CanvasPool;var $g=function(p,i,t){t===void 0&&(t={});var f=Pr.create(this),e=f.getContext("2d");p.syncFont(f,e);var s=e.measureText(i),l=Math.ceil(s.width*p.baselineX),n=l,o=2*n;if(n=n*p.baselineY|0,f.width=l,f.height=o,e.fillStyle="#f00",e.fillRect(0,0,l,o),e.font=p._font,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(p.testString,0,n),t.left=0,l===0||o===0||!e.getImageData(0,0,l,o))return Pr.remove(f),t;for(var h=e.getImageData(0,0,l,o).data,r=!1,a=0;a<l;a++){for(var v=0;v<o;v++){var u=(v*l+a)*4;if(h[u]!==255){t.left=a,r=!0;break}}if(r)break}return Pr.remove(f),t},Kg={draw(p,i,t,f){var e=this.penManager;this.hitAreaManager.clear();var s=this.context;s.save();var l=this.defaultStyle;this.clear(),_a(this,l.backgroundColor,l.backgroundStrokeColor,l.backgroundStrokeLineWidth,l.backgroundCornerRadius,l.backgroundColor2,l.backgroundHorizontalGradient,l.backgroundCornerIteration),p+=this.startXOffset,i+=this.startYOffset;var n=l.halign,o=l.valign,h,r=l.lineHeight,a=e.lines,v=a.length,u=l.maxLines,d,c,g;u>0&&v>u?(d=u,o==="center"?c=Math.floor((v-d)/2):o==="bottom"?c=v-d:c=0):(d=v,c=0),g=c+d;var m,x,y=this.rtl,T=y?this.parent.width:void 0;o==="center"?x=Math.max((f-d*r)/2,0):o==="bottom"?x=Math.max(f-d*r-2,0):x=0,x+=i;for(var S=c;S<g;S++)if(h=e.getLineWidth(S),h!==0){for(var C=a[S],E=C.length,P=n,M=0;M<E;M++){var R=C[M].prop.align;if(R!==void 0){P=R;break}}P==="center"?m=(t-h)/2:P==="right"?m=y?0:t-h:m=y?t-h:0,m+=p;for(var M=0;M<E;M++)this.drawPen(C[M],m,x,T)}s.restore()},drawPen(p,i,t,f){i+=p.x,t+=p.y+(p.prop.y||0),f!==void 0&&(i=f-i);var e=this.canvas,s=this.context;s.save();var l=this.parser.propToContextStyle(this.defaultStyle,p.prop);l.buildFont(),l.syncFont(e,s),l.syncStyle(e,s),l.underlineThickness>0&&p.width>0&&this.drawUnderline(i,t,p.width,l),p.isTextPen&&this.drawText(i,t,p.text,l),p.isImagePen&&this.drawImage(i,t,p.prop.img,l),s.restore(),p.hasAreaMarker&&p.width>0&&this.hitAreaManager.add(p.prop.area,i,t-this.startYOffset,p.width,this.defaultStyle.lineHeight)},clear(){var p=this.canvas;this.context.clearRect(0,0,p.width,p.height)},drawUnderline(p,i,t,f){i+=f.underlineOffset-f.underlineThickness/2,this.autoRound&&(p=Math.round(p),i=Math.round(i));var e=this.context,s=e.lineCap;e.lineCap="butt",e.strokeStyle=f.underlineColor,e.lineWidth=f.underlineThickness,e.beginPath(),e.moveTo(p,i),e.lineTo(p+t,i),e.stroke(),e.lineCap=s},drawText(p,i,t,f){this.autoRound&&(p=Math.round(p),i=Math.round(i));var e=this.context;f.stroke&&f.stroke!=="none"&&f.strokeThickness>0&&(f.syncShadow(e,f.shadowStroke),e.strokeText(t,p,i)),f.color&&f.color!=="none"&&(f.syncShadow(e,f.shadowFill),e.fillText(t,p,i))},drawImage(p,i,t,f){i-=this.startYOffset,this.parent.imageManager.draw(t,this.context,p,i,this.autoRound)}};const Ci=Phaser.Utils.Objects.GetValue,Jg=Ot.NO_NEWLINE,Nh=Ot.RAW_NEWLINE;class Zg{constructor(i){this.prop={},this.resetFromJSON(i)}resetFromJSON(i){this.text=Ci(i,"text",""),this.x=Ci(i,"x",0),this.y=Ci(i,"y",0),this.width=Ci(i,"width",0);var t=Ci(i,"prop",null);t===null&&(t={}),this.prop=t,this.newLineMode=Ci(i,"newLineMode",0),this.startIndex=Ci(i,"startIndex",0)}get plainText(){var i=this.text;return this.newLineMode===Nh&&(i+=`
`),i}get wrapText(){var i=this.text;return this.newLineMode!==Jg&&(i+=`
`),i}get rawTextLength(){var i=this.text.length;return this.newLineMode===Nh&&(i+=1),i}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}const tn=Phaser.Utils.Objects.GetFastValue,bh=Ot.NO_NEWLINE,Qg=Ot.WRAPPED_NEWLINE;var kg=new ti,jg=new ti;class eo{constructor(i){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=tn(i,"pensPool",kg),this.LinesPool=tn(i,"linesPool",jg),this.tagToText=tn(i,"tagToText",te),this.tagToTextScope=tn(i,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var i=0,t=this.lines.length;i<t;i++)this.lines[i].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(i,t,f,e,s,l){var n=this.PensPool.pop();return n==null&&(n=new Zg),Ei.text=i,Ei.x=t,Ei.y=f,Ei.width=e,Ei.prop=s,Ei.newLineMode=l,n.resetFromJSON(Ei),this.addPen(n),this}addImagePen(i,t,f,e){return this.addTextPen("",i,t,f,e,bh),this}addNewLinePen(){var i=this.lastPen,t=i?i.lastX:0,f=i?i.y:0,e=i?is(i.prop):null;return this.addTextPen("",t,f,0,e,Qg),this}addPen(i){var t=this.lastPen;t==null?i.startIndex=0:i.startIndex=t.endIndex,this.pens.push(i);var f=this.lastLine;f==null&&(f=this.LinesPool.pop()||[],this.lines.push(f)),f.push(i),i.newLineMode!==bh&&(f=this.LinesPool.pop()||[],this.lines.push(f)),this.maxLinesWidth=void 0}clone(i){i==null&&(i=new eo),i.clear();for(var t=0,f=this.lines.length;t<f;t++)for(var e=this.lines[t],s=0,l=e.length;s<l;s++){var n=e[s];i.addPen(n.text,n.x,n.y,n.width,is(n.prop),n.newLineMode)}return i}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(i){if(i>=this.lines.length)return this.getLineEndIndex(i);var t=this.lines[i];return t&&t[0]?t[0].startIndex:0}getLineEndIndex(i){i>=this.lines.length&&(i=this.lines.length-1);var t,f=!1,e;for(t=i;t>=0&&(e=this.lines[t],f=e!=null&&e.length>0,!f);t--);if(!f)return 0;var s=e[e.length-1];return s.endIndex}getLineWidth(i){var t=this.lines[i];if(!t)return 0;var f=t[t.length-1];if(f==null)return 0;var e=f.lastX;return e}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var i,t=0,f=0,e=this.lines.length;f<e;f++)i=this.getLineWidth(f),i>t&&(t=i);return this.maxLinesWidth=t,t}getLineWidths(){for(var i=[],t=0,f=this.lines.length;t<f;t++)i.push(this.getLineWidth(t));return i}get linesCount(){return this.lines.length}get plainText(){for(var i="",t=this.pens,f=0,e=t.length;f<e;f++)i+=t[f].plainText;return i}get rawTextLength(){for(var i=0,t=this.pens,f=0,e=this.pens.length;f<e;f++)i+=t[f].rawTextLength;return i}getSliceTagText(i,t,f){if(i===void 0&&(i=0),t===void 0){var e=this.lastPen;if(e==null)return"";t=e.endIndex}f===void 0&&(f=!1);for(var s="",l,n,o,h,r,a,v,u=0,d=this.pens.length;u<d&&(l=this.pens[u],h=l.endIndex,!(!(h<=i)&&(l=this.pens[u],n=f?l.wrapText:l.plainText,a=l.prop,o=l.startIndex,r=o>=i&&h<=t,r||(n=n.substring(i-o,t-o)),this.tagToTextScope?s+=this.tagToText.call(this.tagToTextScope,n,a,v):s+=this.tagToText(n,a,v),v=a,h>=t)));u++);return s}get length(){return this.lines.length}set length(i){this.clear()}}var Ei={};const qg=Phaser.Geom.Rectangle;var Vh=new ti;class _g{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return Vh.pushMultiple(this.hitAreas),this}add(i,t,f,e,s){var l=Vh.pop();return l===null?l=new qg(t,f,e,s):l.setTo(t,f,e,s),l.key=i,this.hitAreas.push(l),this}getFirst(i,t){for(var f=0,e=this.hitAreas.length;f<e;f++){var s=this.hitAreas[f];if(s.contains(i,t))return s}return null}drawBounds(i,t,f){t===void 0&&(t=16777215),f&&i.save().scaleCanvas(f.scaleX,f.scaleY).rotateCanvas(f.rotation).translateCanvas(f.x,f.y);for(var e=0,s=this.hitAreas.length;e<s;e++){var l=this.hitAreas[e];i.lineStyle(1,t).strokeRect(l.x,l.y,l.width,l.height)}return f&&i.restore(),this}}var tm=function(){this.parent.on("pointerdown",em,this).on("pointerup",im,this).on("pointermove",Mr,this).on("pointerover",Mr,this).on("pointerout",function(p,i){Mr.call(this,p,null,null,i)},this)},em=function(p,i,t,f){var e=this.hitAreaManager.getFirst(i,t);e!==null&&Rs.call(this,"areadown",e.key,p,i,t)},im=function(p,i,t,f){var e=this.hitAreaManager.getFirst(i,t);e!==null&&Rs.call(this,"areaup",e.key,p,i,t)},Mr=function(p,i,t,f){if(i===null){this.lastHitAreaKey!==null&&Rs.call(this,"areaout",this.lastHitAreaKey,p),this.lastHitAreaKey=null;return}var e=this.hitAreaManager.getFirst(i,t),s=e?e.key:null;this.lastHitAreaKey!==s&&(this.lastHitAreaKey!==null&&Rs.call(this,"areaout",this.lastHitAreaKey,p),s!==null&&Rs.call(this,"areaover",s,p,i,t),this.lastHitAreaKey=s)},Rs=function(p,i,t,f,e){this.parent.emit(`${p}-${i}`,t,f,e),this.parent.emit(p,i,t,f,e)},io=new ti,sm=function(p){!p||io.push(p)},nm=function(p){!p||io.pushMultiple(p)},Ii=function(p,i,t){var f=io.pop();return f===null&&(f={}),f.text=p,f.width=i,f.newLineMode=t,f};const rm=Ot.NO_NEWLINE,am=Ot.RAW_NEWLINE,Ar=Ot.WRAPPED_NEWLINE,zh=Ot.NO_WRAP,om=Ot.WORD_WRAP,hm=Ot.CHAR_WRAP,lm=Ot.SPLITREGEXP;var Kf=function(p,i,t,f,e){f<=0&&(t=zh);var s=[];if(!p||!p.length)return s;for(var l=t===zh,n=t===om,o=p.split(lm),h,r,a,v=0,u=o.length;v<u;v++){if(h=o[v],a=v===u-1?rm:am,l){var d=i(h);s.push(Ii(h,d,a));continue}if(r=v===0?f-e:f,h.length<=100){var d=i(h);if(d<=r){s.push(Ii(h,d,a));continue}}var c,g;n?(c=h.split(" "),g=c[c.length-1]==="",g&&(c.length-=1)):c=h;for(var m,x,y,T="",S=0,C,E=n?i(" "):void 0,P=0,M=c.length;P<M;P++){if(m=c[P],x=i(m),y=P===M-1,n&&(!y||g)&&(m+=" ",x+=E),n&&x>f){T!==""?s.push(Ii(T,S,Ar)):P===0&&e>0&&s.push(Ii("",0,Ar)),s.push(...Kf(m,i,hm,f,0));var R=s.pop();T=R.text,S=R.width,sm(R),T===" "&&(T="",S=0);continue}C=S+x,C>r?(s.push(Ii(T,S,Ar)),T=m,S=x,r=f):(T+=m,S=C),y&&s.push(Ii(T,S,a))}}return s};const en=Phaser.Utils.Objects.GetValue,um=Ot.NO_WRAP,fm=Ot.NO_NEWLINE;class Jf{constructor(i){this.parent=i.parent,this.context=en(i,"context",null),this.canvas=this.context.canvas,this.parser=en(i,"parser",null),this.defaultStyle=en(i,"style",null),this.autoRound=!0,this.pensPool=en(i,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new _g,this.lastHitAreaKey=null;var t=this.context;this.getTextWidth=function(f){return t.measureText(f).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(i,t,f,e,s){if(s===void 0&&(s=this.penManager),s.clear(),i==="")return s;var l=this.parent.style;if(l.isWrapFitMode){var n=this.parent.padding;f=l.fixedWidth-n.left-n.right}for(var o=this.canvas,h=this.context,r=function(I){return h.measureText(I).width},a=0,v=0,u=l.wrapCallback,d=l.wrapCallbackScope,c=!0,g,m,x,y=this.parser.splitText(i),T,S,C=0,E=y.length;C<E;C++)if(T=this.parser.tagTextToProp(y[C],m),g=T.plainText,m=T.prop,m.img){var P=this.imageManager.getOuterWidth(m.img);f>0&&t!==um&&f<a+P&&(s.addNewLinePen(),v+=e,a=0),s.addImagePen(a,v,P,is(m)),a+=P}else if(g!==""){if(h.save(),x=this.parser.propToContextStyle(this.defaultStyle,m),x.buildFont(),x.syncFont(o,h),x.syncStyle(o,h),!u)S=Kf(g,r,t,f,a);else{S=u.call(d,g,r,f,a),typeof S=="string"&&(S=S.split(`
`));for(var A,M=0,R=S.length;M<R;M++)A=S[M],typeof A=="string"?S[M]=Ii(A,r(A),M<R-1?2:0):c=!1}for(var A,M=0,R=S.length;M<R;M++)A=S[M],s.addTextPen(A.text,a,v,A.width,is(m),A.newLineMode),A.newLineMode!==fm?(a=0,v+=e):a+=A.width;c&&nm(S),S=null,h.restore()}for(var C=0,E=this.lines.length;C<E;C++){var O=this.lines[C],F=O[O.length-1];F&&(F.width+=this.parser.getStrokeThinkness(this.defaultStyle,F.prop))}return s}get startXOffset(){var i=this.defaultStyle;return i.strokeThickness/2+i.xOffset}get startYOffset(){var i=this.defaultStyle;return i.strokeThickness/2+i.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var i=this.penManager.linesCount,t=this.defaultStyle.maxLines;return t>0&&i>t&&(i=t),i}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var i=this.desplayLinesCount,t=this.defaultStyle.lineHeight*i;return i>0&&(t-=this.defaultStyle.lineSpacing),t}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new eo({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(i,t,f){var e;if(i==null)e=this.penManager.plainText;else{var s=this.parser.splitText(i,1);e="";for(var l=0,n=s.length;l<n;l++)e+=s[l]}return(t!=null||f!=null)&&(t==null&&(t=0),f==null&&(f=e.length),e=e.substring(t,f)),e}getPenManager(i,t){if(i===void 0)return this.copyPenManager(t,this.penManager);t===void 0&&(t=this.newPenManager());var f=this.defaultStyle;return this.updatePenManager(i,f.wrapMode,f.wrapWidth,f.lineHeight,t),t}getText(i,t,f,e){if(i==null)return this.penManager.getSliceTagText(t,f,e);var s=this.tmpPenManager,l=this.defaultStyle;return this.updatePenManager(i,l.wrapMode,l.wrapWidth,l.lineHeight,s),s.getSliceTagText(t,f,e)}copyPenManager(i,t){return t===void 0&&(t=this.penManager),t.copy(i)}getTextWidth(i){return i===void 0&&(i=this.penManager),i.getMaxLineWidth()}getLastPen(i){return i===void 0&&(i=this.penManager),i.lastPen}}var dm={setInteractive:tm};Object.assign(Jf.prototype,Kg,dm);const Rr=Phaser.Utils.Objects.GetValue;var Or=function(p,i){i===void 0&&(i={key:p}),i.hasOwnProperty("key")||(i.key=p);var t=i.key,f=i.frame,e=i.width,s=i.height;if(e===void 0||s===void 0){var l=this.textureManager.getFrame(t,f),n=l?l.cutWidth:0,o=l?l.cutHeight:0;e===void 0&&s===void 0?(e=n,s=o):e===void 0?e=n*(s/o):s===void 0&&(s=o*(e/n))}this.images[p]={key:t,frame:f,width:e,height:s,y:Rr(i,"y",0),left:Rr(i,"left",0),right:Rr(i,"right",0)}},vm=function(p,i,t,f,e){var s=this.get(p);t+=s.left,f+=s.y,e&&(t=Math.round(t),f=Math.round(f));var l=this.textureManager.getFrame(s.key,s.frame);i.drawImage(l.source.image,l.cutX,l.cutY,l.cutWidth,l.cutHeight,t,f,s.width,s.height)};class so{constructor(i){this.textureManager=i.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(i,t){if(typeof i=="string")Or.call(this,i,t);else if(Array.isArray(i))for(var f=i,e=0,s=f.length;e<s;e++)Or.call(this,f[e]);else{var f=i;for(var i in f)Or.call(this,i,f[i])}return this}has(i){return this.images.hasOwnProperty(i)}remove(i){return this.has(i)&&delete this.images[i],this}get(i){return this.has(i)||this.textureManager.exists(i)&&this.add(i),this.images[i]}getOuterWidth(i){var t=this.get(i);return t?t.width+t.left+t.right:0}getFrame(i){var t=this.get(i);return t?this.textureManager.getFrame(t.key,t.frame):void 0}hasTexture(i){return!!this.getFrame(i)}}var cm={draw:vm};Object.assign(so.prototype,cm);const pm=Phaser.Utils.Objects.IsPlainObject,gm=Phaser.DOM.AddToDOM,Yh=Phaser.Display.Canvas.CanvasPool,Uh=Phaser.GameObjects.GameObject,Oe=Phaser.Utils.Objects.GetValue,mm=Phaser.DOM.RemoveFromDOM,xm=Ot.SPLITREGEXP;var Lr={};class no extends Uh{constructor(i,t,f,e,s,l,n){if(pm(t)){var o=t;t=Oe(o,"x",0),f=Oe(o,"y",0),e=Oe(o,"text",""),s=Oe(o,"style","")}if(t===void 0&&(t=0),f===void 0&&(f=0),super(i,l),this.renderer=i.sys.game.renderer,this.setPosition(t,f),this.setOrigin(0,0),this.initPipeline(),this.canvas=Yh.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,s){if(s.hasOwnProperty("align")){var h=s.align;delete s.align,s.halign=h}s.hasOwnProperty("stroke")&&!s.hasOwnProperty("strokeThickness")&&(s.strokeThickness=1)}this.style=new to(this,s),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=i.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),Lr.hasOwnProperty(l)||(Lr[l]=new ti),this.canvasText=new Jf({parent:this,context:this.context,parser:n,style:this.style,pensPool:Lr[l]}),this.parser=n,this.initRTL(),s&&s.padding&&this.setPadding(s.padding),this.setText(e),i.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&mm(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),Yh.remove(this.canvas),this.texture.destroy()}set text(i){this.setText(i)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",gm(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(i){return i==null?i="":Array.isArray(i)?i=i.join(`
`):i=i.toString(),i===this._text?this:(this._text=i,this.updateText(),this)}appendText(i){return i==null?this:(Array.isArray(i)&&(i=i.join(`
`)),this.setText(this.text+i.toString()),this)}setStyle(i){return this.style.setStyle(i)}setFont(i){return this.style.setFont(i)}setFontFamily(i){return this.style.setFontFamily(i)}setFontSize(i){return this.style.setFontSize(i)}setFontStyle(i){return this.style.setFontStyle(i)}setTestString(i){return this.style.setTestString(i)}setFixedSize(i,t){return this.style.setFixedSize(i,t)}setBackgroundColor(i,t,f){return this.style.setBackgroundColor(i,t,f)}setBackgroundStrokeColor(i,t){return this.style.setBackgroundStrokeColor(i,t)}setBackgroundCornerRadius(i,t){return this.style.setBackgroundCornerRadius(i,t)}setFill(i){return this.style.setFill(i)}setColor(i){return this.style.setColor(i)}setStroke(i,t){return this.style.setStroke(i,t)}setShadow(i,t,f,e,s,l){return this.style.setShadow(i,t,f,e,s,l)}setShadowOffset(i,t){return this.style.setShadowOffset(i,t)}setShadowColor(i){return this.style.setShadowColor(i)}setShadowBlur(i){return this.style.setShadowBlur(i)}setShadowStroke(i){return this.style.setShadowStroke(i)}setShadowFill(i){return this.style.setShadowFill(i)}setWrapMode(i){return this.style.setWrapMode(i)}setWrapWidth(i){return this.style.setWrapWidth(i)}setWordWrapWidth(i){return this.style.setWrapWidth(i)}setAlign(i){return this.style.setHAlign(i)}setHAlign(i){return this.style.setHAlign(i)}setVAlign(i){return this.style.setVAlign(i)}setLineSpacing(i){return this.style.setLineSpacing(i)}setXOffset(i){return this.style.setXOffset(i)}setPadding(i,t,f,e){if(typeof i=="object"){var s=i,l=Oe(s,"x",null);l!==null?(i=l,f=l):(i=Oe(s,"left",0),f=Oe(s,"right",i));var n=Oe(s,"y",null);n!==null?(t=n,e=n):(t=Oe(s,"top",0),e=Oe(s,"bottom",t))}else i===void 0&&(i=0),t===void 0&&(t=i),f===void 0&&(f=i),e===void 0&&(e=t);return this.padding.left=i,this.padding.top=t,this.padding.right=f,this.padding.bottom=e,this.updateText(!1)}setMaxLines(i){return this.style.setMaxLines(i)}setResolution(i){return this.style.setResolution(i)}updateText(i){i===void 0&&(i=!0);var t=this.canvasText,f=this.style;i&&t.updatePenManager(this._text,f.wrapMode,f.wrapWidth,f.lineHeight);var e=this.padding,s,l,n=Math.ceil(t.linesWidth);f.fixedWidth===0?(this.width=n+e.left+e.right,s=n):(this.width=f.fixedWidth,s=this.width-e.left-e.right,s<n&&(s=n)),f.fixedHeight===0?(this.height=t.linesHeight+e.top+e.bottom,l=t.linesHeight):(this.height=f.fixedHeight,l=this.height-e.top-e.bottom,l<t.linesHeight&&(l=t.linesHeight));var o=this.width,h=this.height;this.updateDisplayOrigin();var r=f.resolution;o*=r,h*=r,o=Math.max(Math.ceil(o),1),h=Math.max(Math.ceil(h),1);var a=this.canvas,v=this.context;a.width!==o||a.height!==h?(a.width=o,a.height=h,this.frame.setSize(o,h)):v.clearRect(0,0,o,h),v.save(),v.scale(r,r);var u=this.style.rtl?e.right:e.left,d=e.top;t.draw(u,d,s,l),v.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(a,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=this.width,c.hitArea.height=this.height),this}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(i,t){return this.style.setTextMetrics(i,t)}toJSON(){var i=Wt.ToJSON(this),t={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return i.data=t,i}setInteractive(i,t,f){var e=!!this.input;return Uh.prototype.setInteractive.call(this,i,t,f),e||this.canvasText.setInteractive(),this}getWrappedText(i,t,f){return i=this.canvasText.getText(i,t,f,!0),i.split(xm)}getPlainText(i,t,f){return this.canvasText.getPlainText(i,t,f)}getText(i,t,f,e){return e===void 0&&(e=!1),this.canvasText.getText(i,t,f,e)}getSubString(i,t,f){return this.getText(i,t,f)}copyPenManager(i){return this.canvasText.copyPenManager(i)}getPenManager(i,t){return this.canvasText.getPenManager(i,t)}setSize(i,t){return this.setFixedSize(i,t)}resize(i,t){return this.setFixedSize(i,t)}set lineSpacing(i){this.setLineSpacing(i)}get lineSpacing(){return this.style.lineSpacing}get imageManager(){return this._imageManager||(this._imageManager=new so(this.scene)),this._imageManager}addImage(i,t){return this.imageManager.add(i,t),this}drawAreaBounds(i,t){return this.canvasText.hitAreaManager.drawBounds(i,t,this),this}measureTextMargins(i,t){return $g(this.style,i,t)}generateTexture(i,t,f,e,s){var l=this.canvas;return e===void 0?e=l.width:e*=this.resolution,s===void 0?s=l.height:s*=this.resolution,Wf(this.scene,l,i,t,f,e,s),this}}const Wt=Phaser.GameObjects.Components;Phaser.Class.mixin(no,[Wt.Alpha,Wt.BlendMode,Wt.ComputedSize,Wt.Crop,Wt.Depth,Wt.Flip,Wt.GetBounds,Wt.Mask,Wt.Origin,Wt.Pipeline,Wt.ScrollFactor,Wt.Tint,Wt.Transform,Wt.Visible,Wg]);var $t=function(p,i){return i===void 0?`\\[${p}\\]`:`\\[${p}=(${i})\\]`},oe=function(p){return`\\[/${p}\\]`};const Zf="[-.0-9]+",ro="[a-z]+|#[0-9abcdef]+",ao="[^\\]]+",Qf="esc",kf=$t(Qf),jf=oe(Qf),qf="raw",_f=$t(qf),td=oe(qf),ed="b",id=$t(ed),sd=oe(ed),nd="i",rd=$t(nd),ad=oe(nd),od="size",hd=$t(od,Zf),ld=oe(od),ud="color",fd=$t(ud,ro),dd=oe(ud),oo="u",vd=$t(oo),cd=$t(oo,ro),pd=oe(oo),gd="shadow",md=$t(gd),xd=oe(gd),ho="stroke",yd=$t(ho),Td=$t(ho,ro),Sd=oe(ho),Cd="y",Ed=$t(Cd,Zf),Pd=oe(Cd),Md="img",Ad=$t(Md,ao),Rd=oe(Md),Od="area",Ld=$t(Od,ao),Fd=oe(Od),Id="align",Dd=$t(Id,ao),Bd=oe(Id),wd=new RegExp(kf,"i"),Oa=new RegExp(jf,"i"),Gd=new RegExp(_f,"i"),La=new RegExp(td,"i"),ym=new RegExp(id,"i"),Tm=new RegExp(sd,"i"),Sm=new RegExp(rd,"i"),Cm=new RegExp(ad,"i"),Xh=new RegExp(hd,"i"),Em=new RegExp(ld,"i"),Wh=new RegExp(fd,"i"),Pm=new RegExp(dd,"i"),Mm=new RegExp(vd,"i"),Hh=new RegExp(cd,"i"),Am=new RegExp(pd,"i"),Rm=new RegExp(md,"i"),Om=new RegExp(xd,"i"),Lm=new RegExp(yd,"i"),$h=new RegExp(Td,"i"),Fm=new RegExp(Sd,"i"),Kh=new RegExp(Ed,"i"),Im=new RegExp(Pd,"i"),Jh=new RegExp(Ad,"i"),Dm=new RegExp(Rd,"i"),Zh=new RegExp(Ld,"i"),Bm=new RegExp(Fd,"i"),Qh=new RegExp(Dd,"i"),wm=new RegExp(Bd,"i"),Fr=new RegExp([_f,td,kf,jf,id,sd,rd,ad,hd,ld,fd,dd,vd,cd,pd,md,xd,yd,Td,Sd,Ed,Pd,Ad,Rd,Ld,Fd,Dd,Bd].join("|"),"ig");var Gm=function(p,i){for(var t=[],f=0,e=!1,s=!1;;){var l=Fr.exec(p);if(!l)break;var n=l[0];if(s)if(Oa.test(n))s=!1;else continue;else if(e)if(La.test(n))e=!1;else continue;else wd.test(n)?s=!0:Gd.test(n)&&(e=!0);var o=Fr.lastIndex-n.length;if(f<o){var h=p.substring(f,o);t.push(h)}i===void 0&&t.push(n),f=Fr.lastIndex}var r=p.length;return f<r&&t.push(p.substring(f,r)),t};const wt=!1,bt=!0;var Nm={plainText:null,prevProp:null},bm=function(p,i){i==null&&(i={});var t="";if(i.img&&vt(i,wt,"img"),i.esc)Oa.test(p)?vt(i,wt,"esc"):t=p;else if(i.raw)La.test(p)?vt(i,wt,"raw"):t=p;else if(wd.test(p))vt(i,bt,"esc",!0);else if(Oa.test(p))vt(i,wt,"esc");else if(Gd.test(p))vt(i,bt,"raw",!0);else if(La.test(p))vt(i,wt,"raw");else if(ym.test(p))vt(i,bt,"b",!0);else if(Tm.test(p))vt(i,wt,"b");else if(Sm.test(p))vt(i,bt,"i",!0);else if(Cm.test(p))vt(i,wt,"i");else if(Xh.test(p)){var f=p.match(Xh);vt(i,bt,"size",`${f[1]}px`)}else if(Em.test(p))vt(i,wt,"size");else if(Wh.test(p)){var f=p.match(Wh);vt(i,bt,"color",f[1])}else if(Pm.test(p))vt(i,wt,"color");else if(Mm.test(p))vt(i,bt,"u",!0);else if(Hh.test(p)){var f=p.match(Hh);vt(i,bt,"u",f[1])}else if(Am.test(p))vt(i,wt,"u");else if(Rm.test(p))vt(i,bt,"shadow",!0);else if(Om.test(p))vt(i,wt,"shadow");else if(Lm.test(p))vt(i,bt,"stroke",!0);else if($h.test(p)){var f=p.match($h);vt(i,bt,"stroke",f[1])}else if(Fm.test(p))vt(i,wt,"stroke");else if(Kh.test(p)){var f=p.match(Kh);vt(i,bt,"y",parseFloat(f[1]))}else if(Im.test(p))vt(i,wt,"y");else if(Jh.test(p)){var f=p.match(Jh);vt(i,bt,"img",f[1])}else if(Dm.test(p))vt(i,wt,"img");else if(Zh.test(p)){var f=p.match(Zh);vt(i,bt,"area",f[1])}else if(Bm.test(p))vt(i,wt,"area");else if(Qh.test(p)){var f=p.match(Qh);vt(i,bt,"align",f[1])}else wm.test(p)?vt(i,wt,"align"):t=p;var e=Nm;return e.plainText=t,e.prop=i,e},vt=function(p,i,t,f){return i===bt?p[t]=f:p.hasOwnProperty(t)&&delete p[t],p},Vm=function(p,i){var t=Ym;if(i.hasOwnProperty("img"))t.image=i.img;else{if(t.image=null,i.hasOwnProperty("family")?t.fontFamily=i.family:t.fontFamily=p.fontFamily,i.hasOwnProperty("size")){var f=i.size;typeof f=="number"&&(f=`${f}px`),t.fontSize=f}else t.fontSize=p.fontSize;t.fontStyle=zm(i.b,i.i),i.hasOwnProperty("color")?t.color=i.color:t.color=p.color,i.hasOwnProperty("stroke")?i.stroke===!0?(t.stroke=p.stroke,t.strokeThickness=p.strokeThickness):(t.stroke=i.stroke,t.strokeThickness=p.strokeThickness):(t.stroke=p.stroke,t.strokeThickness=0)}return i.hasOwnProperty("shadow")?i.shadow===!0?(t.shadowColor=p.shadowColor,t.shadowOffsetX=p.shadowOffsetX,t.shadowOffsetY=p.shadowOffsetY,t.shadowBlur=p.shadowBlur,t.shadowStroke=!0,t.shadowFill=!0):(t.shadowColor=i.shadow,t.shadowOffsetX=p.shadowOffsetX,t.shadowOffsetY=p.shadowOffsetY,t.shadowBlur=p.shadowBlur,t.shadowStroke=!0,t.shadowFill=!0):(t.shadowColor="#000",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowStroke=!1,t.shadowFill=!1),i.hasOwnProperty("u")?i.u===!0?(t.underlineColor=p.underlineColor,t.underlineThickness=p.underlineThickness,t.underlineOffset=p.underlineOffset):(t.underlineColor=i.u,t.underlineThickness=p.underlineThickness,t.underlineOffset=p.underlineOffset):(t.underlineColor="#000",t.underlineThickness=0,t.underlineOffset=0),t},zm=function(p,i){return p&&i?"bold italic":p?"bold":i?"italic":""},Ym=new to,Um=function(p,i,t){t==null&&(t=Xm);var f=[];for(var e in t)i.hasOwnProperty(e)||f.push(`[/${e}]`);for(var e in i){var s=i[e];if(t[e]!==s)switch(e){case"size":f.push(`[size=${s.replace("px","")}]`);break;case"color":case"stroke":case"y":case"img":case"area":case"align":f.push(`[${e}=${s}]`);break;case"u":s===!0?f.push("[u]"):f.push(`[u=${s}]`);break;default:f.push(`[${e}]`);break}}return f.push(p),f.join("")},Xm={};class Nd{getStrokeThinkness(i,t){var f;return t.hasOwnProperty("stroke")?f=i.strokeThickness:f=0,f}}var Wm={splitText:Gm,tagTextToProp:bm,propToContextStyle:Vm,propToTagText:Um};Object.assign(Nd.prototype,Wm);class bd extends no{constructor(i,t,f,e,s){var l=new Nd(s);super(i,t,f,e,s,"rexBBCodeText",l)}}tt.register("BBCodeText",function(p,i,t,f){var e=new bd(this.scene,p,i,t,f);return this.scene.add.existing(e),e});st(window,"RexPlugins.UI.BBCodeText",bd);var Hm={plainText:null,prevProp:null},$m=new to;class Km{constructor(i){i===void 0&&(i={}),this.tags=i}addTag(i,t){this.tags[i]=t}getTag(i){return this.tags[i]}splitText(i,t){for(var f=[],e=0;;){var s=Ir.exec(i);if(!s)break;var l=s[0],n=Ir.lastIndex-l.length;if(e<n&&f.push(i.substring(e,n)),t===void 0)f.push(l);else if(t===1){if(jh.test(l)){var o=l.match(qh);f.push(o[2])}else if(_h.test(l)){var o=l.match(tl);f.push(o[2])}}e=Ir.lastIndex}var h=i.length;return e<h&&f.push(i.substring(e,h)),f}tagTextToProp(i,t){var f,e;if(jh.test(i)){var s=i.match(qh);if(s!=null){var l=s[1],n=this.tags;n.hasOwnProperty(l)?e=n[l]:e={},e._class=l,f=s[2]}}else if(_h.test(i)){var s=i.match(tl);if(s!=null){var o=s[1];e=Jm(o),e._style=o,f=s[2]}}f==null&&(f=i),e==null&&(e={});var h=Hm;return h.plainText=f,h.prop=e,h}propToContextStyle(i,t){var f=$m;if(t.hasOwnProperty("img"))f.image=t.img;else{if(f.image=null,t.hasOwnProperty("family")||t.hasOwnProperty("fontFamily")||t.hasOwnProperty("font-family")){var e=t.hasOwnProperty("family")?t.family:t.hasOwnProperty("fontFamily")?t.fontFamily:t["font-family"];f.fontFamily=e}else f.fontFamily=i.fontFamily;if(t.hasOwnProperty("size")||t.hasOwnProperty("fontSize")||t.hasOwnProperty("font-size")){var s=t.hasOwnProperty("size")?t.size:t.hasOwnProperty("fontSize")?t.fontSize:t["font-size"];typeof s=="number"&&(s=`${s}px`),f.fontSize=s}else f.fontSize=i.fontSize;if(t.hasOwnProperty("style")||t.hasOwnProperty("fontStyle")||t.hasOwnProperty("font-style")){var l=t.hasOwnProperty("style")?t.style:t.hasOwnProperty("fontStyle")?t.fontStyle:t["font-style"];f.fontStyle=l}else f.fontStyle=i.fontStyle;if(t.hasOwnProperty("color")||t.hasOwnProperty("font-color")){var n=t.hasOwnProperty("color")?t.color:t["font-color"];f.color=n}else f.color=i.color;if(t.hasOwnProperty("stroke")){var o=t.stroke;f.stroke=o.hasOwnProperty("color")?o.color:i.stroke,f.strokeThickness=o.hasOwnProperty("thinkness")?o.thinkness:i.strokeThickness}else f.stroke=i.stroke,f.strokeThickness=i.strokeThickness}if(t.hasOwnProperty("shadow")){var h=t.shadow;f.shadowColor=h.hasOwnProperty("color")?h.color:i.shadowColor,f.shadowOffsetX=h.hasOwnProperty("offsetX")?h.offsetX:i.shadowOffsetX,f.shadowOffsetY=h.hasOwnProperty("offsetY")?h.offsetY:i.shadowOffsetY,f.shadowBlur=h.hasOwnProperty("blur")?h.blur:i.shadowBlur,f.shadowStroke=!0,f.shadowFill=!0}else f.shadowColor=i.shadowColor,f.shadowOffsetX=i.shadowOffsetX,f.shadowOffsetY=i.shadowOffsetY,f.shadowBlur=i.shadowBlur,f.shadowStroke=i.shadowStroke,f.shadowFill=i.shadowFill;if(t.hasOwnProperty("u")||t.hasOwnProperty("underline")){var r=t.hasOwnProperty("u")?t.u:t.underline;f.underlineColor=r.hasOwnProperty("color")?r.color:i.underlineColor,f.underlineThickness=r.hasOwnProperty("thinkness")?r.thinkness:i.underlineThickness,f.underlineOffset=r.hasOwnProperty("offset")?r.offset:i.underlineOffset}else f.underlineColor=i.underlineColor,f.underlineThickness=i.underlineThickness,f.underlineOffset=i.underlineOffset;return f}getStrokeThinkness(i,t){var f;if(t.hasOwnProperty("stroke")){var e=t.stroke;f=e.hasOwnProperty("thinkness")?e.thinkness:i.strokeThickness}else f=i.strokeThickness;return f}propToTagText(i,t,f){return t.hasOwnProperty("_class")?i===""&&this.isTextTag(t._class)?"":`<class='${t._class}'>${i}</class>`:t.hasOwnProperty("_style")?`<style='${t._style}'>${i}</style>`:i}destroy(){this.tags=void 0}isTextTag(i){var t=this.tags[i];return t?t.img==null:!1}}var Jm=function(p){p=p.split(";");for(var i={},t,f,e,s=0,l=p.length;s<l;s++)if(t=p[s].split(":"),f=t[0],e=t[1],!(kh(f)||kh(e))){switch(f){case"stroke":var n=e.split(" "),r=n.length;e={},r>=1&&(e.color=n[0]),r>=2&&(e.thinkness=parseInt(n[1].replace("px","")));break;case"shadow":var o=e.split(" "),r=o.length;e={},r>=1&&(e.color=o[0]),r>=2&&(e.offsetX=parseInt(o[1].replace("px",""))),r>=3&&(e.offsetY=parseInt(o[2].replace("px",""))),r>=4&&(e.blur=parseInt(o[3].replace("px","")));break;case"u":case"underline":var h=e.split(" "),r=h.length;e={},r>=1&&(e.color=h[0]),r>=2&&(e.thinkness=parseInt(h[1].replace("px",""))),r>=3&&(e.offset=parseInt(h[2].replace("px","")));break;case"y":e=parseFloat(e);break}i[f]=e}return i},kh=function(p){return p=p.replace(Zm,""),p.length===0},Ir=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,jh=/<\s*class=/i,qh=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,_h=/<\s*style=/i,tl=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,Zm=/^\s+|\s+$/;const Qm=Phaser.Utils.Objects.GetValue;class Vd extends no{constructor(i,t,f,e,s){var l=Qm(s,"tags",void 0),n=new Km(l);super(i,t,f,e,s,"rexTagText",n)}addTag(i,t){return this.parser.addTag(i,t),this.updateText(!0)}addTags(i){for(var t in i)this.parser.addTag(t,i[t]);return this.updateText(!0)}getTag(i){return this.parser.getTag(i)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}tt.register("tagText",function(p,i,t,f){var e=new Vd(this.scene,p,i,t,f);return this.scene.add.existing(e),e});st(window,"RexPlugins.UI.TagText",Vd);var km=function(p,i){if(this.scene.sys.scale.autoRound&&(p=Math.floor(p),i=Math.floor(i)),this.width===p&&this.height===i)return this;var t=this.node.style;return t.width=`${p}px`,t.height=`${i}px`,this.updateSize(),this};const jm=Phaser.Utils.Objects.GetValue;var el=function(p,i,t){t===void 0&&(t={});var f,e;for(var s in p)f=p[s],e=jm(i,s,f[1]),e!==void 0&&(t[f[0]]=e);return t},qm=function(p,i,t){for(let f in t)i.addEventListener(f,function(e){p.emit(t[f],p,e)})},_m=function(p){p.addEventListener("touchstart",Ni,!1),p.addEventListener("touchmove",Ni,!1),p.addEventListener("touchend",Ni,!1),p.addEventListener("mousedown",Ni,!1),p.addEventListener("mouseup",Ni,!1),p.addEventListener("mousemove",Ni,!1)},Ni=function(p){p.stopPropagation()};const tx=Phaser.GameObjects.DOMElement,il=Phaser.Utils.Objects.IsPlainObject,Ze=Phaser.Utils.Objects.GetValue;class lo extends tx{constructor(i,t,f,e,s,l){il(t)?(l=t,t=Ze(l,"x",0),f=Ze(l,"y",0),e=Ze(l,"width",0),s=Ze(l,"height",0)):il(e)&&(l=e,e=Ze(l,"width",0),s=Ze(l,"height",0)),l===void 0&&(l={});var n,o=Ze(l,"type","text");o==="textarea"?(n=document.createElement("textarea"),n.style.resize="none"):(n=document.createElement("input"),n.type=o),el(sl,l,n);var h=Ze(l,"style",void 0);h=el(nl,l,h);var r=n.style;for(var a in l)a in sl||a in nl||a in r&&(h[a]=l[a]);h["box-sizing"]="border-box",super(i,t,f,n,h),this.type="rexInputText",this.resize(e,s),qm(this,n,ix),_m(n),Ze(l,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(i){this.node.value=i}setText(i){return this.text=i,this}get maxLength(){return this.node.maxLength}set maxLength(i){this.node.maxLength=i}setMaxLength(i){return this.maxLength=i,this}get minLength(){return this.node.minLength}set minLength(i){this.node.minLength=i}setMinLength(i){return this.minLength=i,this}get placeholder(){return this.node.placeholder}set placeholder(i){this.node.placeholder=i}setPlaceholder(i){return this.placeholder=i,this}selectText(i,t){return i===void 0?this.node.select():this.node.setSelectionRange(i,t),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var i=this.node;return i.value.substring(i.selectionStart,i.selectionEnd)}get cursorPosition(){return this.node.selectionStart}get tooltip(){return this.node.title}set tooltip(i){this.node.title=i}setTooltip(i){return this.tooltip=i,this}setTextChangedCallback(i){return this.onTextChanged=i,this}get readOnly(){return this.node.readOnly}set readOnly(i){this.node.readOnly=i}setReadOnly(i){return i===void 0&&(i=!0),this.readOnly=i,this}get spellCheck(){return this.node.spellcheck}set spellCheck(i){this.node.spellcheck=i}setSpellCheck(i){return this.spellCheck=i,this}get fontColor(){return this.node.style.color}set fontColor(i){this.node.style.color=i}setFontColor(i){return this.fontColor=i,this}setStyle(i,t){return this.node.style[i]=t,this}getStyle(i){return this.node.style[i]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(i){return i===void 0&&(i=!0),this.node.disabled=!i,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var ex={resize:km};Object.assign(lo.prototype,ex);const sl={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},nl={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},ix={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",focus:"focus",blur:"blur",select:"select"};var zd=function(p,i,t,f){if(i)return!(t&&!t(p,i)||!rl(p,i)||f&&!f(p,i));for(var e=p.scene.input.manager,s=e.pointersTotal,l=e.pointers,i,n=0;n<s;n++)if(i=l[n],!(t&&!t(p,i))&&!!rl(p,i)&&!(f&&!f(p,i)))return!0;return!1},rl=function(p,i){for(var t=p.scene,f=t.input.cameras.getCamerasBelowPointer(i),e=t.input.manager,s=[p],l,n=0,o=f.length;n<o;n++)if(l=e.hitTest(i,s,f[n]),l.length>0)return!0;return!1};const bi=Phaser.Utils.Objects.GetValue,sx=Phaser.Math.Wrap;class Yd extends lo{constructor(i,t){super(i.scene,t);var f=this.node.style;f.position="absolute",f.opacity=0,f.pointerEvents="none",f.zIndex=0,f.transform="scale(0)",this.setCursor(bi(t,"cursor","|")),this.setCursorFlashDuration(bi(t,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0,this.setEnterClose(bi(t,"enterClose",!0)),this.onOpenCallback=bi(t,"onOpen",void 0),this.onCloseCallback=bi(t,"onClose",void 0),this.onUpdateCallback=bi(t,"onUpdate",void 0),this.textObject=i,i.setInteractive().on("pointerdown",this.setFocus,this).on("destroy",this.destroy,this),this.on("focus",function(){this.cursorFlashTimer=0,this.enterClose&&this.scene.input.keyboard.once("keydown-ENTER",this.setBlur,this),this.setText(this.textObject.text),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.textObject,this)},this).on("blur",function(){this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.textObject,this)},this)}preDestroy(){this.textObject.off("pointerdown",this.setFocus,this),this.textObject.off("destroy",this.destroy,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),super.preDestroy()}onClickOutside(i){zd(this.textObject,i)||this.setBlur()}updateText(){var i=this.text;if(this.onUpdateCallback){var t=this.onUpdateCallback(i,this.textObject,this);t&&(i=t)}if(this.isFocused&&this.hasCursor){var f=this.cursorPosition;i=i.substring(0,f)+this.cursor+i.substring(f)}return this.textObject.setText(i),this}setCursor(i){return this._cursor=i,this.hasCursor=i&&i!=="",i}setCursorFlashDuration(i){return this.cursorFlashDuration=i,this}get cursor(){if(!this._isFocused)return this._cursor;var i;this.cursorFlashTimer<this.cursorFlashDuration/2?i=this._cursor:i=" ";var t=this.cursorFlashTimer+this.scene.game.loop.delta;return this.cursorFlashTimer=sx(t,0,this.cursorFlashDuration),i}setEnterClose(i){return i===void 0&&(i=!0),this.enterClose=i,this}open(){return this.setFocus(),this}close(){return this.setBlur(),this}get isOpened(){return this._isFocused}}tt.register("hiddenEdit",function(p,i){var t=new Yd(p,i);return t});st(window,"RexPlugins.UI.HiddenEdit",Yd);const nx=Phaser.GameObjects.Zone,rx=Phaser.Utils.Array.Add,ax=Phaser.Utils.Array.Remove;class Gs extends nx{constructor(i,t,f,e,s){t===void 0&&(t=0),f===void 0&&(f=0),e===void 0&&(e=1),s===void 0&&(s=1),super(i,t,f,e,s),this.children=[]}destroy(i){if(!!this.scene){if(i)for(var t,f=this.children.length-1;f>=0;f--)t=this.children[f],!t.parentContainer&&!t.displayList&&t.destroy(i);this.clear(!i),super.destroy(i)}}contains(i){return this.children.indexOf(i)!==-1}add(i){var t=this;return rx(this.children,i,0,function(f){f.once("destroy",t.onChildDestroy,t)},this),this}remove(i,t){var f=this;return ax(this.children,i,function(e){e.off("destroy",f.onChildDestroy,f),t&&e.destroy()}),this}onChildDestroy(i,t){this.remove(i,!1)}clear(i){for(var t=this,f,e=0,s=this.children.length;e<s;e++)f=this.children[e],f.off("destroy",t.onChildDestroy,t),i&&f.destroy();return this.children.length=0,this}}const al=Phaser.GameObjects.Components;Phaser.Class.mixin(Gs,[al.Alpha,al.Flip]);var _e=function(p,i){var t;if(i===void 0)p.hasOwnProperty("rexContainer")&&(t=p.rexContainer.parent);else for(t=_e(p);t&&t.name!==i;)t=_e(t);return t},Ud=function(p){for(var i=_e(p);i;)p=i,i=_e(i);return p};const ox=Phaser.Math.DegToRad,hx=Phaser.Math.RadToDeg;var gt=function(p){if(!p.hasOwnProperty("rexContainer")){var i={parent:null,self:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(i,"angle",{get:function(){return hx(this.rotation)},set:function(t){this.rotation=ox(t)}}),Object.defineProperty(i,"displayWidth",{get:function(){return p.width*this.scaleX},set:function(t){this.scaleX=t/p.width}}),Object.defineProperty(i,"displayHeight",{get:function(){return p.height*this.scaleY},set:function(t){this.scaleY=t/p.height}}),p.rexContainer=i}return p.rexContainer},lx={setParent(p,i){i===void 0&&(i=this);var t=gt(p);return i?(t.parent=i,t.self=p):(t.parent=null,t.self=null),this},getParent(p,i){return typeof p=="string"&&(i=p,p=void 0),p===void 0&&(p=this),_e(p,i)},getTopmostParent(p){return p===void 0&&(p=this),Ud(p)}};const sn=Phaser.Utils.Objects.GetValue,Xd=Gs.prototype.add;var Dr=function(p,i){this.setParent(p);var t=gt(p);return Wd(t,i),this.resetChildState(p).updateChildVisible(p).updateChildActive(p).updateChildScrollFactor(p).updateChildMask(p),Xd.call(this,p),this},Br=function(p,i){this.setParent(p);var t=gt(p);return Wd(t,i),t.x=p.x,t.y=p.y,t.rotation=p.rotation,t.scaleX=p.scaleX,t.scaleY=p.scaleY,t.alpha=p.alpha,t.visible=p.visible,t.active=p.active,this.updateChildPosition(p).updateChildAlpha(p).updateChildVisible(p).updateChildActive(p).updateChildScrollFactor(p).updateChildMask(p),Xd.call(this,p),this},Wd=function(p,i){p.syncPosition=sn(i,"syncPosition",!0),p.syncRotation=sn(i,"syncRotation",!0),p.syncScale=sn(i,"syncScale",!0),p.syncAlpha=sn(i,"syncAlpha",!0)},ux={add(p){return Array.isArray(p)?this.addMultiple(p):Dr.call(this,p),this},pin(p,i){return Array.isArray(p)?this.addMultiple(p,i):Dr.call(this,p,i),this},addMultiple(p){for(var i=0,t=p.length;i<t;i++)Dr.call(this,p[i]);return this},addLocal(p){return Array.isArray(p)?this.addMultiple(p):Br.call(this,p),this},pinLocal(p,i){return Array.isArray(p)?this.addMultiple(p,i):Br.call(this,p,i),this},addLocalMultiple(p){for(var i=0,t=p.length;i<t;i++)Br.call(this,p[i]);return this}};const fx=Gs.prototype.remove,dx=Gs.prototype.clear;var vx={remove(p,i){return _e(p)!==this?this:(this.setParent(p,null),fx.call(this,p,i),this)},clear(p){for(var i=0,t=this.children.length;i<t;i++)this.setParent(this.children[i],null);return dx.call(this,p),this}},cx={getLocalState(p){return gt(p)},resetChildState(p){return this.resetChildPositionState(p).resetChildVisibleState(p).resetChildAlphaState(p).resetChildActiveState(p),this},resetChildrenState(p){for(var i=0,t=p.length;i<t;i++)this.resetChildState(p[i]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}};const ol=Phaser.Math.RotateAround;var px={worldToLocal(p){return p.x-=this.x,p.y-=this.y,ol(p,0,0,-this.rotation),p.x/=this.scaleX,p.y/=this.scaleY,p},localToWorld(p){return p.x*=this.scaleX,p.y*=this.scaleY,ol(p,0,0,this.rotation),p.x+=this.x,p.y+=this.y,p}},Fs=function(p,i){return p===i?1:p/i},gx={updateChildPosition(p){p.isRexContainerLite&&(p.syncChildrenEnable=!1);var i=gt(p),t=i.parent;return i.syncPosition&&(p.x=i.x,p.y=i.y,t.localToWorld(p)),i.syncRotation&&(p.rotation=i.rotation+t.rotation),i.syncScale&&(p.scaleX=i.scaleX*t.scaleX,p.scaleY=i.scaleY*t.scaleY),p.isRexContainerLite&&(p.syncChildrenEnable=!0,p.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(p){var i=gt(p),t=i.parent;return i.x=p.x,i.y=p.y,t.worldToLocal(i),i.scaleX=Fs(p.scaleX,t.scaleX),i.scaleY=Fs(p.scaleY,t.scaleY),i.rotation=p.rotation-t.rotation,this},setChildPosition(p,i,t){return p.x=i,p.y=t,this.resetChildPositionState(p),this},setChildLocalPosition(p,i,t){var f=gt(p);return f.x=i,f.y=t,this.updateChildPosition(p),this},resetLocalPositionState(){var p=gt(this).parent;return p&&p.resetChildPositionState(this),this}},mx={updateChildRotation(p){var i=gt(p),t=i.parent;return i.syncRotation&&(p.rotation=t.rotation+i.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(p){var i=gt(p),t=i.parent;return i.rotation=p.rotation-t.rotation,this},setChildRotation(p,i){return p.rotation=i,this.resetChildRotationState(p),this},setChildAngle(p,i){return p.angle=i,this.resetChildRotationState(p),this},setChildLocalRotation(p,i){var t=gt(p);return t.rotation=i,this.updateChildRotation(p),this},resetLocalRotationState(){var p=gt(this).parent;return p&&p.resetChildRotationState(this),this}},xx={updateChildScale(p){var i=gt(p),t=i.parent;return i.syncScale&&(p.scaleX=t.scaleX*i.scaleX,p.scaleY=t.scaleY*i.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(p){var i=gt(p),t=i.parent;return i.scaleX=Fs(p.scaleX,t.scaleX),i.scaleY=Fs(p.scaleY,t.scaleY),this},setChildScale(p,i,t){return t===void 0&&(t=i),p.scaleX=i,p.scaleY=t,this.resetChildScaleState(p),this},setChildLocalScale(p,i,t){t===void 0&&(t=i);var f=gt(p);return f.scaleX=i,f.scaleY=t,this.updateChildScale(p),this},setChildDisplaySize(p,i,t){return p.setDisplaySize(i,t),this.resetChildScaleState(p),this},resetLocalScaleState(){var p=gt(this).parent;return p&&p.resetChildScaleState(this),this}},yx={updateChildVisible(p){var i=gt(p),t=i.parent,f=i.hasOwnProperty("maskVisible")?i.maskVisible:!0;return p.visible=t.visible&&i.visible&&f,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(p){var i=gt(p);return i.hasOwnProperty("maskVisible")&&delete i.maskVisible,i.visible=p.visible,this},setChildVisible(p,i){return this.setChildLocalVisible(p,i),this},setChildLocalVisible(p,i){i===void 0&&(i=!0);var t=gt(p);return t.visible=i,this.updateChildVisible(p),this},setChildMaskVisible(p,i){i===void 0&&(i=!0);var t=gt(p);return t.maskVisible=i,this.updateChildVisible(p),this},resetLocalVisibleState(){var p=gt(this).parent;return p&&p.resetChildVisibleState(this),this}},Tx={updateChildAlpha(p){var i=gt(p),t=i.parent;return i.syncAlpha&&(p.alpha=t.alpha*i.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(p){var i=gt(p),t=i.parent;return i.alpha=Fs(p.alpha,t.alpha),this},setChildAlpha(p,i){return p.alpha=i,this.resetChildAlphaState(p),this},setChildLocalAlpha(p,i){var t=gt(p);return t.alpha=i,this.updateChildAlpha(p),this},resetLocalAlphaState(){var p=gt(this).parent;return p&&p.resetChildAlphaState(this),this}},Sx={updateChildActive(p){var i=gt(p),t=i.parent;return p.active=t.active&&i.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(p){var i=gt(p);return i.active=p.active,this},setChildActive(p,i){return p.active=i,this.resetChildActiveState(p),this},setChildLocalActive(p,i){i===void 0&&(i=!0);var t=gt(p);return t.active=i,this.updateChildActive(p),this},resetLocalActiveState(){var p=gt(this).parent;return p&&p.resetChildActiveState(this),this}},Cx={updateChildScrollFactor(p){var i=gt(p),t=i.parent;return p.setScrollFactor(t.scrollFactorX,t.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},Ex={updateChildMask(p){if(this.mask==null)return this;var i=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return i!==p&&(p.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(p){return this.mask=p,this},clearMask(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this}},Nn=function(p,i){if(p.length===0)return p;i===void 0&&(i=!1);var t=p[0].scene,f=t.sys.displayList;return f.depthSort(),i?p.sort(function(e,s){return f.getIndex(s)-f.getIndex(e)}):p.sort(function(e,s){return f.getIndex(e)-f.getIndex(s)}),p},Px={setDepth(p,i){if(this.depth=p,!i&&this.children)for(var t=this.getAllChildren(),f=0,e=t.length;f<e;f++)t[f].depth=p;return this},swapDepth(p){var i=this.depth,t=p.depth;return this.setDepth(t),p.setDepth(i),this},incDepth(p){if(this.depth+=p,this.children)for(var i=this.getAllChildren(),t=0,f=i.length;t<f;t++)i[t].depth+=p;return this},moveDepthBelow(p){var i=p.scene.children,t=this.getAllChildren([this]);Nn(t);for(var f=0,e=t.length;f<e;f++){var s=t[f];if(i.exists(s)){i.moveBelow(p,s);break}}return this},moveDepthAbove(p){var i=p.scene.children,t=this.getAllChildren([this]);Nn(t,!0);for(var f=0,e=t.length;f<e;f++){var s=t[f];if(i.exists(s)){i.moveAbove(p,s);break}}return this}},Hd=function(p,i){var t=i(p);if(!t&&p.isRexContainerLite)for(var f=p.children,e=0,s=f.length;e<s;e++)Hd(f[e],i)},wr=function(p,i){for(var t=[p];t.length>0;){var f=t.shift(),e=i(f);!e&&f.isRexContainerLite&&t.push(...f.children)}};const Pi=Phaser.Utils.Array;var Mx={getChildren(p){if(!p)p=this.children;else for(var i=0,t=this.children.length;i<t;i++)p.push(this.children[i]);return p},getAllChildren(p){p===void 0&&(p=[]);var i=this;return wr(i,function(t){t!==i&&p.push(t)}),p},getAllVisibleChildren(p){p===void 0&&(p=[]);var i=this;return wr(i,function(t){if(t!==i){if(!t.visible)return!0;p.push(t)}}),p},bfs(p,i){return i===void 0&&(i=this),wr(i,p),this},dfs(p,i){return i===void 0&&(i=this),Hd(i,p),this},contains(p){var i=_e(p);return i?i===this?!0:this.contains(i):!1},getByName(p,i){if(i){for(var t=[this],f,e;t.length;){f=t.shift();for(var s=0,l=f.children.length;s<l;s++){if(e=f.children[s],e.name===p)return e;e.isRexContainerLite&&t.push(e)}}return null}else return Pi.GetFirst(this.children,"name",p)},getRandom(p,i){return Pi.GetRandom(this.children,p,i)},getFirst(p,i,t,f){return Pi.GetFirstElement(this.children,p,i,t,f)},getAll(p,i,t,f){return Pi.GetAll(this.children,p,i,t,f)},count(p,i,t,f){return Pi.CountAllMatching(this.children,p,i,t,f)},swap(p,i){return Pi.Swap(this.children,p,i),this},setAll(p,i,t,f){return Pi.SetAll(this.children,p,i,t,f),this}},me=function(p){return Object.prototype.toString.call(p)==="[object Array]"},Ax={tweenChild(p){var i=p.targets;me(i)||(i=[i]);for(var t,f=[],e,s=0,l=i.length;s<l;s++)e=i[s],e.hasOwnProperty("rexContainer")&&(t=e.scene,f.push(e.rexContainer));if(!!t){p.targets=f;var n=t.tweens.add(p),o=function(h,r,a){if(!a.parent){t.tweens.remove(h);return}var v=a.parent,u=a.self;switch(r){case"x":case"y":v.updateChildPosition(u);break;case"angle":case"rotation":v.updateChildRotation(u);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":v.updateChildScale(u);break;case"alpha":v.updateChildAlpha(u);break}};return n.on("update",o),n}},tween(p){var i=this.scene;return p.targets||(p.targets=this),i.tweens.add(p)}},hl=function(p){var i=this.getAllChildren([this]);return Nn(i),p.add(i),this},Rx={addToLayer:hl,addToContainer:hl};const Ox=Phaser.Math.RotateAround;var Lx=function(p,i,t){t===void 0&&(t=i);var f={x:(i-p.originX)*p.displayWidth,y:(t-p.originY)*p.displayHeight};return Ox(f,0,0,p.rotation),p.originX=i,p.originY=t,p.x=p.x+f.x,p.y=p.y+f.y,p},Fx=function(p,i){this.syncChildrenEnable=!1,Lx(this,p,i),this.syncChildrenEnable=!0;for(var t=this.getAllChildren(),f=0,e=t.length;f<e;f++)this.resetChildPositionState(t[f]);return this},$d={changeOrigin:Fx};Object.assign($d,lx,ux,vx,cx,px,gx,mx,xx,yx,Tx,Sx,Cx,Ex,Px,Mx,Ax,Rx);class xe extends Gs{constructor(i,t,f,e,s,l){super(i,t,f,e,s),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,l&&this.add(l)}destroy(i){!this.scene||(this.syncChildrenEnable=!1,super.destroy(i))}resize(i,t){return this.setSize(i,t),this}get x(){return this._x}set x(i){this._x!==i&&(this._x=i,this.syncPosition())}get y(){return this._y}set y(i){this._y!==i&&(this._y=i,this.syncPosition())}get rotation(){return super.rotation}set rotation(i){this.rotation!==i&&(super.rotation=i,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(i){this.scaleX!==i&&(super.scaleX=i,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(i){this.scaleY!==i&&(super.scaleY=i,this.syncPosition())}get scale(){return super.scale}set scale(i){this.scale!==i&&(super.scale=i,this.syncPosition())}get visible(){return super.visible}set visible(i){super.visible!==i&&(super.visible=i,this.syncVisible())}get alpha(){return super.alpha}set alpha(i){super.alpha!==i&&(super.alpha=i,this.syncAlpha())}get active(){return this._active}set active(i){this._active!==i&&(this._active=i,this.syncActive())}get mask(){return this._mask}set mask(i){this._mask!==i&&(this._mask=i,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(i){this._scrollFactorX!==i&&(this._scrollFactorX=i,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(i){this._scrollFactorY!==i&&(this._scrollFactorY=i,this.syncScrollFactor())}get list(){return this.children}static GetParent(i){return _e(i)}}Object.assign(xe.prototype,$d);tt.register("container",function(p,i,t,f,e){var s=new xe(this.scene,p,i,t,f,e);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.Container",xe);tt.register("canvas",function(p,i,t,f){var e=new xi(this.scene,p,i,t,f);return this.scene.add.existing(e),e});st(window,"RexPlugins.UI.Canvas",xi);const nn=Phaser.Utils.Objects.GetValue;class Kd extends xi{constructor(i,t,f,e,s,l){super(i,t,f),this.type="rexCircleMaskImage",this.setTexture(e,s,l)}setTexture(i,t,f){typeof t=="object"&&(f=t,t=void 0);var e,s;if(typeof f=="string"?(e=f,s=void 0):(e=nn(f,"maskType",0),s=nn(f,"backgroundColor",void 0)),e===void 0?e=0:typeof e=="string"&&(e=Ix[e]),this._textureKey=i,this._frameName=t,e===null)return this.loadTexture(i,t),this.dirty=!0,this;var l=s!=null;l||this.loadTexture(i,t);var n=this.canvas,o=this.context,h=n.width,r=n.height;switch(o.save(),o.globalCompositeOperation=l?"source-over":"destination-in",o.beginPath(),e){case 2:var a=nn(f,"radius",0),v=nn(f,"iteration",void 0);Hf(o,0,0,h,r,a,v);break;default:var u=Math.floor(h/2),d=Math.floor(r/2);e===0?o.arc(u,d,Math.min(u,d),0,2*Math.PI):o.ellipse(u,d,u,d,0,0,2*Math.PI);break}return l&&(o.fillStyle=s),o.fill(),o.restore(),l&&(o.save(),o.globalCompositeOperation="destination-atop",this.loadTexture(i,t),o.restore()),this.dirty=!0,this}resize(i,t){return this.setDisplaySize(i,t),this}}const Ix={circle:0,ellipse:1,roundRectangle:2};tt.register("circleMaskImage",function(p,i,t,f,e){var s=new Kd(this.scene,p,i,t,f,e);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.CircleMaskImage",Kd);class uo{constructor(i,t){this.setParent(i),this.type=t,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(i){return this.parent=i,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(i){return i&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(i){this.setDirty(this._active!=i),this._active=i}setActive(i){return i===void 0&&(i=!0),this.active=i,this}modifyPorperties(i){return this}onFree(){this.reset().setParent()}reset(){return this}}Object.assign(uo.prototype,Xn);const Dx=Phaser.Math.DegToRad,Bx=Phaser.Math.RadToDeg,rn=Phaser.Utils.Objects.GetValue;class $n extends uo{constructor(i,t){super(i,t),this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(i){this.setDirty(this._visible!=i),this._visible=i}setVisible(i){return i===void 0&&(i=!0),this.visible=i,this}get alpha(){return this._alpha}set alpha(i){this.setDirty(this._alpha!=i),this._alpha=i}setAlpha(i){return this.alpha=i,this}get x(){return this._x}set x(i){this.setDirty(this._x!=i),this._x=i}setX(i){return this.x=i,this}get y(){return this._y}set y(i){this.setDirty(this._y!=i),this._y=i}setY(i){return this.y=i,this}setPosition(i,t){return this.x=i,this.y=t,this}get rotation(){return this._rotation}set rotation(i){this.setDirty(this._rotation!=i),this._rotation=i}setRotation(i){return this.rotation=i,this}get angle(){return Bx(this._rotation)}set angle(i){this.rotation=Dx(i)}setAngle(i){return this.angle=i,this}get scaleX(){return this._scaleX}set scaleX(i){this.setDirty(this._scaleX!==i),this._scaleX=i}setScaleX(i){return this.scaleX=i,this}get width(){return 0}set width(i){}setWidth(i,t){return t===void 0&&(t=!1),this.width=i,t&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(i){this.setDirty(this._leftSpace!==i),this._leftSpace=i}setLeftSpace(i){return this.leftSpace=i,this}get rightSpace(){return this._rightSpace}set rightSpace(i){this.setDirty(this._rightSpace!==i),this._rightSpace=i}setRightSpace(i){return this.rightSpace=i,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(i){this.setDirty(this._scaleY!==i),this._scaleY=i}setScaleY(i){return this.scaleY=i,this}get height(){return 0}set height(i){}setHeight(i,t){return t===void 0&&(t=!1),this.height=i,t&&(this.scaleX=this.scaleY),this}setScale(i,t){return t===void 0&&(t=i),this.scaleX=i,this.scaleY=t,this}setOrigin(i){return this.originX=i,this}setAlign(i){return this.align=i,this}modifyPorperties(i){if(!i)return this;i.hasOwnProperty("x")&&this.setX(i.x),i.hasOwnProperty("y")&&this.setY(i.y),i.hasOwnProperty("rotation")?this.setRotation(i.rotation):i.hasOwnProperty("angle")&&this.setAngle(i.angle),i.hasOwnProperty("alpha")&&this.setAlpha(i.alpha);var t=rn(i,"width",void 0),f=rn(i,"height",void 0),e=rn(i,"scaleX",void 0),s=rn(i,"scaleY",void 0);return t!==void 0?f===void 0&&s===void 0?this.setWidth(t,!0):this.setWidth(t):e!==void 0&&this.setScaleX(e),f!==void 0?t===void 0&&e===void 0?this.setHeight(f,!0):this.setHeight(f):s!==void 0&&this.setScaleY(s),i.hasOwnProperty("leftSpace")&&this.setLeftSpace(i.leftSpace),i.hasOwnProperty("rightSpace")&&this.setRightSpace(i.rightSpace),i.hasOwnProperty("align")&&this.setAlign(i.align),this}setDrawBelowCallback(i){return this.drawBelowCallback=i,this}setDrawAboveCallback(i){return this.drawAboveCallback=i,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}drawContent(){}draw(){var i=this.context;i.save();var t=this.x+this.leftSpace+this.offsetX-this.originX*this.width,f=this.y+this.offsetY;this.autoRound&&(t=Math.round(t),f=Math.round(f)),i.translate(t,f),i.globalAlpha=this.alpha,i.scale(this.scaleX,this.scaleY),i.rotate(this.rotation),this.drawBelowCallback&&this.drawBelowCallback(this),this.drawContent(),this.drawAboveCallback&&this.drawAboveCallback(this),i.restore()}}const Mi=Phaser.Utils.Objects.GetValue;class wx extends $n{constructor(i,t){super(i,"background"),this.setColor(Mi(t,"color",null),Mi(t,"color2",null),Mi(t,"horizontalGradient",!0)),this.setStroke(Mi(t,"stroke",null),Mi(t,"strokeThickness",2)),this.setCornerRadius(Mi(t,"cornerRadius",0),Mi(t,"cornerIteration",null))}set color(i){i=lt(i,this.canvas,this.context),this.setDirty(this._color!=i),this._color=i}get color(){return this._color}set color2(i){i=lt(i,this.canvas,this.context),this.setDirty(this._color2!=i),this._color2=i}get color2(){return this._color2}set horizontalGradient(i){this.setDirty(this._horizontalGradient!=i),this._horizontalGradient=i}get horizontalGradient(){return this._horizontalGradient}setColor(i,t,f){return f===void 0&&(f=!0),this.color=i,this.color2=t,this.horizontalGradient=f,this}set stroke(i){i=lt(i,this.canvas,this.context),this.setDirty(this._stroke!=i),this._stroke=i}get stroke(){return this._stroke}set strokeThickness(i){this.setDirty(this._strokeThickness!=i),this._strokeThickness=i}get strokeThickness(){return this._strokeThickness}setStroke(i,t){return this.stroke=i,this.strokeThickness=t,this}set cornerRadius(i){this.setDirty(this._cornerRadius!=i),this._cornerRadius=i}get cornerRadius(){return this._cornerRadius}set cornerIteration(i){this.setDirty(this._cornerIteration!=i),this._cornerIteration=i}get cornerIteration(){return this._cornerIteration}setCornerRadius(i,t){return this.cornerRadius=i,this.cornerIteration=t,this}drawContent(){_a(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const fs=Phaser.Utils.Objects.GetValue;class Gx extends $n{constructor(i,t){super(i,"background"),this.setColor(fs(t,"color",null),fs(t,"color2",null),fs(t,"horizontalGradient",!0)),this.setStroke(fs(t,"stroke",null),fs(t,"strokeThickness",2))}set color(i){i=lt(i,this.canvas,this.context),this.setDirty(this._color!=i),this._color=i}get color(){return this._color}set color2(i){i=lt(i,this.canvas,this.context),this.setDirty(this._color2!=i),this._color2=i}get color2(){return this._color2}set horizontalGradient(i){this.setDirty(this._horizontalGradient!=i),this._horizontalGradient=i}get horizontalGradient(){return this._horizontalGradient}setColor(i,t,f){return f===void 0&&(f=!0),this.color=i,this.color2=t,this.horizontalGradient=f,this}set stroke(i){i=lt(i,this.canvas,this.context),this.setDirty(this._stroke!=i),this._stroke=i}get stroke(){return this._stroke}set strokeThickness(i){this.setDirty(this._strokeThickness!=i),this._strokeThickness=i}get strokeThickness(){return this._strokeThickness}setStroke(i,t){return this.stroke=i,this.strokeThickness=t,this}drawContent(){var i=this.parent.padding,t=i.left,f=i.top,e=this.parent.width-i.left-i.right,s=this.parent.height-i.top-i.bottom,l=this.context;if(this.color!=null){var n;if(this.color2!=null){var o;this.horizontalGradient?o=l.createLinearGradient(0,0,e,0):o=l.createLinearGradient(0,0,0,s),o.addColorStop(0,this.color),o.addColorStop(1,this.color2),n=o}else n=this.color;l.fillStyle=n,l.fillRect(t,f,e,s)}this.stroke!=null&&this.strokeThickness>0&&(l.strokeStyle=this.stroke,l.lineWidth=this.strokeThickness,l.strokeRect(t,f,e,s))}}var an=function(p,i,t){return i.hasOwnProperty(p)?i[p]:t[p]};const kt=Phaser.Utils.Objects.GetValue;class Kn{constructor(i){this.set(i)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,align:this.align}}set(i){return this.setBold(kt(i,"bold",!1)),this.setItalic(kt(i,"italic",!1)),this.setFontSize(kt(i,"fontSize","16px")),this.setFontFamily(kt(i,"fontFamily","Courier")),this.setColor(kt(i,"color","#fff")),this.setStrokeStyle(kt(i,"stroke",null),kt(i,"strokeThickness",0)),this.setShadow(kt(i,"shadowColor",null),kt(i,"shadowOffsetX",0),kt(i,"shadowOffsetY",0),kt(i,"shadowBlur",0)),this.setOffset(kt(i,"offsetX",0),kt(i,"offsetY",0)),this.setAlign(kt(i,"align",void 0)),this}modify(i){return i.hasOwnProperty("bold")&&this.setBold(i.bold),i.hasOwnProperty("italic")&&this.setItalic(i.italic),i.hasOwnProperty("fontSize")&&this.setFontSize(i.fontSize),i.hasOwnProperty("fontFamily")&&this.setFontFamily(i.fontFamily),i.hasOwnProperty("color")&&this.setColor(i.color),(i.hasOwnProperty("stroke")||i.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(an("stroke",i,this),an("strokeThickness",i,this)),i.hasOwnProperty("shadowColor")&&this.setShadowColor(i.shadowColor),(i.hasOwnProperty("shadowOffsetX")||i.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(an("shadowOffsetX",i,this),an("shadowOffsetY",i,this)),i.hasOwnProperty("shadowBlur")&&this.setShadowBlur(i.shaodwBlur),i.hasOwnProperty("offsetX")&&this.setOffsetX(i.offsetX),i.hasOwnProperty("offsetY")&&this.setOffsetY(i.offsetY),i.hasOwnProperty("align")&&this.setAlign(i.align),this}clone(){return new Kn(this.toJSON())}copyFrom(i){return this.set(i.toJSON()),this}copyTo(i){return i.set(this.toJSON()),this}setBold(i){return i===void 0&&(i=!0),this.bold=i,this}setItalic(i){return i===void 0&&(i=!0),this.italic=i,this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(i){return typeof i=="number"&&(i=`${i}px`),this.fontSize=i,this}setFontFamily(i){return this.fontFamily=i,this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(i){return this.color=lt(i),this}get hasFill(){return this.color!=null}setStrokeStyle(i,t){return this.stroke=lt(i),t!==void 0&&(this.strokeThickness=t),this}setStrokeThickness(i){return this.strokeThickness=i,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(i){return this.shadowColor=lt(i),this}setShadowOffset(i,t){return i===void 0&&(i=0),t===void 0&&(t=0),this.shadowOffsetX=i,this.shadowOffsetY=t,this}setShadowBlur(i){return i===void 0&&(i=0),this.shaodwBlur=i,this}setShadow(i,t,f,e){return this.setShadowColor(i).setShadowOffset(t,f).setShadowBlur(e),this}setOffsetX(i){return i===void 0&&(i=0),this.offsetX=i,this}setOffsetY(i){return i===void 0&&(i=0),this.offsetY=i,this}setOffset(i,t){return this.setOffsetX(i).setOffsetY(t),this}setAlign(i){return this.align=i,this}syncFont(i){return i.font=this.font,this}syncStyle(i){i.textBaseline="alphabetic";var t=this.hasFill,f=this.hasStroke;return i.fillStyle=t?this.color:"#000",i.strokeStyle=f?this.stroke:"#000",i.lineWidth=f?this.strokeThickness:0,i.lineCap="round",i.lineJoin="round",this}syncShadow(i){i.shadowColor!=null?(i.shadowColor=this.shadowColor,i.shadowOffsetX=this.shadowOffsetX,i.shadowOffsetY=this.shadowOffsetY,i.shadowBlur=this.shadowBlur):(i.shadowColor=0,i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0)}getTextMetrics(i,t){return this.syncFont(i).syncStyle(i),i.measureText(t)}}var Nx=function(p,i){return p===void 0&&(p=0),i===void 0&&(i=0),p>0&&i>0?(this.fixedWidth!==p||this.fixedHeight!==i)&&(this.dirty=!0):this.dirty=!0,this.fixedWidth=p,this.fixedHeight=i,this};const on=Phaser.Utils.Objects.GetValue;var Ln=function(p,i){return i===void 0?p:p[i]},Fn=function(p,i,t){var f=typeof i;f==="string"?p[i]=t:f==="number"?(p.left=i,p.right=i,p.top=i,p.bottom=i):(p.left=on(i,"left",0),p.right=on(i,"right",0),p.top=on(i,"top",0),p.bottom=on(i,"bottom",0))},bx=function(p,i){var t=this.padding,f=t.left,e=t.right,s=t.top,l=t.bottom;return Fn(t,p,i),this.dirty=this.dirty||f!=t.left||e!=t.right||s!=t.top||l!=t.bottom,this},Vx=function(p){return Ln(this.padding,p)},zx=function(p){return this.textStyle.modify(p),this},Yx=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},Ux=function(p){return this.poolManager.free(p),RemoveItem(this.children.list,p),this.lastAppendedChildren.length=0,this.dirty=!0,this},Xx=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},Wx=function(){return this.setText(),this},Hx=function(p){return this.lastAppendedChildren.length=0,Array.isArray(p)?(this.children.push(...p),this.lastAppendedChildren.push(...p)):(this.children.push(p),this.lastAppendedChildren.push(p)),this};const Ns="text",fo="image",vo="command";var Jn=function(p){var i=p.type;return i===Ns||i===fo},Jd=function(p){return p.type===Ns&&p.text===`
`},$x=function(p){return p.type===vo};class Kx extends $n{constructor(i,t,f){super(i,Ns),this.style=new Kn(f),this.setText(t)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(i){this.style&&(this.style.offsetX=i)}get offsetY(){return this.style.offsetY}set offsetY(i){this.style&&(this.style.offsetY=i)}get align(){return this.style.align}set align(i){this.style&&(this.style.align=i)}modifyStyle(i){return this.setDirty(!0),this.style.modify(i),this}modifyPorperties(i){return i?(this.modifyStyle(i),super.modifyPorperties(i),this):this}setText(i){return this.setDirty(this.text!=i),this.text=i,this.updateTextSize(),this}updateTextSize(){if(this.text===`
`||this.text==="")this.textWidth=0,this.textHeight=0;else{var i=this.style.getTextMetrics(this.context,this.text);this.textWidth=i.width;var t,f;i.hasOwnProperty("actualBoundingBoxAscent")?(t=i.actualBoundingBoxAscent,f=i.actualBoundingBoxDescent):(t=0,f=0),this.textHeight=t+f}return this}get width(){return this.textWidth*this.scaleX}set width(i){this.textWidth>0?this.scaleX=i/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(i){this.textHeight>0?this.scaleY=i/this.textHeight:this.scaleY=1}drawContent(){var i=this.style,t=i.hasFill,f=i.hasStroke;if(!(!t&&!f)){var e=this.context;i.syncFont(e).syncStyle(e),f&&(i.syncShadow(e),e.strokeText(this.text,0,0)),t&&(i.syncShadow(e),e.fillText(this.text,0,0))}}draw(){if(!this.visible||this.text===""||this.text===`
`)return this;super.draw()}}var Zn=function(p,i){i&&this.textStyle.modify(i);for(var t=[],f=0,e=p.length;f<e;f++){var s=p.charAt(f),l=this.poolManager.allocate(Ns);l===null?l=new Kx(this,s,this.textStyle):l.setParent(this).setActive().modifyStyle(this.textStyle).setText(s),t.push(l)}return this.addChild(t),this},Jx=function(p,i){return p===void 0&&(p=""),this.removeChildren(),Zn.call(this,p,i),this.dirty=!0,this};class Zx extends $n{constructor(i,t,f){super(i,fo),this.setTexture(t,f)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(i){}get key(){return this._key}set key(i){this.setDirty(this._key!=i),this._key=i}get frame(){return this._frame}set frame(i){this.setDirty(this._frame!=i),this._frame=i}setTexture(i,t){return this.key=i,this.frame=t,this.frameObj=this.scene.sys.textures.getFrame(i,t),this}get width(){return this.frameWidth*this.scaleX}set width(i){this.setDirty(this.width!==i),this.scaleX=i/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(i){this.setDirty(this.height!==i),this.scaleY=i/this.frameHeight}setHeight(i,t){return t===void 0&&(t=!1),this.height=i,t&&(this.scaleX=this.scaleY),this}drawContent(){var i=this.context,t=this.frameObj,f=this.frameWidth,e=this.frameHeight;i.drawImage(t.source.image,t.cutX,t.cutY,f,e,0,0,f,e)}draw(){if(!this.visible)return this;super.draw()}}var Zd=function(p,i,t){var f=this.poolManager.allocate(fo);return f===null?f=new Zx(this,p,i):f.setParent(this).setActive().setTexture(p,i),f.modifyPorperties(t),this.addChild(f),this};class Qx extends uo{constructor(i,t,f,e,s){super(i,vo),this.setName(t).setParameter(e).setCallback(f,s)}setName(i){return this.name=i,this}setParameter(i){return this.param=i,this}setCallback(i,t){return this.callback=i,this.scope=t,this}exec(){var i;return this.scope?i=this.callback.call(this.scope,this.param,this.name):i=this.callback(this.param,this.name),i}draw(){}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var ut=function(p,i,t,f){var e=this.poolManager.allocate(vo);return e===null?e=new Qx(this,p,i,t,f):e.setParent(this).setActive().setName(p).setCallback(i,f).setParameter(t),this.addChild(e),this},kx=function(p){return p===void 0&&(p={}),this.wrapConfig=p,this},jx=function(p,i,t,f){f===void 0&&(f={word:[],width:0}),f.word.length=0;for(var e=p.length,s=i,l=f.word,n=0;s<e;){var o=p[s];if(o.type===Ns&&o.text!==" "&&o.text!==`
`)l.push(o),n+=o.outerWidth,s++;else{s===i&&(l.push(o),n+=o.outerWidth);break}if(t)break}return f.width=n,f},Qd=function(p,i,t){if(!(i===0&&t===0))for(var f=0,e=p.length;f<e;f++){var s=p[f];!Jn(s)||(s.x+=i,s.y+=t)}},qx=function(p){for(var i=0,t=p.length;i<t;i++){var f=p[i];if(f.align!==void 0)return f.align}},_x=function(p,i,t){var f=p.hAlign,e=p.vAlign,s,l,n=p.linesHeight;switch(e){case 1:case"center":l=(t-n)/2;break;case 2:case"bottom":l=t-n;break;default:l=0;break}for(var o=p.lines,h=0,r=o.length;h<r;h++){var a=o[h],v=a.width,u=a.children,d=qx(u);switch(d===void 0&&(d=f),d){case 1:case"center":s=(i-v)/2;break;case 2:case"right":s=i-v;break;default:s=0;break}Qd(u,s,l)}};const he=Phaser.Utils.Objects.GetValue;var t0=function(p){var i=he(p,"start",0),t=he(p,"padding.top",0),f=he(p,"padding.bottom",0),e=he(p,"lineHeight",void 0),s;if(e===void 0)if(s=he(p,"maxLines",0),this.fixedHeight>0){var B=this.fixedHeight-this.padding.top-this.padding.bottom-t-f;e=B/s}else e=0;else if(this.fixedHeight>0){if(s=he(p,"maxLines",void 0),s===void 0){var B=this.fixedHeight-this.padding.top-this.padding.bottom-t-f;s=Math.floor(B/e)}}else s=he(p,"maxLines",0);var l=s===0,n=he(p,"wrapWidth",void 0);n===void 0&&(this.fixedWidth>0?n=this.fixedWidth-this.padding.left-this.padding.right:n=1/0);for(var o=he(p,"letterSpacing",0),h=he(p,"hAlign",0),r=he(p,"vAlign",0),a=he(p,"charWrap",!1),v={start:i,isLastPage:!1,padding:{top:t,bottom:f},lineHeight:e,maxLines:s,wrapWidth:n,letterSpacing:o,hAlign:h,vAlign:r,charWrap:a,children:[],lines:[],maxLineWidth:0,linesHeight:0},u=this.children,d=0,c=u.length;d<c;d++)u[d].setActive(!1);n+=o;for(var g=this.padding.left,m=this.padding.top+e+t,x=g,y=m,T=n,S=i,C=u.length,E=v.children,P=v.lines,M=[],R=0,A=0,O;S<C;){var F=u[S];if(!Jn(F)){S++,F.setActive(),E.push(F),M.push(F);continue}O=jx(u,S,a,O);var I=O.word,w=I.length,b=O.width+w*o;S+=w;var Y=Jd(I[0]);if(T<b||Y){if(Y){var U=I[0];U.setActive().setPosition(x,y),E.push(U),M.push(U)}if(x=g,y+=e,T=n,P.push({children:M,width:R}),A=Math.max(A,R),R=0,M=[],!l&&P.length===s)break;if(Y)continue}T-=b,R+=b;for(var d=0,c=I.length;d<c;d++){var U=I[d];U.setActive().setPosition(x,y),E.push(U),M.push(U),x+=U.outerWidth+o}}M.length>0&&(P.push({children:M,width:R}),A=Math.max(A,R)),v.start+=E.length,v.isLastPage=v.start===C,v.maxLineWidth=A,v.linesHeight=P.length*e+t+f;var W=this.fixedWidth>0?this.fixedWidth:v.maxLineWidth+this.padding.left+this.padding.right,D=this.fixedHeight>0?this.fixedHeight:v.linesHeight+this.padding.top+this.padding.bottom,L=W-this.padding.left-this.padding.right,B=D-this.padding.top-this.padding.bottom-t-f;return _x(v,L,B),this.setSize(W,D),v};const e0=Phaser.Utils.Objects.Merge;var i0=function(p){return p===void 0&&(p={}),t0.call(this,e0(p,this.wrapConfig))},s0=function(p,i,t){var f=p.hAlign,e=p.vAlign,s,l,n=p.rtl,o=p.lines,h=p.lineWidth,r=p.linesWidth;switch(f){case 1:case"center":s=(i-r)/2;break;case 2:case"right":s=i-r;break;default:s=0;break}n&&(s+=h);for(var a=0,v=o.length;a<v;a++){var u=o[n?v-a-1:a],d=u.children,c=u.height,g=GetChildrenAlign(d);switch(g===void 0&&(g=e),g){case 1:case"center":l=(t-c)/2;break;case 2:case"bottom":l=t-c;break;default:l=0;break}Qd(d,s,l),s+=h}};const Gt=Phaser.Utils.Objects.GetValue;var n0=function(p){var i=Gt(p,"start",0),t=Gt(p,"padding.top",0),f=Gt(p,"padding.bottom",0),e=Gt(p,"padding.left",0),s=Gt(p,"padding.right",0),l=Gt(p,"lineWidth",void 0),n;if(l===void 0)if(n=Gt(p,"maxLines",0),this.fixedWidth>0){var L=this.fixedWidth-this.padding.left-this.padding.right-e-s;l=L/n}else l=0;else if(this.fixedWidth>0){if(n=Gt(p,"maxLines",void 0),n===void 0){var L=this.fixedWidth-this.padding.left-this.padding.right;n=Math.floor(L/l)}}else n=Gt(p,"maxLines",0);var o=n===0,h=Gt(p,"fixedChildHeight",void 0);if(h===void 0){var r=Gt(p,"charPerLine",void 0);if(r!==void 0){var B=this.fixedHeight-this.padding.top-this.padding.bottom-t-f;h=Math.floor(B/r)}}var a=Gt(p,"wrapHeight",void 0);a===void 0&&(this.fixedHeight>0?a=this.fixedHeight-this.padding.top-this.padding.bottom:a=1/0);for(var v=Gt(p,"letterSpacing",0),u=Gt(p,"rtl",!0),d=Gt(p,"hAlign",u?2:0),c=Gt(p,"vAlign",0),g={start:i,isLastPage:!1,padding:{top:t,bottom:f,left:e,right:s},lineWidth:l,maxLines:n,fixedChildHeight:h,wrapHeight:a,letterSpacing:v,hAlign:d,vAlign:c,rtl:u,children:[],lines:[],maxLineHeight:0,linesWidth:0},m=this.children,x=0,y=m.length;x<y;x++)m[x].setActive(!1);a+=v;for(var T=this.padding.left+e,S=this.padding.top+t,C=T,E=S,P=a,M=i,R=m.length,A=g.children,O=g.lines,F=[],I=0,w=0;M<R;){var b=m[M];if(M++,!Jn(b)){b.setActive(),A.push(b),F.push(b);continue}var Y=(h!==void 0?h:b.height)+v,U=Jd(b);if(P<Y||U){if(U&&(b.setActive().setPosition(C,E).setOrigin(.5),A.push(b),F.push(b)),C=T,E=S,P=a,O.push({children:F,height:I}),w=Math.max(w,I),I=0,F=[],!o&&O.length===n)break;if(U)continue}P-=Y,I+=Y,b.setActive().setPosition(C,E).setOrigin(.5),A.push(b),F.push(b),E+=Y}F.length>0&&(O.push({children:F,height:I}),w=Math.max(w,I)),g.start+=A.length,g.isLastPage=g.start===R,g.maxLineHeight=w,g.linesWidth=O.length*l+e+s;var W=this.fixedWidth>0?this.fixedWidth:g.linesWidth+this.padding.left+this.padding.right,D=this.fixedHeight>0?this.fixedHeight:g.maxLineHeight+this.padding.top+this.padding.bottom,L=W-this.padding.left-this.padding.right-e-s,B=D-this.padding.top-this.padding.bottom-t-f;return s0(g,L,B),this.setSize(W,D),g};const r0=Phaser.Utils.Objects.Merge;var a0=function(p){return p===void 0&&(p={}),n0.call(this,r0(p,this.wrapConfig))},o0=function(){this.clear();var p=this.fixedWidth>0?this.fixedWidth:this.width,i=this.fixedHeight>0?this.fixedHeight:this.height;this.setSize(p,i),this.background.active&&this.background.draw();for(var t,f=0,e=this.children.length;f<e;f++)t=this.children[f],t.active&&t.visible&&t.draw();this.innerBounds.active&&this.innerBounds.draw()},h0=function(){return this.children},l0=function(){return this.lastAppendedChildren};const u0=Phaser.Utils.Array.GetAll;var f0=function(){return u0(this.children,"active",!0)},d0={setFixedSize:Nx,setPadding:bx,getPadding:Vx,modifyTextStyle:zx,resetTextStyle:Yx,removeChild:Ux,removeChildren:Xx,clearContent:Wx,addChild:Hx,setText:Jx,appendText:Zn,appendImage:Zd,appendCommand:ut,setWrapConfig:kx,runWordWrap:i0,runVerticalWrap:a0,drawContent:o0,getChildren:h0,getLastAppendedChildren:l0,getActiveChildren:f0};const v0=Phaser.Utils.Objects.GetFastValue;var c0={};class p0{constructor(i){this.pools=v0(i,"pools",c0)}free(i){if(!this.pools)return this;var t=i.type;return this.pools.hasOwnProperty(t)||(this.pools[t]=new ti),this.pools[t].push(i),i.onFree(),this}freeMultiple(i){if(!this.pools)return this;for(var t=0,f=i.length;t<f;t++)this.free(i[t]);return this}allocate(i){return!this.pools||!this.pools.hasOwnProperty(i)?null:this.pools[i].pop()}}const ll=Phaser.Utils.Objects.IsPlainObject,le=Phaser.Utils.Objects.GetValue;class bs extends xi{constructor(i,t,f,e,s,l){ll(t)?(l=t,t=le(l,"x",0),f=le(l,"y",0),e=le(l,"width",0),s=le(l,"height",0)):ll(e)&&(l=e,e=le(l,"width",0),s=le(l,"height",0));var n=e===0?1:e,o=s===0?1:s;super(i,t,f,n,o),this.type="rexDynamicText",this.autoRound=!0,this.padding={};var h=le(l,"style",void 0);this.defaultTextStyle=new Kn(h),this.textStyle=this.defaultTextStyle.clone(),this.background=new wx(this,le(l,"background",void 0)),this.innerBounds=new Gx(this,le(l,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.poolManager=new p0(l),this.setFixedSize(e,s),this.setPadding(le(l,"padding",0)),this.setWrapConfig(le(l,"wrap",void 0));var r=le(l,"text",void 0);r&&this.setText(r)}updateTexture(){return this.drawContent(),super.updateTexture(),this}}Object.assign(bs.prototype,d0);tt.register("dynamicText",function(p,i,t,f,e){var s=new bs(this.scene,p,i,t,f,e);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.DynamicText",bs);var ns={setEventEmitter(p,i){return i===void 0&&(i=Phaser.Events.EventEmitter),this._privateEE=p===!0||p===void 0,this._eventEmitter=this._privateEE?new i:p,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(p){return this._eventEmitter&&p&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},ul=function(p){return p.replace(g0,"\\$&").replace(m0,"\\x2d")},g0=/[|\\{}()[\]^$+*?.]/g,m0=/-/g,x0=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,kd=function(p){return typeof p!="string"||(p===""?p=null:x0.test(p)?p=parseFloat(p):p==="false"?p=!1:p==="true"&&(p=!0)),p},y0=function(p,i){if(p==null)return[];for(var t=p.split(","),f=0,e=t.length;f<e;f++)t[f]=i(t[f]);return t};const T0="[a-z0-9-_.]+",S0="[ #a-z-_.0-9,|&]+",C0=function(p){return p};class jd{constructor(i){this.setEventEmitter(re(i,"eventEmitter",void 0)),this.setTagExpression(re(i,"regex.tag",T0)),this.setValueExpression(re(i,"regex.value",S0)),this.setValueConverter(re(i,"valueConvert",!0));var t=re(i,"delimiters","<>");this.setDelimiters(t[0],t[1]),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setTagExpression(i){return this.tagExpression=i,this}setValueExpression(i){return this.valueExpression=i,this}setValueConverter(i){return i===!0?i=kd:i||(i=C0),this.valueConverter=i,this}setDelimiters(i,t){t===void 0&&(t=i[1],i=i[0]),this.delimiterLeft=i,this.delimiterRight=t,i=ul(i),t=ul(t);var f=`${i}(${this.tagExpression})(=(${this.valueExpression}))?${t}`,e=`${i}/(${this.tagExpression})${t}`;return this.reTagOn=RegExp(f,"i"),this.reTagOff=RegExp(e,"i"),this.reSplit=RegExp(`${f}|${e}`,"gi"),this}setSource(i){return this.source=i,this}resetIndex(i){return i===void 0&&(i=0),this.progressIndex=i,this.reSplit.lastIndex=i,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this}start(i){return this.setSource(i).restart(),this}restart(){this.resetIndex().next()}next(){this.isPaused&&this.onResume();var i=this.source,t=i.length;for(this.reSplit.lastIndex===0&&this.onStart();!this.isPaused;){var f=this.reSplit.exec(i);if(!f){this.progressIndex<t&&this.onContent(i.substring(this.progressIndex,t)),this.onComplete();return}var e=f[0],s=this.reSplit.lastIndex-e.length;this.progressIndex<s&&this.onContent(i.substring(this.progressIndex,s)),this.reTagOff.test(e)?this.onTagEnd(e):this.onTagStart(e),this.progressIndex=this.reSplit.lastIndex}}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}onContent(i){this.emit("content",i),this.lastContent=i}onTagStart(i){var t=i.match(this.reTagOn),f=t[1],e=y0(t[3],this.valueConverter);this.skipEventFlag=!1,this.emit(`+${f}`,...e),this.skipEventFlag||this.emit("+",f,...e),this.lastTagStart=f}onTagEnd(i){var t=i.match(this.reTagOff)[1];this.skipEventFlag=!1,this.emit(`-${t}`),this.skipEventFlag||this.emit("-",t),this.lastTagEnd=t}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.emit("complete",this),this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}}Object.assign(jd.prototype,ns);const E0=Phaser.Utils.Objects.GetValue;var P0=function(p,i,t){var f=E0(t,"tags.color","color"),e;i.on("start",function(){e=p.textStyle.color}).on(`+${f}`,function(s){p.textStyle.setColor(s),i.skipEvent()}).on(`-${f}`,function(){p.textStyle.setColor(e),i.skipEvent()}).on("complete",function(){p.textStyle.setColor(e)})};const M0=Phaser.Utils.Objects.GetValue;var A0=function(p,i,t){var f=M0(t,"tags.stroke","stroke"),e;i.on("start",function(){e=p.textStyle.stroke,p.textStyle.setStrokeStyle(null)}).on(`+${f}`,function(s){s===void 0&&(s=e),p.textStyle.setStrokeStyle(s),i.skipEvent()}).on(`-${f}`,function(){p.textStyle.setStrokeStyle(null),i.skipEvent()}).on("complete",function(){p.textStyle.setStrokeStyle(e)})};const R0=Phaser.Utils.Objects.GetValue;var O0=function(p,i,t){var f=R0(t,"tags.b","b");i.on("start",function(){p.textStyle.setBold(!1)}).on(`+${f}`,function(){p.textStyle.setBold(!0),i.skipEvent()}).on(`-${f}`,function(){p.textStyle.setBold(!1),i.skipEvent()})};const L0=Phaser.Utils.Objects.GetValue;var F0=function(p,i,t){var f=L0(t,"tags.i","i");i.on("start",function(){p.textStyle.setItalic(!1)}).on(`+${f}`,function(){p.textStyle.setItalic(!0),i.skipEvent()}).on(`-${f}`,function(){p.textStyle.setItalic(!1),i.skipEvent()})};const I0=Phaser.Utils.Objects.GetValue;var D0=function(p,i,t){var f=I0(t,"tags.size","size"),e;i.on("start",function(){e=p.textStyle.fontSize}).on(`+${f}`,function(s){p.textStyle.setFontSize(s),i.skipEvent()}).on(`-${f}`,function(){p.textStyle.setFontSize(e),i.skipEvent()}).on("complete",function(){p.textStyle.setFontSize(e)})};const B0=Phaser.Utils.Objects.GetValue;var w0=function(p,i,t){var f=B0(t,"tags.y","y"),e;i.on("start",function(){e=p.textStyle.offsetY,p.textStyle.setOffsetY(0)}).on(`+${f}`,function(s){s===void 0&&(s=e),p.textStyle.setOffsetY(s),i.skipEvent()}).on(`-${f}`,function(){p.textStyle.setOffsetY(0),i.skipEvent()}).on("complete",function(){p.textStyle.setOffsetY(0)})};const G0=Phaser.Utils.Objects.GetValue;var N0=function(p,i,t){var f=G0(t,"tags.shadow","shadow"),e;i.on("start",function(){e=p.textStyle.shadowColor,p.textStyle.setShadowColor(null)}).on(`+${f}`,function(s){s===void 0&&(s=e),p.textStyle.setShadowColor(s),i.skipEvent()}).on(`-${f}`,function(){p.textStyle.setShadowColor(null),i.skipEvent()}).on("complete",function(){p.textStyle.setShadowColor(e)})};const b0=Phaser.Utils.Objects.GetValue;var V0=function(p,i,t){var f=b0(t,"tags.align","align");i.on(`+${f}`,function(e){p.textStyle.setAlign(e),i.skipEvent()}).on(`-${f}`,function(){p.textStyle.setAlign(),i.skipEvent()}).on("complete",function(){p.textStyle.setAlign()})};const z0=Phaser.Utils.Objects.GetValue;var Y0=function(p,i,t){var f=z0(t,"tags.img","img");i.on(`+${f}`,function(e){var s=p.imageManager.get(e);Zd.call(p,s.key,s.frame,{width:s.width,hieght:s.height,leftSpace:s.left,rightSpace:s.right}),i.skipEvent()}).on(`-${f}`,function(){i.skipEvent()})};const U0=Phaser.Utils.Objects.GetValue;var X0=function(p,i,t){var f=U0(t,"tags.speed","speed"),e;i.on("start",function(){e=p.typeWriter.speed}).on(`+${f}`,function(s){fl(p,s),i.skipEvent()}).on(`-${f}`,function(){fl(p,e),i.skipEvent()}).on("complete",function(){p.typeWriter.speed=e})},W0=function(p){this.typeWriter.setSpeed(p)},fl=function(p,i){ut.call(p,"speed",W0,i,p)};const H0=Phaser.Utils.Objects.GetValue;var $0=function(p,i,t){var f=H0(t,"tags.se","se");i.on(`+${f}`,function(e,s){ut.call(p,"se",K0,[e,s],p),i.skipEvent()}).on(`-${f}`,function(){i.skipEvent()})},K0=function(p){if(!this.skipSoundEffect){var i=p[0],t=p[1];this.soundManager.playSoundEffect(i),t&&this.soundManager.fadeInSoundEffect(t)}};const J0=Phaser.Utils.Objects.GetValue;var Z0=function(p,i,t){var f=J0(t,"tags.se.fadein","se.fadein");i.on(`+${f}`,function(e){ut.call(p,"se.fadein",Q0,e,p),i.skipEvent()}).on(`-${f}`,function(){i.skipEvent()})},Q0=function(p){this.soundManager.fadeInSoundEffect(p)};const k0=Phaser.Utils.Objects.GetValue;var j0=function(p,i,t){var f=k0(t,"tags.se.fadeout","se.fadeout");i.on(`+${f}`,function(e,s){s=s==="stop",ut.call(p,"se.fadeout",q0,[e,s],p),i.skipEvent()}).on(`-${f}`,function(){i.skipEvent()})},q0=function(p){this.soundManager.fadeOutSoundEffect(...p)};const _0=Phaser.Utils.Objects.GetValue;var ty=function(p,i,t){var f=_0(t,"tags.se.volume","se.volume");i.on(`+${f}`,function(e){ut.call(p,"se.volume",ey,e,p),i.skipEvent()}).on(`-${f}`,function(){i.skipEvent()})},ey=function(p){this.soundManager.setSoundEffectVolume(p)};const iy=Phaser.Utils.Objects.GetValue;var sy=function(p,i,t){var f=iy(t,"tags.bgm","bgm");i.on(`+${f}`,function(e,s){ut.call(p,"bgm",ny,[e,s],p),i.skipEvent()}).on(`-${f}`,function(){ut.call(p,"bgm.stop",ry,void 0,p),i.skipEvent()})},ny=function(p){var i=p[0],t=p[1];this.soundManager.playBackgroundMusic(i),t&&this.soundManager.fadeInBackgroundMusic(t)},ry=function(){this.soundManager.stopBackgroundMusic()};const ay=Phaser.Utils.Objects.GetValue;var oy=function(p,i,t){var f=ay(t,"tags.bgm.fadein","bgm.fadein");i.on(`+${f}`,function(e){ut.call(p,"bgm.fadein",hy,e,p),i.skipEvent()}).on(`-${f}`,function(){i.skipEvent()})},hy=function(p){this.soundManager.fadeInBackgroundMusic(p)};const ly=Phaser.Utils.Objects.GetValue;var uy=function(p,i,t){var f=ly(t,"tags.bgm.fadeout","bgm.fadeout");i.on(`+${f}`,function(e,s){ut.call(p,"bgm.fadeout",fy,[e,s],p),i.skipEvent()}).on(`-${f}`,function(){i.skipEvent()})},fy=function(p){this.soundManager.fadeOutBackgroundMusic(...p)};const dy=Phaser.Utils.Objects.GetValue;var vy=function(p,i,t){var f=dy(t,"tags.bgm.cross","bgm.cross");i.on(`+${f}`,function(e,s){ut.call(p,"bgm.cross",cy,[e,s],p),i.skipEvent()}).on(`-${f}`,function(){i.skipEvent()})},cy=function(p){this.soundManager.crossFadeBackgroundMusic(...p)};const py=Phaser.Utils.Objects.GetValue;var gy=function(p,i,t){var f=py(t,"tags.bgm.pause","bgm.pause");i.on(`+${f}`,function(){ut.call(p,"bgm.pause",my,void 0,p),i.skipEvent()}).on(`-${f}`,function(){ut.call(p,"bgm.resume",xy,void 0,p),i.skipEvent()})},my=function(){this.soundManager.pauseBackgroundMusic()},xy=function(){this.soundManager.resumeBackgroundMusic()};const yy=Phaser.Utils.Objects.GetValue;var Ty=function(p,i,t){var f=yy(t,"tags.camera.fadein","camera.fadein");i.on(`+${f}`,function(e,s,l,n){ut.call(p,"camera.fadein",Sy,[e,s,l,n],p),i.skipEvent()})},Sy=function(p){this.camera.fadeIn(...p)};const Cy=Phaser.Utils.Objects.GetValue;var Ey=function(p,i,t){var f=Cy(t,"tags.camera.fadeout","camera.fadeout");i.on(`+${f}`,function(e,s,l,n){ut.call(p,"camera.fadeout",Py,[e,s,l,n],p),i.skipEvent()})},Py=function(p){this.camera.fadeOut(...p)};const My=Phaser.Utils.Objects.GetValue;var Ay=function(p,i,t){var f=My(t,"tags.camera.shake","camera.shake");i.on(`+${f}`,function(e,s){ut.call(p,"camera.shake",Ry,[e,s],p),i.skipEvent()})},Ry=function(p){this.camera.shake(...p)};const Oy=Phaser.Utils.Objects.GetValue;var Ly=function(p,i,t){var f=Oy(t,"tags.camera.flash","camera.flash");i.on(`+${f}`,function(e,s,l,n){ut.call(p,"camera.flash",Fy,[e,s,l,n],p),i.skipEvent()})},Fy=function(p){this.camera.flash(...p)};const Iy=Phaser.Utils.Objects.GetValue;var Dy=function(p,i,t){var f=Iy(t,"tags.camera.zoom","camera.zoom");i.on(`+${f}`,function(e){ut.call(p,"camera.zoom",By,e,p),i.skipEvent()}).on(`+${f}.to`,function(e,s,l){ut.call(p,"camera.zoom.to",wy,[e,s,l],p),i.skipEvent()})},By=function(p){this.camera.setZoom(p)},wy=function(p){this.camera.zoomTo(...p)};const Gy=Phaser.Utils.Objects.GetValue,dl=Phaser.Math.DegToRad;var Ny=function(p,i,t){var f=Gy(t,"tags.camera.rotate","camera.rotate");i.on(`+${f}`,function(e){e=dl(e),ut.call(p,"camera.rotate",by,e,p),i.skipEvent()}).on(`+${f}.to`,function(e,s,l){e=dl(e),ut.call(p,"camera.rotate.to",Vy,[e,s,l],p),i.skipEvent()})},by=function(p){this.camera.setRotation(p)},Vy=function(p){var i=p[0],t=p[1],f=p[2];this.camera.rotateTo(i,!1,t,f)};const zy=Phaser.Utils.Objects.GetValue;var Yy=function(p,i,t){var f=zy(t,"tags.camera.scroll","camera.scroll");i.on(`+${f}`,function(e,s){ut.call(p,"camera.scroll",Uy,[e,s],p),i.skipEvent()}).on(`+${f}.to`,function(e,s,l,n){ut.call(p,"camera.scroll.to",Xy,[e,s,l,n],p),i.skipEvent()})},Uy=function(p){this.camera.setScroll(...p)},Xy=function(p){var i=p[0],t=p[1],f=p[2],e=p[3],s=this.camera,l=s.scrollX,n=s.scrollY;s.setScroll(i,t),i+=s.centerX,t+=s.centerY,s.setScroll(l,n),s.pan(i,t,f,e)};const vl=Phaser.Utils.Objects.GetValue;var Wy=function(p,i,t){var f=vl(t,"tags.wait","wait"),e=vl(t,"tags.click","click");i.on(`+${f}`,function(s){cl(p,s),i.skipEvent()}).on(`-${f}`,function(){i.skipEvent()}).on(`+${e}`,function(){cl(p,"click"),i.skipEvent()}).on(`-${e}`,function(){i.skipEvent()})},Hy=function(p){this.typeWriter.wait(p)},cl=function(p,i){ut.call(p,"wait",Hy,i,p)};const $y=Phaser.Utils.Objects.GetValue;var pl=function(p,i){return p.length===2&&p[0]===i},Ky=function(p,i,t){var f=$y(t,"sprite","sprite");!f||i.on("+",function(e,...s){if(!i.skipEventFlag){var l=e.split(".");if(pl(l,f)){var n=l[1];ut.call(p,"sprite.add",Jy,[n,...s],p)}else return;i.skipEvent()}}).on("-",function(e){if(!i.skipEventFlag){var s=e.split(".");if(pl(s,f)){var l=s[1];ut.call(p,"sprite.remove",Zy,l,p)}else return;i.skipEvent()}})},Jy=function(p){this.spriteManager.add(...p)},Zy=function(p){this.spriteManager.remove(p)};const Qy=Phaser.Utils.Objects.GetValue;var ky=function(p,i,t){var f=Qy(t,"sprite","sprite");!f||i.on("-",function(e){if(!i.skipEventFlag){if(e===f)ut.call(p,"sprite.removeall",jy,void 0,p);else return;i.skipEvent()}})},jy=function(){this.spriteManager.removeAll()};const qy=Phaser.Utils.Objects.GetValue;var _y=function(p,i){return p.length===3&&p[0]===i&&p[2]==="texture"},tT=function(p,i,t){var f=qy(t,"sprite","sprite");!f||i.on("+",function(e,s,l){if(!i.skipEventFlag){var n=e.split(".");if(_y(n,f)){var o=n[1];ut.call(p,"sprite.texture",eT,[o,s,l],p)}else return;i.skipEvent()}})},eT=function(p){this.spriteManager.setTexture(...p)};const iT=Phaser.Utils.Objects.GetValue;var gl=function(p,i){return p.length===3&&p[0]===i&&p[2]==="play"},sT=function(p,i){return p.length===3&&p[0]===i&&p[2]==="stop"},nT=function(p,i,t){var f=iT(t,"sprite","sprite");!f||i.on("+",function(e){if(!i.skipEventFlag){var s=e.split("."),l;if(gl(s,f))l=s[1];else return;var n=Array.prototype.slice.call(arguments,1);ut.call(p,"sprite.play",rT,[l,n],p),i.skipEvent()}}).on("+",function(e){if(!i.skipEventFlag){var s=e.split("."),l;if(sT(s,f))l=s[1];else return;ut.call(p,"sprite.stop",ml,l,p),i.skipEvent()}}).on("-",function(e){if(!i.skipEventFlag){var s=e.split("."),l;if(gl(s,f))l=s[1];else return;ut.call(p,"sprite.stop",ml,l,p),i.skipEvent()}})},rT=function(p){var i=p[0],t=p[1],f=t.shift();this.spriteManager.playAnimation(i,f),t.length>0&&this.spriteManager.chainAnimation(i,t)},ml=function(p){this.spriteManager.stopAnimation(p)};const aT=Phaser.Utils.Objects.GetValue;var oT=function(p,i){return p.length===3&&p[0]===i&&p[2]==="chain"},hT=function(p,i,t){var f=aT(t,"sprite","sprite");!f||i.on("+",function(e){if(!i.skipEventFlag){var s=e.split("."),l;if(oT(s,f))l=s[1];else return;var n=Array.prototype.slice.call(arguments,1);ut.call(p,"sprite.chain",lT,[l,n],p),i.skipEvent()}})},lT=function(p){this.spriteManager.chainAnimation(...p)};const uT=Phaser.Utils.Objects.GetValue;var fT=function(p,i){return p.length===3&&p[0]===i&&p[2]==="pause"},dT=function(p,i,t){var f=uT(t,"sprite","sprite");!f||i.on("+",function(e){if(!i.skipEventFlag){var s=e.split("."),l;if(fT(s,f))l=s[1];else return;ut.call(p,"sprite.pause",vT,l,p),i.skipEvent()}})},vT=function(p){this.spriteManager.pauseAnimation(p)};const cT=Phaser.Utils.Objects.GetValue;var pT=function(p,i){return p.length===3&&p[0]===i},gT=function(p,i,t){var f=cT(t,"sprite","sprite");!f||i.on("+",function(e,s){if(!i.skipEventFlag){var l=e.split("."),n,o;if(pT(l,f))n=l[1],o=l[2];else return;ut.call(p,"sprite.set",mT,[n,o,s],p),i.skipEvent()}})},mT=function(p){this.spriteManager.setProperty(...p)};const xT=Phaser.Utils.Objects.GetValue;var yT={to:!0,yoyo:!0},TT=function(p,i){return p.length===4&&p[0]===i&&yT[p[3]]},ST=function(p,i,t){var f=xT(t,"sprite","sprite");!f||i.on("+",function(e,s,l,n){if(!i.skipEventFlag){var o=e.split("."),h,r,a;if(TT(o,f))h=o[1],r=o[2],a=o[3]==="yoyo";else return;ut.call(p,"sprite.ease",CT,[h,r,s,l,n,a],p),i.skipEvent()}})},CT=function(p){this.spriteManager.easeProperty(...p)},ET=function(p,i,t){i.on("start",function(){p.emit("parser.start",i)}).on("+",function(f,...e){if(!i.skipEventFlag){var s=`+${f}`;p.emit(`parser.${s}`,i,...e),xl(p,s,e)}}).on("-",function(f){if(!i.skipEventFlag){var e=`-${f}`;p.emit(`parser.${e}`,i),xl(p,e)}}).on("complete",function(){p.emit("parser.complete",i)})},PT=function(p,i){var t=`tag.${i}`;p==null?this.emit(t):this.emit(t,...p)},xl=function(p,i,t){ut.call(p,i,PT,t,p)};const MT=Phaser.Utils.Objects.GetValue;var AT=function(p,i,t){var f=MT(t,"tags.r","r");i.on(`+${f}`,function(){Zn.call(p,`
`),i.skipEvent()}).on(`-${f}`,function(){i.skipEvent()})},RT=function(p,i,t){i.on("content",function(f){Zn.call(p,f)})};const yl=[P0,A0,O0,F0,D0,w0,N0,V0,Y0,X0,$0,Z0,j0,ty,sy,oy,uy,vy,gy,Ty,Ey,Ay,Ly,Dy,Ny,Yy,Wy,Ky,ky,tT,nT,hT,dT,gT,ST,ET,AT,RT];var OT=function(p,i,t){for(var f=0,e=yl.length;f<e;f++)yl[f](p,i,t)},LT=function(p,i){for(var t=p.commentLineStart,f=i.split(`
`),e=0,s=f.length;e<s;e++){var l=f[e];l===""||(l.trim().length===0||t&&l.startsWith(t))&&(f[e]="")}return f.join("")};const FT=Phaser.Utils.Objects.GetValue;class IT extends jd{constructor(i,t){t===void 0&&(t={}),t.hasOwnProperty("delimiters")||(t.delimiters="[]"),super(t),OT(i,this,t),this.setCommentLineStartSymbol(FT(t,"comment","//"))}setCommentLineStartSymbol(i){return this.commentLineStart=i,this}start(i){return super.start(LT(this,i)),this}}var co=function(p,i){return new Promise(function(t,f){p.once(i,function(){t()})})},zt=function(p){return co(p,"complete")},DT=function(p){return this.children=p,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(p),this.typing(),zt(this)};const BT="delay",qd="anim";var _d=function(p){p===void 0&&(p=0);var i=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var t=this.getNextChild();if(!t){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(Jn(t)){var f=this.animationConfig;if(f.duration>0){var e=this.timeline.addTimer({name:qd,target:t,duration:f.duration,yoyo:f.yoyo,onStart:f.onStart,onProgress:f.onProgress,onComplete:f.onComplete});this.skipTypingAnimation&&e.seek(1)}else f.onStart&&f.onStart(t,0);this.textPlayer.emit("typing",t),i+=this.speed+p,p=0;var s=this.index===this.children.length;if(i>0&&!s){this.typingTimer=this.timeline.addTimer({name:BT,target:this,duration:i,onComplete:function(l,n,o){l.typingTimer=void 0,_d.call(l,o.remainder)}});break}}else $x(t)&&t.exec()}this.inTypingProcessLoop=!1},wT=function(){return this.timeline.pause(),this},GT=function(){return this.timeline.resume(),this},NT=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},bT=function(p){return this.isTypingPaused?(p===void 0&&(p=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=p):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(p)),this):this};const be="_remove.wait",Fa="_remove.play",Tl=[be,Fa];var yi=function(p,i,t,f,e){return function(){p.emit(be,e),i.apply(f,t)}},Sl=function(p,i,t,f,e){var s=yi(p,t,f,e,"custom"),l=i?`wait.${i}`:"wait";p.emit(l,s)},VT=function(p,i,t,f,e){return p.typeWriter.timeline.delayCall(i,t,f,e)},zT=function(p,i,t,f,e){var s=yi(p,t,f,e,"time"),l;p.once(be,function(){l&&(l.remove(),l=void 0)}),l=VT(p,i,s),p.emit("wait.time",i)},YT=function(p,i,t,f){var e=yi(p,i,t,f,"click"),s=p.clickEE;p.once(be,function(){s.off("pointerdown",e,p)}),s.once("pointerdown",e,p),p.emit("wait.click")},Cl=function(p,i,t,f,e){var s=yi(p,t,f,e,"music");i&&(p.once(be,function(){i.off("complete",s,p)}),i.once("complete",s,p)),p.emit("wait.music",i),i||s()},UT=function(p){switch(p){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},XT=function(p,i,t,f,e){var s=yi(p,t,f,e,`camera.${i}`),l=p.camera,n,o;switch(i){case"camera.fadein":n=l.fadeEffect,o="camerafadeincomplete";break;case"camera.fadeout":n=l.fadeEffect,o="camerafadeoutcomplete";break;case"camera.flash":n=l.flashEffect,o="cameraflashcomplete";break;case"camera.shake":n=l.shakeEffect,o="camerashakecomplete";break;case"camera.zoom":n=l.zoomEffect,o="camerazoomcomplete";break;case"camera.rotate":n=l.rotateToEffect,o="camerarotatecomplete";break;case"camera.scroll":n=l.panEffect,o="camerapancomplete";break}n.isRunning?(p.once(be,function(h){l.off(o,s,p)}),l.once(o,s,p),p.emit("wait.camera",i)):(p.emit("wait.camera",i),s())},WT=function(p,i,t,f,e){var s=yi(p,t,f,e,"keydown"),l=`keydown-${i.toUpperCase()}`,n=p.scene.input.keyboard;p.once(be,function(){n.off(l,s,p)}),n.once(l,s,p),p.emit("wait.keydown",i)},HT=function(p){var i=p.split(".");return i[0]==="sprite"&&i.length<=3},$T=function(p,i,t,f,e){var s=yi(p,t,f,e),l=i.split("."),n=p.spriteManager;switch(l.length){case 1:n.isEmpty?(p.emit("wait.sprite"),s()):(p.once(be,function(u){n.off("empty",s,p)}),n.once("empty",s,p),p.emit("wait.sprite"));break;case 2:var r=l[1];if(n.has(r)){var o=p.spriteManager.get(r),h=o.sprite;p.once(be,function(){h.off("destroy",s,p)}),h.once("destroy",s,p),p.emit("wait.sprite",r)}else p.emit("wait.sprite",r),s();break;case 3:var r=l[1],a=l[2],v=p.spriteManager.getTweenTask(r,a);v?(p.once(be,function(){v.off("complete",s,p)}),v.once("complete",s,p),p.emit("wait.sprite",r,a)):(p.emit("wait.sprite",r,a),s());break}};const KT=Phaser.Input.Keyboard.KeyCodes;var tv=function(p,i,t,f,e){typeof i=="string"&&i.length>1&&i.indexOf("|")!==-1?i=i.split("|"):i=[i];for(var s=0,l=i.length;s<l;s++){var n=i[s];if(n==null||n==="wait")Sl(p,void 0,t,f,e);else if(typeof n=="number"||!isNaN(n))zT(p,parseFloat(n),t,f,e);else if(n==="click")YT(p,t,f,e);else if(n==="se"){var o=p.soundManager.getLastSoundEffect();Cl(p,o,t,f,e)}else if(n==="bgm"){var o=p.soundManager.getBackgroundMusic();Cl(p,o,t,f,e)}else KT.hasOwnProperty(n.toUpperCase())?WT(p,n,t,f,e):UT(n)?XT(p,n,t,f,e):HT(n)?$T(p,n,t,f,e):Sl(p,n,t,f,e)}},JT=function(p){return this.ignoreWait?this:(this.pauseTyping(),tv(this.textPlayer,p,this.resumeTyping,[],this),this)},ZT=function(p){return this.timeline.setTimeScale(p),this},QT=function(p){return p===void 0&&(p=!0),this.ignoreWait=p,this},kT=function(p){if(p===void 0&&(p=!0),this.skipTypingAnimation=p,p)for(var i=this.timeline.getTimers(qd),t=0,f=i.length;t<f;t++)i[t].seek(1);return this},jT=function(p){if(p===void 0&&(p=!0),this.skipSoundEffect=p,p){var i=this.textPlayer._soundManager;i&&i.fadeOutAllSoundEffects(100,!0)}return this},qT=function(){return this.typingTimer&&this.typingTimer.seek(1),this},_T={start:DT,typing:_d,pause:wT,resume:GT,pauseTyping:NT,resumeTyping:bT,wait:JT,setTimeScale:ZT,setIgnoreWait:QT,setSkipTypingAnimation:kT,setSkipSoundEffect:jT,skipCurrentTypingDelay:qT};const t1=Phaser.Scene;var In=function(p){return p instanceof t1},ev=function(p){if(p==null||typeof p!="object")return null;if(In(p))return p;if(p.scene&&In(p.scene))return p.scene;if(p.parent&&p.parent.scene&&In(p.parent.scene))return p.parent.scene};const e1=Phaser.Utils.Objects.GetValue;class Yt{constructor(i,t){this.parent=i,this.scene=ev(i),this.isShutdown=!1,this.setEventEmitter(e1(t,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(i){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(i){this.shutdown(i)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(i,t){this.destroy(t)}}Object.assign(Yt.prototype,ns);const i1=Phaser.Utils.Objects.GetValue;class Qn extends Yt{constructor(i,t){super(i,t),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(i1(t,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(i){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(i))}setTickingMode(i){typeof i=="string"&&(i=s1[i]),this.tickingMode=i}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(i){this._isRunning!==i&&(this._isRunning=i,this.tickingMode===1&&i!=this.tickingState&&(i?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const s1={no:0,lazy:1,always:2},Gr=Phaser.Utils.Objects.GetValue;class n1 extends Qn{constructor(i,t){super(i,t),this.resetFromJSON(t),this.boot()}resetFromJSON(i){return this.isRunning=Gr(i,"isRunning",!1),this.timeScale=Gr(i,"timeScale",1),this.now=Gr(i,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(i){return i===void 0&&(i=0),this.delta=0,this.now=i,super.start(),this}seek(i){return this.now=i,this}setTimeScale(i){return this.timeScale=i,this}tick(i){return i*=this.timeScale,this.now+=i,this.delta=i,this.emit("update",this.now,this.delta),this}}class iv extends n1{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(i,t){return!this.isRunning||this.timeScale===0?this:(this.tick(t),this)}}var r1=function(p,i){return i===void 0&&(i=.5),p<=i?p=p/i:p=1-(p-i)/(1-i),p};const El=Phaser.Math.Clamp;class a1{constructor(i,t){this.setTimeline(i).reset(t)}setTimeline(i){return this.timeline=i,this}setName(i){return this.name=i,this}setCallbacks(i,t,f,e){return this.target=i,this.onStart=t,this.onProgress=f,this.onComplete=e,this}setDuration(i,t){return t===void 0&&(t=!1),this.duration=i,this.remainder=i,this.t=0,this.yoyo=t,this}setPaused(i){return this.isPaused=i,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(i){return this.removed=i,this}remove(){return this.removed=!0,this}seek(i){return this.remainder=this.duration*(1-i),this}reset(i){return this.setName(i.name).setDuration(i.duration,i.yoyo).setCallbacks(i.target,i.onStart,i.onProgress,i.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var i=1-this.remainder/this.duration;return i=El(i,0,1),this.yoyo&&(i=r1(i)),i}setProgress(i){i=El(i,0,1),this.remainder=this.duration*(1-i)}runCallback(i){!i||i(this.target,this.t,this)}update(i,t){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=t,this.t=this.getProgress(),this.runCallback(this.onProgress);var f=this.remainder<=0;return f&&this.runCallback(this.onComplete),f}}class o1 extends ti{allocate(){return this.pop()}free(i){i.onFree(),this.push(i)}freeMultiple(i){for(var t=0,f=i.length;t<f;t++)this.free(i[t]);return this}}const h1=Phaser.Utils.Objects.GetValue,l1=new o1;class u1 extends iv{constructor(i,t){super(i,t),this.addedTimers=[],this.timers=[],this.timerPool=h1(t,"pool",l1)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(i){var t=this.timerPool.allocate();return t?t.setTimeline(this).reset(i):t=new a1(this,i),this.addedTimers.push(t),t.runCallback(t.onStart),this.isRunning||this.start(),t}delayCall(i,t,f,e){var s=this.addTimer({duration:i,onComplete:function(l,n,o){f===void 0&&(f=[]),f.push(o),t.apply(e,f)}});return s}getTimers(i){for(var t=[],f=[this.addedTimers,this.timers],e=0,s=f.length;e<s;e++)for(var l=f[e],n=0,o=l.length;n<o;n++){var h=l[n];h.name===i&&t.push(h)}return t}update(i,t){super.update(i,t),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var f=[],e=0,s=this.timers.length;e<s;e++){var l=this.timers[e],n=l.update(this.now,this.delta);n?this.timerPool.free(l):f.push(l)}this.timers=f,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}const Nr=Phaser.Utils.Objects.GetValue;class sv{constructor(i,t){this.setEventEmitter(),this.textPlayer=i,this.isPageTyping=!1,this.timeline=new u1(i),this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(Nr(t,"onTypingStart",d1)),this.setSpeed(Nr(t,"speed",250)),this.setAnimationConfig(Nr(t,"animation",void 0))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.timeline.destroy(),this.timeline=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}setSpeed(i){return this.speed=i,this}setTypingStartCallback(i){return this.onTypeStart=i,this}setAnimationConfig(i){return i===void 0?i={}:i===!1&&(i={duration:0}),i.hasOwnProperty("duration")||(i.duration=1e3),i.hasOwnProperty("onStart")||(i.onStart=f1),this.animationConfig=i,this}getNextChild(){var i=this.children[this.index];return this.index=Math.min(this.index+1,this.children.length),i}}var f1=function(p){p.setVisible&&p.setVisible()},d1=function(p){for(var i=0,t=p.length;i<t;i++){var f=p[i];f.setVisible&&f.setVisible(!1)}};Object.assign(sv.prototype,ns,_T);class v1 extends Qn{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}}const ii=Phaser.Utils.Objects.GetValue,Pl=Phaser.Math.Clamp;class nv{constructor(i){this.resetFromJSON(i)}resetFromJSON(i){this.state=ii(i,"state",ds),this.timeScale=ii(i,"timeScale",1),this.delay=ii(i,"delay",0),this.repeat=ii(i,"repeat",0),this.repeatCounter=ii(i,"repeatCounter",0),this.duration=ii(i,"duration",0),this.nowTime=ii(i,"nowTime",0),this.justRestart=ii(i,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(i){return this.timeScale=i,this}setDelay(i){return i===void 0&&(i=0),this.delay=i,this}setDuration(i){return this.duration=i,this}setRepeat(i){return this.repeat=i,this}setRepeatInfinity(){return this.repeat=-1,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?zi:Vi,this.repeatCounter=0,this}stop(){return this.state=ds,this}update(i,t){this.state===ds||this.state===hn||t===0||this.timeScale===0||(this.nowTime+=t*this.timeScale,this.state=this.nowTime>=0?zi:Vi,this.justRestart=!1,this.nowTime>=this.duration&&(this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=hn)))}get t(){var i;switch(this.state){case ds:case Vi:i=0;break;case zi:i=this.nowTime/this.duration;break;case hn:i=1;break}return Pl(i,0,1)}set t(i){i=Pl(i,-1,1),i<0?(this.state=Vi,this.nowTime=-this.delay*i):(this.state=zi,this.nowTime=this.duration*i,i===1&&this.repeat!==0&&this.repeatCounter++)}setT(i){return this.t=i,this}get isIdle(){return this.state===ds}get isDelay(){return this.state===Vi}get isCountDown(){return this.state===zi}get isRunning(){return this.state===Vi||this.state===zi}get isDone(){return this.state===hn}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}}const ds=0,Vi=1,zi=2,hn=-1;class c1 extends v1{constructor(i,t){super(i,t),this.timer=new nv}shutdown(i){this.isShutdown||(super.shutdown(i),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const vs=Phaser.Utils.Objects.GetValue,Ml=Phaser.Utils.Objects.GetAdvancedValue,p1=Phaser.Tweens.Builders.GetEaseFunction;class rs extends c1{resetFromJSON(i){return this.timer.resetFromJSON(vs(i,"timer")),this.setEnable(vs(i,"enable",!0)),this.setTarget(vs(i,"target",this.parent)),this.setDelay(Ml(i,"delay",0)),this.setDuration(Ml(i,"duration",1e3)),this.setEase(vs(i,"ease","Linear")),this.setRepeat(vs(i,"repeat",0)),this}setEnable(i){return i==null&&(i=!0),this.enable=i,this}setTarget(i){return i===void 0&&(i=this.parent),this.target=i,this}setDelay(i){return this.delay=i,this}setDuration(i){return this.duration=i,this}setEase(i){return i===void 0&&(i="Linear"),this.ease=i,this.easeFn=p1(i),this}setRepeat(i){return this.repeat=i,this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(i){return i===void 0&&(i=!1),super.stop(),i&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(i,t){if(!this.isRunning||!this.enable||!this.parent.active)return this;var f=this.target,e=this.timer;return e.update(i,t),e.isDelay||this.updateGameObject(f,e),this.emit("update",f,this),e.isDone&&this.complete(),this}updateGameObject(i,t){}}const Al=Phaser.Utils.Objects.GetValue,Rl=Phaser.Utils.Objects.GetAdvancedValue,g1=Phaser.Math.Linear;class rv extends rs{constructor(i,t,f){t.scene=i,t.active=!0,super(t,f),this.volume={},this.resetFromJSON(f)}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(Al(i,"mode",0)),this.setEnable(Al(i,"enable",!0)),this.setVolumeRange(Rl(i,"volume.start",this.parent.volume),Rl(i,"volume.end",0)),this}setMode(i){return typeof i=="string"&&(i=m1[i]),this.mode=i,this}setVolumeRange(i,t){return this.volume.start=i,this.volume.end=t,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(i,t){i.volume=g1(this.volume.start,this.volume.end,t.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}}const m1={stop:1,destroy:2};var Ol=function(p,i,t,f,e){f===void 0&&(f=1),e===void 0&&(e=0);var s={mode:0,volume:{start:e,end:f},duration:t};typeof i=="string"&&(i=p.sys.sound.add(i));var l;return i.hasOwnProperty("_fade")?(l=i._fade,l.stop().resetFromJSON(s)):(l=new rv(p,i,s),i._fade=l),l.start(),i.isPlaying||i.setVolume(e).play(),i},br=function(p,i,t,f){f===void 0&&(f=!0);var e={mode:f?2:1,volume:{start:i.volume,end:0},duration:t},s;return i.hasOwnProperty("_fade")?(s=i._fade,s.stop().resetFromJSON(e)):(s=new rv(p,i,e),i._fade=s),s.start(),i.isPlaying||i.play(),i};const Vr=Phaser.Utils.Objects.GetValue,Ll=Phaser.Utils.Array.Remove;class Fl{constructor(i,t){this.scene=i,this.soundEffects=[],this.backgroundMusic=void 0,this.setBackgroundMusicLoopValue(Vr(t,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Vr(t,"bgm.fade",500));var f=Vr(t,"bgm.initial",void 0);f&&this.setCurrentBackgroundMusic(f)}destroy(i){if(this.soundEffects.length&&!i)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();this.soundEffects.length=0,this.backgroundMusic&&!i&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.scene=void 0}setBackgroundMusicLoopValue(i){return this.backgroundMusicLoopValue=i,this}setBackgroundMusicFadeTime(i){return this.backgroundMusicFadeTime=i,this}getSoundEffects(){return this.soundEffects}getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]}getBackgroundMusic(){return this.backgroundMusic}playSoundEffect(i){var t=this.scene.sys.sound.add(i);return this.soundEffects.push(t),t.once("complete",function(){t.destroy(),this.scene&&Ll(this.soundEffects,t)},this).once("destroy",function(){!this.scene||Ll(this.soundEffects,t)},this).play(),this}setSoundEffectVolume(i){var t=this.getLastSoundEffect();return t&&t.setVolume(i),this}fadeInSoundEffect(i){var t=this.getLastSoundEffect();return t&&Ol(this.scene,t,i),this}fadeOutSoundEffect(i,t){var f=this.getLastSoundEffect();return f&&br(this.scene,f,i,t),this}fadeOutAllSoundEffects(i,t){for(var f=this.soundEffects.length-1;f>=0;f--)br(this.scene,this.soundEffects[f],i,t);return this}setCurrentBackgroundMusic(i){this.backgroundMusic=i,i&&(i.setLoop(this.backgroundMusicLoopValue),i.once("complete",function(){this.backgroundMusic.destroy(),this.backgroundMusic=void 0},this).once("destroy",function(){this.backgroundMusic=void 0},this),i.isPlaying||i.play())}playBackgroundMusic(i){return this.backgroundMusic&&this.backgroundMusic.key===i?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.scene.sys.sound.add(i)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)}pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this}resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this}stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this}fadeInBackgroundMusic(i){return this.backgroundMusic&&Ol(this.scene,this.backgroundMusic,i),this}fadeOutBackgroundMusic(i,t){return this.backgroundMusic&&br(this.scene,this.backgroundMusic,i,t),this}crossFadeBackgroundMusic(i,t){var f=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(i).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=f,this}}class x1{constructor(i,t,f){this.spriteManager=i,this.sprite=t.setName(f),this.tweens={},this.name=f}get scene(){return this.spriteManager.scene}destroy(){this.freeSprite().freeTweens(),this.spriteManager=void 0}freeSprite(){return this.sprite.destroy(),this.sprite=void 0,this}freeTweens(){var i=this.tweens;for(var t in i)i[t].remove(),delete i[t];return this}setProperty(i,t){return this.sprite[i]=t,this}easeProperty(i,t,f,e,s,l){var n=this.tweens;n.hasOwnProperty(i)&&n[i].remove();var o={targets:this.sprite,duration:f,ease:e,yoyo:s,onComplete:function(){n[i].remove(),delete n[i],l&&l()},onCompleteScope:this};return o[i]=t,n[i]=this.scene.tweens.add(o),this}setTexture(i,t){return this.sprite.setTexture(i,t),this}playAnimation(i){return this.sprite.play(i),this}stopAnimation(){return this.sprite.stop(),this}chainAnimation(i){return this.sprite.chain(i),this}pauseAnimation(){return this.sprite.anims.pause(),this}}var y1=function(p){return p>>16&255},T1=function(p){return p>>8&255},S1=function(p){return p&255};const C1=~(255<<16)&16777215,E1=~(255<<8)&16777215,P1=16776960;var M1=function(p,i){return(i&255)<<16|p&C1},A1=function(p,i){return(i&255)<<8|p&E1},R1=function(p,i){return i&255|p&P1},O1=function(p,i,t,f){return(i&255)<<16|(t&255)<<8|f&255},L1=function(p,i){return p.hasOwnProperty("tintR")||(i===void 0&&(i=16777215),Object.defineProperty(p,"tint",{get:function(){return p._tintRGB},set:function(t){t=Math.floor(t)&16777215,p.setTint(t),p._tintRGB!==t&&(p._tintRGB=t,p._tintR=y1(t),p._tintG=T1(t),p._tintB=S1(t))}}),Object.defineProperty(p,"tintR",{get:function(){return p._tintR},set:function(t){t=Math.floor(t)&255,p._tintR!==t&&(p._tintR=t,p._tintRGB=M1(p._tintRGB,t),p.tint=p._tintRGB)}}),Object.defineProperty(p,"tintG",{get:function(){return p._tintG},set:function(t){t=Math.floor(t)&255,p._tintG!==t&&(p._tintG=t,p._tintRGB=A1(p._tintRGB,t),p.tint=p._tintRGB)}}),Object.defineProperty(p,"tintB",{get:function(){return p._tintB},set:function(t){t=Math.floor(t)&255,p._tintB!==t&&(p._tintB=t,p._tintRGB=R1(p._tintRGB,t),p.tint=p._tintRGB)}}),Object.defineProperty(p,"tintGray",{get:function(){return Math.floor((p._tintR+p._tintG+p._tintB)/3)},set:function(t){t=Math.floor(t)&255,(p._tintR!==t||p._tintG!==t||p._tintB!==t)&&(p._tintR=t,p._tintG=t,p._tintB=t,p._tintRGB=O1(p._tintRGB,t,t,t),p.tint=p._tintRGB)}}),p.tint=i),p},F1=function(p){for(var i in p)return!1;return!0};const zr=Phaser.Utils.Objects.GetValue,I1=Phaser.Utils.Array.Remove;class Ia{constructor(i,t){this.scene=i,this.setEventEmitter(zr(t,"eventEmitter",void 0)),this.setCreateCallback(zr(t,"createCallback","sprite")),this.setSpriteFadeTime(zr(t,"fade",500)),this.sprites={},this.removedSprites=[]}destroy(i){this.clear(!i),this.createCallback=void 0,this.scene=void 0}setCreateCallback(i){return i==="sprite"?this.createCallback=function(t,f,e){return t.add.sprite(0,0,f,e)}:i==="image"?this.createCallback=function(t,f,e){return t.add.image(0,0,f,e)}:this.createCallback=i,this}setSpriteFadeTime(i){return this.fadeTime=i,this}has(i){return this.sprites.hasOwnProperty(i)}get(i){return this.sprites[i]}getTweenTask(i,t){if(this.has(i)){var f=this.get(i).tweens;if(f.hasOwnProperty(t))return f[t]}return null}get isEmpty(){return F1(this.sprites)&&this.removedSprites.length===0}clear(i){i===void 0&&(i=!0);for(var t in this.sprites)i&&this.sprites[t].destroy(),delete this.sprites[t];return this.removedSprites.length=0,this}add(i,t,f){this.remove(i);var e;if(arguments.length===3)e=this.createCallback(this.scene,t,f);else{var s=Array.prototype.slice.call(arguments,1);e=this.createCallback(this.scene,...s)}this.fadeTime>0&&L1(e),e.once("destroy",function(){I1(this.removedSprites,e),this.isEmpty&&this.emit("empty")},this);var l=new x1(this,e,i);return this.sprites[i]=l,this.fadeTime>0&&l.setProperty("tintGray",0).easeProperty("tintGray",255,this.fadeTime),this}setProperty(i,t,f){return this.has(i)?(this.get(i).setProperty(t,f),this):this}easeProperty(i,t,f,e,s,l,n){return this.has(i)?(e===void 0&&(e=1e3),s===void 0&&(s="Linear"),this.get(i).easeProperty(t,f,e,s,l,n),this):this}remove(i){if(!this.has(i))return this;var t=this.get(i);return delete this.sprites[i],this.removedSprites.push(t.sprite),this.fadeTime>0?t.easeProperty("tintGray",0,this.fadeTime,"Linear",!1,function(){t.destroy()}):t.destroy(),this}removeAll(){for(var i in this.sprites)this.remove(i);return this}setTexture(i,t,f){return this.has(i)?(this.get(i).setTexture(t,f),this):this}playAnimation(i,t){return this.has(i)||this.add(i),this.get(i).playAnimation(t),this}stopAnimation(i){return this.has(i)?(this.get(i).stopAnimation(),this):this}chainAnimation(i,t){return this.has(i)?(this.get(i).chainAnimation(t),this):this}pauseAnimation(i){return this.has(i)?(this.get(i).pauseAnimation(),this):this}}Object.assign(Ia.prototype,ns);var D1=function(p){return In(p)?this.clickEE=p.input:this.clickEE=p.setInteractive(),this},B1=function(p){return this.camera=p,this},w1=function(p){var i=this;p?typeof p=="function"?this.nextPageInput=function(t,f,e){var s=yi(i,t,f,e);p.call(i,s)}:this.nextPageInput=function(t,f,e){tv(i,p,t,f,e)}:this.nextPageInput=null},G1=function(p,i){return this.imageManager.add(p,i),this},N1=function(p){return this.isPlaying?this:(this.removeChildren(),this.parser.start(p),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},b1=function(p){var i=zt(this);return this.play(p),i};const V1=Phaser.Utils.Objects.GetValue;var av=function(){if(!this.isPlaying||this.isPageTyping)return this;var p=V1(this.wrapConfig,"callback",this.runWordWrap);typeof p=="string"&&(p=this[p]);var i=p.call(this,this.lastWrapResult);this.lastWrapResult=i,this.emit("page.start");var t=function(){this.emit(Fa),i.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.nextPageInput&&this.nextPageInput(av,[],this))};this.once(Fa,function(){this.typeWriter.off("complete",t,this)}),this.typeWriter.once("complete",t,this).start(i.children)},z1=function(){return this.typeWriter.pause(),this},Y1=function(){return this.typeWriter.resume(),this},U1=function(p){return this.typeWriter.setTimeScale(p),this},X1=function(p){return this.typeWriter.setIgnoreWait(p),this},W1=function(){if(!this.isPlaying||!this.isPageTyping)return this;var p=this.typeWriter.speed,i=this.typeWriter.ignoreWait,t=this.typeWriter.skipTypingAnimation,f=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setSpeed(p).setIgnoreWait(i).setSkipTypingAnimation(t).setSkipSoundEffect(f)},this).setSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},H1={setClickTarget:D1,setTargetCamera:B1,setNextPageInput:w1,addImage:G1,play:N1,playPromise:b1,typingNextPage:av,pause:z1,resume:Y1,setTimeScale:U1,setIgnoreWait:X1,showPage:W1},$1=function(p){for(var i=0,t=Tl.length;i<t;i++)p.emit(Tl[i])};const Il=Phaser.Utils.Objects.IsPlainObject,si=Phaser.Utils.Objects.GetValue;class po extends bs{constructor(i,t,f,e,s,l){Il(t)?l=t:Il(e)&&(l=e),l===void 0&&(l={});var n=l.text;delete l.text,super(i,t,f,e,s,l),this.type="rexTextPlayer",this.parser=new IT(this,si(l,"parser",void 0)),this.typeWriter=new sv(this,si(l,"typing",void 0)),this._imageManager=void 0;var o=si(l,"images",void 0);o&&this.addImage(o),this._soundManager=void 0;var h=si(l,"sounds",void 0);h&&(this._soundManager=new Fl(this.scene,h)),this.setTargetCamera(si(l,"camera",this.scene.sys.cameras.main)),this._spriteManager=void 0;var r=si(l,"sprites",void 0);r&&(this._spriteManager=new Ia(this.scene,r)),this.setClickTarget(si(l,"clickTarget",this)),this.setNextPageInput(si(l,"nextPageInput",null)),this.isPlaying=!1,n&&this.play(n)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new so(this.scene)),this._imageManager}get soundManager(){return this._soundManager===void 0&&(this._soundManager=new Fl(this.scene)),this._soundManager}get spriteManager(){return this._spriteManager===void 0&&(this._spriteManager=new Ia(this.scene)),this._spriteManager}destroy(i){!this.scene||($1(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(i),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(i),this._imageManager=void 0,this._soundManager&&this._soundManager.destroy(i),this._soundManager=void 0,this.camera=void 0,this._spriteManager&&this._spriteManager.destroy(i),this._spriteManager=void 0,this.clickEE=void 0,super.destroy(i))}get isPageTyping(){return this.typeWriter.isPageTyping}}Object.assign(po.prototype,H1);tt.register("textPlayer",function(p,i,t,f,e){var s=new po(this.scene,p,i,t,f,e);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.TextPlayer",po);var Yr=function(p,i,t,f,e,s,l,n,o,h,r,a){h===void 0&&(h=0),r===void 0&&(r=2*Math.PI),a===void 0&&(a=!1),i.beginPath(),i.ellipse(t,f,e,s,0,h,r,a),l!=null&&(i.fillStyle=l,i.fill()),n!=null&&(i.strokeStyle=n,i.lineWidth=o,i.stroke())},K1=function(p,i,t,f,e,s,l,n,o,h,r){o===void 0&&n!=null&&(o=2),h===void 0&&(h="start"),r===void 0&&(r="alphabetic"),i.font=s,i.textAlign=h,i.textBaseline=r,i.fillStyle=l,i.strokeStyle=n,i.lineWidth=o,i.lineCap="round",i.lineJoin="round",n!=null&&n!=="none"&&o>0&&i.strokeText(e,t,f),l!=null&&l!=="none"&&i.fillText(e,t,f)},J1=function(){var p=this.radius,i=this.thickness*this.radius,t=this.radius-i/2,f=this.radius-i,e=this.canvas,s=this.context;if(this.trackColor&&i>0&&(s.save(),Yr(e,s,p,p,t,t,void 0,this.trackColor,i),s.restore()),this.barColor&&t>0){var l,n,o;if(this.value===1)l=!1,n=0,o=2*Math.PI;else{l=this.anticlockwise,n=this.startAngle;var h=2*Math.PI*(l?1-this.value:this.value);o=h+n}s.save(),Yr(e,s,p,p,t,t,void 0,this.barColor,i,n,o,l),s.restore()}if(this.centerColor&&f>0){var r;this.centerColor2?(r=this.context.createRadialGradient(p,p,0,p,p,f),r.addColorStop(0,this.centerColor),r.addColorStop(1,this.centerColor2)):r=this.centerColor,s.save(),Yr(e,s,p,p,f,f,r),s.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(s.save(),K1(e,s,p,p,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),s.restore())};const cs=Phaser.Utils.Objects.GetValue,Z1=Phaser.Math.Linear;class go extends rs{constructor(i,t){super(i,t),this.resetFromJSON(),this.boot()}start(i){if(this.timer.isRunning)return this;var t=this.target;this.propertyKey=cs(i,"key","value");var f=t[this.propertyKey];return this.fromValue=cs(i,"from",f),this.toValue=cs(i,"to",f),this.setEase(cs(i,"ease",this.ease)),this.setDuration(cs(i,"duration",this.duration)),this.timer.setDuration(this.duration),t[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(i,t){var f=t.t;f=this.easeFn(f),i[this.propertyKey]=Z1(this.fromValue,this.toValue,f)}}const Q1=Phaser.Math.Percent;var k1=function(p){return this.easeValuePropName=p,this},j1=function(p){return this.easeValueDuration=p,this},q1=function(p){return this.easeFunction=p,this},_1=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},tS=function(p,i,t){return p==null?this:(i!==void 0&&(p=Q1(p,i,t)),this.easeValueTask===void 0&&(this.easeValueTask=new go(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:p,duration:this.easeValueDuration,ease:this.easeFunction}),this)},Vs={setEaseValuePropName:k1,setEaseValueDuration:j1,setEaseValueFunction:q1,stopEaseValue:_1,easeValueTo:tS};const St=Phaser.Utils.Objects.GetValue,eS=Phaser.Utils.Objects.IsPlainObject,Dl=Phaser.Math.Clamp,iS=Phaser.Math.Linear,Bl=Phaser.Math.Percent,sS=Phaser.Math.DegToRad(270);class mo extends xi{constructor(i,t,f,e,s,l,n){eS(t)&&(n=t,t=St(n,"x",0),f=St(n,"y",0),e=St(n,"radius",1),s=St(n,"barColor",void 0),l=St(n,"value",0));var o=e*2;super(i,t,f,o,o),this.type="rexCircularProgressCanvas",this.eventEmitter=St(n,"eventEmitter",this),this.setRadius(e),this.setTrackColor(St(n,"trackColor",void 0)),this.setBarColor(s),this.setCenterColor(St(n,"centerColor",void 0)),this.setThickness(St(n,"thickness",.2)),this.setStartAngle(St(n,"startAngle",sS)),this.setAnticlockwise(St(n,"anticlockwise",!1)),this.setTextColor(St(n,"textColor",void 0)),this.setTextStrokeColor(St(n,"textStrokeColor",void 0),St(n,"textStrokeThickness",void 0));var h=St(n,"textFont",void 0);h?this.setTextFont(h):this.setTextFont(St(n,"textSize","16px"),St(n,"textFamily","Courier"),St(n,"textStyle","")),this.setTextFormatCallback(St(n,"textFormatCallback",void 0),St(n,"textFormatCallbackScope",void 0));var r=St(n,"valuechangeCallback",null);if(r!==null){var a=St(n,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",r,a)}this.setEaseValuePropName("value").setEaseValueDuration(St(n,"easeValue.duration",0)).setEaseValueFunction(St(n,"easeValue.ease","Linear")),this.setValue(l)}resize(i,t){return i=Math.floor(Math.min(i,t)),i===this.width?this:(super.resize(i,i),this.setRadius(i/2),this)}get value(){return this._value}set value(i){i=Dl(i,0,1);var t=this._value,f=t!=i;this.dirty=this.dirty||f,this._value=i,f&&this.eventEmitter.emit("valuechange",this._value,t,this.eventEmitter)}setValue(i,t,f){return i==null?this:(t!==void 0&&(i=Bl(i,t,f)),this.value=i,this)}addValue(i,t,f){return t!==void 0&&(i=Bl(i,t,f)),this.value+=i,this}getValue(i,t){var f=this.value;return i!==void 0&&(f=iS(i,t,f)),f}get radius(){return this._radius}set radius(i){this.dirty=this.dirty||this._radius!=i,this._radius=i;var t=i*2;this.resize(t,t)}setRadius(i){return this.radius=i,this}get trackColor(){return this._trackColor}set trackColor(i){i=lt(i,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=i,this._trackColor=i}setTrackColor(i){return this.trackColor=i,this}get barColor(){return this._barColor}set barColor(i){i=lt(i,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=i,this._barColor=i}setBarColor(i){return this.barColor=i,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!=i,this._startAngle=i}setStartAngle(i){return this.startAngle=i,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!=i,this._anticlockwise=i}setAnticlockwise(i){return i===void 0&&(i=!0),this.anticlockwise=i,this}get thickness(){return this._thickness}set thickness(i){i=Dl(i,0,1),this.dirty=this.dirty||this._thickness!=i,this._thickness=i}setThickness(i){return this.thickness=i,this}get centerColor(){return this._centerColor}set centerColor(i){i=lt(i,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=i,this._centerColor=i}get centerColor2(){return this._centerColor2}set centerColor2(i){i=lt(i,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=i,this._centerColor2=i}setCenterColor(i,t){return this.centerColor=i,this.centerColor2=t,this}get textColor(){return this._textColor}set textColor(i){i=lt(i,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=i,this._textColor=i}setTextColor(i){return this.textColor=i,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(i){i=lt(i,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=i,this._textStrokeColor=i}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(i){this.dirty=this.dirty||this._textStrokeThickness!=i,this._textStrokeThickness=i}setTextStrokeColor(i,t){return t===void 0&&(t=2),this.textStrokeColor=i,this.textStrokeThickness=t,this}get textFont(){return this._textFont}set textFont(i){this.dirty=this.dirty||this._textFont!=i,this._textFont=i}setTextFont(i,t,f){var e;return t===void 0?e=i:e=f+" "+i+" "+t,this.textFont=e,this}setTextFormatCallback(i,t){return this.textFormatCallback=i,this.textFormatCallbackScope=t,this}updateTexture(){return this.clear(),J1.call(this),super.updateTexture(),this}getFormatText(i){i===void 0&&(i=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(i):t=this.textFormatCallback.call(this.textFormatCallbackScope,i),t}}Object.assign(mo.prototype,Vs);tt.register("circularProgressCanvas",function(p,i,t,f,e,s){var l=new mo(this.scene,p,i,t,f,e,s);return this.scene.add.existing(l),l});st(window,"RexPlugins.UI.CircularProgressCanvas",mo);const nS=Phaser.GameObjects.GetCalcMatrix;var rS=function(p,i,t,f){i.updateData(),t.addToRenderList(i);var e=p.pipelines.set(i.pipeline),s=nS(i,t,f),l=e.calcMatrix.copyFrom(s.calc),n=i._displayOriginX,o=i._displayOriginY,h=t.alpha*i.alpha;p.pipelines.preBatch(i);for(var r=i.geom,a=0,v=r.length;a<v;a++)r[a].webglRender(e,l,h,n,o);p.pipelines.postBatch(i)};const aS=Phaser.Renderer.Canvas.SetTransform;var oS=function(p,i,t,f){i.updateData(),t.addToRenderList(i);var e=p.currentContext;if(aS(p,e,i,t,f)){for(var s=i._displayOriginX,l=i._displayOriginY,n=i.geom,o=0,h=n.length;o<h;o++)n[o].canvasRender(e,s,l);e.restore()}},hS={renderWebGL:rS,renderCanvas:oS};const lS=Phaser.GameObjects.Shape,uS=Phaser.Utils.Array.Remove;class xo extends lS{constructor(i,t,f,e,s){t===void 0&&(t=0),f===void 0&&(f=0),e===void 0&&(e=0),s===void 0&&(s=e),super(i,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(t,f),this.setSize(e,s),this.updateDisplayOrigin()}get width(){return this._width}set width(i){this.setSize(i,this._height)}get height(){return this._height}set height(i){this.setSize(this._width,i)}setDirty(i){return i===void 0&&(i=!0),this.dirty=i,this}setSize(i,t){this.isSizeChanged=this.isSizeChanged||this._width!==i||this._height!==t,this.dirty=this.dirty||this.isSizeChanged,this._width=i,this._height=t,this.updateDisplayOrigin();var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=i,f.hitArea.height=t),this}resize(i,t){return this.setSize(i,t),this}get fillColor(){return this._fillColor}set fillColor(i){this.setFillStyle(i,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(i){this.setFillStyle(this._fillColor,i)}setFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.fillColor!==i||this.fillAlpha!==t,this._fillColor=i,this._fillAlpha=t,this}get lineWidth(){return this._lineWidth}set lineWidth(i){this.setStrokeStyle(i,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(i){this.setStrokeStyle(this._lineWidth,i,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(i){this.setStrokeStyle(this._lineWidth,this._strokeColor,i)}setStrokeStyle(i,t,f){return f===void 0&&(f=1),this.dirty=this.dirty||this.lineWidth!==i||this.strokeColor!==t||this.strokeAlpha!==f,this._lineWidth=i,this._strokeColor=t,this._strokeAlpha=f,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var i=this.geom,t=0,f=i.length;t<f;t++){var e=i[t];e.dirty&&e.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,ci(this.shapes),this}getShape(i){return this.shapes[i]}getShapes(){return this.geom}addShape(i){this.geom.push(i);var t=i.name;return t&&(this.shapes[t]=i),this.dirty=!0,this}deleteShape(i){var t=this.getShape(i);return t&&(delete this.shapes[i],uS(this.geom,t)),this}}Object.assign(xo.prototype,hS);var fS=function(p,i){return p===void 0?this.isFilled=!1:(i===void 0&&(i=1),this.isFilled=!0,this.fillColor=p,this.fillAlpha=i),this},dS=function(p,i,t){return p===void 0||i===void 0?this.isStroked=!1:(t===void 0&&(t=1),this.isStroked=!0,this.lineWidth=p,this.strokeColor=i,this.strokeAlpha=t),this},vS={fillStyle:fS,lineStyle:dS};class kn{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(i){return this.name=i,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(i,t,f,e,s){}canvasRender(i,t,f){}updateData(){this.dirty=!1}}Object.assign(kn.prototype,vS,Xn);const cS=Phaser.Geom.Polygon.Earcut;class jn extends kn{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=cS(this.pathData),super.updateData(),this}webglRender(i,t,f,e,s){this.isFilled&&Xf(i,t,this,f,e,s),this.isStroked&&Wn(i,this,f,e,s)}canvasRender(i,t,f){var e=this.pathData,s=e.length-1,l=e[0]-t,n=e[1]-f;i.beginPath(),i.moveTo(l,n),this.closePath||(s-=2);for(var o=2;o<s;o+=2){var h=e[o]-t,r=e[o+1]-f;i.lineTo(h,r)}this.closePath&&i.closePath(),this.isFilled&&(Bs(i,this),i.fill()),this.isStroked&&(ws(i,this),i.stroke())}}const wl=Phaser.Math.DegToRad;class qn extends jn{constructor(i,t,f,e,s,l,n,o){i===void 0&&(i=0),t===void 0&&(t=0),f===void 0&&(f=0),e===void 0&&(e=0),s===void 0&&(s=0),l===void 0&&(l=360),n===void 0&&(n=!1),o===void 0&&(o=!1),super(),this.setCenterPosition(i,t),this.setRadius(f,e),this.setAngle(s,l,n),this.setPie(o),this.setIterations(32)}get x(){return this._x}set x(i){this.dirty=this.dirty||this._x!==i,this._x=i}get y(){return this._y}set y(i){this.dirty=this.dirty||this._y!==i,this._y=i}setCenterPosition(i,t){return t===void 0&&(t=i),this.x=i,this.y=t,this}get radiusX(){return this._radiusX}set radiusX(i){this.dirty=this.dirty||this._radiusX!==i,this._radiusX=i}get radiusY(){return this._radiusY}set radiusY(i){this.dirty=this.dirty||this._radiusY!==i,this._radiusY=i}setRadius(i,t){return t===void 0&&(t=i),this.radiusX=i,this.radiusY=t,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!==i,this._startAngle=i}get endAngle(){return this._endAngle}set endAngle(i){this.dirty=this.dirty||this._endAngle!==i,this._endAngle=i}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!==i,this._anticlockwise=i}setAngle(i,t,f){return f===void 0&&(f=!1),this.startAngle=i,this.endAngle=t,this.anticlockwise=f,this}get pie(){return this._pie}set pie(i){this.dirty=this.dirty||this._pie!==i,this._pie=i}setPie(i){return i===void 0&&(i=!0),this.pie=i,this}get iterations(){return this._iterations}set iterations(i){this.dirty=this.dirty||this._iterations!==i,this._iterations=i}setIterations(i){return this.iterations=i,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),_i(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(i,t,f){i.beginPath();var e=this.x-t,s=this.y-f,l=wl(this.startAngle),n=wl(this.endAngle);this.pie&&(i.moveTo(e,s),i.lineTo(e+Math.cos(l)*this.radiusX,s+Math.sin(l)*this.radiusY)),i.ellipse(e,s,this.radiusX,this.radiusY,0,l,n,this.anticlockwise),this.pie&&i.lineTo(e,s),this.isFilled&&(Bs(i,this),i.fill()),this.isStroked&&(ws(i,this),i.stroke())}}class Da extends qn{constructor(i,t,f){super(i,t,f,f,0,360)}}class pS extends jn{constructor(i){super(),this.setCurve(i),this.setIterations(32)}get curve(){return this._curve}set curve(i){this.dirty=this.dirty||this._curve!==i,this._curve=i}setCurve(i){return this.curve=i,this}get iterations(){return this._iterations}set iterations(i){this.dirty=this.dirty||this._iterations!==i,this._iterations=i}setIterations(i){return this.iterations=i,this}updateData(){this.pathData.length=0;for(var i=this.curve.getPoints(this.iterations),t=0,f=i.length;t<f;t++)this.pathData.push(i[t].x,i[t].y);return this.pathData.push(i[0].x,i[0].y),super.updateData(),this}}class gS extends qn{constructor(i,t,f,e){super(i,t,f,e,0,360)}}class mS extends jn{constructor(i,t,f,e){i===void 0&&(i=0),t===void 0&&(t=0),f===void 0&&(f=0),e===void 0&&(e=0),super(),this.setP0(i,t),this.setP1(f,e)}get x0(){return this._x0}set x0(i){this.dirty=this.dirty||this._x0!==i,this._x0=i}get y0(){return this._y0}set y0(i){this.dirty=this.dirty||this._y0!==i,this._y0=i}setP0(i,t){return this.x0=i,this.y0=t,this}get x1(){return this._x1}set x1(i){this.dirty=this.dirty||this._x1!==i,this._x1=i}get y1(){return this._y1}set y1(i){this.dirty=this.dirty||this._y1!==i,this._y1=i}setP1(i,t){return this.x1=i,this.y1=t,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var xS=function(p,i,t){return t.length=0,t.push(p,i),t};const Gl=Phaser.Math.Interpolation.QuadraticBezier;var Nl=function(p,i,t,f,e,s){for(var l=s.length,n=s[l-2],o=s[l-1],h=1,r=e-1;h<=r;h++){var a=h/r;s.push(Gl(a,n,p,t),Gl(a,o,i,f))}return s};const yS=Phaser.Math.RotateAround;var TS=function(p,i,t,f){for(var e={x:0,y:0},s=0,l=f.length-1;s<l;s+=2)e.x=f[s],e.y=f[s+1],yS(e,p,i,t),f[s]=e.x,f[s+1]=e.y;return f},SS=function(p,i,t){for(var f=0,e=t.length-1;f<e;f+=2)t[f]+=p,t[f+1]+=i;return t},CS=function(p,i){i===void 0&&(i=[]);for(var t=0,f=p.length-1;t<f;t+=2)i.push({x:p[t],y:p[t+1]});return i};const ES=Phaser.Geom.Polygon;var PS=function(p,i){return i===void 0&&(i=new ES),i.setTo(p),i};const MS=Phaser.Math.DegToRad;class AS{constructor(i){i===void 0&&(i=[]),this.pathData=i,this.closePath=!1,this.setIterations(32),this.lastPointX=void 0,this.lastPointY=void 0}setIterations(i){return this.iterations=i,this}startAt(i,t){return xS(i,t,this.pathData),this.lastPointX=i,this.lastPointY=t,this}lineTo(i,t,f){return f===void 0&&(f=!1),f&&(i+=this.lastPointX,t+=this.lastPointY),qi(i,t,this.pathData),this.lastPointX=i,this.lastPointY=t,this}verticalLineTo(i,t){return this.lineTo(i,this.lastPointY,t),this}horizontalLineTo(i,t){return this.lineTo(this.lastPointX,i,t),this}ellipticalArc(i,t,f,e,s,l,n){n===void 0&&(n=!1),_i(i,t,f,e,s,l,n,this.iterations,this.pathData);var o=this.pathData.length;return this.lastPointX=this.pathData[o-2],this.lastPointY=this.pathData[o-1],this}arc(i,t,f,e,s,l){return this.ellipticalArc(i,t,f,f,e,s,l),this}quadraticBezierTo(i,t,f,e){return Nl(i,t,f,e,this.iterations,this.pathData),this.lastPointX=f,this.lastPointY=e,this.lastCX=i,this.lastCY=t,this}smoothQuadraticBezierTo(i,t){var f=this.lastPointX*2-this.lastCX,e=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(f,e,i,t),this}cubicBezierCurveTo(i,t,f,e,s,l){return Nl(i,t,f,e,s,l,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=l,this.lastCX=f,this.lastCY=e,this}smoothCubicBezierCurveTo(i,t,f,e){var s=this.lastPointX*2-this.lastCX,l=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(s,l,i,t,f,e),this}close(){return this.closePath=!0,this}end(){return this.pathData.push(this.lastPointX,this.lastPointY),this}rotateAround(i,t,f){if(this.pathData.length===0)return this;f=MS(f),TS(i,t,f,this.pathData);var e=this.pathData.length;if(this.lastPointX=this.pathData[e-2],this.lastPointY=this.pathData[e-1],this.lastCX!==void 0){var s={x:this.lastCX,y:this.lastCY};PointRotateAround(s,i,t,f),this.lastCX=s.x,this.lastCY=s.y}return this}offset(i,t){return SS(i,t,this.pathData),this}toPoints(){return CS(this.pathData)}toPolygon(i){return PS(this.pathData,i)}draw(i,t,f){var e=this.toPoints();return t&&i.fillPoints(e,this.closePath,this.closePath),f&&i.strokePoints(e,this.closePath,this.closePath),this}}class RS extends jn{constructor(){super(),this.builder=new AS(this.pathData)}get iterations(){return this.builder.iterations}set iterations(i){this.dirty=this.dirty||this.builder.iterations!==i,this.builder.setIterations(i)}setIterations(i){return this.iterations=i,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}startAt(i,t){return this.builder.startAt(i,t),this.dirty=!0,this}lineTo(i,t,f){return this.builder.lineTo(i,t,f),this.dirty=!0,this}verticalLineTo(i,t){return this.builder.verticalLineTo(i,t),this.dirty=!0,this}horizontalLineTo(i,t){return this.builder.horizontalLineTo(i,t),this.dirty=!0,this}ellipticalArc(i,t,f,e,s,l,n){return this.builder.ellipticalArc(i,t,f,e,s,l,n),this.dirty=!0,this}arc(i,t,f,e,s,l){return this.builder.arc(i,t,f,e,s,l),this.dirty=!0,this}quadraticBezierTo(i,t,f,e){return this.builder.quadraticBezierTo(i,t,f,e),this.dirty=!0,this}smoothQuadraticBezierTo(i,t){return this.builder.smoothQuadraticBezierTo(i,t),this.dirty=!0,this}cubicBezierCurveTo(i,t,f,e,s,l){return this.builder.cubicBezierCurveTo(i,t,f,e,s,l),this.dirty=!0,this}smoothCubicBezierCurveTo(i,t,f,e){return this.builder.smoothCubicBezierCurveTo(i,t,f,e),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(i,t,f){return this.builder.rotateAround(i,t,f),this.dirty=!0,this}offset(i,t){return this.builder.offset(i,t),this.dirty=!0,this}toPolygon(i){return this.builder.toPolygon(i)}}const OS=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class LS extends kn{constructor(i,t,f,e){i===void 0&&(i=0),t===void 0&&(t=0),f===void 0&&(f=0),e===void 0&&(e=f),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(i,t),this.setSize(f,e)}get x(){return this._x}set x(i){this.dirty=this.dirty||this._x!==i,this._x=i}get y(){return this._y}set y(i){this.dirty=this.dirty||this._y!==i,this._y=i}setTopLeftPosition(i,t){return this.x=i,this.y=t,this}get width(){return this._width}set width(i){this.dirty=this.dirty||this._width!==i,this._width=i}get height(){return this._height}set height(i){this.dirty=this.dirty||this._height!==i,this._height=i}setSize(i,t){return this.width=i,this.height=t,this}updateData(){this.pathData.length=0;var i=this.x,t=i+this.width,f=this.y,e=f+this.height;return this.pathData.push(i,f),this.pathData.push(t,f),this.pathData.push(t,e),this.pathData.push(i,e),this.pathData.push(i,f),super.updateData(),this}webglRender(i,t,f,e,s){if(this.isFilled){var l=i.fillTint,n=OS(this.fillColor,this.fillAlpha*f);l.TL=n,l.TR=n,l.BL=n,l.BR=n,i.batchFillRect(-e+this.x,-s+this.y,this.width,this.height)}this.isStroked&&Wn(i,this,f,e,s)}canvasRender(i,t,f){this.isFilled&&(Bs(i,this),i.fillRect(-t,-f,this.width,this.height)),this.isStroked&&(ws(i,this),i.beginPath(),i.rect(-t,-f,this.width,this.height),i.stroke())}}const FS=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class IS extends kn{constructor(i,t,f,e,s,l){i===void 0&&(i=0),t===void 0&&(t=0),f===void 0&&(f=0),e===void 0&&(e=0),s===void 0&&(s=0),l===void 0&&(l=0),super(),this.pathData=[],this.closePath=!0,this.setP0(i,t),this.setP1(f,e),this.setP2(s,l)}get x0(){return this._x0}set x0(i){this.dirty=this.dirty||this._x0!==i,this._x0=i}get y0(){return this._y0}set y0(i){this.dirty=this.dirty||this._y0!==i,this._y0=i}setP0(i,t){return this.x0=i,this.y0=t,this}get x1(){return this._x1}set x1(i){this.dirty=this.dirty||this._x1!==i,this._x1=i}get y1(){return this._y1}set y1(i){this.dirty=this.dirty||this._y1!==i,this._y1=i}setP1(i,t){return this.x1=i,this.y1=t,this}get x2(){return this._x2}set x2(i){this.dirty=this.dirty||this._x2!==i,this._x2=i}get y2(){return this._y2}set y2(i){this.dirty=this.dirty||this._y2!==i,this._y2=i}setP2(i,t){return this.dirty=this.dirty||this.x2!==i||this.y2!==t,this.x2=i,this.y2=t,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(i,t,f,e,s){if(this.isFilled){var l=FS(this.fillColor,this.fillAlpha*f),n=this.x0-e,o=this.y0-s,h=this.x1-e,r=this.y1-s,a=this.x2-e,v=this.y2-s,u=t.getX(n,o),d=t.getY(n,o),c=t.getX(h,r),g=t.getY(h,r),m=t.getX(a,v),x=t.getY(a,v);i.batchTri(u,d,c,g,m,x,l,l,l)}this.isStroked&&Wn(i,this,f,e,s)}canvasRender(i,t,f){var e=this.x1-t,s=this.y1-f,l=this.x2-t,n=this.y2-f,o=this.x3-t,h=this.y3-f;i.beginPath(),i.moveTo(e,s),i.lineTo(l,n),i.lineTo(o,h),i.closePath(),this.isFilled&&(Bs(i,this),i.fill()),this.isStroked&&(ws(i,this),i.stroke())}}const Ut=Phaser.Utils.Objects.GetValue,DS=Phaser.Utils.Objects.IsPlainObject,bl=Phaser.Math.Clamp,BS=Phaser.Math.Linear,Vl=Phaser.Math.Percent,wS=Phaser.Math.DegToRad(270),GS=Phaser.Math.RadToDeg;class _n extends xo{constructor(i,t,f,e,s,l,n){DS(t)&&(n=t,t=Ut(n,"x",0),f=Ut(n,"y",0),e=Ut(n,"radius",1),s=Ut(n,"barColor",void 0),l=Ut(n,"value",0));var o=e*2;super(i,t,f,o,o),this.type="rexCircularProgress",this.eventEmitter=Ut(n,"eventEmitter",this),this.addShape(new Da().setName("track")).addShape(new qn().setName("bar")).addShape(new Da().setName("center")),this.setRadius(e),this.setTrackColor(Ut(n,"trackColor",void 0)),this.setBarColor(s),this.setCenterColor(Ut(n,"centerColor",void 0)),this.setThickness(Ut(n,"thickness",.2)),this.setStartAngle(Ut(n,"startAngle",wS)),this.setAnticlockwise(Ut(n,"anticlockwise",!1));var h=Ut(n,"valuechangeCallback",null);if(h!==null){var r=Ut(n,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",h,r)}this.setEaseValuePropName("value").setEaseValueDuration(Ut(n,"easeValue.duration",0)).setEaseValueFunction(Ut(n,"easeValue.ease","Linear")),this.setValue(l)}resize(i,t){return i=Math.floor(Math.min(i,t)),i===this.width?this:(super.resize(i,i),this.setRadius(i/2),this)}get value(){return this._value}set value(i){i=bl(i,0,1);var t=this._value,f=t!=i;this.dirty=this.dirty||f,this._value=i,f&&this.eventEmitter.emit("valuechange",this._value,t,this.eventEmitter)}setValue(i,t,f){return i==null?this:(t!==void 0&&(i=Vl(i,t,f)),this.value=i,this)}addValue(i,t,f){return t!==void 0&&(i=Vl(i,t,f)),this.value+=i,this}getValue(i,t){var f=this.value;return i!==void 0&&(f=BS(i,t,f)),f}get radius(){return this._radius}set radius(i){this.dirty=this.dirty||this._radius!=i,this._radius=i;var t=i*2;this.resize(t,t)}setRadius(i){return this.radius=i,this}get trackColor(){return this._trackColor}set trackColor(i){this.dirty=this.dirty||this._trackColor!=i,this._trackColor=i}setTrackColor(i){return this.trackColor=i,this}get barColor(){return this._barColor}set barColor(i){this.dirty=this.dirty||this._barColor!=i,this._barColor=i}setBarColor(i){return this.barColor=i,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!=i,this._startAngle=i}setStartAngle(i){return this.startAngle=i,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!=i,this._anticlockwise=i}setAnticlockwise(i){return i===void 0&&(i=!0),this.anticlockwise=i,this}get thickness(){return this._thickness}set thickness(i){i=bl(i,0,1),this.dirty=this.dirty||this._thickness!=i,this._thickness=i}setThickness(i){return this.thickness=i,this}get centerColor(){return this._centerColor}set centerColor(i){this.dirty=this.dirty||this._centerColor!=i,this._centerColor=i}setCenterColor(i){return this.centerColor=i,this}updateShapes(){var i=this.radius,t=this.thickness*this.radius,f=this.radius-t/2,e=this.radius-t,s=this.getShape("track");this.trackColor!=null&&t>0?s.setCenterPosition(i,i).setRadius(f).lineStyle(t,this.trackColor):s.reset();var l=this.getShape("bar");if(this.barColor!=null&&f>0){var n,o,h;if(this.value===1)n=!1,o=0,h=361;else{n=this.anticlockwise,o=GS(this.startAngle);var r=360*(n?1-this.value:this.value);h=r+o}l.setCenterPosition(i,i).setRadius(f).setAngle(o,h,n).lineStyle(t,this.barColor)}else l.reset();var a=this.getShape("center");this.centerColor&&e>0?a.setCenterPosition(i,i).setRadius(e).fillStyle(this.centerColor):a.reset()}}Object.assign(_n.prototype,Vs);tt.register("circularProgress",function(p,i,t,f,e,s){var l=new _n(this.scene,p,i,t,f,e,s);return this.scene.add.existing(l),l});st(window,"RexPlugins.UI.CircularProgress",_n);var tr=function(p){return p.hasOwnProperty("rexSizer")||(p.rexSizer={}),p.rexSizer},NS=function(p){var i=tr(p);return i.hasOwnProperty("prevState")||(i.prevState={}),i.prevState};const ov=Phaser.Geom.Rectangle;Phaser.Scale.Center;var er=function(p,i){i===void 0?i=new ov:i===!0&&(i=bS);var t=p.sys.scale,f=t.baseSize,e=t.parentSize,s=t.canvasBounds,l=t.displayScale,n=s.x>=0?0:-(s.x*l.x),o=s.y>=0?0:-(s.y*l.y),h;e.width>=s.width?h=f.width:h=f.width-(s.width-e.width)*l.x;var r;return e.height>=s.height?r=f.height:r=f.height-(s.height-e.height)*l.y,i.setTo(n,o,h,r),i},bS=new ov,VS=function(p){return p===void 0&&(p=er(this.scene)),this.left=Math.max(this.left,p.left),this.right=Math.min(this.right,p.right),this.top=Math.max(this.top,p.top),this.bottom=Math.min(this.bottom,p.bottom),this};const jt=Phaser.Display.Align;var ir={center:jt.CENTER,left:jt.LEFT_CENTER,right:jt.RIGHT_CENTER,top:jt.TOP_CENTER,bottom:jt.BOTTOM_CENTER,"left-top":jt.TOP_LEFT,"left-center":jt.LEFT_CENTER,"left-bottom":jt.BOTTOM_LEFT,"center-top":jt.TOP_CENTER,"center-center":jt.CENTER,"center-bottom":jt.BOTTOM_CENTER,"right-top":jt.TOP_RIGHT,"right-center":jt.RIGHT_CENTER,"right-bottom":jt.BOTTOM_RIGHT},Ba=new Phaser.GameObjects.Zone({sys:{queueDepthSort:te,events:{once:te}}},0,0,1,1);Ba.setOrigin(0);var ei={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},mt=function(p){return p.displayWidth!==void 0?p.displayWidth:p.width},ct=function(p){return p.displayHeight!==void 0?p.displayHeight:p.height},yo=function(p){var i=ct(p);return p.y+i-i*p.originY},To=function(p){var i=mt(p);return p.x-i*p.originX+i*.5},So=function(p,i){var t=ct(p);return p.y=i-t+t*p.originY,p},Co=function(p,i){var t=mt(p),f=t*p.originX;return p.x=i+f-t*.5,p},zS=function(p,i,t,f){return t===void 0&&(t=0),f===void 0&&(f=0),Co(p,To(i)+t),So(p,yo(i)+f),p},Eo=function(p){var i=mt(p);return p.x-i*p.originX},Po=function(p,i){var t=mt(p);return p.x=i+t*p.originX,p},YS=function(p,i,t,f){return t===void 0&&(t=0),f===void 0&&(f=0),Po(p,Eo(i)-t),So(p,yo(i)+f),p},Mo=function(p){var i=mt(p);return p.x+i-i*p.originX},Ao=function(p,i){var t=mt(p);return p.x=i-t+t*p.originX,p},US=function(p,i,t,f){return t===void 0&&(t=0),f===void 0&&(f=0),Ao(p,Mo(i)+t),So(p,yo(i)+f),p},Ro=function(p,i){var t=ct(p),f=t*p.originY;return p.y=i+f-t*.5,p},XS=function(p,i,t){return Co(p,i),Ro(p,t)},Oo=function(p){var i=ct(p);return p.y-i*p.originY+i*.5},WS=function(p,i,t,f){return t===void 0&&(t=0),f===void 0&&(f=0),XS(p,To(i)+t,Oo(i)+f),p},HS=function(p,i,t,f){return t===void 0&&(t=0),f===void 0&&(f=0),Po(p,Eo(i)-t),Ro(p,Oo(i)+f),p},$S=function(p,i,t,f){return t===void 0&&(t=0),f===void 0&&(f=0),Ao(p,Mo(i)+t),Ro(p,Oo(i)+f),p},Lo=function(p){var i=ct(p);return p.y-i*p.originY},Fo=function(p,i){var t=ct(p);return p.y=i+t*p.originY,p},KS=function(p,i,t,f){return t===void 0&&(t=0),f===void 0&&(f=0),Co(p,To(i)+t),Fo(p,Lo(i)-f),p},JS=function(p,i,t,f){return t===void 0&&(t=0),f===void 0&&(f=0),Po(p,Eo(i)-t),Fo(p,Lo(i)-f),p},ZS=function(p,i,t,f){return t===void 0&&(t=0),f===void 0&&(f=0),Ao(p,Mo(i)+t),Fo(p,Lo(i)-f),p},Ye=[];Ye[ei.BOTTOM_CENTER]=zS;Ye[ei.BOTTOM_LEFT]=YS;Ye[ei.BOTTOM_RIGHT]=US;Ye[ei.CENTER]=WS;Ye[ei.LEFT_CENTER]=HS;Ye[ei.RIGHT_CENTER]=$S;Ye[ei.TOP_CENTER]=KS;Ye[ei.TOP_LEFT]=JS;Ye[ei.TOP_RIGHT]=ZS;var hv=function(p,i,t,f,e){return Ye[t](p,i,f,e)},sr=function(p,i,t,f,e,s){Ba.setPosition(i,t).setSize(f,e),hv(p,Ba,s)};const zl=Phaser.Geom.Rectangle,pi=Phaser.Geom.Vector2,QS=Phaser.Math.RotateAround;var Io=function(p,i){if(i===void 0?i=new zl:i===!0&&(Ur===void 0&&(Ur=new zl),i=Ur),p.getBounds)return p.getBounds(i);var t,f,e,s,l,n,o,h;if(p.parentContainer){var r=p.parentContainer.getBoundsTransformMatrix();Yl(p,i),r.transformPoint(i.x,i.y,i),t=i.x,f=i.y,Ul(p,i),r.transformPoint(i.x,i.y,i),e=i.x,s=i.y,Xl(p,i),r.transformPoint(i.x,i.y,i),l=i.x,n=i.y,Wl(p,i),r.transformPoint(i.x,i.y,i),o=i.x,h=i.y}else Yl(p,i),t=i.x,f=i.y,Ul(p,i),e=i.x,s=i.y,Xl(p,i),l=i.x,n=i.y,Wl(p,i),o=i.x,h=i.y;return i.x=Math.min(t,e,l,o),i.y=Math.min(f,s,n,h),i.width=Math.max(t,e,l,o)-i.x,i.height=Math.max(f,s,n,h)-i.y,i},Ur=void 0,Yl=function(p,i,t){return i===void 0?i=new pi:i===!0&&(ce===void 0&&(ce=new pi),i=ce),p.getTopLeft?p.getTopLeft(i):(i.x=p.x-mt(p)*p.originX,i.y=p.y-ct(p)*p.originY,nr(p,i,t))},Ul=function(p,i,t){return i===void 0?i=new pi:i===!0&&(ce===void 0&&(ce=new pi),i=ce),p.getTopRight?p.getTopRight(i):(i.x=p.x-mt(p)*p.originX+mt(p),i.y=p.y-ct(p)*p.originY,nr(p,i,t))},Xl=function(p,i,t){return i===void 0?i=new pi:i===!0&&(ce===void 0&&(ce=new pi),i=ce),p.getBottomLeft?p.getBottomLeft(i):(i.x=p.x-mt(p)*p.originX,i.y=p.y-ct(p)*p.originY+ct(p),nr(p,i,t))},Wl=function(p,i,t){return i===void 0?i=new pi:i===!0&&(ce===void 0&&(ce=new pi),i=ce),p.getBottomRight?p.getBottomRight(i):(i.x=p.x-mt(p)*p.originX+mt(p),i.y=p.y-ct(p)*p.originY+ct(p),nr(p,i,t))},ce=void 0,nr=function(p,i,t){if(t===void 0&&(t=!1),p.rotation!==0&&QS(i,p.x,p.y,p.rotation),t&&p.parentContainer){var f=p.parentContainer.getBoundsTransformMatrix();f.transformPoint(i.x,i.y,i)}return i};const ps=Phaser.Utils.Objects.GetValue,kS=Phaser.GameObjects.Group;var jS=function(p,i){var t=p.scene,f,e,s,l;if(typeof i=="number")f=i;else{f=ps(i,"color",16777215);var n=ps(i,"name",!1);n&&(e=ps(n,"createTextCallback",qS),s=ps(n,"createTextCallbackScope",void 0),l=ps(n,"align","left-top"),typeof l=="string"&&(l=ir[l]))}if(e&&!p.children){p.children=new kS(t),p.once("destroy",function(d,c){d.children.destroy(!c),d.children=void 0});var o=p.clear.bind(p);p.clear=function(){o(),p.children.clear(!1,!0)}}for(var h=this.getAllShownChildren([this]),r,a,v=0,u=h.length;v<u;v++){if(r=h[v],r.getBounds||r.width!==void 0&&r.height!==void 0)Ai=Io(r,Ai);else continue;f!=null&&p.lineStyle(1,f).strokeRectShape(Ai),r.name&&e&&(s?a=e.call(s,t):a=e(t),a&&(a.setText(r.name),p.children.add(a),sr(a,Ai.x,Ai.y,Ai.width,Ai.height,l)))}return this},qS=function(p,i,t){return p.add.text(0,0,"")},Ai=void 0;const ln=Phaser.Utils.Objects.GetValue;var as=function(p,i){return i===void 0&&(i={}),typeof p=="number"?(i.left=p,i.right=p,i.top=p,i.bottom=p):(i.left=ln(p,"left",0),i.right=ln(p,"right",0),i.top=ln(p,"top",0),i.bottom=ln(p,"bottom",0)),i};const _S=xe.prototype.add;var zs=function(p){return _S.call(this,p),this.sizerEventsEnable&&(p.emit("sizer.add",p,this),this.emit("add",p,this)),this},tC={addBackground(p,i,t){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof i=="string"&&(t=i,i=void 0),i===void 0&&(i=0),zs.call(this,p),this.backgroundChildren.push(p);var f=this.getSizerConfig(p);return f.padding=as(i),t!==void 0&&this.addChildrenMap(t,p),this},isBackground(p){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(p)!==-1}},eC={removeFromParentSizer(){var p=this.getParentSizer();return p&&p.remove(this),this}},Hl=function(p,i){return this.childrenMap===void 0&&(this.childrenMap={}),this.childrenMap[p]=i,this},iC=function(p,i){if(typeof p=="string"&&(p=p.split(".")),p.length!==0){var t=p.shift(),f=null;if(t.charAt(0)==="#")t=t.substring(1),f=this.getByName(t,i);else if(t.indexOf("[")===-1)this.childrenMap&&(f=this.childrenMap[t]);else{var e=t.match(sC);if(e!=null&&this.childrenMap){var s=this.childrenMap[e[1]];s&&(f=s[e[2]])}}return p.length===0?f:f&&f.childrenMap?f.getElement(p):null}};const sC=/(\S+)\[(\d+)\]/i;var nC={getInnerPadding(p){return Ln(this.space,p)},setInnerPadding(p,i){return Fn(this.space,p,i),this},getOuterPadding(p){return Ln(this.getSizerConfig(this).padding,p)},setOuterPadding(p,i){return Fn(this.getSizerConfig(this).padding,p,i),this},getChildOuterPadding(p,i){return typeof p=="string"&&(p=this.getElement(p)),Ln(this.getSizerConfig(p).padding,i)},setChildOuterPadding(p,i,t){return typeof p=="string"&&(p=this.getElement(p)),Fn(this.getSizerConfig(p).padding,i,t),this}},Do=function(p){return p===void 0&&(p=Math.max(this.childrenWidth,this.minWidth)),p},rC=function(p){var i,t;for(var f in this.sizerChildren)i=this.sizerChildren[f],i&&i.isRexSizer&&!i.ignoreLayout&&(t=this.getExpandedChildWidth(i,p),t=i.resolveWidth(t),i.resolveChildrenWidth(t))},Bo=function(p){var i=Math.max(this.childrenHeight,this.minHeight);return p===void 0&&(p=i),p},aC=function(p){var i;return p.isRexSizer?i=Math.max(p.minWidth,p.childrenWidth):p.minWidth!==void 0?i=p.minWidth:i=mt(p),i},oC=function(p){var i;return p.isRexSizer?i=Math.max(p.minHeight,p.childrenHeight):p.minHeight!==void 0?i=p.minHeight:i=ct(p),i},hC=function(p,i){return i},lC=function(p,i){return i},uC=function(){return 0},fC=function(){return 0},dC=function(p){p===void 0&&(p=[]);for(var i=p.length,t=this.getChildrenSizers(p),f=p.length,e=i;e<f;e++)t[e].getAllChildrenSizers(p);return p},vC=function(p){return p===void 0&&(p=[]),p},cC={getShownChildren(p){p===void 0&&(p=[]);for(var i=this.children,t,f=0,e=i.length;f<e;f++)t=i[f],!(t.rexSizer&&t.rexSizer.hidden)&&p.push(t);return p},getAllShownChildren(p){p===void 0&&(p=[]);for(var i=this.children,t,f=0,e=i.length;f<e;f++)t=i[f],!(t.rexSizer&&t.rexSizer.hidden)&&(p.push(t),t.hasOwnProperty("isRexContainerLite")&&p.push(...t.getAllShownChildren()));return p}},Ys=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var p=this.getChildrenSizers(),i,t=0,f=p.length;t<f;t++)i=p[t],!i.ignoreLayout&&i.preLayout()},pC=function(){return this.runLayout(),this},gC=function(p,i,t){if(this.ignoreLayout)return this;var f=!p;return f&&this.preLayout(),i=this.resolveWidth(i),f&&(this.resolveChildrenWidth(i),this.runWidthWrap(i)),t=this.resolveHeight(t),this.resize(i,t),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},mC=function(){},xC=function(p,i,t){return this._anchor&&this._anchor.updatePosition(),this},lv=function(p){var i,t;for(var f in this.sizerChildren)i=this.sizerChildren[f],!(!i||i.isRexSizer&&i.ignoreLayout||!i.runWidthWrap)&&(t=this.getExpandedChildWidth(i,p),i.isRexSizer&&(t=i.resolveWidth(t)),i.runWidthWrap(t));return this};class wo extends Yt{constructor(i,t){super(i,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(t),this.boot()}resetFromJSON(i){i===void 0&&(i={});var t,f;i.x!==void 0?(t=null,f=i.x):i.left!==void 0?(t=0,f=i.left):i.right!==void 0?(t=1,f=i.right):i.centerX!==void 0&&(t=.5,f=i.centerX);var e,s;i.y!==void 0?(e=null,s=i.y):i.top!==void 0?(e=0,s=i.top):i.bottom!==void 0?(e=1,s=i.bottom):i.centerY!==void 0&&(e=.5,s=i.centerY);var l,n;f!==void 0&&(f=f.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),l=parseFloat(f[0])/100,n=f[1]===""?0:parseFloat(f[1]));var o,h;s!==void 0&&(s=s.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),o=parseFloat(s[0])/100,h=s[1]===""?0:parseFloat(s[1]));var r=i.width,a,v;r!==void 0&&(r=r.split("%"),a=parseFloat(r[0])/100,v=r[1]===""?0:parseFloat(r[1]));var u=i.height,d,c;u!==void 0&&(u=u.split("%"),d=parseFloat(u[0])/100,c=u[1]===""?0:parseFloat(u[1])),this.setAlign(t,e),this.setPercentage(l,o),this.setOffset(n,h),this.setSizePercentage(a,d),this.setSizePadding(v,c);var g=i.onResizeCallback,m=i.onResizeCallbackScope;g!==void 0&&this.setResizeCallback(g,m);var x=i.onUpdateViewportCallback,y=i.onUpdateViewportCallbackScope;return x!==void 0&&this.setUpdateViewportCallback(x,y),this}boot(){this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()}shutdown(i){this.isShutdown||(this.scene.sys.scale.off("resize",this.anchor,this),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(i))}setAlign(i,t){return this.alignX=i,this.alignY=t,this}setPercentage(i,t){return this.percentageX=i,this.percentageY=t,this}setOffset(i,t){return this.offsetX=i,this.offsetY=t,this}setSizePercentage(i,t){return this.percentageWidth=i,this.percentageHeight=t,this}setSizePadding(i,t){return this.paddingWidth=i,this.paddingHeight=t,this}setResizeCallback(i,t){return this.onResizeCallback=i,this.onResizeCallbackScope=t,this}setUpdateViewportCallback(i,t){return this.onUpdateViewportCallback=i,this.onUpdateViewportCallbackScope=t,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var i=this.onResizeCallback,t=this.onResizeCallbackScope,f=this.anchorWidth,e=this.anchorHeight;if(!(f===void 0&&e===void 0||!i)){var s=this.parent;f===void 0&&(f=s.width),e===void 0&&(e=s.height),t?i.call(t,f,e,s,this):i(f,e,s,this)}}updatePosition(){var i=this.parent;return this.alignX===null?i.x=this.anchorX:this.alignX!==void 0&&(i.x=this.anchorX+i.displayWidth*(i.originX-this.alignX)),this.alignY===null?i.y=this.anchorY:this.alignY!==void 0&&(i.y=this.anchorY+i.displayHeight*(i.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){this.viewport=er(this.scene,this.viewport?this.viewport:!0);var i=this.onUpdateViewportCallback,t=this.onUpdateViewportCallbackScope;i&&(t?i.call(t,this.viewport,this.parent,this):i(this.viewport,this.parent,this))}}var yC=function(p){p===void 0&&(p={});var i=p.hasOwnProperty("width"),t=p.hasOwnProperty("height"),f=p.hasOwnProperty("onResizeCallback");return(i||t)&&!f&&(p.onResizeCallback=function(e,s,l){i&&l.setMinWidth(e),t&&l.setMinHeight(s),l.layout()}),this._anchor===void 0?this._anchor=new wo(this,p):this._anchor.resetFromJSON(p),this};const TC=Phaser.Utils.Objects.GetValue,Yi=Phaser.Utils.Objects.GetAdvancedValue,$l=Phaser.Math.Linear;class wa extends rs{constructor(i,t){super(i,t),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(t),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(TC(i,"mode",0)),this.setScaleRange(Yi(i,"start",void 0),Yi(i,"end",0)),this}setMode(i){return typeof i=="string"&&(i=SC[i]),this.mode=i,this}setScaleRange(i,t){return typeof i=="number"?(this.startX=i,this.startY=i):(this.startX=Yi(i,"x",this.parent.scaleX),this.startY=Yi(i,"y",this.parent.scaleY)),typeof t=="number"?(this.endX=t,this.endY=t):(this.endX=Yi(t,"x",void 0),this.endY=Yi(t,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return this.hasScaleX&&(i.scaleX=this.startX),this.hasScaleY&&(i.scaleY=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,t){var f=t.t;t.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasScaleX&&(i.scaleX=$l(this.startX,this.endX,f)),this.hasScaleY&&(i.scaleY=$l(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const SC={stop:0,destroy:1,yoyo:2};var uv=function(p,i,t,f,e){var s,l;switch(t){case 0:case"x":s={x:0},l={x:p.scaleX};break;case 1:case"y":s={y:0},l={y:p.scaleY};break;default:s=0,l=p.scale;break}var n={mode:0,start:s,end:l,duration:i,ease:f===void 0?"Cubic":f};return e===void 0?e=new wa(p,n):e.resetFromJSON(n),e.restart(),e},fv=function(p,i,t,f,e,s){e instanceof wa&&(s=e,e=void 0),e===void 0&&(e=!0);var l={};switch(l.mode=e?1:0,t){case 0:case"x":l.end={x:0};break;case 1:case"y":l.end={y:0};break;default:l.end=0;break}return l.duration=i,l.ease=f===void 0?"Linear":f,s===void 0?s=new wa(p,l):s.resetFromJSON(l),s.restart(),s};const Kl=Phaser.Utils.Objects.IsPlainObject;var Jl=function(p,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(p.emit(i.completeEventName,p),i.completeEventName=void 0)}),i.on("update",function(){var t=p.getParentSizer();t&&t.resetChildPositionState(p)})},CC={popUp(p,i,t){if(Kl(p)){var f=p;p=f.duration,i=f.orientation,t=f.ease}var e=this._scale===void 0;return this._scale=uv(this,p,i,t,this._scale),e&&Jl(this,this._scale),this._scale.completeEventName="popup.complete",this},popUpPromise(p,i,t){return this.popUp(p,i,t),zt(this._scale)},scaleDownDestroy(p,i,t,f){if(Kl(p)){var e=p;p=e.duration,i=e.orientation,t=e.ease,f=e.destroy}var s=this._scale===void 0;return this._scale=fv(this,p,i,t,f,this._scale),s&&Jl(this,this._scale),this._scale.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(p,i,t,f){return this.scaleDownDestroy(p,i,t,f),zt(this._scale)},scaleDown(p,i,t){return this.scaleDownDestroy(p,i,t,!1),this},scaleDownPromise(p,i,t){return this.scaleDown(p,i,t),zt(this._scale)}};const EC=Phaser.Utils.Objects.GetValue,Zl=Phaser.Utils.Objects.GetAdvancedValue,PC=Phaser.Math.Linear;class Ga extends rs{constructor(i,t){super(i,t),this.resetFromJSON(t),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(EC(i,"mode",0)),this.setAlphaRange(Zl(i,"start",this.parent.alpha),Zl(i,"end",0)),this}setMode(i){return typeof i=="string"&&(i=MC[i]),this.mode=i,this}setAlphaRange(i,t){return this.alphaStart=i,this.alphaEnd=t,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return i.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,t){var f=t.t;t.isOddIteration&&(f=1-f),i.alpha=PC(this.alphaStart,this.alphaEnd,f)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const MC={stop:0,destroy:1,yoyo:2},AC=Phaser.Utils.Objects.IsPlainObject;var rr=function(p,i,t,f){var e,s;AC(t)?(e=t.start,s=t.end):s=t,e===void 0&&(e=0),s===void 0&&(s=1);var l={mode:0,start:e,end:s,duration:i};return f===void 0?f=new Ga(p,l):f.resetFromJSON(l),f.restart(),f},ar=function(p,i,t,f){t instanceof Ga&&(f=t,t=void 0),t===void 0&&(t=!0);var e={mode:t?1:0,end:0,duration:i};return f===void 0?f=new Ga(p,e):f.resetFromJSON(e),f.restart(),f};const Ql=Phaser.Utils.Objects.IsPlainObject;var kl=function(p,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(p.emit(i.completeEventName,p),i.completeEventName=void 0)}),i.on("update",function(){var t=p.getParentSizer();t&&t.resetChildAlphaState(p)})},RC={fadeIn(p,i){if(Ql(p)){var t=p;p=t.duration,i=t.alpha}var f=this._fade===void 0;return this._fade=rr(this,p,i,this._fade),f&&kl(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(p,i){return this.fadeIn(p,i),zt(this._fade)},fadeOutDestroy(p,i){if(Ql(p)){var t=p;p=t.duration,i=t.destroy}var f=this._fade===void 0;return this._fade=ar(this,p,i,this._fade),f&&kl(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(p,i){return this.fadeOutDestroy(p,i),zt(this._fade)},fadeOut(p){return this.fadeOutDestroy(p,!1),this},fadeOutPromise(p){return this.fadeOut(p),zt(this._fade)}};const OC=Phaser.Utils.Objects.GetValue,Ui=Phaser.Utils.Objects.GetAdvancedValue,jl=Phaser.Math.Linear;class bn extends rs{constructor(i,t){super(i,t),this.resetFromJSON(t),this.boot()}resetFromJSON(i){if(super.resetFromJSON(i),this.setMode(OC(i,"mode",0)),i&&(i.hasOwnProperty("x")||i.hasOwnProperty("y"))){var t=Ui(i,"x",void 0),f=Ui(i,"y",void 0);this.setTargetPosition(t,f)}else this.setTargetPosition(i);return this}setMode(i){return typeof i=="string"&&(i=LC[i]),this.mode=i,this}setTargetPosition(i,t){if(typeof i=="number"||typeof t=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=i,this.endY=t;else{var f=i;this.startX=Ui(f,"startX",void 0),this.startY=Ui(f,"startY",void 0),this.endX=Ui(f,"endX",void 0),this.endY=Ui(f,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return this.hasMoveX&&(i.x=this.startX),this.hasMoveY&&(i.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,t){var f=t.t;t.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasMoveX&&(i.x=jl(this.startX,this.endX,f)),this.hasMoveY&&(i.y=jl(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const LC={stop:0,destroy:1,yoyo:2};var Vn=function(p,i){if(typeof p=="number")return p;var t=p[0],f=parseFloat(p.substr(2));switch(t){case"+":return i+f;case"-":return i-f;case"*":return i*f;case"/":return i/f}},dv=function(p,i,t,f,e,s,l){s instanceof bn&&(l=s,s=void 0),s===void 0&&(s=!1);var n={};return n.mode=s?1:0,t!==void 0&&(n.startX=p.x,n.endX=Vn(t,p.x)),f!==void 0&&(n.startY=p.y,n.endY=Vn(f,p.y)),n.duration=i,n.ease=e===void 0?"Linear":e,l===void 0?l=new bn(p,n):l.resetFromJSON(n),l.restart(),l},vv=function(p,i,t,f,e,s,l){s instanceof bn&&(l=s,s=void 0),s===void 0&&(s=!1);var n={};return n.mode=s?1:0,t!==void 0&&(n.startX=Vn(t,p.x),n.endX=p.x),f!==void 0&&(n.startY=Vn(f,p.y),n.endY=p.y),n.duration=i,n.ease=e===void 0?"Linear":e,l===void 0?l=new bn(p,n):l.resetFromJSON(n),l.restart(),l};const ql=Phaser.Utils.Objects.IsPlainObject,_l=Phaser.Math.Distance.Between;var tu=function(p,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(p.emit(i.completeEventName,p),i.completeEventName=void 0)}),i.on("update",function(){var t=p.getParentSizer();t&&t.resetChildPositionState(p)})},FC={moveFrom(p,i,t,f,e){if(ql(p)){var s=p;i=s.x,t=s.y,s.hasOwnProperty("speed")?p=_l(i,t,this.x,this.y)*1e3/s.speed:p=s.duration,f=s.ease}var l=this._easeMove===void 0;return this._easeMove=vv(this,p,i,t,f,e,this._easeMove),l&&tu(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(p,i,t,f,e){return this.moveFrom(p,i,t,f,e),zt(this._easeMove)},moveFromDestroy(p,i,t,f){return this.moveFrom(p,i,t,f,!0),this},moveFromDestroyPromise(p,i,t,f){return this.moveFromDestroy(p,i,t,f),zt(this._easeMove)},moveTo(p,i,t,f,e){if(ql(p)){var s=p;i=s.x,t=s.y,s.hasOwnProperty("speed")?p=_l(i,t,this.x,this.y)*1e3/s.speed:p=s.duration,f=s.ease}var l=this._easeMove===void 0;return this._easeMove=dv(this,p,i,t,f,e,this._easeMove),l&&tu(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(p,i,t,f,e){return this.moveTo(p,i,t,f,e),zt(this._easeMove)},moveToDestroy(p,i,t,f){return this.moveTo(p,i,t,f,!0),this},moveToDestroyPromise(p,i,t,f){return this.moveToDestroy(p,i,t,f,!0),zt(this._easeMove)}};const Se=Phaser.Utils.Objects.GetValue;class Go extends Qn{constructor(i,t){super(i,t),this.timer=new nv,this.resetFromJSON(t),this.boot()}resetFromJSON(i){return this.timer.resetFromJSON(Se(i,"timer")),this.setEnable(Se(i,"enable",!0)),this.setMode(Se(i,"mode",1)),this.isRunning=Se(i,"isRunning",!1),this.setMagnitudeMode(Se(i,"magnitudeMode",1)),this.setDuration(Se(i,"duration",500)),this.setMagnitude(Se(i,"magnitude",10)),this.ox=Se(i,"ox",void 0),this.oy=Se(i,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(i){this.isShutdown||(super.shutdown(i),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(i){return i==null&&(i=!0),this.enable=i,this}setMode(i){return typeof i=="string"&&(i=IC[i]),this.mode=i,this}setMagnitudeMode(i){return typeof i=="string"&&(i=DC[i]),this.magnitudeMode=i,this}setDuration(i){return this.duration=i,this}setMagnitude(i){return this.magnitude=i,this}start(i,t){if(typeof i!="number"){var f=i;t=Se(f,"magnitude",void 0),i=Se(f,"duration",void 0)}return t!==void 0&&this.setMagnitude(t),i!==void 0&&this.setDuration(i),this.timer.setDuration(this.duration).start(),super.start(),this}shake(i,t){return this.start(i,t),this}update(i,t){if(!this.isRunning||!this.enable)return this;var f=this.parent;if(!f.active)return this;if(this.timer.update(i,t),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=f.x,this.oy=f.y);var e=this.magnitude;this.magnitudeMode===1&&(e*=1-this.timer.t);var s=Math.random()*Math.PI*2,l=Math.cos(s)*e,n=Math.sin(s)*e;f.setPosition(this.ox+l,this.oy+n)}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var i=this.parent;return this.ox===i.x&&this.oy===i.y?this:(i.setPosition(this.ox,this.oy),this.ox=void 0,this.oy=void 0,this)}}const IC={effect:0,behavior:1},DC={constant:0,decay:1},BC=Phaser.Utils.Objects.IsPlainObject;var wC=function(p,i){i.on("complete",function(){p.emit("shake.complete",p)})},GC={shake(p,i,t){if(BC(p)){var f=p;p=f.duration,i=f.magnitude,t=f.magnitudeMode}return this._shake===void 0&&(this._shake=new Go(this,{mode:0,magnitudeMode:1}),wC(this,this._shake)),p!==void 0&&this._shake.setDuration(p),i!==void 0&&this._shake.setMagnitude(i),t!==void 0&&this._shake.setMagnitudeMode(t),this._shake.shake(),this},shakePromise(p,i){return this.shake(p,i),zt(this._shake)}};const eu=Phaser.Utils.Objects.IsPlainObject;class NC extends Yt{constructor(i,t){super(i,t),this.parent.setDataEnabled(),this.easeTasks={}}complete(i){this.emit(`complete-${i}`,this.parent,this),this.emit("complete",i,this.parent,this)}getEaseTask(i){var t=this.easeTasks[i];return t===void 0&&(t=new go(this.parent),this.easeTasks[i]=t,t.setTarget(this.parent.data.values).on("complete",function(){this.complete(i)},this)),t}easeTo(i,t,f,e){if(eu(i)){var s=i;i=s.key,t=s.value,f=s.duration,e=s.ease;var l=s.speed;f===void 0&&l!==void 0&&(f=Math.abs(t-this.parent.data.values[i])/l*1e3)}f===void 0&&(f=1e3),e===void 0&&(e="Linear");var n=this.getEaseTask(i);return n.restart({key:i,to:t,duration:f,ease:e}),this}easeFrom(i,t,f,e){if(eu(i)){var s=i;i=s.key,t=s.value,f=s.duration,e=s.ease;var l=s.speed;f===void 0&&l!==void 0&&(f=Math.abs(t-this.parent.data.values[i])/l*1e3)}f===void 0&&(f=1e3),e===void 0&&(e="Linear");var n=this.getEaseTask(i);return n.restart({key:i,from:t,duration:f,ease:e}),this}stopEase(i,t){t===void 0&&(t=!0);var f=this.easeTasks[i];return f&&f.stop(t),this}stopAll(i){i===void 0&&(i=!0);for(var t in this.easeTasks)this.stopEase(t,i);return this}}var bC=function(p,i){i.on("complete",function(t){p.emit(`easedata.${t}.complete`,p),p.emit("easedata.complete",t,p)})},VC={easeDataTo(p,i,t,f){return this._easeData||(this._easeData=new NC(this),bC(this,this._easeData)),this._easeData.easeTo(p,i,t,f),this},easeDataToPromise(p,i,t,f){return this.easeDataTo(p,i,t,f),co(this._easeData,`complete-${p}`)},stopEaseData(p,i){return this._easeData?(this._easeData.stopEase(p,i),this):this},stopAllEaseData(p){return this._easeData?(this._easeData.stopAll(p),this):this}},fi=function(p){cv(p,!1)},di=function(p){cv(p,!0)},No=function(p){if(!p)return!1;var i=tr(p);return!i.hidden},cv=function(p,i){if(!!p){var t=tr(p);t.hidden=i;var f=p.rexContainer.parent;f?f.setChildVisible(p,!i):this.setVisible(!i)}},zC={show(p){return p===void 0&&(p=this),fi(p),this},hide(p){return p===void 0&&(p=this),di(p),this},isShow(p){return p===void 0&&(p=this),No(p)}},Na=function(p,i,t,f,e){if(!p||!p.getBounds||f&&!f(p,i,t))return!1;var s=Io(p,!0);return!(!s.contains(i,t)||e&&!e(p,i,t))},pv=function(p,i,t,f){if(i)return Na(p,i.x,i.y,t,f);for(var e=p.scene.input.manager,s=e.pointersTotal,l=e.pointers,n=0;n<s;n++)if(i=l[n],Na(p,i.x,i.y,t,f))return!0;return!1},YC=function(p,i){return i===void 0&&(i=this),pv(i,p)},or=function(p){return p&&typeof p=="function"},ba=function(p,i,t,f,e){return Na(p,i,t,UC(f),XC(e))},iu=function(p){var i=p.rexSizer&&p.rexSizer.hidden;return!i},UC=function(p){return p?function(i,t,f){return iu(i)?(p(i,t,f),!0):!1}:iu},XC=function(p){return p},WC=function(p,i,t,f,e){if(or(t)||(e=t,t=void 0,f=void 0),e===void 0&&(this.sizerChildren?e=this.sizerChildren:e=this.children),me(e)){for(var s,l=0,n=e.length;l<n;l++)if(s=e[l],ba(s,p,i,t,f))return s}else{var s;for(var o in e)if(s=e[o],ba(s,p,i,t,f))return s}return null},HC={getParentSizer(p,i){return this.getParent(p,i)},getTopmostSizer(p){return this.getTopmostParent(p)}},gi=function(p,i,t){!p||i===void 0&&t===void 0||(p.resize?(i===void 0&&(i=p.width),t===void 0&&(t=p.height),p.resize(i,t)):(i!==void 0&&(p.displayWidth=i),t!==void 0&&(p.displayHeight=t)))},$C=function(p,i){return i===void 0?i={}:i===!0&&(i=KC),i.x=p.x,i.y=p.y,i.scaleX=p.scaleX,i.scaleY=p.scaleY,i.width=p.width,i.height=p.height,i.displayWidth=p.displayWidth,i.displayHeight=p.displayHeight,i},KC={},Us=function(p){this.sizerEventsEnable&&($C(p,this.getChildPrevState(p)),this.layoutedChildren.push(p))},Xs=function(p,i,t,f,e,s,l,n){sr(p,i,t,f,e,s),l!==void 0&&(p.x+=l),n!==void 0&&(p.y+=n),this.resetChildPositionState(p),this.sizerEventsEnable&&p.emit("sizer.postlayout",p,this)};const JC=Phaser.Display.Align.CENTER;var ZC=function(){if(this.backgroundChildren!==void 0)for(var p=this.backgroundChildren,i=this.left,t=this.top,f=this.width,e=this.height,s,l,n,o,h,r,a,v=0,u=p.length;v<u;v++)s=p[v],l=s.rexSizer,!l.hidden&&(n=l.padding,Us.call(this,s),o=i+n.left,h=t+n.top,r=f-n.left-n.right,a=e-n.top-n.bottom,gi(s,r,a),Xs.call(this,s,o,h,r,a,JC))},QC=function(p,i){var t=typeof p;return t==="string"?p=this.getElement(p):(p===void 0||t!="object")&&(i=p,p=this),i===void 0&&(i=!0),p.input&&p.input.hasOwnProperty("draggable")?p.input.draggable=i:i&&(p.setInteractive(),p.scene.input.setDraggable(p),p.on("drag",function(f,e,s){var l=this.getTopmostSizer();l.x+=e-p.x,l.y+=s-p.y,l.emit("sizer.drag",f,e,s)},this).on("dragstart",function(f,e,s){var l=this.getTopmostSizer();l.emit("sizer.dragstart",f,e,s)},this).on("dragend",function(f,e,s,l){var n=this.getTopmostSizer();n.emit("sizer.dragend",f,e,s,l)},this)),this};const gs=Phaser.Utils.Objects.GetValue;class os extends Yt{constructor(i,t){super(i,t),this._enable=void 0,i.setInteractive(gs(t,"inputConfig",void 0)),this.resetFromJSON(t),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(gs(i,"enable",!0)),this.setMode(gs(i,"mode",1)),this.setClickInterval(gs(i,"clickInterval",100)),this.setDragThreshold(gs(i,"threshold",void 0)),this}boot(){var i=this.parent;i.on("pointerdown",this.onPress,this),i.on("pointerup",this.onRelease,this),i.on("pointerout",this.onPointOut,this),i.on("pointermove",this.onMove,this),i.on("pointerover",this.onOver,this),i.on("pointeroutr",this.onOut,this)}shutdown(i){this.isShutdown||(this.pointer=null,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i){i||this.cancel(),this._enable=i;var t=i?"enable":"disable";this.emit(t,this,this.parent)}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(i){return typeof i=="string"&&(i=kC[i]),this.mode=i,this}setClickInterval(i){return this.clickInterval=i,this}setDragThreshold(i){return this.dragThreshold=i,this}onPress(i,t,f,e){this.pointer===void 0&&(this.pointer=i,this.mode===0&&this.click(i.downTime,i,e))}onRelease(i,t,f,e){this.pointer===i&&(this.mode===1&&this.click(i.upTime,i,e),this.pointer=void 0)}onPointOut(i,t){this.pointer===i&&this.cancel()}onMove(i,t,f,e){this.pointer===i&&this.dragThreshold!==void 0&&i.getDistance()>=this.dragThreshold&&this.cancel()}click(i,t,f){if(!this.enable)return this;if(i===void 0)return this.emit("click",this,this.parent,t,f),this;this.pointer=void 0;var e=this.lastClickTime;return e!==void 0&&i-e<=this.clickInterval?this:(this.lastClickTime=i,this.emit("click",this,this.parent,t,f),this)}cancel(){return this.pointer=void 0,this}onOver(i,t,f,e){return this.enable?(this.emit("over",this,this.parent,i,e),this):this}onOut(i,t){return this.enable?(this.emit("out",this,this.parent,i,t),this):this}}const kC={press:0,pointerdown:0,release:1,pointerup:1};var jC={onClick(p,i,t){return p?(this._click===void 0&&(this._click=new os(this,t)),this._click.on("click",p,i),this):this},offClick(p,i){return this._click===void 0?this:(this._click.off("click",p,i),this)},enableClick(p){return this._click===void 0?this:(this._click.setEnable(p),this)},disableClick(){return this._click===void 0?this:(this._click.setEnable(!1),this)}};class Ue{constructor(i){var t=re(i,"states",void 0);t&&this.addStates(t);var f=re(i,"extend",void 0);if(f)for(var e in f)(!this.hasOwnProperty(e)||this[e]===void 0)&&(this[e]=f[e]);var s=re(i,"eventEmitter",void 0),l=re(i,"EventEmitterClass",void 0);this.setEventEmitter(s,l),this._stateLock=!1,this.resetFromJSON(i)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(i){this.setEnable(re(i,"enable",!0)),this.start(re(i,"start",void 0));var t=re(i,"init",void 0);return t&&t.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(i){if(!(!this.enable||this._stateLock)&&this._state!==i){if(this._prevState=this._state,this._state=i,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var t="exit_"+this._prevState,f=this[t];f&&f.call(this),this.emit(t,this)}if(this._stateLock=!1,this._state!=null){var e="enter_"+this._state,s=this[e];s&&s.call(this),this.emit(e,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(i){return this._start=i,this._prevState=void 0,this._state=i,this}goto(i){return i!=null&&(this.state=i),this}next(){var i,t=this["next_"+this.state];return t&&(typeof t=="string"?i=t:i=t.call(this)),this.goto(i),this}addState(i,t){typeof i!="string"&&(t=i,i=t.name);var f=t.next;f&&(this["next_"+i]=f);var e=t.exit;e&&(this["exit_"+i]=e);var s=t.enter;return s&&(this["enter_"+i]=s),this}addStates(i){if(Array.isArray(i))for(var t=0,f=i.length;t<f;t++)this.addState(i[t]);else for(var e in i)this.addState(e,i[e]);return this}runMethod(i,t,f,e,s,l){var n=this[i+"_"+this.state];if(!!n){var o=arguments.length;switch(o){case 1:return n.call(this);case 2:return n.call(this,t);case 3:return n.call(this,t,f);case 4:return n.call(this,t,f,e);case 5:return n.call(this,t,f,e,s);case 6:return n.call(this,t,f,e,s,l)}for(var h=new Array(o-1),r=1;r<o;r++)h[r-1]=arguments[r];return n.apply(this,h)}}update(i,t){this.runMethod("update",i,t)}preupdate(i,t){this.runMethod("preupdate",i,t)}postupdate(i,t){this.runMethod("postupdate",i,t)}}Object.assign(Ue.prototype,ns);class qC extends Ue{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(i){return this.cooldownTime=i,this.cooldownMode=i!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(i,t){this.remainderTime-=t,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>t?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const Xr=Phaser.Utils.Objects.GetValue;class Va extends Yt{constructor(i,t){super(i,t),this._enable=void 0,this.cooldown=new qC,this.parent.setInteractive(Xr(t,"inputConfig",void 0)),this.resetFromJSON(t),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.isInTouched=!1,this.setEnable(Xr(i,"enable",!0)),this.setCooldown(Xr(i,"cooldown",void 0)),this}boot(){var i=this.parent;i.on("pointerdown",this.onPointIn,this),i.on("pointerover",this.onPointIn,this),i.on("pointerup",this.onPointOut,this),i.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(i){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||(this.isInTouched=!1,this.pointer=void 0),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(i){this.cooldown.setCooldownTime(i)}setCooldown(i){return this.cooldownTime=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(i,t,f){!this.enable||!i.isDown||this.pointer!==void 0||(this.pointer=i,this.isInTouched=!0)}onPointOut(i){!this.enable||this.pointer!==i||(this.pointer=void 0,this.isInTouched=!1)}preupdate(i,t){this.cooldown.update(i,t),this.isInTouched&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer)}}var _C={onTouching(p,i,t){return p?(this._inTouching===void 0&&(this._inTouching=new Va(this,t)),this._inTouching.on("intouch",p,i),this):this},offTouching(p,i){return this._click===void 0?this:(this._inTouching.off("intouch",p,i),this)}},gv=function(p,i,t){for(var f,e=0,s=p.length;e<s;e++)if(f=p[e],!!ba(f,i,t))return f.pointToChild(i,t);return null},mi=function(p,i,t,f,e,s,l){var n;e===void 0?n=f:n=gv(t,f,e),n&&p.emit(i,n,s,l)};const tE=Phaser.Utils.Objects.GetValue;var eE=function(p){var i=tE(p,"click",void 0);if(i!==!1){i===void 0&&(i={}),i.hasOwnProperty("threshold")||(i.threshold=10);var t=this._childrenInteractive;this._click=new os(this,i),this._click.on("click",function(f,e,s,l){mi(t.eventEmitter,`${t.eventNamePrefix}click`,t.targetSizers,s.worldX,s.worldY,s,l)},this)}};const iE=Phaser.Utils.Objects.GetValue;var sE=function(p){var i=iE(p,"over",void 0);i!==!1&&this.on("pointermove",su,this).on("pointerover",su,this).on("pointerout",nE,this)},su=function(p,i,t,f){var e=this._childrenInteractive,s=gv(e.targetSizers,p.worldX,p.worldY),l=e.lastOverChild;s&&l&&s===l||(e.lastOverChild=s,mi(e.eventEmitter,`${e.eventNamePrefix}out`,e.targetSizers,l,void 0,p,f),mi(e.eventEmitter,`${e.eventNamePrefix}over`,e.targetSizers,s,void 0,p,f))},nE=function(p,i){var t=this._childrenInteractive,f=t.lastOverChild;t.lastOverChild=null,mi(t.eventEmitter,`${t.eventNamePrefix}out`,t.targetSizers,f,void 0,p,i)};const Wr=Phaser.Utils.Objects.GetValue;class hr extends Qn{constructor(i,t){var f=ev(i);f===i&&(i=void 0),super(f,t),this.gameObject=i,i&&i.setInteractive(Wr(t,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(t),this.boot()}resetFromJSON(i){return this.setEnable(Wr(i,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(Wr(i,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Hr,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(i){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragCancel(),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setDetectBounds(i){return this.bounds=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(i,t){if(!!this.enable&&this.pointer===void 0){var f=this.bounds?this.bounds.contains(i.x,i.y):!0;!f||this.pointer!==i&&(this.pointer=i,this.lastPointer=i,this.movedState=!1,this.tracerState=nu,this.gameObject===void 0&&(this.isTouchingAnyObject=t.length>0),this.onDragStart())}}onPointerUp(i){if(!!this.enable){var t=this.bounds?this.bounds.contains(i.x,i.y):!0;!t||this.pointer===i&&(this.pointer=void 0,this.movedState=!1,this.tracerState=Hr,this.onDragEnd())}}onPointerMove(i){if(!!this.enable&&i.isDown){var t=this.bounds?this.bounds.contains(i.x,i.y):!0,f=this.pointer===i;!f&&t||(f&&!t?this.onPointerUp(i):(this.movedState||(this.movedState=i.x!==i.downX||i.y!==i.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===nu&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Hr,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(i,t){}postUpdate(i,t){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(i){return this.recongizedState=i,this}get state(){return this.recongizedState.state}set state(i){this.recongizedState.state=i}cancel(){return this.state=rE,this}}const Hr=0,nu=1,rE="IDLE",Ri=Phaser.Utils.Objects.GetValue,aE=Phaser.Math.Distance.Between;class lr extends hr{constructor(i,t){super(i,t);var f=this,e={states:{IDLE:{enter:function(){f.stop(),f.tapsCount=0,f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var s=f.lastPointer;f.x=s.x,f.y=s.y,f.worldX=s.worldX,f.worldY=s.worldY}},BEGIN:{enter:function(){f.start(),f.tapsCount=0,f.emit("tappingstart",f,f.gameObject,f.lastPointer)}},RECOGNIZED:{enter:function(){f.start(),f.emit("tap",f,f.gameObject,f.lastPointer),f.emit(`${f.tapsCount}tap`,f,f.gameObject,f.lastPointer)}}},init:function(){this.state=Oi},eventEmitter:!1};this.setRecongizedStateObject(new Ue(e))}resetFromJSON(i){super.resetFromJSON(i),this.setHoldTime(Ri(i,"time",250)),this.setTapInterval(Ri(i,"tapInterval",200)),this.setDragThreshold(Ri(i,"threshold",9)),this.setTapOffset(Ri(i,"tapOffset",10));var t=Ri(i,"taps",void 0);return t!==void 0?this.setTaps(t):(this.setMaxTaps(Ri(i,"maxTaps",void 0)),this.setMinTaps(Ri(i,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Oi:this.state=Xi;break;case Xi:var i=this.lastPointer,t=aE(i.upX,i.upY,i.x,i.y);t>this.tapOffset&&(this.state=Wi,this.state=Xi);break;case Wi:this.state=Xi;break}}onDragEnd(){this.state===Xi&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Wi))}onDrag(){this.state!==Oi&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Oi)}preUpdate(i,t){if(!(!this.isRunning||!this.enable)&&this.state===Xi){var f=this.lastPointer;if(f.isDown){var e=i-f.downTime;e>this.holdTime&&(this.state=Oi)}else{var s=i-f.upTime;s>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Wi:this.state=Oi)}}}postUpdate(i,t){!this.isRunning||!this.enable||this.state===Wi&&(this.state=Oi)}get isTapped(){return this.state===Wi}setHoldTime(i){return this.holdTime=i,this}setTapInterval(i){return this.tapInterval=i,this}setDragThreshold(i){return this.dragThreshold=i,this}setTapOffset(i){return this.tapOffset=i,this}setMaxTaps(i){return this.maxTaps=i,this}setMinTaps(i){return this.minTaps=i,this}setTaps(i,t){return t===void 0&&(t=i),this.setMinTaps(i).setMaxTaps(t),this}}const Oi="IDLE",Xi="BEGIN",Wi="RECOGNIZED",ru=Phaser.Utils.Objects.GetValue;class ur extends hr{constructor(i,t){super(i,t);var f=this,e={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var s=f.lastPointer;f.x=s.x,f.y=s.y,f.worldX=s.worldX,f.worldY=s.worldY}},BEGIN:{enter:function(){f.start()},exit:function(){f.stop()}},RECOGNIZED:{enter:function(){f.emit("pressstart",f,f.gameObject,f.lastPointer)},exit:function(){f.emit("pressend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=un},eventEmitter:!1};this.setRecongizedStateObject(new Ue(e))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(ru(i,"threshold",9)),this.setHoldTime(ru(i,"time",251)),this}onDragStart(){this.state=au,this.holdTime===0&&(this.state=$r)}onDragEnd(){this.state=un}onDrag(){this.state!==un&&this.pointer.getDistance()>this.dragThreshold&&(this.state=un)}preUpdate(i,t){if(!(!this.isRunning||!this.enable)&&this.state===au){var f=i-this.pointer.downTime;f>=this.holdTime&&(this.state=$r)}}get isPressed(){return this.state===$r}setHoldTime(i){return this.holdTime=i,this}setDragThreshold(i){return this.dragThreshold=i,this}}const un="IDLE",au="BEGIN",$r="RECOGNIZED",oE=Phaser.Utils.Objects.GetValue;class mv extends hr{constructor(i,t){super(i,t);var f=this,e={states:{IDLE:{},BEGIN:{enter:function(){var s=f.pointer;f.startX=s.x,f.startY=s.y,f.startWorldX=s.worldX,f.startWorldY=s.worldY}},RECOGNIZED:{enter:function(){f.emit("panstart",f,f.gameObject,f.lastPointer)},exit:function(){var s=f.lastPointer;f.endX=s.x,f.endY=s.y,f.endWorldX=s.worldX,f.endWorldY=s.worldY,f.emit("panend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=ou},eventEmitter:!1};this.setRecongizedStateObject(new Ue(e))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(oE(i,"threshold",10)),this}onDragStart(){this.state=hu,this.dragThreshold===0&&(this.state=fn)}onDragEnd(){this.state=ou}onDrag(){switch(this.state){case hu:this.pointer.getDistance()>=this.dragThreshold&&(this.state=fn);break;case fn:var i=this.pointer.position,t=this.pointer.prevPosition;this.dx=i.x-t.x,this.dy=i.y-t.y;var f=this.pointer;this.x=f.x,this.y=f.y,this.worldX=f.worldX,this.worldY=f.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===fn}setDragThreshold(i){return this.dragThreshold=i,this}}const ou="IDLE",hu="BEGIN",fn="RECOGNIZED",hE=Phaser.Math.Distance.Between,lE=Phaser.Math.Angle.Between;var uE={getDt:function(){var p=this.scene.sys.game,i=p.loop.delta;return i},getVelocity:function(){var p=this.pointer.position,i=this.pointer.prevPosition,t=hE(i.x,i.y,p.x,p.y),f=t/(this.getDt()*.001);return f},getVelocityX:function(){var p=this.pointer.position,i=this.pointer.prevPosition,t=Math.abs(p.x-i.x),f=t/(this.getDt()*.001);return f},getVelocityY:function(){var p=this.pointer.position,i=this.pointer.prevPosition,t=Math.abs(p.y-i.y),f=t/(this.getDt()*.001);return f},getVelocityAngle:function(){var p=this.pointer.position,i=this.pointer.prevPosition,t=lE(i.x,i.y,p.x,p.y);return t}},fE={"up&down":0,"left&right":1,"4dir":2,"8dir":3},dE=function(p,i,t){switch(t===void 0?t={}:t===!0&&(t=vE),t.left=!1,t.right=!1,t.up=!1,t.down=!1,p=(p+360)%360,i){case 0:p<180?t.down=!0:t.up=!0;break;case 1:p>90&&p<=270?t.left=!0:t.right=!0;break;case 2:p>45&&p<=135?t.down=!0:p>135&&p<=225?t.left=!0:p>225&&p<=315?t.up=!0:t.right=!0;break;case 3:p>22.5&&p<=67.5?(t.down=!0,t.right=!0):p>67.5&&p<=112.5?t.down=!0:p>112.5&&p<=157.5?(t.down=!0,t.left=!0):p>157.5&&p<=202.5?t.left=!0:p>202.5&&p<=247.5?(t.left=!0,t.up=!0):p>247.5&&p<=292.5?t.up=!0:(p>292.5&&p<=337.5&&(t.up=!0),t.right=!0);break}return t},vE={};const Kr=Phaser.Utils.Objects.GetValue,cE=Phaser.Math.RadToDeg;class Ws extends hr{constructor(i,t){super(i,t);var f=this,e={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var s=f.lastPointer;f.x=s.x,f.y=s.y,f.worldX=s.worldX,f.worldY=s.worldY}},BEGIN:{enter:function(){f.validDrag=!1}},RECOGNIZED:{enter:function(){f.start(),f.updateDirectionStates(),f.emit("swipe",f,f.gameObject,f.lastPointer)},exit:function(){f.stop(),f.clearDirectionStates()}}},init:function(){this.state=Jr},eventEmitter:!1};this.setRecongizedStateObject(new Ue(e)),this.clearDirectionStates()}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(Kr(i,"threshold",10)),this.setVelocityThreshold(Kr(i,"velocityThreshold",1e3)),this.setDirectionMode(Kr(i,"dir","8dir")),this}onDragStart(){this.state=lu}onDragEnd(){this.state=Jr}onDrag(){this.state===lu&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Zr))}postUpdate(i,t){!this.isRunning||!this.enable||this.state===Zr&&(this.state=Jr)}get isSwiped(){return this.state===Zr}get dragVelocity(){var i;switch(this.dirMode){case 0:i=this.getVelocityY();break;case 1:i=this.getVelocityX();break;default:i=this.getVelocity();break}return i}setDragThreshold(i){return this.dragThreshold=i,this}setVelocityThreshold(i){return this.velocityThreshold=i,this}setDirectionMode(i){return typeof i=="string"&&(i=fE[i]),this.dirMode=i,this}updateDirectionStates(){var i=cE(this.getVelocityAngle());return dE(i,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Ws.prototype,uE);const Jr="IDLE",lu="BEGIN",Zr="RECOGNIZED",Qr=Phaser.Utils.Objects.GetValue,pE=Phaser.Utils.Array.SpliceOne,gE=Phaser.Math.Distance.Between,mE=Phaser.Math.Angle.Between;class bo{constructor(i,t){var f=i.input.manager.pointersTotal-1;f<2&&i.input.addPointer(2-f),this.scene=i,this.setEventEmitter(Qr(t,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(t),this.boot()}resetFromJSON(i){return this.setEnable(Qr(i,"enable",!0)),this.bounds=Qr(i,"bounds",void 0),this.tracerState=dn,this.pointers.length=0,ci(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,ci(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragCancel(),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(i){if(!!this.enable&&this.pointers.length!==2){var t=this.bounds?this.bounds.contains(i.x,i.y):!0;if(!!t){var f=this.pointers.indexOf(i);if(f===-1)switch(this.movedState[i.id]=!1,this.pointers.push(i),this.tracerState){case dn:this.tracerState=xs,this.onDrag1Start();break;case xs:this.tracerState=Le,this.onDrag2Start();break}}}}onPointerUp(i){if(!!this.enable){var t=this.bounds?this.bounds.contains(i.x,i.y):!0;if(!!t){var f=this.pointers.indexOf(i);if(f!==-1)switch(delete this.movedState[i.id],pE(this.pointers,f),this.tracerState){case xs:this.tracerState=dn,this.onDrag1End();break;case Le:this.tracerState=xs,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(i){if(!!this.enable&&i.isDown){var t=this.bounds?this.bounds.contains(i.x,i.y):!0,f=this.pointers.indexOf(i)!==-1;if(!(!f&&t)){if(f&&!t)this.onPointerUp(i);else if(this.movedState[i.id]||(this.movedState[i.id]=i.x!==i.downX||i.y!==i.downY),this.movedState[i.id])switch(this.tracerState){case xs:this.onDrag1();break;case Le:this.onDrag2();break}}}}dragCancel(){return this.tracerState===Le&&this.onDrag2End(),this.pointers.length=0,ci(this.movedState),this.tracerState=dn,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==Le)return 0;var i=this.pointers[0],t=this.pointers[1];return gE(i.x,i.y,t.x,t.y)}get angleBetween(){if(this.tracerState!==Le)return 0;var i=this.pointers[0],t=this.pointers[1];return mE(i.x,i.y,t.x,t.y)}get drag1Vector(){var i=this.pointers[0];if(i&&this.movedState[i.id]){var t=i.position,f=i.prevPosition;ms.x=t.x-f.x,ms.y=t.y-f.y}else ms.x=0,ms.y=0;return ms}get centerX(){if(this.tracerState!==Le)return 0;var i=this.pointers[0].position,t=this.pointers[1].position;return(i.x+t.x)/2}get centerY(){if(this.tracerState!==Le)return 0;var i=this.pointers[0].position,t=this.pointers[1].position;return(i.y+t.y)/2}get prevCenterX(){if(this.tracerState!==Le)return 0;var i=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,t=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(i.x+t.x)/2}get prevCenterY(){if(this.tracerState!==Le)return 0;var i=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,t=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(i.y+t.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(i){return this.recongizedState=i,this}get state(){return this.recongizedState.state}set state(i){this.recongizedState.state=i}cancel(){return this.state=xE,this}}Object.assign(bo.prototype,ns);var ms={};const dn=0,xs=1,Le=2,xE="IDLE",yE=Phaser.Utils.Objects.GetValue;class xv extends bo{constructor(i,t){super(i,t);var f=this,e={states:{IDLE:{enter:function(){f.prevDistance=void 0,f.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("pinchstart",f)},exit:function(){f.emit("pinchend",f)}}},init:function(){this.state=uu},eventEmitter:!1};this.setRecongizedStateObject(new Ue(e))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(yE(i,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=fu,this.dragThreshold===0&&(this.state=vn)}onDrag2End(){this.state=uu}onDrag2(){switch(this.state){case fu:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var i=this.distanceBetween;this.scaleFactor=i/this.prevDistance,this.prevDistance=i,this.state=vn}break;case vn:var i=this.distanceBetween;this.scaleFactor=i/this.prevDistance,this.emit("pinch",this),this.prevDistance=i;break}}get isPinched(){return this.state===vn}setDragThreshold(i){return this.dragThreshold=i,this}}const uu="IDLE",fu="BEGIN",vn="RECOGNIZED",TE=Phaser.Math.RotateAround;var du=function(p,i,t,f){return TE(p,i,t,f),p.rotation+=f,p},SE=function(p,i){if(!this.isRotation)return this;i===void 0&&(i=this.pointers[0].camera);var t=this.movementCenterX,f=this.movementCenterY;i.getWorldPoint(this.centerX,this.centerY,kr);var e=kr.x,s=kr.y,l=this.rotation;if(Array.isArray(p))for(var n=p,o=0,h=n.length;o<h;o++)p=n[o],p.x+=t,p.y+=f,du(p,e,s,l);else p.x+=t,p.y+=f,du(p,e,s,l);return this},kr={};const CE=Phaser.Utils.Objects.GetValue,jr=Phaser.Math.Angle.WrapDegrees,vu=Phaser.Math.Angle.ShortestBetween,qr=Phaser.Math.RadToDeg,EE=Phaser.Math.DegToRad;class Vo extends bo{constructor(i,t){super(i,t);var f=this,e={states:{IDLE:{enter:function(){f.prevAngle=void 0,f.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("rotatestart",f)},exit:function(){f.emit("rotateend",f)}}},init:function(){this.state=cu},eventEmitter:!1};this.setRecongizedStateObject(new Ue(e))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(CE(i,"threshold",0)),this}onDrag2Start(){this.prevAngle=jr(qr(this.angleBetween)),this.state=pu,this.dragThreshold===0&&(this.state=cn)}onDrag2End(){this.state=cu}onDrag2(){switch(this.state){case pu:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var i=jr(qr(this.angleBetween));this.angle=vu(this.prevAngle,i),this.prevAngle=i,this.state=cn}break;case cn:var i=jr(qr(this.angleBetween));this.angle=vu(this.prevAngle,i),this.prevAngle=i,this.emit("rotate",this);break}}get isRotated(){return this.state===cn}get rotation(){return EE(this.angle)}setDragThreshold(i){return this.dragThreshold=i,this}}var PE={spinObject:SE};Object.assign(Vo.prototype,PE);const cu="IDLE",pu="BEGIN",cn="RECOGNIZED",ME=Phaser.Utils.Objects.GetValue;var AE=function(p){var i=ME(p,"tap",void 0);if(i!==!1){var t=this._childrenInteractive;this._tap=new lr(this,i),this._tap.on("tap",function(f,e,s){mi(t.eventEmitter,`${t.eventNamePrefix}${f.tapsCount}tap`,t.targetSizers,f.worldX,f.worldY,s)},this)}};const RE=Phaser.Utils.Objects.GetValue;var OE=function(p){var i=RE(p,"press",void 0);if(i!==!1){var t=this._childrenInteractive;this._press=new ur(this,i),this._press.on("pressstart",function(f,e,s){mi(t.eventEmitter,`${t.eventNamePrefix}pressstart`,t.targetSizers,f.worldX,f.worldY,s)},this).on("pressend",function(f,e,s){mi(t.eventEmitter,`${t.eventNamePrefix}pressend`,t.targetSizers,f.worldX,f.worldY,s)},this)}};const LE=Phaser.Utils.Objects.GetValue;var FE=function(p){var i=LE(p,"swipe",void 0);if(i!==!1){i===void 0&&(i={}),i.hasOwnProperty("dir")||(i.dir="4dir");var t=this._childrenInteractive;this._swipe=new Ws(this,i),this._swipe.on("swipe",function(f,e,s){var l=f.left?"left":f.right?"right":f.up?"up":"down";mi(t.eventEmitter,`${t.eventNamePrefix}swipe${l}`,t.targetSizers,f.worldX,f.worldY,s)},this)}};const _r=Phaser.Utils.Objects.GetValue;var zo=function(p,i){return p.setInteractive(),p._childrenInteractive={targetSizers:_r(i,"targets",[p]),eventEmitter:_r(i,"eventEmitter",p),eventNamePrefix:_r(i,"inputEventPrefix","child.")},eE.call(p,i),sE.call(p,i),AE.call(p,i),OE.call(p,i),FE.call(p,i),p},IE=function(p){return zo(this,p),this},DE=function(){for(var p=this.getAllChildren([this]),i=0,t=p.length;i<t;i++){var f=p[i];f.emit.apply(f,arguments)}return this},yv={getSizerConfig:tr,getChildPrevState:NS,pushIntoBounds:VS,drawBounds:jS,resolveWidth:Do,resolveChildrenWidth:rC,resolveHeight:Bo,getChildWidth:aC,getChildHeight:oC,getExpandedChildWidth:hC,getExpandedChildHeight:lC,getChildrenWidth:uC,getChildrenHeight:fC,addChildrenMap:Hl,addElement:Hl,getElement:iC,getAllChildrenSizers:dC,getChildrenSizers:vC,preLayout:Ys,layout:pC,runLayout:gC,layoutChildren:mC,runWidthWrap:lv,layoutBackgrounds:ZC,postLayout:xC,setAnchor:yC,isInTouching:YC,pointToChild:WC,setDraggable:QC,setChildrenInteractive:IE,broadcastEvent:DE};Object.assign(yv,nC,tC,eC,HC,CC,RC,FC,GC,VC,jC,_C,zC,cC);const ys=Phaser.Utils.Objects.GetValue;class Di extends xe{constructor(i,t,f,e,s,l){super(i,t,f,2,2),this.isRexSizer=!0,this.setMinSize(e,s),this.setName(ys(l,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.layoutedChildren=void 0;var n=ys(l,"anchor",void 0);n&&this.setAnchor(n),this.setInnerPadding(ys(l,"space",0)),this.setDraggable(ys(l,"draggable",!1)),this.setSizerEventsEnable(ys(l,"sizerEvents",!1)),this.setDirty(!0)}destroy(i){if(!!this.scene){if(i)for(var t=this.getAllChildrenSizers([this]),f=0,e=t.length;f<e;f++)t[f].sizerEventsEnable=!1;super.destroy(i),ci(this.backgroundChildren),ci(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(i,t){return this.setMinWidth(i).setMinHeight(t),this}setMinWidth(i){return i==null&&(i=0),this.minWidth=i,this}setMinHeight(i){return i==null&&(i=0),this.minHeight=i,this}setDirty(i){return i===void 0&&(i=!0),this.dirty=i,this}setSizerEventsEnable(i){return i===void 0&&(i=!0),this.sizerEventsEnable=i,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-mt(this)*this.originX}set left(i){this.x+=i-this.left}alignLeft(i){return this.left=i,this}get right(){return this.left+mt(this)}set right(i){this.x+=i-this.right}alignRight(i){return this.right=i,this}get centerX(){return this.left+mt(this)/2}set centerX(i){this.x+=i-this.centerX}alignCenterX(i){return this.centerX=i,this}get top(){return this.y-ct(this)*this.originY}set top(i){this.y+=i-this.top}alignTop(i){return this.top=i,this}get bottom(){return this.top+ct(this)}set bottom(i){this.y+=i-this.bottom}alignBottom(i){return this.bottom=i,this}get centerY(){return this.top+ct(this)/2}set centerY(i){this.y+=i-this.centerY}alignCenterY(i){return this.centerY=i,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var i=this.minWidth-this.space.left-this.space.right;return Math.max(i,0)}get minInnerHeight(){var i=this.minHeight-this.space.top-this.space.bottom;return Math.max(i,0)}}Object.assign(Di.prototype,yv);var BE=function(){if(this.rexSizer.hidden)return 0;var p=0,i=this.sizerChildren,t,f,e;for(var s in i)t=i[s],f=t.rexSizer.padding,e=this.getChildWidth(t)+f.left+f.right,p=Math.max(e,p);return p+this.space.left+this.space.right},wE=function(){if(this.rexSizer.hidden)return 0;var p=0,i=this.sizerChildren,t,f,e;for(var s in i)t=i[s],e=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.minHeight!==void 0?t.minHeight:ct(t),f=t.rexSizer.padding,e+=f.top+f.bottom,p=Math.max(e,p);return p+this.space.top+this.space.bottom},GE=function(p,i){i===void 0&&(i=this.width);var t,f=p.rexSizer;if(f.expandWidth){var e=i-this.space.left-this.space.right,s=f.padding;t=e-s.left-s.right}return t},NE=function(p,i){i===void 0&&(i=this.height);var t,f=p.rexSizer;if(f.expandHeight){var e=i-this.space.top-this.space.bottom,s=f.padding;t=e-s.top-s.bottom}return t},bE=function(p){p===void 0&&(p=[]);var i=this.sizerChildren,t;for(var f in i)t=i[f],t.isRexSizer&&p.push(t);return p},Yo=function(p,i){p.width<p.childrenWidth&&console.warn(`Layout width error: Parent=${i.constructor.name}, Child=${p.constructor.name}`),p.height<p.childrenHeight&&console.warn(`Layout height error: Parent=${i.constructor.name}, Child=${p.constructor.name}`)},VE=function(){var p,i,t,f=this.innerLeft,e=this.innerTop,s=this.innerWidth,l=this.innerHeight,n,o,h,r,a,v,u=this.sizerChildren;for(var d in u)p=u[d],!p.rexSizer.hidden&&(i=p.rexSizer,t=i.padding,Us.call(this,p),p.isRexSizer?(p.runLayout(this,this.getExpandedChildWidth(p),this.getExpandedChildHeight(p)),Yo(p,this)):(a=void 0,v=void 0,i.expandWidth&&(a=s-t.left-t.right),i.expandHeight&&(v=l-t.top-t.bottom),gi(p,a,v)),n=f+t.left,h=s-t.left-t.right,o=e+t.top,r=l-t.top-t.bottom,Xs.call(this,p,n,o,h,r,i.align,i.alignOffsetX,i.alignOffsetY))};const gu=Phaser.Utils.Objects.IsPlainObject,Fe=Phaser.Utils.Objects.GetValue,mu=Phaser.Display.Align.CENTER,zE=Phaser.Utils.String.UUID;var YE=function(p,i,t,f,e,s,l,n,o){if(zs.call(this,p),gu(i)){var r=i;i=Fe(r,"key",void 0),t=Fe(r,"align",mu),n=Fe(r,"offsetX",0),o=Fe(r,"offsetY",0),f=Fe(r,"padding",0),e=Fe(r,"expand",!0),p.isRexSizer||(s=Fe(r,"minWidth",p._minWidth),l=Fe(r,"minHeight",p._minHeighted))}var h=i!==void 0;h||(i=zE()),typeof t=="string"&&(t=ir[t]),t===void 0&&(t=mu),n===void 0&&(n=0),o===void 0&&(o=0),f===void 0&&(f=0),e===void 0&&(e=!0),p.isRexSizer||(s===void 0&&(s=p._minWidth),l===void 0&&(l=p._minHeight));var r=this.getSizerConfig(p);return r.align=t,r.alignOffsetX=n,r.alignOffsetY=o,r.padding=as(f),gu(e)?(r.expandWidth=Fe(e,"width",!1),r.expandHeight=Fe(e,"height",!1)):(r.expandWidth=e,r.expandHeight=e),p.isRexSizer||(r.expandWidth?p.minWidth=s===void 0?mt(p):s:p.minWidth=void 0,r.expandHeight?p.minHeight=l===void 0?ct(p):l:p.minHeight=void 0),this.sizerChildren.hasOwnProperty(i)&&this.sizerChildren[i].destroy(),this.sizerChildren[i]=p,h&&this.addChildrenMap(i,p),this},UE={add:YE};const XE=Phaser.Utils.Array.Remove,WE=xe.prototype.remove;var fr=function(p,i){return this.isBackground(p)&&XE(this.backgroundChildren,p),WE.call(this,p,i),!i&&this.sizerEventsEnable&&(p.emit("sizer.remove",p,this),this.emit("remove",p,this)),this};const HE=xe.prototype.clear;var dr=function(p){this.backgroundChildren&&(this.backgroundChildren.length=0);var i=!p&&this.sizerEventsEnable,t;if(i&&(t=this.getChildren([])),HE.call(this,p),i)for(var f,e=0,s=t.length;e<s;e++)f=t[e],f.emit("sizer.remove",f,this),this.emit("remove",f,this);return this},$E={remove(p,i){var t;if(typeof p=="string"){if(t=p,p=this.sizerChildren[t],!p)return this}else{if(this.getParentSizer(p)!==this)return this;t=this.childToKey(p)}return t&&(delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t]),fr.call(this,p,i),this},removeAll(p){for(var i in this.sizerChildren)this.remove(i,p);return this},clear(p){for(var i in this.sizerChildren)delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i];return dr.call(this,p),this}},Tv={getChildrenWidth:BE,getChildrenHeight:wE,getExpandedChildWidth:GE,getExpandedChildHeight:NE,getChildrenSizers:bE,layoutChildren:VE};Object.assign(Tv,UE,$E);var vr=function(p,i){if(Array.isArray(p))return p.indexOf(i);for(var t in p)if(p[t]===i)return t;return null};const xu=Phaser.Utils.Objects.IsPlainObject,Hi=Phaser.Utils.Objects.GetValue;class Ti extends Di{constructor(i,t,f,e,s,l){xu(t)?(l=t,t=Hi(l,"x",0),f=Hi(l,"y",0),e=Hi(l,"width",void 0),s=Hi(l,"height",void 0)):xu(e)&&(l=e,e=Hi(l,"width",void 0),s=Hi(l,"height",void 0)),super(i,t,f,e,s,l),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(i){if(typeof i=="string"){var t=i;if(this.sizerChildren.hasOwnPropery(t))return t}else return vr(this.sizerChildren,i);return null}}Object.assign(Ti.prototype,Tv);var KE=Phaser.Math.Distance.Between,zn=function(p,i,t){var f=p.width/2;return KE(f,f,i,t)<=f};const JE=Phaser.Math.Angle.Between,ZE=Phaser.Math.Angle.Normalize;var yu=function(p,i,t){if(!!this.enable&&!!p.isDown){var f=this.sizerChildren.knob;if(!!zn(f,i,t)){var e=f.width/2,s=f.startAngle,l=JE(e,e,i,t),n=f.anticlockwise?s-l:l-s,o=ZE(n)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-o)<.1?this.value=o:this.easeValueTo(o)}}},QE=function(){var p=this.sizerChildren.knob;p.setInteractive().on("pointerdown",yu,this).on("pointermove",yu,this)};const Tu=Phaser.Math.Angle.Between,kE=Phaser.Math.Angle.Wrap;var jE=function(p,i,t){if(!(!this.enable||this.panPointer)){var f=this.sizerChildren.knob;!zn(f,i,t)||Sv.call(this,p)}},qE=function(p,i,t){if(!!this.enable&&!!p.isDown){var f=this.sizerChildren.knob;switch(this.panState){case Uo:zn(f,i,t)&&Sv.call(this,p);break;case Ev:zn(f,i,t)?tP.call(this):Cv.call(this);break}}},_E=function(p,i,t){!this.enable||this.panPointer!==p||Cv.call(this)},Sv=function(p){this.panPointer=p,this.panState=Ev},Cv=function(){this.panPointer=void 0,this.panState=Uo},tP=function(){var p=this.panPointer.prevPosition,i=this.panPointer.position,t=this.sizerChildren.knob,f=Tu(t.x,t.y,p.x,p.y),e=Tu(t.x,t.y,i.x,i.y),s=t.anticlockwise?f-e:e-f,l=kE(s)/(Math.PI*2);this.stopEaseValue(),this.value+=l};const Uo=0,Ev=1;var eP=function(){var p=this.sizerChildren.knob;p.setInteractive().on("pointerdown",jE,this).on("pointermove",qE,this).on("pointerup",_E,this),this.panPointer=void 0,this.panState=Uo},iP=function(p,i){return this.textFormatCallback=p,this.textFormatCallbackScope=i,this},Pv=function(p){p===void 0&&(p=this.value);var i;return this.textFormatCallbackScope?i=this.textFormatCallback(p):i=this.textFormatCallback.call(this.textFormatCallbackScope,p),i},sP=function(){var p=this.sizerChildren.text;return p&&(p.setText(Pv.call(this)),p.layout&&p.layout()),this},nP={setTextFormatCallback:iP,getFormatText:Pv,updateText:sP};const Nt=Phaser.Utils.Objects.GetValue,rP=Phaser.Math.Linear,Su=Phaser.Math.Percent,aP=Phaser.Math.Snap.To;class Xo extends Ti{constructor(i,t){t===void 0&&(t={}),super(i,t),this.type="rexKnob",this.eventEmitter=Nt(t,"eventEmitter",this);var f=Nt(t,"background",void 0),e=Nt(t,"text",void 0);f&&this.addBackground(f),e&&(t.textColor=void 0,t.textStrokeColor=void 0,this.setTextFormatCallback(Nt(t,"textFormatCallback",void 0),Nt(t,"textFormatCallbackScope",void 0)));var s=new _n(i,t);s.setDepth(Nt(t,"knobDepth",0)),s._value=-1,i.add.existing(s),this.add(s,"knob"),e&&(this.add(e,"text","center",0,!1),i.children.moveBelow(s,e)),this.addChildrenMap("background",f),this.addChildrenMap("knob",s),this.addChildrenMap("text",e);var l=Nt(t,"valuechangeCallback",null);if(l!==null){var n=Nt(t,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",l,n)}this.setEnable(Nt(t,"enable",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Nt(t,"easeValue.duration",0)).setEaseValueFunction(Nt(t,"easeValue.ease","Linear")),this.setGap(Nt(t,"gap",void 0)),this.setValue(Nt(t,"value",0),Nt(t,"min",void 0),Nt(t,"max",void 0));var o=Nt(t,"input",0);switch(typeof o=="string"&&(o=oP[o]),o){case 0:eP.call(this);break;case 1:QE.call(this);break}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setGap(i){return this.gap=i,this}get value(){return this.sizerChildren.knob.value}set value(i){this.gap!==void 0&&(i=aP(i,this.gap));var t=this.value;this.sizerChildren.knob.value=i;var f=this.value;t!==f&&(this.updateText(),this.eventEmitter.emit("valuechange",f,t,this.eventEmitter))}setValue(i,t,f){return i==null?this:(t!==void 0&&(i=Su(i,t,f)),this.value=i,this)}addValue(i,t,f){return t!==void 0&&(i=Su(i,t,f)),this.value+=i,this}getValue(i,t){var f=this.value;return i!==void 0&&(f=rP(i,t,f)),f}}const oP={pan:0,drag:0,click:1,none:-1};Object.assign(Xo.prototype,nP,Vs);tt.register("knob",function(p){var i=new Xo(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Knob",Xo);const hP={arc:qn,circle:Da,curve:pS,ellipse:gS,line:mS,lines:RS,rectangle:LS,triangle:IS},Cu=Phaser.Utils.Objects.GetValue,lP=Phaser.Utils.Objects.IsPlainObject,uP=function(){for(var p=this.getShapes(),i=0,t=p.length;i<t;i++)p[i].lineStyle().fillStyle()};var fP={createShape(p,i){var t=hP[p],f=new t;return i&&f.setName(i),f},buildShapes(p){var i=Cu(p,"create",void 0);if(lP(i)){var t=i;for(var f in t){var e=t[f];switch(typeof e){case"number":for(var s=0;s<e;s++)this.addShape(this.createShape(f));break;case"string":this.addShape(this.createShape(f,e));break;default:for(var l=e,s=0,n=l.length;s<n;s++)this.addShape(this.createShape(f,l[s]));break}}}else if(Array.isArray(i))for(var t=i,s=0,n=t.length;s<n;s++){var o=t[s];this.addShape(this.createShape(o.type,o.name))}else typeof i=="function"&&i.call(this);this.setUpdateShapesCallback(Cu(p,"update"))},setUpdateShapesCallback(p){return p===void 0&&(p=uP),this.dirty=this.dirty||this.updateCallback!==p,this.updateCallback=p,this},updateShapes(){this.updateCallback.call(this)}};const Ts=Phaser.Utils.Objects.GetValue,dP=Phaser.Utils.Objects.IsPlainObject;class cr extends xo{constructor(i,t,f,e,s,l){dP(t)&&(l=t,t=Ts(l,"x",0),f=Ts(l,"y",0),e=Ts(l,"width",2),s=Ts(l,"height",2)),super(i,t,f,e,s),this.type=Ts(l,"type","rexCustomShapes"),this.buildShapes(l)}}Object.assign(cr.prototype,fP);tt.register("customShapes",function(p,i,t,f,e){var s=new cr(this.scene,p,i,t,f,e);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.CustomShapes",cr);const Ie=Phaser.Utils.Objects.GetValue,vP=Phaser.Utils.Objects.IsPlainObject,cP=Phaser.Math.Clamp,pP=Phaser.Math.Linear,Eu=Phaser.Math.Percent;class Wo extends cr{constructor(i,t,f,e,s,l){vP(t)&&(l=t,t=Ie(l,"x",0),f=Ie(l,"y",0),e=Ie(l,"width",2),s=Ie(l,"height",2)),l===void 0&&(l={}),l.type||(l.type="rexCustomProgress"),super(i,t,f,e,s,l),this.eventEmitter=Ie(l,"eventEmitter",this);var n=Ie(l,"valuechangeCallback",null);if(n!==null){var o=Ie(l,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",n,o)}this.setEaseValuePropName("value").setEaseValueDuration(Ie(l,"easeValue.duration",0)).setEaseValueFunction(Ie(l,"easeValue.ease","Linear")),this.setValue(Ie(l,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get value(){return this._value}set value(i){i=cP(i,0,1);var t=this._value,f=t!=i;this.dirty=this.dirty||f,this._value=i,f&&this.eventEmitter.emit("valuechange",this._value,t,this.eventEmitter)}setValue(i,t,f){return i==null?this:(t!==void 0&&(i=Eu(i,t,f)),this.value=i,this)}addValue(i,t,f){return t!==void 0&&(i=Eu(i,t,f)),this.value+=i,this}getValue(i,t){var f=this.value;return i!==void 0&&(f=pP(i,t,f)),f}}Object.assign(Wo.prototype,Vs);tt.register("customProgress",function(p,i,t,f,e){var s=new Wo(this.scene,p,i,t,f,e);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.CustomProgress",Wo);var gP={setTransitionStartCallback(p,i){return this.onStartCallback=p,this.onStartCallbackScope=i,this},setTransitionProgressCallback(p,i){return this.onProgressCallback=p,this.onProgressCallbackScope=i,this},setTransitionCompleteCallback(p,i){return this.onCompleteCallback=p,this.onCompleteCallbackScope=i,this}};const mP=Phaser.Utils.Objects.IsPlainObject,ue=Phaser.Utils.Objects.GetValue;var xP={out:0,in:1},yP={setTransitionDirection(p){return typeof p=="string"&&(p=xP[p]),this.dir=p,this},setDuration(p){return this.duration=p,this},setEaseFunction(p){return this.easeFunction=p,this},setNextTexture(p,i){return this.nextImage.setTexture(p,i),this},transit(p,i){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),mP(p)){var t=p;p=ue(t,"key",void 0),i=ue(t,"frame",void 0),this.setDuration(ue(t,"duration",this.duration)).setEaseFunction(ue(t,"ease",this.easeFunction)).setTransitionDirection(ue(t,"dir",this.dir));var f=ue(t,"mask",void 0);f&&this.setMaskGameObject(f),this.setMaskEnable(f===!0);var e=ue(t,"onStart",void 0),s=ue(t,"onProgress",void 0),l=ue(t,"onComplete",void 0);(e!==void 0||s!==void 0||l!==void 0)&&this.setTransitionStartCallback(e,ue(t,"onStartScope",void 0)).setTransitionProgressCallback(s,ue(t,"onProgressScope",void 0)).setTransitionCompleteCallback(l,ue(t,"onCompleteScope",void 0))}return this.setNextTexture(p,i),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new go(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},Pu=function(p,i,t,f,e){switch(this.clear().fillStyle(16777215),this.shape){case 1:var s=Math.min(p,i)/2;this.fillCircle(-p*(f-.5),-i*(e-.5),s+t);break;default:this.fillRect(-(p*f)-t,-(i*e)-t,p+2*t,i+2*t);break}};const TP=Phaser.GameObjects.Graphics;class za extends TP{constructor(i,t,f){t===void 0&&(t=0),typeof t=="string"&&(t=SP[t]),f===void 0&&(f=0),super(i.scene),this.parent=i,this.shape=t,this.padding=f,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(i,t){var f=this.parent;return i===void 0&&(i=f.x),t===void 0&&(t=f.y),super.setPosition(i,t),this}resize(i,t,f){var e=this.parent;return i===void 0&&(i=e.width),t===void 0&&(t=e.height),f===void 0&&(f=this.padding),this.widthSave===i&&this.heightSave===t&&this.paddingSave===f?this:(this.widthSave=i,this.heightSave=t,this.paddingSave=f,this.originXSave=e.originX,this.originYSave=e.originY,Pu.call(this,i,t,f,e.originX,e.originY),this)}setOrigin(i,t){t===void 0&&(t=i);var f=this.parent;return i===void 0&&(i=f.originX),t===void 0&&(t=f.originY),this.originXSave===i&&this.originYSave===t?this:(this.originXSave=i,this.originYSave=t,Pu.call(this,this.widthSave,this.heightSave,this.paddingSave,i,t),this)}}const SP={rectangle:0,circle:1};var CP={setMaskGameObject(p){if(!p)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(p===!0&&this.maskGameObject instanceof za)return this;if(this.maskGameObject===p)return this;this.removeMaskGameObject()}return p===!0&&(p=new za(this)),this.maskGameObject=p,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(p,i,t){return i===void 0&&(i=!0),this.childrenMask||this.setMaskGameObject(!0),i?(p.setMask(this.childrenMask),t&&this.childrenMask.setInvertAlpha()):p.clearMask(),this},setCurrentImageMaskEnable(p,i){return this.setImageMaskEnable(this.currentImage,p,i),this},setNextImageMaskEnable(p,i){return this.setImageMaskEnable(this.nextImage,p,i),this},setCellImagesMaskEnable(p,i){for(var t=this.getCellImages(),f=0,e=t.length;f<e;f++)this.setImageMaskEnable(t[f],p,i);return this},setMaskEnable(p,i){return this.setImageMaskEnable(this.backImage,p,i),this.setImageMaskEnable(this.frontImage,p,i),this.setCellImagesMaskEnable(p,i),this}},EP=function(p,i){i===void 0&&(i=",");var t;return p==="__BASE"?t=function(f,e){return`${f}${i}${e}`}:t=function(f,e){return`${p}_${f}${i}${e}`},t},PP=function(p,i,t,f,e,s){t==null&&(t="__BASE"),or(s)||(s=EP(t,s));for(var l=p.sys.textures.get(i),n=l.frames[t],o=n.width/f,h=n.height/e,r=0,a=0,v,u=0;u<e;u++){r=0;for(var d=0;d<f;d++)v=s(d,u),l.add(v,0,r+n.cutX,a+n.cutY,o,h),r+=o;a+=h}return{getFrameNameCallback:s,cellWidth:o,cellHeight:h,columns:f,rows:e}};const ni=Phaser.Utils.Objects.GetValue,MP=Phaser.GameObjects.Image,AP=Phaser.Utils.Objects.IsPlainObject,RP=Phaser.Math.RotateAround;var OP=function(p,i,t,f){AP(i)&&(f=i,i=ni(f,"columns",1),t=ni(f,"rows",1));for(var e=ni(f,"ImageClass",MP),s=ni(f,"originX",.5),l=ni(f,"originY",.5),n=ni(f,"add",!0),o=ni(f,"align",n),h=ni(f,"objectPool",void 0),r=p.scene,a=p.texture.key,v=p.frame.name,u=PP(r,a,v,i,t),d=u.getFrameNameCallback,c=p.scaleX,g=p.scaleY,m=p.rotation,x=p.getTopLeft(),y=x.x,T=x.y,S=[],C=u.cellWidth*c,E=u.cellHeight*g,P=0;P<t;P++)for(var M=0;M<i;M++){var R,A=d(M,P);h&&h.length>0?R=h.pop().setTexture(a,A):R=new e(r,0,0,a,A),n&&r.add.existing(R);var O=y+C*M,F=T+E*P,I=O+s*C,w=F+l*E;o&&(R.setOrigin(s,l).setPosition(I,w).setScale(c,g).setRotation(m),RP(R,y,T,m)),S.push(R)}return S},LP={gridCutImage(p,i,t,f){f===void 0&&(f={}),f.objectPool=this.imagesPool;for(var e=OP(p,i,t,f),s,l=0,n=e.length;l<n;l++)s=e[l],s.setVisible(!0),this.add(s);return this.cellImages=e,this.setChildLocalVisible(p,!1),e},gridCutCurrentImage(p,i,t){return this.gridCutImage(this.currentImage,p,i,t)},gridCutNextImage(p,i,t){return this.gridCutImage(this.nextImage,p,i,t)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var p=this.cellImages[0].texture,i=this.cellImages,t,f,e=0,s=i.length;e<s;e++)t=i[e],this.setChildLocalAlpha(t,1).setChildLocalScale(t,1).setChildLocalVisible(t,!1),t.clearMask(),f=t.frame.name,t.setTexture(),p.remove(f);return this.imagesPool.push(...i),i.length=0,this}},Mv={};Object.assign(Mv,gP,yP,CP,LP);var FP=function(p,i,t,f){},IP=function(p,i,t,f){p.setChildLocalAlpha(i,1-f).setChildLocalAlpha(t,f)},DP=function(p,i,t,f){p.setChildLocalAlpha(i,1)};const Mu=Phaser.Utils.Objects.IsPlainObject,Ft=Phaser.Utils.Objects.GetValue,BP=Phaser.Math.Clamp;class Ho extends xe{constructor(i,t,f,e,s,l){Mu(t)?(l=t,t=Ft(l,"x",0),f=Ft(l,"y",0),e=Ft(l,"key",void 0),s=Ft(l,"frame",void 0)):Mu(s)&&(l=s,s=void 0);var n=Ft(l,"back",void 0),o=Ft(l,"front",void 0);n||(n=i.add.image(t,f,e,s)),o||(o=i.add.image(t,f,e,s));var h=Ft(l,"width",o.width),r=Ft(l,"height",o.height);super(i,t,f,h,r),n.setVisible(!1),this.addMultiple([n,o]),this.type="rexTransitionImage",this.backImage=n,this.frontImage=o,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var a=Ft(l,"onStart",void 0),v=Ft(l,"onProgress",void 0),u=Ft(l,"onComplete",void 0),d=Ft(l,"dir",0);a===void 0&&v===void 0&&u===void 0&&(a=FP,v=IP,u=DP,d=0),this.setTransitionStartCallback(a,Ft(l,"onStartScope",void 0)).setTransitionProgressCallback(v,Ft(l,"onProgressScope",void 0)).setTransitionCompleteCallback(u,Ft(l,"onCompleteScope",void 0)).setTransitionDirection(d).setDuration(Ft(l,"duration",1e3)).setEaseFunction(Ft(l,"ease","Linear"));var c=Ft(l,"mask",void 0);c&&this.setMaskGameObject(c),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(i){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(i),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get t(){return this._t}set t(i){if(i=BP(i,0,1),this._t!==i){this._t=i;var t=this.currentImage,f=this.nextImage;if(i===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),ta(this.onStartCallback,this.onStartCallbackScope,this,t,f,i)),ta(this.onProgressCallback,this.onProgressCallbackScope,this,t,f,i),i===1){ta(this.onCompleteCallback,this.onCompleteCallbackScope,this,t,f,i);var e=f.texture.key,s=f.frame.name;this.frontImage.setTexture(e,s),this.backImage.setTexture(e,s),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}i===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(i){return this.t=i,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(i,t){return super.setOrigin(i,t),this.backImage.setOrigin(i,t),this.frontImage.setOrigin(i,t),this.maskGameObject&&this.maskGameObject.setOrigin(i,t),this}setTexture(i,t){return this.frontImage.setTexture(i,t),this.backImage.setTexture(i,t).setVisible(!1),this}}var ta=function(p,i,t,f,e,s){!p||(i?p.call(i,t,f,e,s):p(t,f,e,s))};Object.assign(Ho.prototype,Mv);tt.register("transitionImage",function(p,i,t,f,e){var s=new Ho(this.scene,p,i,t,f,e);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.TransitionImage",Ho);const wP=Phaser.GameObjects.Rectangle;class $o extends wP{constructor(i,t,f){super(i,0,0,2,2,t,1),this.setAlpha(f),this.setScrollFactor(0),this.boot()}boot(){var i=this.scene;i.sys.events.on("prerender",this.resize,this)}destroy(i){!this.scene||(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(i))}get tint(){return this.fillColor}set tint(i){this.setFillStyle(i,this.fillAlpha)}resize(){var i=this.scene,t=i.sys.scale.gameSize,f=i.sys.cameras.main,e=t.width,s=t.height,l=1/f.zoom,n=e/2,o=s/2,h=e*l,r=s*l;(this.x!==n||this.y!==o)&&this.setPosition(n,o),(this.width!==h||this.height!==r)&&this.setSize(h,r).setOrigin(.5)}}tt.register("fullWindowRectangle",function(p,i){var t=new $o(this.scene,p,i);return this.scene.add.existing(t),t});st(window,"RexPlugins.UI.FullWindowRectangle",$o);const Au=Phaser.Utils.Objects.GetValue;class Ko extends Yt{constructor(i,t){super(i,{eventEmitter:!1}),this.resetFromJSON(t),this.boot()}resetFromJSON(i){return this.setHitAreaMode(Au(i,"hitAreaMode",0)),this.setEnable(Au(i,"enable",!0)),this}boot(){this.parent.on("pointerdown",function(i,t,f,e){e.stopPropagation()}).on("pointerup",function(i,t,f,e){e.stopPropagation()}).on("pointermove",function(i,t,f,e){e.stopPropagation()}).on("pointerover",function(i,t,f,e){e.stopPropagation()}).on("pointerout",function(i,t){t.stopPropagation()})}setHitAreaMode(i){typeof i=="string"&&(i=GP[i]);var t=this.parent;return t.input&&t.removeInteractive(),i===0?t.setInteractive():t.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(i){return i===void 0&&(i=!0),i?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}}var GP={default:0,fullWindow:1};const Ru=Phaser.Utils.Objects.GetValue;class Jo extends $o{constructor(i,t){var f=Ru(t,"color",0),e=Ru(t,"alpha",.8);super(i,f,e),this.touchEventStop=new Ko(this,{hitAreaMode:1})}}tt.register("cover",function(p){var i=new Jo(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Cover",Jo);var NP=function(p){if(!window.Chart){var i=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js');`;return console.error(i),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,bP(this,p)),this},bP=function(p,i){i===void 0&&(i={}),i.options===void 0&&(i.options={});var t=i.options;t.responsive=!1,t.maintainAspectRatio=!1,t.hasOwnProperty("devicePixelRatio")||(t.devicePixelRatio=1);var f=!1;t.animation===void 0?t.animation={}:t.animation===!1&&(f=!0,t.animation={});var e=t.animation;f&&(e.duration=0);var s=e.onProgress;e.onProgress=function(n){s&&s(n),p.needRedraw()};var l=e.onComplete;return e.onComplete=function(n){l&&l(n),p.needRedraw()},i},VP=function(p){if(this.chart!==void 0)if(typeof p=="string"){for(var i=this.chart.data.datasets,t,f=0,e=i.length;f<e;f++)if(t=i[f],t.label===p)return t}else return this.chart.data.datasets[p]},zP=function(p,i){var t=this.getChartDataset(p);if(t!==void 0){if(typeof i=="string"){var f=this.chart.data.labels;if(i=f.indexOf(i),i===-1)return}return t.data[i]}},YP=function(p,i,t){if(this.chart===void 0)return this;var f=this.getChartDataset(p);if(typeof i=="string"){var e=this.chart.data.labels;if(i=e.indexOf(i),i===-1)return this}return f.data[i]=t,this},UP=function(){if(this.chart===void 0)return this;this.chart.update()};class Zo extends xi{constructor(i,t,f,e,s,l){super(i,t,f,e,s),this.type="rexChart",this.chart=void 0,l!==void 0&&this.setChart(l)}destroy(i){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(i))}resize(i,t){if(i===this.width&&t===this.height)return this;if(super.resize(i,t),this.chart){var f=this.chart;f.height=this.canvas.height,f.width=this.canvas.width,f.aspectRatio=f.height?f.width/f.height:null,f.update()}return this}}var XP={setChart:NP,getChartDataset:VP,getChartData:zP,setChartData:YP,updateChart:UP};Object.assign(Zo.prototype,XP);tt.register("chart",function(p,i,t,f,e){var s=new Zo(this.scene,p,i,t,f,e);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.Chart",Zo);var WP=function(p){if(this.rexSizer.hidden)return 0;p===void 0&&(p=!0);var i=0,t=this.sizerChildren,f,e,s;if(this.orientation===0)for(var l=0,n=t.length;l<n;l++)f=t[l],!f.rexSizer.hidden&&(f.rexSizer.proportion===0||p&&f.rexSizer.proportion>0?s=this.getChildWidth(f):s=0,e=f.rexSizer.padding,s+=e.left+e.right,l>0&&(s+=this.space.item),i+=s);else for(var l=0,n=t.length;l<n;l++)f=t[l],f.hasOwnProperty("rexSizer")&&(f.rexSizer.hidden||(e=f.rexSizer.padding,s=this.getChildWidth(f)+e.left+e.right,i=Math.max(s,i)));return i+this.space.left+this.space.right},HP=function(p){if(this.rexSizer.hidden)return 0;p===void 0&&(p=!0);var i=0,t=this.sizerChildren,f,e,s;if(this.orientation===0)for(var l=0,n=t.length;l<n;l++)f=t[l],!f.rexSizer.hidden&&(e=f.rexSizer.padding,s=this.getChildHeight(f)+e.top+e.bottom,i=Math.max(s,i));else for(var l=0,n=t.length;l<n;l++)f=t[l],f.hasOwnProperty("rexSizer")&&(f.rexSizer.hidden||(e=f.rexSizer.padding,f.rexSizer.proportion===0||p&&f.rexSizer.proportion>0?s=this.getChildHeight(f):s=0,s+=e.top+e.bottom,l>0&&(s+=this.space.item),i+=s));return i+this.space.top+this.space.bottom},$P=function(p,i){i===void 0&&(i=this.width);var t,f=p.rexSizer,e=f.padding;if(this.orientation===0)f.proportion>0&&this.proportionLength>0&&(t=f.proportion*this.proportionLength);else if(f.expand){var s=i-this.space.left-this.space.right;t=s-e.left-e.right}return t},KP=function(p,i){i===void 0&&(i=this.height);var t,f=p.rexSizer,e=f.padding;if(this.orientation===0){if(f.expand){var s=i-this.space.top-this.space.bottom;t=s-e.top-e.bottom}}else f.proportion>0&&this.proportionLength>0&&(t=f.proportion*this.proportionLength);return t},JP=function(p){p===void 0&&(p=[]);for(var i=this.sizerChildren,t,f=0,e=i.length;f<e;f++)t=i[f],t.isRexSizer&&p.push(t);return p},ZP=function(){return this._childrenProportion=void 0,this.proportionLength=void 0,Ys.call(this),this},QP=function(){for(var p=this.sizerChildren,i,t,f,e=this.innerLeft,s=this.innerTop,l=this.innerWidth,n=this.innerHeight,o=e,h=s,r,a,v,u,d,c,g=0,m=p.length;g<m;g++)i=this.rtl?p[m-g-1]:p[g],!i.rexSizer.hidden&&(t=i.rexSizer,f=t.padding,Us.call(this,i),i.isRexSpace?(d=0,c=0):(d=this.getExpandedChildWidth(i),c=this.getExpandedChildHeight(i)),i.isRexSizer?(i.runLayout(this,d,c),Yo(i,this)):gi(i,d,c),d===void 0&&(d=mt(i)),c===void 0&&(c=ct(i)),this.orientation===0?(r=o+f.left,t.proportion===0||this.proportionLength===0?v=d:v=t.proportion*this.proportionLength,a=h+f.top,u=n-f.top-f.bottom):(r=o+f.left,v=l-f.left-f.right,a=h+f.top,t.proportion===0||this.proportionLength===0?u=c:u=t.proportion*this.proportionLength),Xs.call(this,i,r,a,v,u,t.align),this.orientation===0?o+=v+f.left+f.right+this.space.item:h+=u+f.top+f.bottom+this.space.item)},kP=function(i){var i=Do.call(this,i);if(this.proportionLength===void 0&&this.orientation===0){var t=i-this.childrenWidth;t>0?(t=i-this.getChildrenWidth(!1),this.proportionLength=t/this.childrenProportion):this.proportionLength=0}return i},jP=function(p,t){var t=Bo.call(this,p,t);if(this.proportionLength===void 0&&this.orientation===1){var f=t-this.childrenHeight;f>0?(f=t-this.getChildrenHeight(!1),this.proportionLength=f/this.childrenProportion):this.proportionLength=0}return t};const qP=Phaser.GameObjects.Zone;class Qo extends qP{constructor(i){super(i,0,0,1,1),this.isRexSpace=!0}}var _P=function(p,i){var t=this.sizerChildren;if(t.length===0)return-1;for(var f=-1,e=1/0,s=0,l=t.length;s<l;s++){var n=t[s],o;this.orientation===0?o=Math.abs(n.left-p):o=Math.abs(n.top-i),e>o&&(e=o,f=s)}var n=t[t.length-1],o;return this.orientation===0?o=Math.abs(n.right-p):o=Math.abs(n.bottom-i),e>o&&(e=o,f=s+1),f};const Av=Phaser.Utils.Objects.IsPlainObject,ri=Phaser.Utils.Objects.GetValue,Ou=Phaser.Display.Align.CENTER,tM={min:0,full:-1};var ea=function(p,i,t,f,e,s,l,n){zs.call(this,p);var o=typeof i;if(i===null)return this;if(o!=="number"){if(o==="string")i=tM[i];else if(Av(i)){var h=i;i=ri(h,"proportion",0),t=ri(h,"align",Ou),f=ri(h,"padding",0),e=ri(h,"expand",!1),s=ri(h,"key",void 0),l=ri(h,"index",void 0),p.isRexSizer||(this.orientation===0?n=ri(h,"minWidth",void 0):n=ri(h,"minHeight",void 0))}}typeof t=="string"&&(t=ir[t]),i===void 0&&(i=0),t===void 0&&(t=Ou),f===void 0&&(f=0),e===void 0&&(e=!1),!p.isRexSizer&&n===void 0&&(this.orientation===0?n=p._minWidth:n=p._minHeight);var h=this.getSizerConfig(p);return h.proportion=i,h.align=t,h.padding=as(f),h.expand=e,l===void 0||l>=this.sizerChildren.length?this.sizerChildren.push(p):this.sizerChildren.splice(l,0,p),!p.isRexSizer&&i>0&&(this.orientation===0?(p.minWidth=n===void 0?mt(p):n,p.minHeight=void 0):(p.minWidth=void 0,p.minHeight=n===void 0?ct(p):n)),s!==void 0&&this.addChildrenMap(s,p),this},eM={add:ea,addSpace(p){return this.insertSpace(void 0,p),this},insertSpace(p,i){return i===void 0&&(i=1),ea.call(this,new Qo(this.scene),{proportion:i,minWidth:0,minHeight:0,index:p}),this},insert(p,i,t,f,e,s,l,n){return Av(t)&&(t.index=p),ea.call(this,i,t,f,e,s,l,p,n),this},insertAtPosition(p,i,t,f,e,s,l,n,o){var h=_P.call(this,p,i);return h===-1&&(h=void 0),this.insert(h,t,f,e,s,l,n,o),this}};const iM=Phaser.Utils.Array.Remove;var sM={remove(p,i){return this.getParentSizer(p)!==this?this:(iM(this.sizerChildren,p),fr.call(this,p,i),this)},removeAll(p){for(var i=this.sizerChildren.length-1;i>=0;i--)this.remove(this.sizerChildren[i],p);return this},clear(p){return this.sizerChildren.length=0,dr.call(this,p),this}},Rv={getChildrenWidth:WP,getChildrenHeight:HP,getExpandedChildWidth:$P,getExpandedChildHeight:KP,getChildrenSizers:JP,preLayout:ZP,layoutChildren:QP,resolveWidth:kP,resolveHeight:jP};Object.assign(Rv,eM,sM);var nM=function(){for(var p=0,i=this.sizerChildren,t,f,e=0,s=i.length;e<s;e++)t=i[e],!t.rexSizer.hidden&&(f=t.rexSizer.proportion,f>0&&(p+=f));return p},rM={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},ko=function(p){return typeof p=="string"&&(p=rM[p]),p};const ia=Phaser.Utils.Objects.IsPlainObject,Ce=Phaser.Utils.Objects.GetValue;class Lt extends Di{constructor(i,t,f,e,s,l,n){ia(t)?(n=t,t=Ce(n,"x",0),f=Ce(n,"y",0),e=Ce(n,"width",void 0),s=Ce(n,"height",void 0),l=Ce(n,"orientation",0)):ia(e)?(n=e,e=Ce(n,"width",void 0),s=Ce(n,"height",void 0),l=Ce(n,"orientation",0)):ia(l)&&(n=l,l=Ce(n,"orientation",0)),l===void 0&&(l=0),super(i,t,f,e,s,n),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(l),this.setItemSpacing(Ce(n,"space.item",0)),this.setRTL(Ce(n,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(i){return this.orientation=ko(i),this}setItemSpacing(i){return this.space.item=i,this}setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=nM.call(this)),this._childrenProportion}}Object.assign(Lt.prototype,Rv);tt.register("sizer",function(p,i,t,f,e,s){var l=new Lt(this.scene,p,i,t,f,e,s);return this.scene.add.existing(l),l});st(window,"RexPlugins.UI.Sizer",Lt);var Ov=function(){return Array.prototype.reduce.call(arguments,aM,0)},aM=function(p,i){return p+i},oM=function(){if(this.rexSizer.hidden)return 0;for(var p=0,i,t=this.sizerChildren,f,e,s,l,n=0;n<this.columnCount;n++){if(l=this.columnProportions[n],i=0,l===0){for(var o=0;o<this.rowCount;o++)f=t[o*this.columnCount+n],f&&(f.rexSizer.hidden||(e=f.rexSizer.padding,s=this.getChildWidth(f)+e.left+e.right,i=Math.max(i,s)));p+=i}this.columnWidth[n]=i}return p+Ov(this.space.left,...this.space.column,this.space.right)},hM=function(){if(this.rexSizer.hidden)return 0;for(var p=0,i,t=this.sizerChildren,f,e,s,l,n=0;n<this.rowCount;n++){if(l=this.rowProportions[n],i=0,l===0){for(var o=0;o<this.columnCount;o++)f=t[n*this.columnCount+o],f&&(f.rexSizer.hidden||(s=f.isRexSizer?Math.max(f.minHeight,f.childrenHeight):f.hasOwnProperty("minHeight")?f.minHeight:ct(f),e=f.rexSizer.padding,s+=e.top+e.bottom,i=Math.max(i,s)));p+=i}this.rowHeight[n]=i}return p+Ov(this.space.top,...this.space.row,this.space.bottom)},lM=function(p,i){var t,f=p.rexSizer;if(f.expand){var e=f.padding;t=i-e.left-e.right}return t},uM=function(p,i){var t,f=p.rexSizer;if(f.expand){var e=f.padding;t=i-e.top-e.bottom}return t},fM=function(p){p===void 0&&(p=[]);for(var i=this.sizerChildren,t,f=0,e=i.length;f<e;f++)t=i[f],t&&t.isRexSizer&&p.push(t);return p},dM=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,Ys.call(this),this},vM=function(){for(var p,i,t,f=this.innerLeft,e=this.innerTop,s=f,l=e,n,o,h,r,a,v,u=this.space.column,d=this.space.row,c,g,m=0;m<this.rowCount;m++){g=this.getRowHeight(m),s=f;for(var x=0;x<this.columnCount;x++){if(c=this.getColumnWidth(x),p=this.getChildAt(x,m),!p||p.rexSizer.hidden){s+=c+u[x];continue}Us.call(this,p),a=this.getExpandedChildWidth(p,c),v=this.getExpandedChildHeight(p,g),p.isRexSizer?(p.runLayout(this,a,v),Yo(p,this)):gi(p,a,v),i=p.rexSizer,t=i.padding,n=s+t.left,h=c-t.left-t.right,o=l+t.top,r=g-t.top-t.bottom,Xs.call(this,p,n,o,h,r,i.align),s+=c+u[x]}l+=g+d[m]}},cM=function(i){var i=Do.call(this,i);if(this.proportionWidthLength===void 0){var t=this.totalColumnProportions;if(t>0){var f=i-this.childrenWidth;f>=0&&(this.proportionWidthLength=f/t)}else this.proportionWidthLength=0}return i},pM=function(p,t){var t=Bo.call(this,p,t);if(this.proportionHeightLength===void 0){var f=this.totalRowProportions;if(f>0){var e=t-this.childrenHeight;e>=0&&(this.proportionHeightLength=e/f)}else this.proportionHeightLength=0}return t},gM=function(p){var i,t,f;for(var e in this.sizerChildren)i=this.sizerChildren[e],i&&i.isRexSizer&&!i.ignoreLayout&&(f=this.getColumnWidth(parseInt(e)%this.columnCount),t=this.getExpandedChildWidth(i,f),t=i.resolveWidth(t),i.resolveChildrenWidth(t))},mM=function(p){var i,t,f;for(var e in this.sizerChildren)i=this.sizerChildren[e],!(!i||i.isRexSizer&&i.ignoreLayout||!i.runWidthWrap)&&(f=this.getColumnWidth(parseInt(e)%this.columnCount),t=this.getExpandedChildWidth(i,f),i.isRexSizer&&(t=i.resolveWidth(t)),i.runWidthWrap(t));return this};const xM=Phaser.Utils.Objects.IsPlainObject,$i=Phaser.Utils.Objects.GetValue,Lu=Phaser.Display.Align.CENTER;var yM=function(p,i,t,f,e){if(typeof p=="number"||typeof i=="number")if(p===void 0){for(var s,l=0;l<f;l++)if(s=i*f+l,!t[s])return s}else if(i===void 0){for(var s,l=0;l<e;l++)if(s=l*f+p,!t[s])return s}else{var s=i*f+p;if(!t[s])return s}else if(i===!0){for(var s,l=0;l<f;l++)for(var n=0;n<e;n++)if(s=n*f+l,!t[s])return s}else for(var l=0,o=t.length;l<o;l++)if(!t[l])return l;return null},TM=function(p,i,t,f,e,s,l){if(zs.call(this,p),xM(i)){var o=i;i=$i(o,"column",void 0),t=$i(o,"row",void 0),f=$i(o,"align",Lu),e=$i(o,"padding",0),s=$i(o,"expand",!1),l=$i(o,"key",void 0)}var n=yM(i,t,this.sizerChildren,this.columnCount,this.rowCount);if(n===null)return this;typeof f=="string"&&(f=ir[f]),f===void 0&&(f=Lu),e===void 0&&(e=0),s===void 0&&(s=!0);var o=this.getSizerConfig(p);return o.align=f,o.padding=as(e),o.expand=s,this.sizerChildren[n]=p,l!==void 0&&this.addChildrenMap(l,p),this},SM={add:TM},ki=function(p,i,t,f){t===void 0&&(t=0),f===void 0&&(f=p.length-1);for(var e=t;e<=f;e++)p[e]=i;return p},CM={remove(p,i){if(this.getParentSizer(p)!==this)return this;var t=this.sizerChildren.indexOf(p);return t!==-1&&(this.sizerChildren[t]=null),fr.call(this,p,i),this},removeAt(p,i,t){var f=this.getChildAt(p,i);return f&&this.remove(f,t),this},removeAll(p){for(var i=this.sizerChildren.length-1;i>=0;i--){var t=this.sizerChildren[i];!t||this.remove(t,p)}return this},clear(p){return ki(this.sizerChildren,null),dr.call(this,p),this}};const Fu=Phaser.Utils.Objects.GetValue;var EM=function(p,i,t,f,e){if(t===void 0&&(t=0),f===void 0&&(f=0),this.columnCount=p,this.rowCount=i,this.gridCount=p*i,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=p*i,ki(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=p,typeof t=="number")ki(this.columnProportions,t);else for(var s=0;s<p;s++)this.columnProportions[s]=t[s]||0;if(this.rowProportions=[],this.rowProportions.length=i,typeof f=="number")ki(this.rowProportions,f);else for(var s=0;s<i;s++)this.rowProportions[s]=f[s]||0;this.columnWidth=[],this.columnWidth.length=p,this.rowHeight=[],this.rowHeight.length=i,this.space.column=[],this.space.column.length=p-1;var l=Fu(e,"column",0);if(typeof l=="number")ki(this.space.column,l);else for(var s=0,n=this.space.column.length;s<n;s++)this.space.column[s]=l[s]||0;this.space.row=[],this.space.row.length=i-1;var o=Fu(e,"row",0);if(typeof o=="number")ki(this.space.row,o);else for(var s=0,n=this.space.row.length;s<n;s++)this.space.row[s]=o[s]||0;return this},Lv={getChildrenWidth:oM,getChildrenHeight:hM,getExpandedChildWidth:lM,getExpandedChildHeight:uM,getChildrenSizers:fM,preLayout:dM,layoutChildren:vM,resolveWidth:cM,resolveHeight:pM,resolveChildrenWidth:gM,runWidthWrap:mM,resetGrid:EM};Object.assign(Lv,SM,CM);var PM=function(){for(var p=0,i,t=0;t<this.columnCount;t++)i=this.columnProportions[t],i>0&&(p+=i);return p},MM=function(){for(var p=0,i,t=0;t<this.rowCount;t++)i=this.rowProportions[t],i>0&&(p+=i);return p};const pn=Phaser.Utils.Objects.IsPlainObject,Pt=Phaser.Utils.Objects.GetValue;class Si extends Di{constructor(i,t,f,e,s,l,n,o,h,r){pn(t)?(r=t,t=Pt(r,"x",0),f=Pt(r,"y",0),e=Pt(r,"width",void 0),s=Pt(r,"height",void 0),l=Pt(r,"column",0),n=Pt(r,"row",0),o=Pt(r,"columnProportions",0),h=Pt(r,"rowProportions",0)):pn(e)?(r=e,e=Pt(r,"width",void 0),s=Pt(r,"height",void 0),l=Pt(r,"column",0),n=Pt(r,"row",0),o=Pt(r,"columnProportions",0),h=Pt(r,"rowProportions",0)):pn(l)?(r=l,l=Pt(r,"column",0),n=Pt(r,"row",0),o=Pt(r,"columnProportions",0),h=Pt(r,"rowProportions",0)):pn(o)&&(r=o,o=Pt(r,"columnProportions",0),h=Pt(r,"rowProportions",0)),super(i,t,f,e,s,r),this.type="rexGridSizer",this.resetGrid(l,n,o,h,Pt(r,"space",void 0)),this.addChildrenMap("items",this.sizerChildren);var a=Pt(r,"createCellContainerCallback");if(a)for(var f=0,v=this.rowCount;f<v;f++)for(var t=0,u=this.columnCount;t<u;t++){var d={column:t,row:f},c=a(i,t,f,d);c&&this.add(c,d)}}destroy(i){!this.scene||(super.destroy(i),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setColumnProportion(i,t){return i>=this.columnProportions.length?this:(this.columnProportions[i]=t,this)}setRowProportion(i,t){return i>=this.rowProportions.length?this:(this.rowProportions[i]=t,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=PM.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=MM.call(this)),this._totalRowProportions}getChildAt(i,t){return this.sizerChildren[t*this.columnCount+i]}childToGridIndex(i,t){if(!i)return null;var f=this.sizerChildren.indexOf(i);return f===-1?null:(t===void 0&&(t={}),t.x=f%this.columnCount,t.y=Math.floor(f/this.columnCount),t)}getColumnWidth(i){var t=this.columnProportions[i],f=t===0?this.columnWidth[i]:t*this.proportionWidthLength;return f}getRowHeight(i){var t=this.rowProportions[i],f=t===0?this.rowHeight[i]:t*this.proportionHeightLength;return f}}Object.assign(Si.prototype,Lv);tt.register("gridSizer",function(p,i,t,f,e,s,l,n,o){var h=new Si(this.scene,p,i,t,f,e,s,l,n,o);return this.scene.add.existing(h),h});st(window,"RexPlugins.UI.GridSizer",Si);var AM=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},RM=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},OM=function(p){p===void 0&&(p=[]);for(var i=this.sizerChildren,t,f=0,e=i.length;f<e;f++)t=i[f],t!==`
`&&t.isRexSizer&&p.push(t);return p},LM=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,Ys.call(this),this},FM=function(){for(var p=this.innerWidth,i=this.justifyPercentage,t,f,e,s=0,l=this.innerLeft,n=this.innerTop,o=l,h=n,r,a,v,u,d=this.widthWrapResult.lines,c,g,m,x=0,y=d.length;x<y;x++){switch(c=d[x],g=c.children,this.rtl&&g.reverse(),m=p-c.width,this.align){case 0:break;case 1:o+=m;break;case 2:o+=m/2;break;case 3:s=sa(p,m,i,g.length);break;case 4:s=sa(p,m,i,g.length),s===0&&(o+=m);break;case 5:s=sa(p,m,i,g.length),s===0&&(o+=m/2);break}for(var T=0,S=g.length;T<S;T++)t=g[T],!t.rexSizer.hidden&&(f=t.rexSizer,e=f.padding,Us.call(this,t),r=o+e.left,T>0&&(r+=this.space.item),a=h+e.top,v=mt(t),u=ct(t),o=r+v+e.right+s,Xs.call(this,t,r,a,v,u,f.align));o=l,h+=c.height+this.space.line}},sa=function(p,i,t,f){return i/p<=t?i/(f-1):0},IM=function(p,i){i===void 0?i={lines:[],width:0,height:0}:(i.lines.length=0,i.width=0,i.height=0);for(var t=this.sizerChildren,f,e,s,l=0,n=i.lines,o=void 0,h,r=0,a=t.length;r<a;r++){if(f=t[r],f===`
`)f=void 0,e=0,h=!0;else{if(f.rexSizer.hidden)continue;f.isRexSizer&&f.layout(),e=DM(f),h=l<e||o===void 0}h&&(o&&(o.width=p-(l+this.space.item),i.width=Math.max(i.width,o.width),i.height+=o.height+this.space.line),o={children:[],height:0},n.push(o),l=p),l-=e+this.space.item,f&&(o.children.push(f),s=BM(f),o.height=Math.max(o.height,s))}return o&&(o.width=p-(l+this.space.item),i.width=Math.max(i.width,o.width),i.height+=o.height),i},DM=function(p){var i=p.rexSizer.padding;return mt(p)+i.left+i.right},BM=function(p){var i=p.rexSizer.padding;return ct(p)+i.top+i.bottom},wM=function(p){var i=p-this.space.left-this.space.right;this.widthWrapResult=IM.call(this,i,this.widthWrapResult),lv.call(this,p)};const Iu=Phaser.Math.Distance.Between;var GM=function(p,i){var t=this.sizerChildren;if(t.length===0)return-1;for(var f=-1,e=1/0,s=0,l=t.length;s<l;s++){var n=t[s];if(!(Math.abs(n.centerY-i)>n.height/2)){var h=Iu(n.left,n.centerY,p,i);e>h&&(e=h,f=s);var o=t[s+1];if(!(o&&o.y===n.y)){var h=Iu(n.right,n.centerY,p,i);e>h&&(e=h,f=s+1)}}}return f};const NM=Phaser.Utils.Objects.IsPlainObject,na=Phaser.Utils.Objects.GetValue,bM=Phaser.Display.Align.CENTER;var ra=function(p,i,t,f){if(p===`
`)return this.addNewLine(),this;if(zs.call(this,p),NM(i)){var e=i;i=na(e,"padding",0),t=na(e,"key",void 0),f=na(e,"index",void 0)}i===void 0&&(i=0);var e=this.getSizerConfig(p);return e.align=bM,e.padding=as(i),f===void 0||f>=this.sizerChildren.length?this.sizerChildren.push(p):this.sizerChildren.splice(f,0,p),t!==void 0&&this.addChildrenMap(t,p),this},VM={add(p,i,t){if(me(p))for(var f=p,e=0,s=f.length;e<s;e++)ra.call(this,f[e],i);else ra.call(this,p,i,t);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(p,i,t,f){return ra.call(this,i,t,f,p),this},insertAtPosition(p,i,t,f,e){var s=GM.call(this,p,i);return s===-1&&(s=void 0),this.insert(s,t,f,e),this}};const zM=Phaser.Utils.Array.Remove;var YM={remove(p,i){return this.getParentSizer(p)!==this?this:(zM(this.sizerChildren,p),fr.call(this,p,i),this)},removeAll(p){for(var i=this.sizerChildren.length-1;i>=0;i--)this.remove(this.sizerChildren[i],p);return this},clear(p){return this.sizerChildren.length=0,dr.call(this,p),this}},Fv={getChildrenWidth:AM,getChildrenHeight:RM,getChildrenSizers:OM,preLayout:LM,layoutChildren:FM,runWidthWrap:wM};Object.assign(Fv,VM,YM);var UM=function(p){p===void 0&&(p=this.sizerChildren);for(var i=0,t,f,e=0,s=p.length;e<s;e++)t=p[e],t!==`
`&&(f=this.getChildWidth(t),i=Math.max(f,i));return i},XM=function(p){p===void 0&&(p=this.sizerChildren);for(var i=0,t,f,e=0,s=p.length;e<s;e++)t=p[e],t!==`
`&&(f=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:ct(t),i=Math.max(f,i));return i};const Du=Phaser.Utils.Objects.IsPlainObject,fe=Phaser.Utils.Objects.GetValue;class Bi extends Di{constructor(i,t,f,e,s,l){Du(t)?(l=t,t=fe(l,"x",0),f=fe(l,"y",0),e=fe(l,"width",void 0),s=fe(l,"height",void 0)):Du(e)&&(l=e,e=fe(l,"width",void 0),s=fe(l,"height",void 0)),super(i,t,f,e,s,l),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(fe(l,"orientation",0)),this.setItemSpacing(fe(l,"space.item",0)),this.setLineSpacing(fe(l,"space.line",0)),this.setAlign(fe(l,"align",0)),this.setJustifyPercentage(fe(l,"justifyPercentage",.25)),this.setRTL(fe(l,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(i){return this.orientation=ko(i),this}setItemSpacing(i){return this.space.item=i,this}setLineSpacing(i){return this.space.line=i,this}setAlign(i){return typeof i=="string"&&(i=WM[i]),this.align=i,this}setJustifyPercentage(i){return this.justifyPercentage=i,this}setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=UM.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=XM.call(this)),this._maxChildHeight}}const WM={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(Bi.prototype,Fv);tt.register("fixWidthSizer",function(p,i,t,f,e){var s=new Bi(this.scene,p,i,t,f,e);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.FixWidthSizer",Bi);tt.register("overlapSizer",function(p,i,t,f,e){var s=new Ti(this.scene,p,i,t,f,e);return this.scene.add.existing(s),s});st(window,"RexPlugins.UI.OverlapSizer",Ti);tt.register("space",function(){var p=new Qo(this.scene);return p});st(window,"RexPlugins.UI.Space",Qo);var Is=function(p,i,t,f){var e=new za(i,t,f);if(p&&!p.isRexSizer){var s=e.createGeometryMask();p.setMask(s),this.once("destroy",function(){p.setMask(),s.destroy()})}return this.pin(e),e};const Ee=Phaser.Utils.Objects.GetValue;class pr extends Lt{constructor(i,t){super(i,t),this.type="rexLabel";var f=Ee(t,"background",void 0),e=Ee(t,"icon",void 0),s=Ee(t,"iconMask",void 0),l=Ee(t,"text",void 0),n=Ee(t,"action",void 0),o=Ee(t,"actionMask",void 0),h=Ee(t,"align",void 0),r=Ee(t,"space.icon",0),a=Ee(t,"space.text",0);if(f&&this.addBackground(f),(h==="right"||h==="bottom"||h==="center")&&this.addSpace(),e){var v;this.orientation===0?(l||n)&&(v={right:r}):(l||n)&&(v={bottom:r}),this.add(e,0,"center",v),s&&(s=Is.call(this,e,e,1))}if(l){var u=Ee(t,"expandTextWidth",!1),d=Ee(t,"expandTextHeight",!1),c,v,g;this.orientation===0?(c=u?1:0,n&&(v={right:a}),g=d):(c=d?1:0,n&&(v={bottom:a}),g=u),this.add(l,c,"center",v,g)}n&&(this.add(n),o&&(o=Is.call(this,n,n,1))),h==="center"&&this.addSpace(),this.addChildrenMap("background",f),this.addChildrenMap("icon",e),this.addChildrenMap("iconMask",s),this.addChildrenMap("text",l),this.addChildrenMap("action",n),this.addChildrenMap("actionMask",o)}get text(){var i=this.childrenMap.text;return i===void 0?"":i.text}set text(i){var t=this.childrenMap.text;t!==void 0&&t.setText(i)}setText(i){return this.text=i,this}appendText(i){return this.text+=i,this}setTexture(i,t){var f=this.childrenMap.icon;if(f!==void 0)return f.setTexture(i,t),this}get texture(){var i=this.childrenMap.icon;if(i!==void 0)return i.texture}get frame(){var i=this.childrenMap.icon;if(i!==void 0)return i.frame}runLayout(i,t,f){if(this.ignoreLayout)return this;super.runLayout(i,t,f);var e=this.childrenMap.iconMask;e&&(e.setPosition(),this.resetChildPositionState(e));var s=this.childrenMap.actionMask;return s&&(s.setPosition(),this.resetChildPositionState(s)),this}resize(i,t){super.resize(i,t);var f=this.childrenMap.iconMask;f&&f.resize();var e=this.childrenMap.actionMask;return e&&e.resize(),this}}tt.register("label",function(p){var i=new pr(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Label",pr);const gn=Lt.prototype.add,Bu=Lt.prototype.addSpace;var aa=function(p){var i=!p.isRexSpace,t=!i||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(i){var f=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");f&&Bu.call(this),gn.call(this,p,{proportion:t,expand:!0});var e=!this.buttonsExpand&&this.buttonsAlign==="center";e&&Bu.call(this),this.hasTailSpace=e}else gn.call(this,p,{proportion:t,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var s=this.sizerChildren.length-1;gn.call(this,p,{index:s,proportion:t,expand:!0})}else gn.call(this,p,{proportion:t,expand:!0});return i&&this.buttonGroup.add(p),this},HM={addButton(p){if(me(p))for(var i=p,t=0,f=i.length;t<f;t++)aa.call(this,i[t]);else aa.call(this,p);return this},addButtons(p){for(var i=0,t=p.length;i<t;i++)aa.call(this,p[i]);return this}};const $M=Phaser.Utils.Array.Remove,KM=Lt.prototype.remove,JM=Lt.prototype.clear;var oa=function(p,i){if(this.getParentSizer(p)!==this)return this;var t=this.buttonGroup.buttons;return $M(t,p),KM.call(this,p,i),this},ZM={remove(p,i){if(me(p))for(var t=p,f=0,e=t.length;f<e;f++)oa.call(this,t[f],i);else oa.call(this,p,i);return this},clear(p){var i=this.buttonGroup.buttons;return i.length=0,JM.call(this,p),this},removeButton(t,i){var t=this.getButton(t);return t?(this.remove(t,i),this):this},clearButtons(p){for(var i=this.buttonGroup.buttons,t=i.length-1;t>=0;t--)oa.call(this,i[t],p);return this}},QM={add(p){return this.buttons.push(p),p._buttonBehavior=new os(p,this.clickConfig),p._buttonBehavior.on("click",function(i,t,f,e){this.fireEvent("button.click",t,f,e)},this).on("enable",function(i,t){this.fireEvent("button.enable",t)},this).on("disable",function(i,t){this.fireEvent("button.disable",t)},this),p.on("pointerover",function(i,t,f,e){this.fireEvent("button.over",p,i,e)},this).on("pointerout",function(i,t){this.fireEvent("button.out",p,i,t)},this),this},addMultiple(p){for(var i=0,t=p.length;i<t;i++)this.add(gameObject[i]);return this}},kM=function(p,i,t,f){var e;if(typeof i=="number"){if(e=i,i=this.buttons[e],!i)return}else if(e=this.buttons.indexOf(i),e===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(p,i,e,t,f),this.groupName!==void 0?this.eventEmitter.emit(p,i,this.groupName,e,t,f):this.eventEmitter.emit(p,i,e,t,f)};const ji=Phaser.Utils.Objects.GetValue;var wu=function(p,i){i===void 0&&(i=!1);var t=ji(p,"dataManager",void 0),f,e;if(f=ji(p,"setValueCallback",void 0),e=ji(p,"setValueCallbackScope",void 0),f===void 0&&(f=ji(p,"setButtonStateCallback",void 0),e=ji(p,"setButtonStateCallbackScope",void 0)),t===void 0){var s=this.parent;s.setDataEnabled(),t=s.data}this.buttons.forEach(function(l){var n=l.name;f&&t.events.on(`changedata-${n}`,function(o,h,r){e?f.call(e,l,h,r):f(l,h,r)}),t.set(n,void 0),t.set(n,i)}),this.dataManager=t},jM={setType(p){var i=ji(p,"type",void 0);switch(this.buttonsType=i,i){case"radio":this.setRadioType(p);break;case"checkboxes":this.setCheckboxesType(p);break}return this},setRadioType(p){wu.call(this,p);var i=void 0,t=this.parent,f=this.buttons,e=this.dataManager;return Object.defineProperty(t,"value",{get:function(){return i},set:function(s){s!==i&&(i=s,f.forEach(function(l){var n=l.name,o=e.get(n);n===s?o||e.set(n,!0):o&&e.set(n,!1)}))},enumerable:!0,configurable:!0}),t.on("button.click",function(s){t.value=s.name}),this},setCheckboxesType(p){wu.call(this,p);var i=this.parent,t=this.dataManager;return i.on("button.click",function(f){t.toggle(f.name)}),this},setSelectedButtonName(p){return this.parent.value=p,this},getSelectedButtonName(){return this.parent.value},setButtonState(p,i){return i===void 0&&(i=!0),this.dataManager.set(p,i),this},getButtonState(p){return this.dataManager.get(p)}},qM=function(p,i){if(p)if(me(p)){for(var t,f=0,e=p.length;f<e;f++)if(t=Gu(p[f],i),t)return t}else{var t;for(var s in p)if(t=Gu(p[s],i),t)return t}else return null},Gu=function(p,i){return p?p.hasOwnProperty("name")?p.name===i?p:null:GetElementByName(p,i):null},gr={getButton(p){var i=this.buttons,t,f=typeof p;switch(f){case"number":t=i[p];break;case"string":t=qM(i,p);break;default:t=p,i.indexOf(t)===-1&&(t=void 0);break}return t},setButtonEnable(p,i){var t=this.buttons;if(p===void 0||typeof p=="boolean"){i=p;for(var f=0,e=t.length;f<e;f++)t[f]._buttonBehavior.setEnable(i)}else this.getButton(p)._buttonBehavior.setEnable(i);return this},toggleButtonEnable(p){var i=this.buttons;if(p===void 0||typeof p=="boolean")for(var t=0,f=i.length;t<f;t++)i[t]._buttonBehavior.toggleEnable();else this.getButton(p)._buttonBehavior.toggleEnable();return this},getButtonEnable(p){return p===void 0&&(p=0),this.getButton(p)._buttonBehavior.enable},emitButtonClick(p){var i=this.buttonGroup?this.buttonGroup:this;return i.fireEvent("button.click",p),this},showButton(p){return fi(this.getButton(p)),this},hideButton(p){return di(this.getButton(p)),this},isButtonShown(p){return No(this.getButton(p)),this},forEachButtton(p,i){for(var t=this.buttons,f=0,e=t.length;f<e;f++)i?p.call(i,t[f],f,t):p(t[f],f,t);return this}};class mr{constructor(i){this.parent=i.parent,this.eventEmitter=i.eventEmitter,this.groupName=i.groupName,this.clickConfig=i.clickConfig,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var _M={fireEvent:kM};Object.assign(mr.prototype,QM,jM,gr,_M);var jo={setSelectedButtonName(p){return this.buttonGroup.setSelectedButtonName(p),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(p,i){return this.buttonGroup.setButtonState(p,i),this},getButtonState(p){return this.buttonGroup.getButtonState(p)}};const Li=Phaser.Utils.Objects.GetValue;class ve extends Lt{constructor(i,t){t===void 0&&(t={});var f=t.space;typeof f=="number"&&(t.space={item:f}),super(i,t),this.type="rexButtons",this.buttonGroup=new mr({parent:this,eventEmitter:Li(t,"eventEmitter",this),groupName:Li(t,"groupName",void 0),clickConfig:Li(t,"click",void 0)});var e=Li(t,"background",void 0),s=Li(t,"buttons",void 0);this.buttonsExpand=Li(t,"expand",!1),this.buttonsAlign=Li(t,"align",void 0),e&&this.addBackground(e),s&&this.addButtons(s),this.buttonGroup.setType(t),this.addChildrenMap("background",e),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(i){!this.scene||(super.destroy(i),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(i){this.buttonGroup.groupName=i}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(ve.prototype,HM,ZM,gr,jo);tt.register("buttons",function(p){var i=new ve(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Buttons",ve);const tA=Si.prototype.add;var eA={addButton(p,i,t){return tA.call(this,p,i,t,void 0,0,this.buttonsExpand),this.buttonGroup.add(p),this},addButtons(p,i){for(var t=0,f=p;t<f;t++)this.addButton(p[t],void 0,i);return this}};const iA=Phaser.Utils.Array.Remove,sA=Si.prototype.remove,nA=Si.prototype.clear;var ha=function(t,i){var t=this.getButton(t);if(!t)return this;var f=this.buttonGroup.buttons;return iA(f,t),sA.call(this,t,i),this},rA={remove(p,i){if(me(p))for(var t=p,f=0,e=t.length;f<e;f++)ha.call(this,t[f],i);else ha.call(this,p,i);return this},clear(p){var i=this.buttonGroup.buttons;return i.length=0,nA.call(this,p),this},removeButton(p,i){return this.remove(p,i),this},clearButtons(p){for(var i=this.buttonGroup.buttons,t=i.length-1;t>=0;t--)ha.call(this,i[t],p);return this}};const De=Phaser.Utils.Objects.GetValue;class qo extends Si{constructor(i,t){t===void 0&&(t={});var f=De(t,"row",0),e=De(t,"col",0),s=De(t,"createCellContainerCallback"),l=De(t,"buttons",void 0),n=De(t,"expand",!0),o=n?1:0;if(s&&(t.createCellContainerCallback=void 0),l!==void 0){f=Math.max(f,l.length);for(var h=0,r=l.length;h<r;h++)e=Math.max(e,l[h].length)}t.row=f,t.column=e,t.columnProportions=o,t.rowProportions=o,super(i,t),this.type="rexGridButtons",this.buttonGroup=new mr({parent:this,eventEmitter:De(t,"eventEmitter",this),groupName:De(t,"groupName",void 0),clickConfig:De(t,"click",void 0)});var a=De(t,"background",void 0);if(this.buttonsExpand=n,De(t,"space",void 0),a&&this.addBackground(a),l)for(var v,u,d=0,c=l.length;d<c;d++){v=l[d];for(var g=0,m=v.length;g<m;g++)u=v[g],u&&this.addButton(u,g,d)}else if(s)for(var x=0;x<f;x++)for(var y=0;y<e;y++){var u=s(i,y,x);u&&this.addButton(u,y,x)}this.buttonGroup.setType(t),this.addChildrenMap("background",a),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(i){!this.scene||(super.destroy(i),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(i){this.buttonGroup.groupName=i}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(qo.prototype,eA,rA,gr,jo);tt.register("gridButtons",function(p){var i=new qo(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.GridButtons",qo);const Iv=Bi.prototype.add;var mn=function(p){return Iv.call(this,p),this.buttonGroup.add(p),this},aA={addButton(p){if(me(p))for(var i=p,t=0,f=i.length;t<f;t++)mn.call(this,i[t]);else mn.call(this,p);return this},addButtons(p){if(me(p[0]))for(var i=p,t,f=0,e=i.length-1;f<=e;f++){t=i[f];for(var s=0,l=t.length;s<l;s++)mn.call(this,t[s]);f>e&&Iv.addNewLine(this)}else for(var s=0,l=p.length;s<l;s++)mn.call(this,p[s]);return this}};const oA=Phaser.Utils.Array.Remove,hA=Bi.prototype.remove,lA=Bi.prototype.clear;var la=function(t,i){var t=this.getButton(t);if(!t)return this;var f=this.buttonGroup.buttons;return oA(f,t),hA.call(this,t,i),this},uA={remove(p,i){if(me(p))for(var t=p,f=0,e=t.length;f<e;f++)la.call(this,t[f],i);else la.call(this,p,i);return this},clear(p){var i=this.buttonGroup.buttons;return i.length=0,lA.call(this,p),this},removeButton(p,i){return this.remove(p,i),this},clearButtons(p){for(var i=this.buttonGroup.buttons,t=i.length-1;t>=0;t--)la.call(this,i[t],p);return this}};const Ki=Phaser.Utils.Objects.GetValue;class _o extends Bi{constructor(i,t){t===void 0&&(t={});var f=t.space;typeof f=="number"&&(t.space={item:f,line:f}),super(i,t),this.type="rexFixWidthButtons",this.buttonGroup=new mr({parent:this,eventEmitter:Ki(t,"eventEmitter",this),groupName:Ki(t,"groupName",void 0),clickConfig:Ki(t,"click",void 0)});var e=Ki(t,"background",void 0),s=Ki(t,"buttons",void 0);this.buttonsAlign=Ki(t,"align",void 0),e&&this.addBackground(e),s&&this.addButtons(s),this.buttonGroup.setType(t),this.addChildrenMap("background",e),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(i){!this.scene||(super.destroy(i),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(i){this.buttonGroup.groupName=i}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(_o.prototype,aA,uA,gr,jo);tt.register("fixWidthButtons",function(p){var i=new _o(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.FixWidthButtons",_o);var fA={getChoice(p){return this.childrenMap.choicesSizer.getButton(p)},getAction(p){return this.childrenMap.actionsSizer.getButton(p)},getToolbar(p){return this.childrenMap.toolbarSizer.getButton(p)},getLeftToolbar(p){return this.childrenMap.leftToolbarSizer.getButton(p)},setChoiceEnable(p,i){return this.childrenMap.choicesSizer.setButtonEnable(p,i),this},setActionEnable(p,i){return this.childrenMap.actionsSizer.setButtonEnable(p,i),this},setToolbarEnable(p,i){return this.childrenMap.toolbarSizer.setButtonEnable(p,i),this},setLeftToolbarEnable(p,i){return this.childrenMap.leftToolbarSizer.setButtonEnable(p,i),this},toggleChoiceEnable(p){return this.childrenMap.choicesSizer.toggleButtonEnable(p),this},toggleActionEnable(p){return this.childrenMap.actionsSizer.toggleButtonEnable(p),this},toggleToolbarEnable(p){return this.childrenMap.toolbarSizer.toggleButtonEnable(p),this},toggleLeftToolbarEnable(p){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(p),this},getChoiceEnable(p){return this.childrenMap.choicesSizer.getButtonEnable(p)},getActionEnable(p){return this.childrenMap.actionsSizer.getButtonEnable(p)},getToolbarEnable(p){return this.childrenMap.toolbarSizer.getButtonEnable(p)},getLeftToolbarEnable(p){return this.childrenMap.leftToolbarSizer.getButtonEnable(p)},emitChoiceClick(p){return this.childrenMap.choicesSizer.emitButtonClick(p),this},emitActionClick(p){return this.childrenMap.actionsSizer.emitButtonClick(p),this},emitToolbarClick(p){return this.childrenMap.toolbarSizer.emitButtonClick(p),this},emitLeftToolbarClick(p){return this.childrenMap.leftToolbarSizer.emitButtonClick(p),this},showChoice(p){return this.childrenMap.choicesSizer.showButton(p),this},showAction(p){return this.childrenMap.actionsSizer.showButton(p),this},showToolbar(p){return this.childrenMap.toolbarSizer.showButton(p),this},showLeftToolbar(p){return this.childrenMap.leftToolbarSizer.showButton(p),this},hideChoice(p){return this.childrenMap.choicesSizer.hideButton(p),this},hideAction(p){return this.childrenMap.actionsSizer.hideButton(p),this},hideToolbar(p){return this.childrenMap.toolbarSizer.hideButton(p),this},hideLeftToolbar(p){return this.childrenMap.leftToolbarSizer.hideButton(p),this},addChoice(p){return this.childrenMap.choicesSizer.addButton(p),this},addAction(p){return this.childrenMap.actionsSizer.addButton(p),this},addToolbar(p){return this.childrenMap.toolbarSizer.addButton(p),this},addLeftToolbar(p){return this.childrenMap.leftToolbarSizer.addButton(p),this},removeChoice(p,i){return this.childrenMap.choicesSizer.removeButton(p,i),this},removeAction(p,i){return this.childrenMap.actionsSizer.removeButton(p,i),this},removeToolbar(p,i){return this.childrenMap.toolbarSizer.removeButton(p,i),this},removeLeftToolbar(p,i){return this.childrenMap.leftToolbarSizer.removeButton(p,i),this},clearChoices(p){return this.childrenMap.choicesSizer.clearButtons(p),this},clearActions(p){return this.childrenMap.actionsSizer.clearButtons(p),this},clearToolbar(p){return this.childrenMap.toolbarSizer.clearButtons(p),this},clearLeftToolbar(p){return this.childrenMap.leftToolbarSizer.clearButtons(p),this},forEachChoice(p,i){return this.childrenMap.choicesSizer.forEachButtton(p,i),this},forEachAction(p,i){return this.childrenMap.actionsSizer.forEachButtton(p,i),this},forEachToolbar(p,i){return this.childrenMap.toolbarSizer.forEachButtton(p,i),this},forEachLeftToolbar(p,i){return this.childrenMap.leftToolbarSizer.forEachButtton(p,i),this}};const rt=Phaser.Utils.Objects.GetValue;class th extends Lt{constructor(i,t){t===void 0&&(t={}),t.orientation=1,super(i,t),this.type="rexDialog",this.eventEmitter=rt(t,"eventEmitter",this);var f=rt(t,"background",void 0),e=rt(t,"title",void 0),s=rt(t,"toolbar",void 0),l=rt(t,"toolbarBackground",void 0),n=rt(t,"leftToolbar",void 0),o=rt(t,"leftToolbarBackground",void 0),h=rt(t,"content",void 0),r=rt(t,"description",void 0),a,v=rt(t,"choices",void 0),u=rt(t,"choicesBackground",void 0),d,c=rt(t,"actions",void 0),g=rt(t,"actionsBackground",void 0),m=rt(t,"click",void 0);f&&this.addBackground(f);var x;s&&(x=new ve(i,{groupName:"toolbar",background:l,buttons:s,orientation:0,space:{item:rt(t,"space.toolbarItem",0)},click:m,eventEmitter:this.eventEmitter}));var y;if(n&&(y=new ve(i,{groupName:"leftToolbar",background:o,buttons:n,orientation:0,space:{item:rt(t,"space.leftToolbarItem",0)},click:m,eventEmitter:this.eventEmitter})),e&&!s&&!n){var T=rt(t,"align.title","center"),S=rt(t,"space.title",0),C;(h||r||v||c)&&(C={bottom:S});var E=rt(t,"expand.title",!0);this.add(e,{align:T,padding:C,expand:E})}if(s&&!e&&!n){var S=rt(t,"space.title",0),C;(h||r||v||c)&&(C={bottom:S});var E=rt(t,"expand.toolbar",!0);this.add(x,{align:"right",padding:C,expand:E})}if(n&&!e&&!s){var S=rt(t,"space.title",0),C;(h||r||v||c)&&(C={bottom:S});var E=rt(t,"expand.leftToolbar",!0);this.add(y,{align:"left",padding:C,expand:E})}if(e&&(s||n)){var P=new Lt(i,{orientation:0});y&&P.add(y,{align:"right",expand:!1});var T=rt(t,"align.title","left"),E=rt(t,"expand.title",!0);!E&&(T==="right"||T==="center")&&P.addSpace();var C={left:rt(t,"space.titleLeft",0),right:rt(t,"space.titleRight",0)},M=E?1:0;P.add(e,{proportion:M,align:"center",padding:C,expand:E}),!E&&(T==="left"||T==="center")&&P.addSpace(),x&&P.add(x,{align:"right",expand:!1});var S=rt(t,"space.title",0),C;(h||r||v||c)&&(C={bottom:S}),this.add(P,{align:"center",padding:C,expand:!0})}if(h){var T=rt(t,"align.content","center"),R=rt(t,"space.content",0),C={left:rt(t,"space.contentLeft",0),right:rt(t,"space.contentRight",0),bottom:r||v||c?R:0},E=rt(t,"expand.content",!0);this.add(h,{align:T,padding:C,expand:E})}if(r){var T=rt(t,"align.description","center"),A=rt(t,"space.description",0),C={left:rt(t,"space.descriptionLeft",0),right:rt(t,"space.descriptionRight",0),bottom:v||c?A:0},E=rt(t,"expand.description",!0);this.add(r,{align:T,padding:C,expand:E})}if(v){var T=rt(t,"align.choices","center");a=new ve(i,{groupName:"choices",background:u,buttons:v,orientation:1,space:{item:rt(t,"space.choice",0)},click:m,eventEmitter:this.eventEmitter,type:rt(t,"choicesType",void 0),setValueCallback:rt(t,"choicesSetValueCallback",void 0),setValueCallbackScope:rt(t,"choicesSetValueCallbackScope",void 0)});var O=rt(t,"space.choices",0),C={left:rt(t,"space.choicesLeft",0),right:rt(t,"space.choicesRight",0),bottom:c?O:0},E=rt(t,"expand.choices",!0);this.add(a,{align:T,padding:C,expand:E})}if(c){d=new ve(i,{groupName:"actions",background:g,buttons:c,orientation:0,space:{item:rt(t,"space.action",0)},expand:rt(t,"expand.actions",!1),align:rt(t,"align.actions","center"),click:m,eventEmitter:this.eventEmitter});var C={left:rt(t,"space.actionsLeft",0),right:rt(t,"space.actionsRight",0)};this.add(d,{align:"center",padding:C,expand:!0})}this.addChildrenMap("background",f),this.addChildrenMap("title",e),this.addChildrenMap("toolbar",s),this.addChildrenMap("leftToolbar",n),this.addChildrenMap("content",h),this.addChildrenMap("description",r),this.addChildrenMap("choices",v),this.addChildrenMap("actions",c),this.addChildrenMap("choicesSizer",a),this.addChildrenMap("actionsSizer",d),this.addChildrenMap("toolbarSizer",x),this.addChildrenMap("leftToolbarSizer",y)}}Object.assign(th.prototype,fA);tt.register("dialog",function(p){var i=new th(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Dialog",th);const xt=Phaser.Utils.Objects.GetValue;class Dv extends Lt{constructor(i,t){t===void 0&&(t={}),t.orientation=1,super(i,t),this.type="rexHolyGrail";var f=xt(t,"background",void 0);f&&this.addBackground(f);var e=xt(t,"header",void 0);if(e){var s=xt(t,"proportion.header",0),l=xt(t,"align.header","center"),n=xt(t,"space.header",void 0);typeof n=="number"&&(n={bottom:n});var o=xt(t,"expand.header",!0);this.add(e,{proportion:s,align:l,padding:n,expand:o})}var h=new Lt(i,{orientation:0});this.add(h,{proportion:1,align:"center",padding:0,expand:!0});var r=xt(t,"leftSide",void 0);if(r){var s=xt(t,"proportion.leftSide",0),l=xt(t,"align.leftSide","center"),n=xt(t,"space.leftSide",void 0);typeof n=="number"&&(n={right:n});var o=xt(t,"expand.leftSide",!0);h.add(r,{proportion:s,align:l,padding:n,expand:o})}var a=xt(t,"content",void 0);if(a){var s=xt(t,"proportion.content",1),l=xt(t,"align.content","center"),n=xt(t,"space.content",void 0),o=xt(t,"expand.content",!0);h.add(a,{proportion:s,align:l,padding:n,expand:o})}var v=xt(t,"rightSide",void 0);if(v){var s=xt(t,"proportion.rightSide",0),l=xt(t,"align.rightSide","center"),n=xt(t,"space.rightSide",void 0);typeof n=="number"&&(n={left:n});var o=xt(t,"expand.rightSide",!0);h.add(v,{proportion:s,align:l,padding:n,expand:o})}var u=xt(t,"footer",void 0);if(u){var s=xt(t,"proportion.footer",0),l=xt(t,"align.footer","center"),n=xt(t,"space.footer",void 0);typeof n=="number"&&(n={top:n});var o=xt(t,"expand.footer",!0);this.add(u,{proportion:s,align:l,padding:n,expand:o})}this.addChildrenMap("background",f),this.addChildrenMap("header",e),this.addChildrenMap("leftSide",r),this.addChildrenMap("content",a),this.addChildrenMap("rightSide",v),this.addChildrenMap("footer",u)}}tt.register("holyGrail",function(p){var i=new Dv(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.HolyGrail",Dv);var dA={getButtonsSizer(p){return this.childrenMap[`${p}ButtonsSizer`]},getButton(p,i){var t=this.getButtonsSizer(p);return t?t.getButton(i):void 0},setButtonEnable(p,i,t){return this.getButtonsSizer(p).setButtonEnable(i,t),this},setLeftButtonEnable(p,i){return this.childrenMap.leftButtonsSizer.setButtonEnable(p,i),this},setRightButtonEnable(p,i){return this.childrenMap.rightButtonsSizer.setButtonEnable(p,i),this},setTopButtonEnable(p,i){return this.childrenMap.topButtonsSizer.setButtonEnable(p,i),this},setBottomButtonEnable(p,i){return this.childrenMap.bottomButtonsSizer.setButtonEnable(p,i),this},toggleButtonEnable(p,i){return this.getButtonsSizer(p).toggleButtonEnable(i),this},toggleLeftButtonEnable(p){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(p),this},toggleRightButtonEnable(p){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(p),this},toggleTopButtonEnable(p){return this.childrenMap.topButtonsSizer.toggleButtonEnable(p),this},toggleBottomButtonEnable(p){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(p),this},getButtonEnable(p,i){return this.getButtonsSizer(p).getButtonEnable(i)},getLeftButtonEnable(p){return this.childrenMap.leftButtonsSizer.getButtonEnable(p)},getRightButtonEnable(p){return this.childrenMap.rightButtonsSizer.getButtonEnable(p)},getTopButtonEnable(p){return this.childrenMap.topButtonsSizer.getButtonEnable(p)},getBottomButtonEnable(p){return this.childrenMap.bottomButtonsSizer.getButtonEnable(p)},emitButtonClick(p,i){var t=this.getButtonsSizer(p);return t?(t.emitButtonClick(i),this):this},emitLeftButtonClick(p){return this.childrenMap.leftButtonsSizer.emitButtonClick(p),this},emitRightButtonClick(p){return this.childrenMap.rightButtonsSizer.emitButtonClick(p),this},emitTopButtonClick(p){return this.childrenMap.topButtonsSizer.emitButtonClick(p),this},emitBottomButtonClick(p){return this.childrenMap.bottomButtonsSizer.emitButtonClick(p),this},getLeftButton(p){return this.childrenMap.leftButtonsSizer.getButton(p)},getRightButton(p){return this.childrenMap.rightButtonsSizer.getButton(p)},getTopButton(p){return this.childrenMap.topButtonsSizer.getButton(p)},getBottomButton(p){return this.childrenMap.bottomButtonsSizer.getButton(p)},showButton(p,i){return fi(this.getButton(p,i)),this},showLeftButton(p){return fi(this.getLeftButton(p)),this},showRightButton(p){return fi(this.getRightButton(p)),this},showTopButton(p){return fi(this.getTopButton(p)),this},showBottomButton(p){return fi(this.getBottomButton(p)),this},hideButton(p,i){return di(this.getButton(p,i)),this},hideLeftButton(p){return di(this.getLeftButton(p)),this},hideRightButton(p){return di(this.getRightButton(p)),this},hideTopButton(p){return di(this.getTopButton(p)),this},hideBottomButton(p){return di(this.getBottomButton(p)),this},addButton(p,i){return this.getButtonsSizer(p).addButton(i),this},addLeftButton(p){return this.addButton("left",p),this},addRightButton(p){return this.addButton("right",p),this},addTopButton(p){return this.addButton("top",p),this},removeButton(p,i,t){return this.getButtonsSizer(p).removeButton(i,t),this},removeLeftButton(p,i){return this.removeButton("left",p,i),this},removeRightButton(p,i){return this.removeButton("right",p,i),this},removeTopButton(p,i){return this.removeButton("top",p,i),this},removeBottomButton(p,i){return this.removeButton("bottom",p,i),this},clearButtons(p,i){return this.getButtonsSizer(p).clearButtons(i),this},clearLeftButtons(p){return this.clearButtons("left",p),this},clearRightButtons(p){return this.clearButtons("right",p),this},clearTopButtons(p){return this.clearButtons("top",p),this},clearBottomButtonss(p){return this.clearButtons("bottom",p),this},forEachButton(p,i,t){return this.getButtonsSizer(p).forEachButtton(i,t),this},forEachLeftButton(p,i){return this.childrenMap.leftButtonsSizer.forEachButtton(p,i),this},forEachRightButton(p,i){return this.childrenMap.rightButtonsSizer.forEachButtton(p,i),this},forEachTopButton(p,i){return this.childrenMap.topButtonsSizer.forEachButtton(p,i),this},forEachBottomButton(p,i){return this.childrenMap.bottomButtonsSizer.forEachButtton(p,i),this}};const Ct=Phaser.Utils.Objects.GetValue;class eh extends Si{constructor(i,t){t===void 0&&(t={}),t.column=3,t.row=3,super(i,t),this.type="rexTabs",this.eventEmitter=Ct(t,"eventEmitter",this);var f=Ct(t,"background",void 0),e=Ct(t,"panel",void 0),s=Ct(t,"leftButtons",void 0),l=Ct(t,"leftButtonsBackground",void 0),n,o=Ct(t,"rightButtons",void 0),h=Ct(t,"rightButtonsBackground",void 0),r,a=Ct(t,"topButtons",void 0),v=Ct(t,"topButtonsBackground",void 0),u,d=Ct(t,"bottomButtons",void 0),c=Ct(t,"bottomButtonsBackground",void 0),g,m=Ct(t,"click",void 0);if(f&&this.addBackground(f),e&&this.add(e,1,1,"center",0,!0),s){var x=Ct(t,"space.leftButtonsOffset",0),y=Ct(t,"space.leftButton",0);n=new ve(i,{groupName:"left",background:l,buttons:s,orientation:1,space:{item:y},align:Ct(t,"align.leftButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:x};this.add(n,0,1,"top",T,!1)}if(o){var S=Ct(t,"space.rightButtonsOffset",0),C=Ct(t,"space.rightButton",0);r=new ve(i,{groupName:"right",background:h,buttons:o,orientation:1,space:{item:C},align:Ct(t,"align.rightButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:S};this.add(r,2,1,"top",T,!1)}if(a){var E=Ct(t,"space.topButtonsOffset",0),P=Ct(t,"space.topButton",0);u=new ve(i,{groupName:"top",background:v,buttons:a,orientation:0,space:{item:P},align:Ct(t,"align.topButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:E};this.add(u,1,0,"left",T,!1)}if(d){var M=Ct(t,"space.bottomButtonsOffset",0),R=Ct(t,"space.bottomButton",0);g=new ve(i,{groupName:"bottom",background:c,buttons:d,orientation:0,space:{item:R},align:Ct(t,"align.bottomButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:M};this.add(g,1,2,"left",T,!1)}this.addChildrenMap("background",f),this.addChildrenMap("panel",e),this.addChildrenMap("leftButtons",s),this.addChildrenMap("rightButtons",o),this.addChildrenMap("topButtons",a),this.addChildrenMap("bottomButtons",d),this.addChildrenMap("leftButtonsSizer",n),this.addChildrenMap("rightButtonsSizer",r),this.addChildrenMap("topButtonsSizer",u),this.addChildrenMap("bottomButtonsSizer",g)}}Object.assign(eh.prototype,dA);tt.register("tabs",function(p){var i=new eh(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Tabs",eh);const Nu=Phaser.Math.Percent;var Bv=function(p,i,t){var f,e,s;return p.y===i.y?(f=Math.min(p.x,i.x),e=Math.max(p.x,i.x),s=Nu(t.x,f,e)):p.x===i.x&&(f=Math.min(p.y,i.y),e=Math.max(p.y,i.y),s=Nu(t.y,f,e)),s},vA=function(p,i,t){!this.enable||(ua.x=i,ua.y=t,this.value=Bv(this.getStartPoint(),this.getEndPoint(),ua))},ua={},bu=function(p,i,t){if(!!this.enable&&!!p.isDown){fa.x=p.worldX,fa.y=p.worldY;var f=Bv(this.getStartPoint(),this.getEndPoint(),fa);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-f)<.1?this.value=f:this.easeValueTo(f)}},fa={},wv=function(p,i){i===void 0&&(i=cA);var t=this.childrenMap.thumb,f=t.x,e=t.y;return sr(t,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,p),i.x=t.x,i.y=t.y,t.x=f,t.y=e,i},cA={};const pA=Phaser.Display.Align.LEFT_CENTER,gA=Phaser.Display.Align.TOP_CENTER;var mA=function(p){if(p===void 0&&(p=xA),this.childrenMap.thumb){var i=this.orientation===0?pA:gA;wv.call(this,i,p)}else this.orientation===0?(p.x=this.innerLeft+1,p.y=this.centerY):(p.x=this.centerX,p.y=this.innerTop+1);return p},xA={};const yA=Phaser.Display.Align.RIGHT_CENTER,TA=Phaser.Display.Align.BOTTOM_CENTER;var SA=function(p){if(p===void 0&&(p=CA),this.childrenMap.thumb){var i=this.orientation===0?yA:TA;wv.call(this,i,p)}else this.orientation===0?(p.x=this.innerRight-1,p.y=this.centerY):(p.x=this.centerX,p.y=this.innerBottom-1);return p},CA={};const Vu=Phaser.Math.Linear;var EA=function(p,i,t,f){return f===void 0&&(f=PA),f.x=Vu(i.x,t.x,p),f.y=Vu(i.y,t.y,p),f},PA={},MA=function(p){var i=this.childrenMap.thumb;return i===void 0?this:(p===void 0&&(p=this.value),EA(p,this.getStartPoint(),this.getEndPoint(),i),this.resetChildPositionState(i),this)};const AA=Phaser.Display.Align.LEFT_CENTER,RA=Phaser.Display.Align.TOP_CENTER;var OA=function(p){var i=this.childrenMap.indicator;if(i===void 0)return this;p===void 0&&(p=this.value);var t,f,e=this.childrenMap.thumb;if(e)if(this.orientation===0){var s=mt(e),l=e.x-s*e.originX+s;t=l-this.left}else{var n=ct(e),o=e.y-n*e.originY+n;f=o-this.top}else this.orientation===0?t=this.width*p:f=this.height*p;gi(i,t,f);var h=this.orientation===0?AA:RA;hv(i,this,h),this.resetChildPositionState(i)};const Xt=Phaser.Utils.Objects.GetValue,LA=Phaser.Math.Clamp,FA=Phaser.Math.Linear,zu=Phaser.Math.Percent,IA=Phaser.Math.Snap.To;class Hs extends Lt{constructor(i,t){super(i,t),this.type="rexSlider",this.eventEmitter=Xt(t,"eventEmitter",this);var f=Xt(t,"background",void 0),e=Xt(t,"track",void 0),s=Xt(t,"indicator",void 0),l=Xt(t,"thumb",void 0);f&&this.addBackground(f),e&&this.add(e,{proportion:1,expand:!0,minWidth:0,minHeight:0}),s&&this.pin(s),l&&this.pin(l);var n=Xt(t,"input",0);switch(typeof n=="string"&&(n=DA[n]),n){case 0:l&&(l.setInteractive(),this.scene.input.setDraggable(l),l.on("drag",vA,this).on("dragstart",function(r){this.eventEmitter.emit("inputstart",r)},this).on("dragend",function(r){this.eventEmitter.emit("inputend",r)},this));break;case 1:this.setInteractive().on("pointerdown",bu,this).on("pointermove",bu,this).on("pointerdown",function(r){this.eventEmitter.emit("inputstart",r)},this).on("pointerup",function(r){this.eventEmitter.emit("inputend",r)},this).on("pointerover",function(r){r.isDown&&this.eventEmitter.emit("inputstart",r)},this).on("pointerout",function(r){r.isDown&&this.eventEmitter.emit("inputend",r)},this);break}this.addChildrenMap("background",f),this.addChildrenMap("track",e),this.addChildrenMap("indicator",s),this.addChildrenMap("thumb",l);var o=Xt(t,"valuechangeCallback",null);if(o!==null){var h=Xt(t,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",o,h)}this.setEnable(Xt(t,"enable",void 0)),this.setGap(Xt(t,"gap",void 0)),this.setValue(Xt(t,"value",0),Xt(t,"min",void 0),Xt(t,"max",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Xt(t,"easeValue.duration",0)).setEaseValueFunction(Xt(t,"easeValue.ease","Linear"))}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setGap(i){return this.gap=i,this}get value(){return this._value}set value(i){this.gap!==void 0&&(i=IA(i,this.gap));var t=this._value;this._value=LA(i,0,1),t!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,t,this.eventEmitter))}setValue(i,t,f){return i==null?this:(t!==void 0&&(i=zu(i,t,f)),this.value=i,this)}addValue(i,t,f){return t!==void 0&&(i=zu(i,t,f)),this.value+=i,this}getValue(i,t){var f=this.value;return i!==void 0&&(f=FA(i,t,f)),f}runLayout(i,t,f){return this.ignoreLayout?this:(super.runLayout(i,t,f),this.updateThumb(),this.updateIndicator(),this)}}const DA={pan:0,drag:0,click:1,none:-1};var BA={getStartPoint:mA,getEndPoint:SA,updateThumb:MA,updateIndicator:OA};Object.assign(Hs.prototype,BA,Vs);tt.register("slider",function(p){var i=new Hs(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Slider",Hs);var Gv={v:0,vertical:0,h:1,horizontal:1};const wA=Phaser.Utils.Objects.GetValue;var xr=function(p,i){var t=wA(p,"scrollMode",0);return typeof t=="string"&&(t=Gv[t]),t};const qt=Phaser.Utils.Objects.GetValue;class ih extends Lt{constructor(i,t){super(i,t),this.type="rexScrollBar";var f=qt(t,"background",void 0),e=qt(t,"buttons",void 0),s=qt(e,"top",qt(e,"left",void 0)),l=qt(e,"bottom",qt(e,"right",void 0)),n,o=qt(t,"slider",void 0);if(f&&this.addBackground(f),s){this.add(s);var h=new Va(s);h.on("intouch",function(){!this.enable||(this.value-=this.scrollStep)},this)}if(o){o.orientation=this.orientation,o.eventEmitter=this,o.value=null;var r;if(this.orientation===0){var a=qt(o,"width",void 0);r=a===void 0?1:0}else{var v=qt(o,"height",void 0);r=v===void 0?1:0}n=new Hs(i,o),i.add.existing(n),this.add(n,{proportion:r})}if(l){this.add(l);var h=new Va(l);h.on("intouch",function(){!this.enable||(this.value+=this.scrollStep)},this)}var u=[s,l];this.addChildrenMap("background",f),this.addChildrenMap("slider",n),this.addChildrenMap("buttons",u);var d=qt(t,"valuechangeCallback",null);if(d!==null){var c=qt(t,"valuechangeCallbackScope",void 0);this.on("valuechange",d,c)}this.setEnable(qt(t,"enable",void 0)),this.setValue(qt(t,"value",0)),this.setScrollStep(qt(e,"step",.01))}setScrollStep(i){return this.scrollStep=i,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(i){this.childrenMap.slider&&this.childrenMap.slider.setEnable(i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(i){!this.childrenMap.slider||(this.childrenMap.slider.value=i)}setValue(i,t,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(i,t,f),this}addValue(i,t,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(i,t,f),this}getValue(i,t){return this.childrenMap.slider?this.childrenMap.slider.getValue(i,t):0}easeValueTo(i,t,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(i,t,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(i),this}setEaseValueFunction(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(i),this}}class GA extends ih{constructor(i,t){t===void 0&&(t={});var f=is(t);t={slider:f},t.orientation=f.orientation,delete f.orientation,t.background=f.background,delete f.background,t.buttons=f.buttons,delete f.buttons,super(i,t);var e=this.childrenMap.slider;this.addChildrenMap("track",e.childrenMap.track),this.addChildrenMap("indicator",e.childrenMap.indicator),this.addChildrenMap("thumb",e.childrenMap.thumb)}}class NA extends Ue{constructor(i,t){super(t),this.parent=i,this.init()}init(){this.start("IDLE")}next_IDLE(){var i,t=this.parent,f=t.dragState;return f.isDown&&(i=t.dragThreshold===0?"DRAG":"DRAGBEGIN"),i}update_IDLE(i,t){this.next()}next_DRAGBEGIN(){var i,t=this.parent,f=t.dragState;return f.isDown?i=f.pointer.getDistance()>=t.dragThreshold?"DRAG":"DRAGBEGIN":i="IDLE",i}update_DRAGBEGIN(i,t){this.next()}next_DRAG(){var i,t=this.parent,f=t.dragState;return f.isUp&&(t.outOfBounds?i="BACK":t.slidingEnable?i="SLIDE":i="IDLE"),i}update_DRAG(i,t){var f=this.parent,e=f.dragState;e.justMoved&&f.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var i,t=this.parent,f=t.dragState;return f.isDown?i="DRAG":t.isSliding||(i="IDLE"),i}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(i,t){this.parent.sliding(i,t),this.next()}next_BACK(){var i,t=this.parent,f=t.dragState;return f.isDown?i="DRAG":t.isPullBack||(i="IDLE"),i}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(i,t){this.parent.pullBack(i,t),this.next()}}const xn=Phaser.Utils.Objects.GetValue,bA=Phaser.Math.Distance.Between;class VA extends Yt{constructor(i,t){super(i,t),this._enable=void 0,i.setInteractive(xn(t,"inputConfig",void 0)),this.resetFromJSON(t),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(xn(i,"enable",!0)),this.holdThreshold=xn(i,"holdThreshold",50),this.pointerOutReleaseEnable=xn(i,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(i){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){this._enable!==i&&(i||(this.isInTouched=!1,this.pointer=void 0),this._enable=i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(i){return i===void 0&&(i=!0),this.pointerOutReleaseEnable=i,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var i=this.scene.sys.game,t=i.loop.delta;return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var i=bA(this.preX,this.preY,this.x,this.y),t=i/(this.dt*.001);return t}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(i,t,f){!this.enable||!i.isDown||this.pointer!==void 0||(this.pointer=i,this.localX=t,this.localY=f)}onPointOut(i){!this.enable||this.pointer!==i||(this.pointer=void 0)}onPointerMove(i,t,f){!this.enable||!i.isDown||this.pointer!==i||(this.localX=t,this.localY=f)}preupdate(i,t){if(!!this.enable){var f=this.pointer;this.justMoved=!1,f&&!this.isInTouched?(this.x=f.worldX,this.y=f.worldY,this.preX=f.worldX,this.preY=f.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",f,this.localX,this.localY)):f&&this.isInTouched?this.x===f.x&&this.y===f.y?this.holdStartTime===void 0?this.holdStartTime=i:i-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=f.worldX,this.y=f.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",f,this.localX,this.localY)):!f&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",f))}}}const da=Phaser.Utils.Objects.GetValue;class zA{constructor(i){this.resetFromJSON(i)}resetFromJSON(i){return this.setValue(da(i,"value",0)),this.setSpeed(da(i,"speed",0)),this.setAcceleration(da(i,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(i){return this.value=i,this}setSpeed(i){return this.speed=i,this}setAcceleration(i){return this.acceleration=i,this}updateSpeed(i){return this.acceleration!==0&&(this.speed+=this.acceleration*i,this.speed<0&&(this.speed=0)),this}getDeltaValue(i){return this.updateSpeed(i),this.speed<=0?0:this.speed*i}update(i){return this.updateSpeed(i),this.speed>0&&(this.value+=this.getDeltaValue(i)),this}get isMoving(){return this.speed>0}}class YA{constructor(){this.value,this.dir,this.movement=new zA}init(i,t,f,e,s){return this.value=i,this.end=s,s!==void 0?this.dir=i<s:this.dir=t,this.movement.setSpeed(f).setAcceleration(-e),this}stop(){this.movement.reset()}update(i){var t=this.movement.getDeltaValue(i);return this.dir||(t=-t),this.end===void 0?this.value+=t:t===0?this.value=this.end:(this.value+=t,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const It=Phaser.Utils.Objects.GetValue,UA=Phaser.Math.Clamp;class XA extends Yt{constructor(i,t){super(i,t);var f=It(t,"enable",!0);this._state=new NA(this,{enable:f,eventEmitter:!1});var e={inputConfig:It(t,"inputConfig",void 0),enable:f,pointerOutRelease:It(t,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new VA(i,e),this._enable=void 0,this._value=void 0,this._slowDown=new YA;var s=It(t,"valuechangeCallback",null);if(s!==null){var l=It(t,"valuechangeCallbackScope",void 0);this.on("valuechange",s,l)}if(s=It(t,"overmaxCallback",null),s!==null){var l=It(t,"overmaxCallbackScope",void 0);this.on("overmax",s,l)}if(s=It(t,"overminCallback",null),s!==null){var l=It(t,"overminCallbackScope",void 0);this.on("overmin",s,l)}this.resetFromJSON(t),this.boot()}resetFromJSON(i){this.setOrientationMode(It(i,"orientation",0)),this.setDragThreshold(It(i,"threshold",10)),this.setSlidingDeceleration(It(i,"slidingDeceleration",5e3)),this.setBackDeceleration(It(i,"backDeceleration",2e3));var t=It(i,"bounds",void 0);return t?this.setBounds(t):this.setBounds(It(i,"max",0),It(i,"min",0)),this.setValue(It(i,"value",this.maxValue||0)),this.setEnable(It(i,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(i){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(i),this.dragState.destroy(i),this._state=void 0,this.dragState=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return this._enable=i,this._state.setEnable(i),this.dragState.setEnable(i),this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(i){return typeof i=="string"&&(i=WA[i]),this.orientationMode=i,this}setDragThreshold(i){return this.dragThreshold=i,this}setSlidingDeceleration(i){return this.slidingDeceleration=i,this}setBackDeceleration(i){return this.backDeceleration=i,this}setBounds(i,t){if(Array.isArray(i)){var f=i;i=f[0],t=f[1]}return i<t?(this.minValue=i,this.maxValue=t):(this.minValue=t,this.maxValue=i),this}get value(){return this._value}set value(i){if(i!==this._value){var t=this._value,f=this.overMax(i),e=this.overMin(i);f&&this.emit("overmax",i,t),e&&this.emit("overmin",i,t),this.backEnable||(f&&(i=this.maxValue),e&&(i=this.minValue)),this._value=i,this.emit("valuechange",i,t)}}setValue(i,t){return t===void 0&&(t=!1),t&&(i=UA(i,this.minValue,this.maxValue)),this.value=i,this}addValue(i,t){return this.setValue(this.value+i,t),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(i){return this.maxValue!=null&&i>this.maxValue}overMin(i){return this.minValue!=null&&i<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return this.orientationMode===0?this.dragState.dy:this.orientationMode===1?this.dragState.dx:0}get dragSpeed(){return this.orientationMode===0?this.dragState.speedY:this.orientationMode===1?this.dragState.speedX:0}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var i=this.value,t=this.dragSpeed;if(t===0){this._slowDown.stop(),this._state.next();return}var f=this.slidingDeceleration;this._slowDown.init(i,t>0,Math.abs(t),f)}sliding(i,t){t*=.001;var f=this._slowDown.update(t).value;this.overMax(f)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(f)?(this.value=this.minValue,this._slowDown.stop()):this.value=f}onPullBack(){var i=this.value,t=this.outOfMinBound?this.minValue:this.maxValue,f=Math.abs(t-i),e=this.backDeceleration,s=Math.sqrt(2*e*f);this._slowDown.init(i,void 0,s,e,t)}pullBack(i,t){t*=.001,this.value=this._slowDown.update(t).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const WA={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},yn=Phaser.Utils.Objects.GetValue;class HA extends Yt{constructor(i,t){if(super(i,t),this.parent!==this.scene?this.focusMode=yn(t,"focus",!1):this.focusMode=!1,this.setSpeed(yn(t,"speed",.1)),this.setEnable(yn(t,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var i=this.parent;i.setInteractive(yn(t,"inputConfig",void 0)).on("wheel",function(e,s,l,n,o){!this.enable||this.scroll(l)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(i,t,f,e,s,l){!this.enable||this.scroll(e)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setSpeed(i){return this.speed=i,this}scroll(i){i*=this.speed,this.emit("scroll",i,this.parent,this)}}const Dt=Phaser.Utils.Objects.GetValue;var $A=function(p,i){var t=p.scene,f=xr(i),e=new Lt(t,{orientation:f}),s=Dt(i,"child.gameObject",void 0),l=Dt(i,"slider",void 0),n,o=Dt(l,"position",0);typeof o=="string"&&(o=KA[o]);var h=o===0,r=Dt(i,"scroller",!0),a,v=Dt(i,"mouseWheelScroller",!1),u;if(s){var d=Dt(i,"space.child",0),c={};if(p.childMargin={},typeof d!="number"){var g=d;f===0?(c.left=Dt(g,"left",0),c.right=Dt(g,"right",0),p.childMargin.top=Dt(g,"top",0),p.childMargin.bottom=Dt(g,"bottom",0)):(c.top=Dt(g,"top",0),c.bottom=Dt(g,"bottom",0),p.childMargin.top=Dt(g,"left",0),p.childMargin.bottom=Dt(g,"right",0))}else l&&(f===0?c=h?{right:d}:{left:d}:c=h?{bottom:d}:{top:d}),p.childMargin.top=0,p.childMargin.bottom=0;l?(l===!0&&(l={}),l.orientation=e.orientation===0?1:0,n=new GA(t,l),p.adaptThumbSizeMode=Dt(l,"adaptThumbSize",!1),p.minThumbSize=Dt(l,"minThumbSize",void 0)):(p.adaptThumbSizeMode=!1,p.minThumbSize=void 0),r&&(r===!0&&(r={}),r.orientation=f,a=new XA(s,r)),v&&(u=new HA(s,v)),n&&!h&&e.add(n,{proportion:0,align:"center",expand:!0});var m=Dt(i,"child.proportion",1),x=Dt(i,"child.expand",!0);e.add(s,{proportion:m,align:"center",padding:c,expand:x}),n&&h&&e.add(n,{proportion:0,align:"center",expand:!0})}return n&&n.on("valuechange",function(y){p.t=y,p.emit("scroll",p)}),a&&a.on("valuechange",function(y){p.childOY=y,p.emit("scroll",p)}),u&&u.on("scroll",function(y){p.addChildOY(-y,!0)}),p.addChildrenMap("child",s),p.addChildrenMap("slider",n),p.addChildrenMap("scroller",a),p.addChildrenMap("mouseWheelScroller",u),e},KA={right:0,left:1,bottom:0,top:1};Lt.prototype.runLayout;var JA=function(){var p=this.topChildOY,i=this.bottomChildOY,t=this.childrenMap.scroller,f=this.childrenMap.slider;return t&&t.setBounds(i,p),f&&f.setEnable(i!==p),this.updateController(),this.adaptThumbSizeMode&&ZA.call(this),this},ZA=function(){var p=Math.min(this.childVisibleHeight/this.childHeight,1),i=this.childrenMap.slider,t=i.childrenMap.track,f=i.childrenMap.thumb,e=this.minThumbSize;if(this.scrollMode===0){var s=t.displayHeight*p;e!==void 0&&s<e&&(s=e),gi(f,void 0,s)}else{var l=t.displayWidth*p;e!==void 0&&l<e&&(l=e),gi(f,l,void 0)}QA.call(this)},QA=function(){var p=this.childrenMap.slider,i=p.minWidth,t=p.minHeight;p.minWidth=p.width,p.minHeight=p.height,p.layout(),p.minWidth=i,p.minHeight=t},kA=function(){var p=this.childrenMap.scroller,i=this.childrenMap.slider;p&&p.setValue(this.childOY),i&&i.setValue(this.t)};const Be=Phaser.Utils.Objects.GetValue,Yu=Phaser.Math.Clamp;class yr extends Lt{constructor(i,t){t===void 0&&(t={});var f=xr(t);t.orientation=f===0?1:0,super(i,t),this.type=Be(t,"type","rexScrollable");var e=Be(t,"background",void 0),s=$A(this,t),l=Be(t,"header",void 0),n=Be(t,"footer",void 0);if(e&&this.addBackground(e),l){var o=Be(t,"align.header","center"),h=Be(t,"space.header",0),r;f===0?r={bottom:h}:r={right:h};var a=Be(t,"expand.header",!0);this.add(l,{proportion:0,align:o,padding:r,expand:a})}if(s&&this.add(s,{proportion:1,align:"center",padding:0,expand:!0}),n){var o=Be(t,"align.footer","center"),v=Be(t,"space.footer",0),r;f===0?r={top:v}:r={left:v};var a=Be(t,"expand.footer",!0);this.add(n,{proportion:0,align:o,padding:r,expand:a})}this.addChildrenMap("background",e),this.addChildrenMap("header",l),this.addChildrenMap("footer",n),this.runLayoutFlag=!1}runLayout(i,t,f){return this.ignoreLayout?this:(super.runLayout(i,t,f),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(i){var t=this.childMargin;if(t.top!==0||t.bottom!==0){var f=this.childrenMap.child,e=f.topChildOY-f.bottomChildOY,s=e+t.top+t.bottom,l=s*i-t.top;i=l/e}this.childrenMap.child.t=i,this.updateController()}get t(){var i=this.childrenMap.child.t,t=this.childMargin;if(t.top!==0||t.bottom!==0){var f=this.childrenMap.child,e=f.topChildOY-f.bottomChildOY,s=e+t.top+t.bottom,l=e*i+t.top;i=l/s}return i}set childOY(i){this.childrenMap.child.childOY=i,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var i=this.childrenMap.child;return i.topChildOY!==i.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(i,t){return t===void 0&&(t=!1),t&&(i=Yu(i,this.bottomChildOY,this.topChildOY)),this.childOY=i,this}addChildOY(i,t){return this.setChildOY(this.childOY+i,t),this}setT(i,t){return t===void 0&&(t=!1),t&&(i=Yu(i,0,1)),this.t=i,this}addT(i,t){return this.setT(this.t+i,t),this}scrollToTop(){return this.t=0,this}scrollToBottom(){return this.t=1,this}get sliderEnable(){var i=this.childrenMap.slider;return i?i.enable:!1}set sliderEnable(i){var t=this.childrenMap.slider;!t||t.setEnable(i)}setSliderEnable(i){return i===void 0&&(i=!0),this.sliderEnable=i,this}get scrollerEnable(){var i=this.childrenMap.scroller;return i?i.enable:!1}set scrollerEnable(i){var t=this.childrenMap.scroller;!t||t.setEnable(i)}setScrollerEnable(i){return i===void 0&&(i=!0),this.scrollerEnable=i,this}get mouseWheelScrollerEnable(){var i=this.childrenMap.mouseWheelScroller;return i?i.enable:!1}set mouseWheelScrollerEnable(i){var t=this.childrenMap.mouseWheelScrollerEnable;!t||t.setEnable(i)}setMouseWheelScrollerEnable(i){return i===void 0&&(i=!0),this.mouseWheelScrollerEnable=i,this}setDropZoneEnable(i){i===void 0&&(i=!0);var t=this.childrenMap.child;return t.setInteractive(),t.input.dropZone=i,this}}var jA={resizeController:JA,updateController:kA};Object.assign(yr.prototype,jA);class Nv{constructor(i,t){this.container=null,this._deltaHeight=0,this.setParent(i)}setParent(i){this.parent=i,this.parentContainer=i.getParentContainer()}destroy(i){i===void 0&&(i=!1),i||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(i){return i?(this.container&&this.container.destroy(),this.container=i,this.parentContainer.add(i),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var i=this.container;return this.container=null,this.parentContainer.remove(i),i}else return null}setXY(i,t){return this.container&&this.parentContainer.setChildLocalPosition(this.container,i,t),this}get deltaHeight(){return this._deltaHeight}set deltaHeight(i){i==null&&(i=0);var t=this.parent;this._deltaHeight===0&&i!==0?t.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&i===0&&t.nonZeroDeltaHeightCount--;var f=this._deltaHeight!==i;if(this._deltaHeight=i,f){t.resetTotalRowsHeight();var e=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(e,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(i){this.deltaHeight=i}setDeltaHeight(i){return this.deltaHeight=i,this}setDeltaWidth(i){return this.deltaHeight=i,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(i){this.scrollMode!==1&&this.setDeltaHeight(i-this.parent.defaultCellHeight)}setHeight(i){return this.height=i,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(i){this.scrollMode!==0&&this.setDeltaHeight(i-this.parent.defaultCellHeight)}setWidth(i){return this.width=i,this}get scene(){return this.parentContainer.scene}}Object.assign(Nv.prototype,Xn);const Tn=Phaser.Utils.Objects.GetValue,qA=Phaser.Utils.Array.SpliceOne;class _A{constructor(i,t){this.parent=i,this.cells=[],this.cellPool=new ti,this.resetFromJSON(t)}resetFromJSON(i){return this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(Tn(i,"cellHeight",30)),this.setDefaultCellWidth(Tn(i,"cellWidth",30)),this.initCells(Tn(i,"cellsCount",0)),this.setColumnCount(Tn(i,"columns",1)),this}destroy(i){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(i){return this.defaultCellHeight=i,this}setDefaultCellWidth(i){return this.defaultCellWidth=i,this}initCells(i){var t=this.cells;t.length=i;for(var f=0;f<i;f++)t[f]=null;return this}insertNewCells(i,t){var f=this.cells;if(i===f.length){var e=i+t;f.legth=e;for(var s=i;s<e;s++)f[s]=null}else{var l=[];l.length=t;for(var s=0;s<t;s++)l[s]=null;this.cells.splice(i,0,...l)}return this.resetTotalRowsHeight(),this}removeCells(i,t){for(var f=i+t,e=i;e<f;e++)this.freeCell(e);return f===this.cells.length?this.cells.length=i:(t===1?qA(this.cells,i):this.cells.splice(i,t),this.buildCellIndex(i)),this.resetTotalRowsHeight(),this}setColumnCount(i){return this.colCount=i,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(i){return i>=0&&i<this.cells.length}heightToRowIndex(i,t){if(this.defaultCellHeightMode){var n=i/this.defaultCellHeight;return t?n=Math.ceil(n):n=Math.floor(n),n}for(var f=this.rowCount,e=i,s,l,n=0;;)if(l=this.getRowHeight(n),e-=l,s=n>=0&&n<f,e>0&&s)n+=1;else{if(e===0)return n;if(t){var o=n;n+=1,s=n>=0&&n<f,s||(n=o)}return n}}widthToColIndex(i,t){var f=i/this.defaultCellWidth;return t?f=Math.ceil(f):f=Math.floor(f),f}colRowToCellIndex(i,t){return i>=this.colCount?null:t*this.colCount+i}rowIndexToHeight(i,t){if(this.defaultCellHeightMode)return(t-i+1)*this.defaultCellHeight;for(var f,e=0,s=i;s<=t;s++)f=this.getRowHeight(s),e+=f;return e}colIndexToWidth(i,t){return(t-i+1)*this.defaultCellWidth}getRowHeight(i){var t=this.colCount;if(t<=1)return this.getCellHeight(this.colRowToCellIndex(0,i));for(var f=0,e,s=0;s<t;s++)e=this.getCellHeight(this.colRowToCellIndex(s,i)),f<e&&(f=e);return f}getColWidth(i){return this.defaultCellWidth}getCellHeight(i){if(!this.isValidCellIdx(i))return 0;var t;if(this.defaultCellHeightMode)t=this.defaultCellHeight;else{var f=this.getCell(i,!1),e=f?f.deltaHeight:0;t=this.defaultCellHeight+e}return t}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(i){return i%this.colCount}cellIndxeToRowIndex(i){return Math.floor(i/this.colCount)}getCell(i,t){if(!this.isValidCellIdx(i))return null;if(t===void 0&&(t=!0),this.cells[i]===null&&t){var f=this.newCell(i);this.cells[i]=f}return this.cells[i]}newCell(i){var t=this.cellPool.pop();return t===null?t=new Nv(this):t.setParent(this),t.index=i,t}buildCellIndex(i){i===void 0&&(i=0);for(var t=this.cells,f,e=i,s=t.length;e<s;e++)f=t[e],f&&(f.index=e);return this}getParentContainer(){return this.parent}freeCell(i){return typeof i=="number"&&(i=this.cells[i]),i?(i.destroy(),this.cellPool.push(i),this):this}}var tR=function(p){var i=this.table,t=this.topTableOY,f=this.bottomTableOY,e=p>this.topTableOY,s=p<this.bottomTableOY;if(this.clampTableOXY){var l=i.rowCount,n=i.heightToRowIndex(this.instHeight,!0);l<n?p=0:e?p=t:s&&(p=f)}return this._tableOY!==p&&(this._tableOY=p),e&&(this.execeedTopState||this.emit("execeedtop",this,p,t)),this.execeedTopState=e,s&&(this.execeedBottomState||this.emit("execeedbottom",this,p,f)),this.execeedBottomState=s,this},eR=function(p){var i=this.table,t=this.leftTableOX,f=this.rightTableOX,e=p>this.leftTableOX,s=p<this.rightTableOX;if(this.clampTableOXY){var l=i.colCount,n=i.widthToColIndex(this.instWidth,!0);l<n?p=0:e?p=t:s&&(p=f)}return this._tableOX!==p&&(this._tableOX=p),e&&(this.execeedLeftState||this.emit("execeedleft",this,p,t)),this.execeedLeftState=e,s&&(this.execeedRightState||this.emit("execeedright",this,p,f)),this.execeedRightState=s,this},bv=function(p){return p.hasOwnProperty("geometryMask")?p.geometryMask:p.bitmapMask};const iR=Phaser.Geom.Intersects.RectangleToRectangle,sR=Phaser.Geom.Rectangle.Overlaps;var nR=function(p,i,t){if(!!i){t===void 0&&(t=p.getAllChildren());for(var f=p.getBounds(),e=bv(i),s,l,n,o=0,h=t.length;o<h;o++)if(s=t[o],!s.hasOwnProperty("isRexContainerLite")&&s!==e&&!!rR(s))if(s.getBounds)switch(l=s.getBounds(l),n=aR(f,l),n){case 4:oR(p,s);break;case 0:iR(f,l)||sR(f,l)?va(p,s,i):hR(p,s);break;default:va(p,s,i);break}else va(p,s,i)}},rR=function(p){for(;;){var i=p.rexContainer;if(i)if(i.visible){var t=i.parent;if(t){p=t;continue}else return!0}else return!1;else return p.visible}},aR=function(p,i){var t=0,f=i.top,e=i.bottom,s=i.left,l=i.right;return t+=p.contains(s,f)?1:0,t+=p.contains(s,e)?1:0,t+=p.contains(l,f)?1:0,t+=p.contains(l,e)?1:0,t},oR=function(p,i,t){p.setChildMaskVisible(i,!0),i.clearMask&&i.clearMask()},va=function(p,i,t){p.setChildMaskVisible(i,!0),i.setMask&&i.setMask(t)},hR=function(p,i,t){p.setChildMaskVisible(i,!1),i.clearMask&&i.clearMask()};const ca=Phaser.Utils.Objects.GetValue,lR={update:0,everyTick:1};var Vv={setupChildrenMask(p){return p===!1?this:(this.setMaskUpdateMode(ca(p,"updateMode",0)),this.enableChildrenMask(ca(p,"padding",0)),this.setMaskLayer(ca(p,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(p){return typeof p=="string"&&(p=lR[p]),this.maskUpdateMode=p,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(p){var i=Is.call(this,null,this,0,p);return this.childrenMask=i.createGeometryMask(),this},setMaskChildrenFlag(p){return p===void 0&&(p=!0),this.maskChildrenFlag=p,this},setMaskLayer(p){return this.maskLayer=p,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):nR(this,this.childrenMask,this.getAllChildren(),this.maskLayer),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var p=bv(this.childrenMask);return p.setPosition().resize(),this.resetChildPositionState(p),this}},zv=function(p){if(this.emit("cellinvisible",p),this.cellContainersPool){var i=p.popContainer();i&&this.cellContainersPool.killAndHide(i)}p.destroyContainer()},Uu=function(){var p=this.preVisibleCells,i=this.visibleCells;p.iterate(function(t){i.contains(t)||zv.call(this,t)},this)},Yv=function(p){var i=null,t=p.getContainer();if(t?(i=t,p.popContainer()):this.cellContainersPool&&(i=this.cellContainersPool.getFirstDead(),i!==null&&i.setActive(!0).setVisible(!0)),this.emit("cellvisible",p,i,this),this.cellContainersPool){var t=p.getContainer();t?i===null?this.cellContainersPool.add(t):i!==t&&(this.cellContainersPool.add(t),this.cellContainersPool.killAndHide(i)):i!==null&&this.cellContainersPool.killAndHide(i)}},uR=function(){if(this.cellsCount!==0){var p=this.table,i=p.heightToRowIndex(-this.tableOY);i<=0&&(i=0);var t=i,f=p.widthToColIndex(-this.tableOX);f<=0&&(f=0);for(var e=f,s=p.colRowToCellIndex(e,t),l=this.bottomBound,n=this.rightBound,o=p.cellsCount-1,h=p.colCount-1,r=fR.call(this,e),a=r,v=dR.call(this,t);v<l&&s<=o;){if(this.table.isValidCellIdx(s)){var u=p.getCell(s,!0);this.visibleCells.set(u),this.preVisibleCells.contains(u)||Yv.call(this,u),this.scrollMode===0?u.setXY(a,v):u.setXY(v,a)}a<n&&e<h?(a+=p.getColWidth(e),e+=1):(a=r,v+=p.getRowHeight(t),e=f,t+=1),s=p.colRowToCellIndex(e,t)}}},fR=function(p){var i=this.scrollMode===0?this.topLeftX:this.topLeftY,t=this.tableOX+this.table.colIndexToWidth(0,p-1)+i;return t},dR=function(p){var i=this.scrollMode===0?this.topLeftY:this.topLeftX,t=this.tableOY+this.table.rowIndexToHeight(0,p-1)+i;return t},vR=function(p){return p===void 0&&(p=!1),p&&(Xu.call(this),Uu.call(this)),Xu.call(this),uR.call(this),Uu.call(this),this.setMaskChildrenFlag(),this},Xu=function(){var p=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=p,this.visibleCells.clear()},cR=function(p){var i=this.table.getCell(p,!1);return i&&this.visibleCells.contains(i)},Uv=function(p,i){i-=this.y+this.topLeftY,p-=this.x+this.topLeftX;var t=this.tableOY-(this.scrollMode===0?i:p),f=this.tableOX-(this.scrollMode===0?p:i),e=this.table,s=e.heightToRowIndex(-t),l=e.widthToColIndex(-f),n=e.colRowToCellIndex(l,s);return n===null||!this.isCellVisible(n)?null:n},pR=function(p,i){var t=Uv.call(this,p,i);if(t!==null)return this.getCellContainer(t)},gR=function(p,i){return this.visibleCells.each(p,i),this},mR=function(p,i){return this.visibleCells.iterate(p,i),this},xR=function(p,i){return this.table.cells.slice().forEach(p,i),this},yR=function(p,i){return this.table.cells.forEach(p,i),this},TR=function(p){var i=this.cellsCount;return i===p?this:(i>p?this.removeCells(p,i-p):this.insertNewCells(i,p-i),this)};const SR=Phaser.Math.Clamp;var CR=function(p,i){return typeof p=="object"&&(p=p.index),i===void 0&&(i=1),i<=0?this:(p=SR(p,0,this.cellsCount),this.table.insertNewCells(p,i),this)},ER=function(p,i){if(typeof p=="object"&&(p=p.index),i===void 0&&(i=1),p<0&&(i+=p,p=0),i<=0)return this;if(p>this.cellsCount)return this;for(var t,f=p,e=p+i;f<e;f++)t=this.getCell(f,!1),t&&(this.visibleCells.contains(t)&&(zv.call(this,t),this.visibleCells.delete(t)),this.preVisibleCells.delete(t));return this.table.removeCells(p,i),this},PR=function(p){return this.table.colCount===p?this:(this.table.setColumnCount(p),this)},MR=function(p,i){return this.setCellsCount(p*i),this.table.setColumnCount(p),this},AR=function(p){var i=this.table.getCell(p,!1);return!i||!i.container?this:(Yv.call(this,i),this)},Xv={setTableOY:tR,setTableOX:eR,updateTable:vR,isCellVisible:cR,pointToCellIndex:Uv,pointToCellContainer:pR,eachVisibleCell:gR,iterateVisibleCell:mR,eachCell:xR,iterateCell:yR,setCellsCount:TR,insertNewCells:CR,removeCells:ER,setColumnCount:PR,setGridSize:MR,updateVisibleCell:AR};Object.assign(Xv,Vv);const RR=Phaser.GameObjects.Group,Wu=Phaser.Structs.Set,de=Phaser.Utils.Objects.GetValue;class Wv extends xe{constructor(i,t,f,e,s,l){l===void 0&&(l={}),super(i,t,f,e,s),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new Wu,this.preVisibleCells=new Wu,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var n=de(l,"reuseCellContainer",!1);n&&(this.cellContainersPool=new RR(i));var o=de(l,"cellVisibleCallback",null);if(o!==null){var h=de(l,"cellVisibleCallbackScope",void 0);this.on("cellvisible",o,h)}if(o=de(l,"cellInvisibleCallback",null),o!==null){var h=de(l,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",o,h)}if(this.setupChildrenMask(de(l,"mask",void 0)),this.setScrollMode(de(l,"scrollMode",0)),this.setClampMode(de(l,"clamplTableOXY",!0)),this.scrollMode===0){var r=de(l,"cellWidth",void 0);if(this.expandCellSize=r===void 0,r===void 0){var a=de(l,"columns",1);l.cellWidth=this.width/a}}else{var r=de(l,"cellHeight",void 0),v=de(l,"cellWidth",void 0);this.expandCellSize=r===void 0,l.cellWidth=r,l.cellHeight=v}this.table=new _A(this,l),this.updateTable()}destroy(i){!this.scene||(this.destroyChildrenMask(),this.table.destroy(i),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(i))}setScrollMode(i){return typeof i=="string"&&(i=OR[i.toLowerCase()]),this.scrollMode=i,this}setClampMode(i){return i===void 0&&(i=!0),this.clampTableOXY=i,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(i){this.setTableOY(i).updateTable()}set tableOX(i){this.setTableOX(i).updateTable()}setTableOXY(i,t){return this.setTableOY(t).setTableOX(i),this}addTableOY(i){return this.setTableOY(this.tableOY+i),this}addTableOX(i){return this.setTableOX(this.tableOX+i),this}addTableOXY(i,t){return this.addTableOY(t).addTableOX(i),this}setTableOYByPercentage(i){return this.setTableOY(-this.tableVisibleHeight*i),this}getTableOYPercentage(){var i=this.tableVisibleHeight;return i===0?0:this.tableOY/-i}set t(i){this.setTableOYByPercentage(i).updateTable()}get t(){return this.getTableOYPercentage()}getCell(i){return this.table.getCell(i,!0)}getCellContainer(i){var t=this.table.getCell(i,!1),f;return t&&(f=t.getContainer()),f}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(i,t){var f;return typeof i=="number"?f=this.table.getCell(i,!0):f=i,f.height=t,this}setCellWidth(i,t){var f;return typeof i=="number"?f=this.table.getCell(i,!0):f=i,f.width=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var i=this.tableHeight-this.instHeight;return i<0&&(i=0),i}get tableVisibleWidth(){var i,t=this.tableWidth,f=this.instWidth;return t>f?i=t-f:i=0,i}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(i,t){return this.width===i&&this.height===t?this:(super.resize(i,t),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}}Object.assign(Wv.prototype,Xv);const OR={v:0,vertical:0,h:1,horizontal:1};var LR=function(p){Object.defineProperty(p,"childOY",{configurable:!0,get:function(){return p.tableOY},set:function(i){p.tableOY=i}}),Object.defineProperty(p,"topChildOY",{get:function(){return p.topTableOY}}),Object.defineProperty(p,"bottomChildOY",{get:function(){return p.bottomTableOY}}),Object.defineProperty(p,"childVisibleHeight",{get:function(){return p.instHeight}}),Object.defineProperty(p,"childHeight",{get:function(){return p.tableHeight}})},FR=function(p){p.on("cellvisible",function(i,l,f){var e=this.createCellContainerCallback,s=this.createCellContainerCallbackScope;i.item=this.items[i.index];var l;s?l=e.call(s,i,l,f):l=e(i,l,f),l&&(l.setOrigin&&l.setOrigin(0),l.isRexSizer&&l.layout()),i.item=void 0,i.setContainer(l)},this)},ze=function(p,i,t,f,e,s,l){var n;if(e===void 0?n=f:n=t.pointToCellIndex(f,e),n!=null){var o=t.getCellContainer(n);o&&p.emit(i,o,n,s,l)}},IR=function(p,i){p.on("pointerdown",function(t,f,e,s){ze(this.eventEmitter,"cell.down",p,t.x,t.y,t,s)},this).on("pointerup",function(t,f,e,s){ze(this.eventEmitter,"cell.up",p,t.x,t.y,t,s)},this)},DR=function(p,i){p.on("pointermove",Hu,this).on("pointerover",Hu,this).on("pointerout",BR,this)},Hu=function(p,i,t,f){var e=this.childrenMap.child,s=e.pointToCellIndex(p.x,p.y);if(s!==e.input.lastOverCellIndex){var l=e.input.lastOverCellIndex;e.input.lastOverCellIndex=s,ze(this.eventEmitter,"cell.out",e,l,void 0,p,f),ze(this.eventEmitter,"cell.over",e,s,void 0,p,f)}},BR=function(p,i){var t=this.childrenMap.child,f=t.input.lastOverCellIndex;t.input.lastOverCellIndex=void 0,ze(this.eventEmitter,"cell.out",t,f,void 0,p,i)};const wR=Phaser.Utils.Objects.GetValue;var GR=function(p,i){var t=wR(i,"click",void 0);t!==!1&&(t===void 0&&(t={}),t.threshold=10,p._click=new os(p,t),p._click.on("click",function(f,e,s,l){ze(this.eventEmitter,"cell.click",e,s.x,s.y,s,l)},this))};const NR=Phaser.Utils.Objects.GetValue;var bR=function(p,i){var t=NR(i,"tap",void 0);t!==!1&&(p._tap=new lr(p,t),p._tap.on("tap",function(f,e,s){var l=`cell.${f.tapsCount}tap`;ze(this.eventEmitter,l,f.gameObject,f.x,f.y,s)},this))};const VR=Phaser.Utils.Objects.GetValue;var zR=function(p,i){var t=VR(i,"press",void 0);t!==!1&&(p._press=new ur(p,t),p._press.on("pressstart",function(f,e,s){ze(this.eventEmitter,"cell.pressstart",p,f.x,f.y,s)},this).on("pressend",function(f,e,s){ze(this.eventEmitter,"cell.pressend",p,f.x,f.y,s)},this))};const YR=Phaser.Utils.Objects.GetValue;var UR=function(p,i){var t=YR(i,"swipe",void 0);t!==!1&&(t===void 0&&(t={}),t.dir="4dir",p._swipe=new Ws(p,t),p._swipe.on("swipe",function(f,e,s){var l=f.left?"left":f.right?"right":f.up?"up":"down";ze(this.eventEmitter,`cell.swipe${l}`,p,f.x,f.y,s)},this))},XR=function(p,i){p.setInteractive(),IR.call(this,p,i),DR.call(this,p,i),GR.call(this,p,i),bR.call(this,p,i),zR.call(this,p,i),UR.call(this,p,i)},WR=function(p){p===void 0?this.items.length=0:this.items=p;var i=this.childrenMap.child;return i.setCellsCount(this.items.length),i.updateTable(!0),this.resizeController(),this};const we=Phaser.Utils.Objects.GetValue;class sh extends yr{constructor(i,t){t===void 0&&(t={});var f=xr(t),e=we(t,"table",void 0);e===void 0&&(e={}),e.scrollMode=f,e.clamplTableOXY=we(t,"clamplChildOY",!1);var s=we(e,"width",void 0),l=we(e,"height",void 0),n=new Wv(i,0,0,s,l,e);i.add.existing(n);var o,h;f===0?(o=s===void 0?1:0,h=l===void 0):(o=l===void 0?1:0,h=s===void 0),LR(n),t.type="rexGridTable",t.child={gameObject:n,proportion:o,expand:h};var r=we(t,"space",void 0);r&&(r.child=r.table),super(i,t),this.addChildrenMap("table",n),this.addChildrenMap("tableLayer",n.maskLayer),this.eventEmitter=we(t,"eventEmitter",this);var a=we(t,"createCellContainerCallback",te),v=we(t,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(a,v),FR.call(this,n),this.resizeControllerFlag=!1;var u=f===0?"cellheightchange":"cellwidthchange";n.on(u,function(){this.resizeControllerFlag=!0},this),we(e,"interactive",!0)&&XR.call(this,n,e),this.setItems(we(t,"items",[])),i.game.events.on("poststep",this.onPostStep,this)}destroy(i){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(i))}setCreateCellContainerCallback(i,t){return this.createCellContainerCallback=i,this.createCellContainerCallbackScope=t,this}refresh(){return this.setItems(this.items),this}getCell(i){var t=this.childrenMap.child;return t.getCell(i)}getCellContainer(i){var t=this.childrenMap.child;return t.getCellContainer(i)}updateVisibleCell(i){var t=this.childrenMap.child;return t.updateVisibleCell(i)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var HR={setItems:WR};Object.assign(sh.prototype,HR);tt.register("gridTable",function(p){var i=new sh(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.GridTable",sh);var $R=function(p,i){this.collapseSubMenu();var t;this.root.toggleOrientation?t=this.orientation===0?1:0:t=this.orientation;var f=new this.constructor(this.scene,{items:i,orientation:t,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:p});return this.pin(f),this.childrenMap.subMenu=f,this.root.emit("expand",f,p,this),this},Ya=function(p,i){return p.sameOrientation?p.orientation=i.orientation:p.orientation=i.orientation===0?1:0,p},KR=function(){return this.root.emit("collapse",this,this.parentButton,this.root),this.scaleDownDestroy(Ya(this.root.easeOut,this)),this.collapseSubMenu(),this},JR=function(){if(this.childrenMap.subMenu===void 0)return this;var p=this.childrenMap.subMenu;return this.childrenMap.subMenu=void 0,this.remove(p),p.collapse(),this},ZR={expandSubMenu:$R,collapse:KR,collapseSubMenu:JR},QR=function(p,i,t,f){var e;return t&&(i.scene=p,f?e=t.call(f,i):e=t(i),i.scene=void 0),e},kR=function(p,i,t,f){var e,s=[],l;if(i&&t)for(var n=0,o=i.length;n<o;n++)e=i[n],e.scene=p,f?l=t.call(f,e,n,i):l=t(e,n,i),e.scene=void 0,s.push(l);return s},jR=function(p){p.on(p.root.expandEventName,function(i,t){if(!this._isPassedEvent){var f=this.items[t].children;f&&this.expandSubMenu(i,f)}},p).on("button.click",function(i,t,f,e){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",i,t,f,e),this.root._isPassedEvent=!1)},p).on("button.over",function(i,t,f,e){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",i,t,f,e),this.root._isPassedEvent=!1)},p).on("button.out",function(i,t,f,e){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",i,t,f,e),this.root._isPassedEvent=!1)},p)};const Ge=Phaser.Utils.Objects.GetValue;class nh extends ve{constructor(i,t){t===void 0&&(t={}),t.hasOwnProperty("orientation")||(t.orientation=1);var f=t._rootMenu,e=t._parentMenu,s=t._parentButton,l=Ge(t,"items",void 0),n=Ge(t,"createBackgroundCallback",void 0),o=Ge(t,"createBackgroundCallbackScope",void 0);t.background=QR(i,l,n,o);var h=Ge(t,"createButtonCallback",void 0),r=Ge(t,"createButtonCallbackScope",void 0);t.buttons=kR(i,l,h,r),super(i,t),this.type="rexMenu",this.items=l,this.root=f===void 0?this:f,this.parentMenu=e,this.parentButton=s;var a=this.root===this;if(a){var v=t.bounds;v===void 0&&(v=er(i)),this.bounds=v,this.subMenuSide=[this.y<v.centerY?Xa:Bn,this.x<v.centerX?Ua:Dn];var u=Ge(t,"subMenuSide",void 0);u!==void 0&&(typeof u=="string"&&(u=qR[u]),this.subMenuSide[this.orientation]=u),this.toggleOrientation=Ge(t,"toggleOrientation",!1),this.expandEventName=Ge(t,"expandEvent","button.click"),this.easeIn=$u(this,Ge(t,"easeIn",0)),this.easeOut=$u(this,Ge(t,"easeOut",0)),this.createBackgroundCallback=n,this.createBackgroundCallbackScope=o,this.createButtonCallback=h,this.createButtonCallbackScope=r,this._isPassedEvent=!1}var d=0,c=0;if(!this.root.easeIn.sameOrientation){var g=Ya(this.root.easeIn,this).orientation,m=e?e.orientation:this.orientation,u=this.root.subMenuSide[m];g===0&&u===Dn&&(d=1),g===1&&u===Bn&&(c=1)}if(this.setOrigin(d,c).layout(),!a){this.setScale(this.root.scaleX,this.root.scaleY);var u=this.root.subMenuSide[e.orientation];switch(u){case Dn:this.alignTop(s.top).alignRight(s.left);break;case Ua:this.alignTop(s.top).alignLeft(s.right);break;case Bn:this.alignLeft(s.left).alignBottom(s.top);break;case Xa:this.alignLeft(s.left).alignTop(s.bottom);break}}this.pushIntoBounds(this.root.bounds),jR(this),this.popUp(Ya(this.root.easeIn,this)),this.once("popup.complete",function(){this!==this.root&&this.root.emit("popup.complete",this)},this)}isInTouching(i){return super.isInTouching(i)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(i):!1}}var $u=function(p,i){return typeof i=="number"&&(i={duration:i}),i.hasOwnProperty("orientation")&&i.orientation!==void 0?i.sameOrientation=ko(i.orientation)===p.orientation:i.sameOrientation=!0,i};const Dn=2,Ua=0,Bn=3,Xa=1,qR={up:Bn,down:Xa,left:Dn,right:Ua};Object.assign(nh.prototype,ZR);tt.register("menu",function(p){var i=new nh(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Menu",nh);const _R=Phaser.GameObjects.Text;var rh=function(p){return p instanceof _R};const tO=Phaser.GameObjects.BitmapText;var Hv=function(p){return p instanceof tO};const ae=0,pe=1,ge=2;var $s=function(p){var i;return Hv(p)?i=ge:rh(p)?i=ae:i=pe,i},ah=function(p,i,t){var f=$s(p);switch(f){case ae:t=p.getWrappedText(i);break;case pe:t=p.getPenManager(i,t);break;case ge:p.maxWidth>0?t=p.setText(i).getTextBounds().wrappedText.split(`
`):t=i.split(`
`);break}return t},eO=function(p,i){p===void 0&&(p=this.startLineIndex),i===void 0&&(i=p+this.pageLinesCount);var t;switch(this.textObjectType){case ae:case ge:t=this.lines.slice(p,i).join(`
`);break;case pe:var f=this.lines.getLineStartIndex(p),e=this.lines.getLineEndIndex(i-1);t=this.lines.getSliceTagText(f,e,!0);break}return t},pa=function(p){return Array.isArray(p)?p=p.join(`
`):typeof p=="number"&&(p=p.toString()),p},iO={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(t){var i=this.totalLinesCount;this.sections.push(pa(t));var t=this.sections.join(`
`);this.lines=ah(this.parent,t,this.lines);for(var f=this.totalLinesCount-i,e=Math.ceil(f/this.pageLinesCount),s=0;s<e;s++)this.pageStartIndexes.push(i+s*this.pageLinesCount);return this},setText(p,i){i===void 0&&(i=!0),i&&this.resetPageIdx(),this.clearText();for(var t=pa(p).split(this.pageBreak),f=0,e=t.length;f<e;f++)this.appendPage(t[f]);return this},appendText(p){var i=this.content+pa(p);return this.setText(i,!1),this}};const sO=Phaser.Math.Clamp;var nO={getPage(p){return p===void 0&&(p=this.pageIndex),this.setPageIndex(p).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(p){return p=sO(p,0,this.pageCount-1),this.pageIndex=p,this.startLineIndex=this.pageStartIndexes[p],this.endLineIndex=this.pageStartIndexes[p+1],this}},oh=function(p,i){var t=$s(p);switch(t){case ae:var s=p.style,f=s.wordWrapWidth,e=s.wordWrapCallback;s.wordWrapWidth=0,s.wordWrapCallback=void 0,p.setText(i),s.wordWrapWidth=f,s.wordWrapCallback=e;break;case pe:var s=p.style,l=s.wrapMode;s.wrapMode=0,p.setText(i),s.wrapMode=l;break;case ge:var n=p._maxWidth;p._maxWidth=0,p.setText(i),p._maxWidth=n;break}},rO={showPage(p){return this.displayText(this.getPage(p)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(p){oh(this.parent,p)}},$v={getLines:eO};Object.assign($v,iO,nO,rO);const Ss=Phaser.Utils.Objects.GetValue,aO=Phaser.Math.Clamp;class Kv extends Yt{constructor(i,t){super(i,{eventEmitter:!1}),this.textObjectType=$s(this.parent),this.pageStartIndexes=[],this.lines=ah(this.parent,""),this.sections=[],this.resetFromJSON(t)}resetFromJSON(i){return this.setMaxLines(Ss(i,"maxLines",void 0)),this.setPageBreak(Ss(i,"pageBreak",`\f
`)),this.setText(Ss(i,"text","")),this.setStartLineIndex(Ss(i,"start",0)),this.setPageIndex(Ss(i,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(i){if(!this.isShutdown){switch(this.textObjectType){case ae:this.lines.length=0;break;case pe:this.lines.destroy();break;case ge:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(i)}}setMaxLines(i){return this.maxLines=i,this}setPageBreak(i){return this.pageBreak=i,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(i){i=aO(i,0,this.totalLinesCount-1),this._startLineIndex=i}setStartLineIndex(i){return this.startLineIndex=i,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var i;switch(this.textObjectType){case ae:case pe:var t=this.parent.style.maxLines;t>0?i=t:i=this.totalLinesCount;break;case ge:i=this.totalLinesCount;break}return i}get content(){return this.sections.join(this.pageBreak)}}Object.assign(Kv.prototype,$v);var oO=function(p,i){var t=$s(p);switch(t){case ae:p.style.syncFont(p.canvas,p.context),i=p.runWordWrap(i);break;case pe:i=p.getText(i,void 0,void 0,!0);break;case ge:i=p.setText(i).getTextBounds().wrappedText;break}return i};const Ji=Phaser.Utils.Objects.GetFastValue,ga=Phaser.Utils.Objects.GetValue;class hO extends Yt{constructor(i,t){super(i,t),this.timer=null,this.resetFromJSON(t)}resetFromJSON(i){this.setTextWrapEnable(ga(i,"wrap",!1)),this.setTypeMode(ga(i,"typeMode",0)),this.setTypeSpeed(ga(i,"speed",333)),this.setTextCallback=Ji(i,"setTextCallback",null),this.setTextCallbackScope=Ji(i,"setTextCallbackScope",null),this.setTypingContent(Ji(i,"text","")),this.typingIdx=Ji(i,"typingIdx",0),this.insertIdx=Ji(i,"insertIdx",null);var t=Ji(i,"elapsed",null);return t!==null&&this.start(void 0,void 0,this.typingIdx,t),this}shutdown(i){this.isShutdown||(this.freeTimer(),super.shutdown(i))}setTypeMode(i){return typeof i=="string"&&(i=lO[i]),this.typeMode=i,this}setTypeSpeed(i){return this.speed=i,this}setTextWrapEnable(i){return i===void 0&&(i=!0),this.textWrapEnable=i,this}set text(i){var t=Ku(i);this.textWrapEnable&&(t=oO(this.parent,t)),this._text=t}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(i,t,f,e){return i!==void 0&&this.setTypingContent(i),t!==void 0&&(this.speed=t),f===void 0&&(f=0),this.typingIdx=f+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(e)),this}appendText(i){var t=this.text.concat(Ku(i));return this.isTyping?this.setTypingContent(t):this.start(t,void 0,this.textLen),this}stop(i){var t=this.getTimer();return t&&this.freeTimer(),i&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var i=this.getTimer();return i&&(i.paused=!0),this}resume(){var i=this.getTimer();return i&&(i.paused=!1),this}setTypingContent(i){return this.text=i,this.textLen=this.getTextLength(this.text),this}onTyping(){var i=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(i),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(i,t,f,e){var s;if(e===0){var l=0,n=t;this.insertIdx=n,s=this.getSubString(i,l,n)}else if(e===1){var n=f,l=n-t;this.insertIdx=0,s=this.getSubString(i,l,n)}else if(e===2){var o=f/2,l=Math.floor(o-t/2),n=l+t;this.insertIdx=t%2?t:0,s=this.getSubString(i,l,n)}else if(e===3){var h=Math.floor(t/2),r;if(h>0){var n=f,l=n-h;r=this.getSubString(i,l,n)}else r="";var a=t-h,v;if(a>0){var l=0,n=l+a;this.insertIdx=n,v=this.getSubString(i,l,n)}else v="",this.insertIdx=0;s=v+r}return s}startTimer(i){this.timer&&this.freeTimer();var t;return i===void 0?t=0:t=i,this.timer=this.scene.time.addEvent({delay:0,startAt:t,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(i){this.setTextCallback&&(this.setTextCallbackScope?i=this.setTextCallback.call(this.setTextCallbackScope,i,this.isLastChar,this.insertIdx):i=this.setTextCallback(i,this.isLastChar,this.insertIdx)),this.textWrapEnable?oh(this.parent,i):this.parent.setText(i)}getTextLength(i){var t=this.parent,f;return t.getPlainText?f=t.getPlainText(i).length:f=i.length,f}getSubString(i,t,f){var e=this.parent,s;return e.getSubString?s=e.getSubString(i,t,f):s=i.slice(t,f),s}}var Ku=function(p){return Array.isArray(p)?p=p.join(`
`):typeof p=="number"&&(p=p.toString()),p};const lO={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},Ju=Phaser.Utils.Objects.GetValue;class Jv extends pr{constructor(i,t){t===void 0&&(t={text:uO(i)}),super(i,t),this.type="rexTextBox";var f=this.childrenMap.text;this.page=new Kv(f,Ju(t,"page",void 0)),this.typing=new hO(f,Ju(t,"type",void 0)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=f.width,this.textHeight=f.height}start(i,t){return this.page.setText(i),t!==void 0&&this.setTypeSpeed(t),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var i=this.page.getNextPage();this.typing.start(i)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(i){return this.typing.stop(i),this}setTypeSpeed(i){return this.typing.setTypeSpeed(i),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var i=this.childrenMap.text;(this.textWidth!==i.width||this.textHeight!==i.height)&&(this.textWidth=i.width,this.textHeight=i.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}}var uO=function(p){return p.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})};tt.register("textBox",function(p){var i=new Jv(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.TextBox",Jv);const ie=Phaser.Utils.Objects.GetValue;class Zv extends Lt{constructor(i,t){super(i,t),this.type="rexNumberBar";var f=ie(t,"background",void 0),e=ie(t,"icon",void 0),s=ie(t,"iconMask",void 0),l=ie(t,"slider",void 0),n=ie(t,"text",void 0),o=ie(t,"space.icon",0),h=ie(t,"space.slider",0);if(f&&this.addBackground(f),e){var r;this.orientation===0?(l||n)&&(r={right:o}):(l||n)&&(r={bottom:o}),this.add(e,{proportion:0,align:"center",padding:r}),s&&(s=Is.call(this,e,e,1))}var a;if(l){l.orientation=this.orientation,l.eventEmitter=this,l.value=null,l.hasOwnProperty("input")||(l.input=-1),a=new Hs(i,l),i.add.existing(a);var r;this.orientation===0?n&&(r={right:h}):n&&(r={bottom:h});var v;if(this.orientation===0){var u=ie(l,"width",void 0);v=u===void 0?1:0}else{var d=ie(l,"height",void 0);v=d===void 0?1:0}this.add(a,{proportion:v,align:"center",padding:r})}n&&this.add(n),this.addChildrenMap("background",f),this.addChildrenMap("icon",e),this.addChildrenMap("iconMask",s),this.addChildrenMap("slider",a),this.addChildrenMap("text",n);var c=ie(t,"valuechangeCallback",null);if(c!==null){var g=ie(t,"valuechangeCallbackScope",void 0);this.on("valuechange",c,g)}this.setEnable(ie(t,"enable",void 0)),this.setValue(ie(t,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(i){this.childrenMap.slider&&this.childrenMap.slider.setEnable(i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(i){!this.childrenMap.slider||(this.childrenMap.slider.value=i)}setValue(i,t,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(i,t,f),this}addValue(i,t,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(i,t,f),this}getValue(i,t){return this.childrenMap.slider?this.childrenMap.slider.getValue(i,t):0}easeValueTo(i,t,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(i,t,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(i),this}setEaseValueFunction(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(i),this}get text(){var i=this.childrenMap.text;if(i===void 0)return"";var t;return i.text?t=i.text:t=i.getData("text"),t}set text(i){var t=this.childrenMap.text;t!==void 0&&(t.setText?t.setText(i):t.setData("text",i))}setText(i){return this.text=i,this}}tt.register("numberBar",function(p){var i=new Zv(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.NumberBar",Zv);tt.register("scrollBar",function(p){var i=new ih(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.ScrollBar",ih);const ma=Phaser.Utils.Objects.GetValue,Zu={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class Qv extends Ti{constructor(i,t){super(i,t),this.type="rexBadge";var f=ma(t,"background",void 0);f&&this.addBackground(f),this.addChildrenMap("background",f);var e=ma(t,"main",void 0);e&&this.add(e,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",e);for(var s in Zu){var l=ma(t,s,void 0);l&&(this.add(l,{key:s,align:Zu[s],expand:!1}),this.addChildrenMap(s,l))}}}tt.register("badgeLabel",function(p){var i=new Qv(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.BadgeLabel",Qv);const fO=Ti.prototype.add;var Qu=function(p,i,t,f,e,s,l,n,o){return p.setVisible(!1),fO.call(this,p,i,t,f,e,s,l,n,o),this},dO={add:Qu,addPage:Qu},vO=function(p){return p===void 0?null:this.sizerChildren.hasOwnProperty(p)?this.sizerChildren[p]:null};const ku=xe.prototype.setChildVisible;var cO=function(p){this._previousKey=this._currentKey;var i=this.previousPage;i&&(this.swapMode===0?(ku.call(this,i,!1),this.emit("pageinvisible",i,this._previousKey,this)):i.destroy()),p&&!this.sizerChildren.hasOwnProperty(p)&&this.emit("createpage",p,this),this._currentKey=p;var t=this.currentPage;return t&&(ku.call(this,t,!0),this.emit("pagevisible",t,this._currentKey,this)),this},kv={getPage:vO,swapPage:cO};Object.assign(kv,dO);const pO=Phaser.Utils.Objects.GetValue;class hh extends Ti{constructor(i,t){super(i,t),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(pO(t,"swapMode",0))}setSwapMode(i){return typeof i=="string"&&(i=gO[i]),this.swapMode=i,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(i){this.swapPage(i)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(hh.prototype,kv);const gO={invisible:0,destroy:1};tt.register("pages",function(p){var i=new hh(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Pages",hh);var mO=function(p){return p!==void 0&&(this.text=p),this.lines=ah(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},jv=function(p){return(p-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},qv=function(p){return p*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},xO=function(p){var i=p+this.visibleLinesCount+1,t;switch(this.textObjectType){case ae:t=this.lines.slice(p,i).join(`
`);break;case pe:var f=this.lines.getLineStartIndex(p),e=this.lines.getLineEndIndex(i-1);t=this.lines.getSliceTagText(f,e,!0);break;case ge:t=this.lines.slice(p,i).join(`
`);break}return t},_v=function(){var p=this.textObject.rexSizer;this.textObject.y+=p.offsetY-p.preOffsetY,p.preOffsetY=p.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&yO.call(this)},yO=function(){if(!!this.textObject.setCrop){var p=this.textObject.rexSizer.offsetY,i,t;p<=0?(i=-p,t=this.height):(i=0,t=this.height-p),this.textObject.setCrop(0,i,this.width,t)}},TO=function(){var p=Math.max(Math.floor(jv.call(this,-this.textOY)),0),i=qv.call(this,p)+this.textOY,t=xO.call(this,p);return oh(this.textObject,t),this.textObject.rexSizer.offsetY=i,_v.call(this),this},SO=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,Ys.call(this),this},CO=function(p,i,t){if(t+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===i&&this._textObjectRealHeight===t)){switch(this.textObjectWidth=i,this._textObjectRealHeight=t,this.textObjectType){case ae:case pe:p.setFixedSize(i,t);var f=p.style,e=Math.max(i,0);this.textObjectType===ae?f.wordWrapWidth=e:(f.wrapMode===0&&(f.wrapMode=1),f.wrapWidth=e);break;case ge:p.setMaxWidth(i);break}this.setText()}},EO=function(){var p,i,t,f=this.left,e=this.top,s,l,n,o;p=this.textObject,p.rexSizer.hidden||(i=p.rexSizer,t=i.padding,s=f+t.left,l=e+t.top,n=this.width-t.left-t.right,o=this.height-t.top-t.bottom,CO.call(this,p,n,o),sr(p,s,l,n,o,i.align),i.preOffsetY=0,_v.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},PO={setText:mO,updateTextObject:TO,preLayout:SO,layoutChildren:EO};const ju=Phaser.Utils.Objects.IsPlainObject,se=Phaser.Utils.Objects.GetValue,MO=Phaser.Display.Align.TOP_LEFT;class tc extends Di{constructor(i,t,f,e,s,l){ju(t)?(l=t,t=se(l,"x",0),f=se(l,"y",0),e=se(l,"width",void 0),s=se(l,"height",void 0)):ju(e)&&(l=e,e=se(l,"width",void 0),s=se(l,"height",void 0)),super(i,t,f,e,s,l),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=se(l,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(se(l,"clamplTextOY",!0)),this.alwaysScrollable=se(l,"alwaysScrollable",!1);var n=se(l,"background",void 0),o=se(l,"text",void 0);o===void 0&&(o=AO(i)),this.textCropEnable=se(l,"textCrop",!!o.setCrop);var h=se(l,"textMask",!this.textCropEnable);n&&this.addBackground(n),this.add(o),this.sizerChildren=[o];var r=this.getSizerConfig(o);r.align=MO,r.padding=as(0),r.expand=!0,this.textObject=o,this.textObjectType=$s(o),r.preOffsetY=0,r.offsetY=0,h&&(this.textMask=Is.call(this,this.textObject,this)),this.addChildrenMap("background",n),this.addChildrenMap("text",o)}destroy(i){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case ae:this.lines.length=0;break;case pe:this.lines.destroy();break;case ge:this.lines.length=0;break}this.lines=void 0}super.destroy(i)}}setClampMode(i){return i===void 0&&(i=!0),this.clampTextOY=i,this}get textLineHeight(){if(this._textLineHeight===void 0){var i;switch(this.textObjectType){case ae:case pe:var t=this.textObject.style;i=t.metrics.fontSize+t.strokeThickness;break;case ge:var f=this.textObject.fontSize/this.textObject.fontData.size;i=this.textObject.fontData.lineHeight*f;break}this._textLineHeight=i}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var i;switch(this.textObjectType){case ae:case pe:i=this.textObject.lineSpacing;break;case ge:i=0;break}this._textLineSpacing=i}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(jv.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=qv.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var i=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&i<0&&(i=0),this._textVisibleHeight=i}return this._textVisibleHeight}textOYExceedTop(i){return i===void 0&&(i=this.textOY),i>this.topTextOY}textOYExeceedBottom(i){return i===void 0&&(i=this.textOY),i<this.bottomTextOY}get textOY(){return this._textOY}set textOY(i){var t=this.topTextOY,f=this.bottomTextOY,e=this.textOYExceedTop(i),s=this.textOYExeceedBottom(i);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?i=0:e?i=t:s&&(i=f)),this._textOY!==i&&(this._textOY=i,this.updateTextObject()),e&&(this.execeedTopState||this.emit("execeedtop",this,i,t)),this.execeedTopState=e,s&&(this.execeedBottomState||this.emit("execeedbottom",this,i,f)),this.execeedBottomState=s}setTextOY(i){return this.textOY=i,this}set t(i){this.textOY=-this.textVisibleHeight*i}get t(){var i=this.textVisibleHeight;return i===0?0:this.textOY/-i}setTextOYByPercentage(i){return this.t=i,this}}var AO=function(p){return p.add.text(0,0,"")};Object.assign(tc.prototype,PO);var RO=function(p){Object.defineProperty(p,"childOY",{configurable:!0,get:function(){return p.textOY},set:function(i){p.textOY=i}}),Object.defineProperty(p,"topChildOY",{get:function(){return p.topTextOY}}),Object.defineProperty(p,"bottomChildOY",{get:function(){return p.bottomTextOY}}),Object.defineProperty(p,"childVisibleHeight",{get:function(){return p.textObjectHeight}}),Object.defineProperty(p,"childHeight",{get:function(){return p.textHeight}})},OO=function(p){var i=this.childrenMap.child;return i.setText(p),this.resizeController(),this},LO=function(p){return this.setText(this.text+p),this};const Qe=Phaser.Utils.Objects.GetValue;class lh extends yr{constructor(i,t){t===void 0&&(t={});var f=Qe(t,"text",void 0),e=Qe(t,"textWidth",void 0),s=Qe(t,"textHeight",void 0),l=Qe(t,"textCrop",!!f.setCrop),n=Qe(t,"textMask",!l),o=Qe(t,"content",""),h=new tc(i,{width:e,height:s,text:f,textMask:n,textCrop:l&&!n,content:o,clamplTextOY:Qe(t,"clamplChildOY",!1),alwaysScrollable:Qe(t,"alwaysScrollable",!1)});i.add.existing(h);var r=e===void 0?1:0,a=s===void 0;RO(h),t.scrollMode=0,t.type="rexTextArea",t.child={gameObject:h,proportion:r,expand:a};var v=Qe(t,"space",void 0);v&&(v.child=v.text),super(i,t),this.addChildrenMap("text",f)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var FO={setText:OO,appendText:LO};Object.assign(lh.prototype,FO);tt.register("textArea",function(p){var i=new lh(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.TextArea",lh);var IO=function(){if(this.rexSizer.hidden)return 0;var p,i=this.child,t=i.rexSizer;return t.hidden?p=0:this.scrollMode===0?p=this.getChildWidth(i):p=0,p},DO=function(){if(this.rexSizer.hidden)return 0;var p,i=this.child,t=i.rexSizer;return t.hidden||this.scrollMode===0?p=0:p=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.hasOwnProperty("minHeight")?i.minHeight:ct(i),p},BO=function(p){return p===void 0&&(p=[]),this.child&&this.child.isRexSizer&&p.push(this.child),p},wO=function(){var p=this.left,i=this.top;this.scrollMode===0?i+=this.childOY:p+=this.childOY,this.child.setPosition(p,i),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},GO=function(){var p=this.child,i,t;p.rexSizer.hidden||(this.scrollMode===0?i=this.width:t=this.height,p.isRexSizer?p.runLayout(this,i,t):gi(p,i,t),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},ec={getChildrenWidth:IO,getChildrenHeight:DO,getChildrenSizers:BO,resetChildPosition:wO,layoutChildren:GO};Object.assign(ec,Vv);const qu=Phaser.Utils.Objects.IsPlainObject,Pe=Phaser.Utils.Objects.GetValue,NO=Phaser.Display.Align.TOP_LEFT;class ic extends Di{constructor(i,t,f,e,s,l){qu(t)?(l=t,t=Pe(l,"x",0),f=Pe(l,"y",0),e=Pe(l,"width",void 0),s=Pe(l,"height",void 0)):qu(e)&&(l=e,e=Pe(l,"width",void 0),s=Pe(l,"height",void 0)),super(i,t,f,e,s,l),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(Pe(l,"scrollMode",!0)),this.setClampMode(Pe(l,"clamplChildOY",!0));var n=Pe(l,"child",void 0),o=Pe(l,"expand",!0);n.setOrigin&&n.setOrigin(0),this.add(n),this.sizerChildren=[n];var h=this.getSizerConfig(n);h.align=NO,h.expand=o,this.child=n,this.setupChildrenMask(Pe(l,"mask",void 0))}destroy(i){!this.scene||(this.destroyChildrenMask(),this.child=void 0,super.destroy(i))}setScrollMode(i){return typeof i=="string"&&(i=Gv[i.toLowerCase()]),this.scrollMode=i,this}setClampMode(i){return i===void 0&&(i=!0),this.clampChildOY=i,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?ct(this.child):mt(this.child)}get childWidth(){return this.scrollMode===0?mt(this.child):ct(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var i=this.childHeight-this.childVisibleHeight;return i<0&&(i=0),i}childOYExceedTop(i){return i===void 0&&(i=this.childOY),i>this.topChildOY}childOYExeceedBottom(i){return i===void 0&&(i=this.childOY),i<this.bottomChildOY}get childOY(){return this._childOY}set childOY(i){var t=this.topChildOY,f=this.bottomChildOY,e=this.childOYExceedTop(i),s=this.childOYExeceedBottom(i);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?i=0:e?i=t:s&&(i=f)),this._childOY!==i&&(this._childOY=i,this.resetChildPosition()),e&&(this.execeedTopState||this.emit("execeedtop",this,i,t)),this.execeedTopState=e,s&&(this.execeedBottomState||this.emit("execeedbottom",this,i,f)),this.execeedBottomState=s}setChildOY(i){return this.childOY=i,this}set t(i){this.childOY=-this.visibleHeight*i}get t(){var i=this.visibleHeight;return i===0?0:this.childOY/-i}setChildOYByPercentage(i){return this.t=i,this}}Object.assign(ic.prototype,ec);const Cs=Phaser.Utils.Objects.GetValue;class sc extends yr{constructor(i,t){t===void 0&&(t={});var f=xr(t),e=Cs(t,"panel",void 0);e===void 0&&(e={}),e.scrollMode=f,e.clamplChildOY=Cs(t,"clamplChildOY",!1);var s=new ic(i,e);i.add.existing(s);var l=Cs(e,"width",void 0),n=Cs(e,"height",void 0),o,h;f===0?(o=l===void 0?1:0,h=n===void 0):(o=n===void 0?1:0,h=l===void 0),t.type="rexScrollablePanel",t.child={gameObject:s,proportion:o,expand:h};var r=Cs(t,"space",void 0);r&&(r.child=r.panel),super(i,t),this.addChildrenMap("panel",s.child),this.addChildrenMap("panelLayer",s.maskLayer)}setChildrenInteractive(i){return i===void 0&&(i={}),i.hasOwnProperty("eventEmitter")||(i.eventEmitter=this),i.hasOwnProperty("targets")||(i.targets=[this.childrenMap.panel]),zo(this.childrenMap.child,i),this}}tt.register("scrollablePanel",function(p){var i=new sc(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.ScrollablePanel",sc);var Sn={popUp:function(p,i){p.popUp(i)},scaleDown:function(p,i){p.scaleDown(i)},fadeIn:function(p,i){p.fadeIn(i)},fadeOut:function(p,i){p.fadeOut(i)}},nc=function(p,i,t,f){t===void 0&&(t=0),f===void 0&&(f=i.length),p.length=f-t;for(var e=0,s=p.length;e<s;e++)p[e]=i[e+t];return p};const wn=Phaser.Utils.Objects.GetValue;var Wa=function(p,i,t){var f=wn(t,"reverse",!1),e;if(me(p[0]))if(f)for(var l=p.length,s=l-1;s>=0;s--)e=Wa(p[s],i,t);else for(var s=0,l=p.length;s<l;s++)e=Wa(p[s],i,t);else e=bO(p,i,t);return e},bO=function(p,i,t){var f=wn(t,"argsConvert",void 0),e=wn(t,"argsConvertScope",void 0),s=p[0];if(ai=nc(ai,p,1),f){f===!0&&(f=kd,e=void 0);for(var l=0,n=ai.length;l<n;l++)e?ai[l]=f.call(e,ai[l],p):ai[l]=f(ai[l],p)}var o;typeof s=="string"?(o=i[s],o==null&&(o=wn(i,s,null))):o=s;var h=o.apply(i,ai);return h},ai=[];const Me=Phaser.Utils.Objects.GetValue;class VO extends Yt{constructor(i,t){super(i,t);var f=Me(t,"clock",void 0);f||(f=new iv(i)),this.clock=f,this.clock.on("update",this.update,this),this.resetFromJSON(t)}resetFromJSON(i){return this.clock.resetFromJSON(Me(i,"clock",void 0)),this.state=Me(i,"state",0),this.commands=Me(i,"commands",[]),this.scope=Me(i,"scope",void 0),this.setTimeUnit(Me(i,"timeUnit",0)),this.setDtMode(Me(i,"dtMode",0)),this.index=Me(i,"index",0),this.nextTime=Me(i,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(i){this.isShutdown||(this.clock.shutdown(i),this.commands=void 0,super.shutdown(i))}load(i,t,f){this.stop();var e=Me(f,"timeUnit",void 0);e!==void 0&&this.setTimeUnit(e);var s=Me(f,"dtMode",void 0);return s!==void 0&&this.setDtMode(s),i=i.filter(function(l){var n=l[0];return!isNaN(n)}).map(function(l){var n=l[0];return typeof n=="string"&&(l[0]=parseFloat(l[0])),l}),this.dtMode===0&&i.sort(function(l,n){var o=l[0],h=n[0];return o>h?1:o<h?-1:0}),this.commands=i,this.scope=t,this}start(i){return i===void 0&&(i=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(i),this.update(i),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(i){return this.clock.seek(i),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(i){this.clock.timeScale=i}setTimeScale(i){return this.timeScale=i,this}get now(){return this.clock.now}update(i){if(this.nextTime>i)return this;for(var t=this.commands.length-1;;){var f=this.commands[this.index],e=f[1];if(me(e)||(e=nc(zO,f,1)),Wa(e,this.scope),this.emit("runcommand",e,this.scope),this.index===t)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>i)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(i){var t=this.commands[this.index][0];return this.timeUnit===1&&(t=t*1e3),this.dtMode===1&&(t+=i),t}setDtMode(i){return typeof i=="string"&&(i=UO[i]),this.dtMode=i,this}setTimeUnit(i){return typeof i=="string"&&(i=YO[i]),this.timeUnit=i,this}}var zO=[];const YO={ms:0,s:1,sec:1},UO={abs:0,absolute:0,inc:1,increment:1},Es=Phaser.Utils.Objects.GetValue;class rc extends pr{constructor(i,t){t===void 0&&(t={text:createDefaultTextObject(i)}),super(i,t),this.type="rexToast",this.setTransitInTime(Es(t,"duration.in",200)),this.setDisplayTime(Es(t,"duration.hold",1200)),this.setTransitOutTime(Es(t,"duration.out",200)),this.setTransitInCallback(Es(t,"transitIn",oi.popUp)),this.setTransitOutCallback(Es(t,"transitOut",oi.scaleDown)),this.player=new VO(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(i){!this.scene||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(i))}setDisplayTime(i){return this.displayTime=i,this}setTransitOutTime(i){return this.transitOutTime=i,this}setTransitInTime(i){return this.transitInTime=i,this}setTransitInCallback(i){switch(typeof i=="string"&&(i=oi[i]),i){case oi.popUp:i=Sn.popUp;break;case oi.fadeIn:i=Sn.fadeIn;break}return i||(i=te),this.transitInCallback=i,this}setTransitOutCallback(i){switch(typeof i=="string"&&(i=oi[i]),i){case oi.scaleDown:i=Sn.scaleDown;break;case oi.fadeOut:i=Sn.fadeOut;break}return i||(i=te),this.transitOutCallback=i,this}setScale(i,t){return t===void 0&&(t=i),this.scaleX0=i,this.scaleY0=t,super.setScale(i,t),this}showMessage(i){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),i===void 0){if(this.messages.length===0)return this;i=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(i),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof i=="string"?this.setText(i):i(this),this.layout();var t=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[te]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[te]]];return this.player.load(t,this).once("complete",function(){this.showMessage()},this).start(),this}}const oi={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};tt.register("toast",function(p){var i=new rc(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Toast",rc);var XO=function(){return function(p,i,t,f){i!=="panel"&&t.setChildVisible(p,!0)}},WO=function(){return function(p,i,t,f){i!=="panel"&&t.setChildVisible(p,!1)}},HO={show:XO,hide:WO},$O=function(p,i){return i===void 0&&(i=1),function(t,f,e,s){f!=="panel"&&e.fadeChild(t,s?0:p,i)}},KO=function(p,i){return i===void 0&&(i=0),function(t,f,e,s){f!=="panel"&&e.fadeChild(t,s?0:p,i)}},JO={show:$O,hide:KO},_u=function(p,i){return function(t,f,e,s){f!=="panel"&&e.moveChild(t,s?0:p,i)}},ZO={show:_u,hide:_u},tf=function(p,i){return function(t,f,e,s){f==="panel"&&e.moveChild(t,s?0:p,i)}},QO={show:tf,hide:tf};const xa={visible:HO,fade:JO,move:ZO,"move-panel":QO};var kO=function(p){var i,t;[i,...t]=typeof p=="string"?[p]:p;var f,e;return xa.hasOwnProperty(i)?(f=xa[i].show.apply(null,t),e=xa[i].hide.apply(null,t)):(f=te,e=te),{show:f,hide:e}},jO={showChild(p,i){var t=this.sizerChildren[p];return t&&(this.emit("showchild",t,p,this,i),this.resetChildState(t)),this},hideChild(p,i){var t=this.sizerChildren[p];return t&&(this.emit("hidechild",t,p,this,i),this.resetChildState(t)),this},swapChild(p,i){return this.currentChildKey===p||(this.currentChildKey==="panel"||p==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=p,this.hideChild(this.previousChildKey,i),this.showChild(this.currentChildKey,i)):(this.swapChild("panel",i),this.swapChild(p,i))),this},showPanel(p){return this.swapChild("panel",p),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var p=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(p),this},toggleRightSide(){var p=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(p),this},toggleTopSide(){var p=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(p),this},toggleBottomSide(){var p=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(p),this}};const qO=xe.prototype.setChildVisible;var _O={setChildVisible(p,i){var t;if(typeof p=="string"){var t=p;p=this.sizerChildren[t]}else t=vr(this.sizerChildren,p);return i===void 0&&(i=this.currentChildKey===t),qO.call(this,p,i),this}},t2={fadeChild(p,i,t){var f;return typeof p=="string"?(f=p,p=this.sizerChildren[f]):f=vr(this.sizerChildren,p),i===void 0&&(i=500),t===void 0&&(t=this.currentChildKey===f?1:0),p.fadeIn(i,{start:p.alpha,end:t}),this},fadeChildPromise(p,i,t){return typeof p=="string"&&(p=this.sizerChildren[key]),this.fadeChild(p,i,t),p._fade?zt(p._fade):Promise.resolve()}},e2={moveChild(p,i,t,f){var e;typeof p=="string"?(e=p,p=this.sizerChildren[e]):e=vr(this.sizerChildren,p),i===void 0&&(i=500);var s=this.currentChildKey===e;if(f===void 0)switch(e){case"leftSide":case"rightSide":f=mt(p);break;case"topSide":case"bottomSide":f=ct(p);break;default:if(s)switch(this.previousChildKey){case"leftSide":case"rightSide":f=mt(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":f=ct(this.sizerChildren[this.previousChildKey]);break;default:f=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":f=mt(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":f=ct(this.sizerChildren[this.currentChildKey]);break;default:f=0;break}break}var l,n,o,h;if(s)switch(e){case"panel":switch(this.previousChildKey){case"leftSide":l=!0;break;case"rightSide":n=!0;break;case"topSide":o=!0;break;case"bottomSide":h=!0;break}break;case"leftSide":n=!0;break;case"rightSide":l=!0;break;case"topSide":h=!0;break;case"bottomSide":o=!0;break}else switch(e){case"panel":switch(this.currentChildKey){case"leftSide":n=!0;break;case"rightSide":l=!0;break;case"topSide":h=!0;break;case"bottomSide":o=!0;break}break;case"leftSide":l=!0;break;case"rightSide":n=!0;break;case"topSide":o=!0;break;case"bottomSide":h=!0;break}return l?p.moveTo(i,`-=${f}`,void 0,t):n?p.moveTo(i,`+=${f}`,void 0,t):o?p.moveTo(i,void 0,`-=${f}`,t):h?p.moveTo(i,void 0,`+=${f}`,t):p.moveTo(0),this},moveChildPromise(p,i,t,f){return typeof p=="string"&&(p=this.sizerChildren[key]),this.moveChild(p,i,t,f),p._easeMove?zt(p._easeMove):Promise.resolve()}},ac={};Object.assign(ac,_O,t2,e2);const _t=Phaser.Utils.Objects.GetValue;class uh extends Ti{constructor(i,t){super(i,t),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var f=_t(t,"showChildCallback",void 0);if(f)if(or(f)){var e=_t(t,"showChildCallbackScope",void 0);this.on("showchild",f,e);var s=_t(t,"hideChildCallback",void 0),l=_t(t,"hideChildCallbackScope",void 0);this.on("hidechild",s,l)}else{var n=kO(f);this.on("showchild",n.show),this.on("hidechild",n.hide)}var o=_t(t,"background",void 0),h=_t(t,"panel",void 0),r=_t(t,"leftSide",void 0),a=_t(t,"rightSide",void 0),v=_t(t,"topSide",void 0),u=_t(t,"bottomSide",void 0);if(o&&this.addBackground(o),h&&this.add(h,"panel","center",0,!0),r){var d=_t(t,"expand.left",!0);this.add(r,"leftSide","left-top",0,{height:d})}if(a){var d=_t(t,"expand.right",!0);this.add(a,"rightSide","right-top",0,{height:d})}if(v){var d=_t(t,"expand.top",!0);this.add(v,"topSide","left-top",0,{width:d})}if(u){var d=_t(t,"expand.bottom",!0);this.add(u,"bottomSide","left-bottom",0,{width:d})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(uh.prototype,jO,ac);tt.register("sides",function(p){var i=new uh(this.scene,p);return this.scene.add.existing(i),i});st(window,"RexPlugins.UI.Sides",uh);const i2=Phaser.GameObjects.GameObject;var Ks=function(p){return p instanceof i2};tt.register("click",function(p,i){return Ks(p)||(i=p,p=this.scene),new os(p,i)});st(window,"RexPlugins.UI.Click",os);tt.register("tap",function(p,i){return Ks(p)||(i=p,p=this.scene),new lr(p,i)});st(window,"RexPlugins.UI.Tap",lr);tt.register("press",function(p,i){return Ks(p)||(i=p,p=this.scene),new ur(p,i)});st(window,"RexPlugins.UI.Press",ur);tt.register("swipe",function(p,i){return Ks(p)||(i=p,p=this.scene),new Ws(p,i)});st(window,"RexPlugins.UI.Swipe",Ws);tt.register("pan",function(p,i){return Ks(p)||(i=p,p=this.scene),new mv(p,i)});st(window,"RexPlugins.UI.Pan",mv);var oc=function(p){for(var i=p.scene.input,t=i.manager,f=t.pointersTotal,e=t.pointers,s,l=0;l<f;l++)if(s=e[l],!(!s.primaryDown||i.getDragState(s)!==0||!zd(p,s)))return i.setDragState(s,1),i._drag[s.id]=[p],i.dragDistanceThreshold===0||i.dragTimeThreshold===0?(i.setDragState(s,3),i.processDragStartList(s)):i.setDragState(s,2),!0;return!1};const Cn=Phaser.Utils.Objects.GetValue,ef=Phaser.Math.Distance.Between,sf=Phaser.Math.RotateAroundDistance;class hc extends Yt{constructor(i,t){super(i,{eventEmitter:!1}),this._enable=void 0,i.setInteractive(Cn(t,"inputConfig",void 0)),this.resetFromJSON(t),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.setEnable(Cn(i,"enable",!0)),this.setAxisMode(Cn(i,"axis",0)),this.setAxisRotation(Cn(i,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var i=this.parent;i.on("dragstart",this.onDragStart,this),i.on("drag",this.onDrag,this),i.on("dragend",this.onDragEnd,this)}shutdown(i){this.isShutdown||(this.pointer=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragend(),this._enable=i,this.scene.input.setDraggable(this.parent,i),this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(i){return typeof i=="string"&&(i=s2[i]),this.axisMode=i,this}setAxisRotation(i){return this.axisRotation=i,this}drag(){return oc(this.parent),this}dragend(){if(!!this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(i,t,f){this.isDragging||(this.pointer=i)}onDrag(i,t,f){if(this.pointer===i){var e=this.parent;if(this.axisMode===0)e.x=t,e.y=f;else if(this.axisRotation===0)this.axisMode===1?e.x=t:this.axisMode===2&&(e.y=f);else{var s,l={x:t,y:f};s=ef(l.x,l.y,e.x,e.y),l=sf(l,e.x,e.y,-this.axisRotation,s),this.axisMode===1?l.y=e.y:this.axisMode===2&&(l.x=e.x),s=ef(l.x,l.y,e.x,e.y),l=sf(l,e.x,e.y,this.axisRotation,s),e.x=l.x,e.y=l.y}}}onDragEnd(i,t,f,e){this.pointer===i&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const s2={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};tt.register("drag",function(p,i){return new hc(p,i)});st(window,"RexPlugins.UI.Drag",hc);tt.register("pinch",function(p){return new xv(this.scene,p)});st(window,"RexPlugins.UI.Pinch",xv);tt.register("rotate",function(p){return new Vo(this.scene,p)});st(window,"RexPlugins.UI.Rotate",Vo);const n2=Phaser.Utils.Objects.IsPlainObject,nf=Phaser.Utils.Objects.GetValue;var rf=function(p,i,t){var f;if(p===void 0)p=t.texture.key,i=t.frame.name;else if(n2(p)){var e=p;p=nf(e,"key",t.texture.key),i=nf(e,"frame",t.frame.name)}else typeof p=="string"||(f=p);return f===void 0&&(f=function(s){s.setTexture(p,i)}),f};const Ps=Phaser.Utils.Objects.GetValue,r2=Phaser.Utils.Objects.GetAdvancedValue,a2=Phaser.Math.Linear;class lc extends rs{constructor(i,t){super(i,t),this.resetFromJSON(t),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setDuration(r2(i,"duration",500)),this.setEase(Ps(i,"ease","Sine")),this.setOrientation(Ps(i,"orientation",0)),this.setFrontFace(Ps(i,"front",void 0)),this.setBackFace(Ps(i,"back",void 0)),this.setFace(Ps(i,"face",0)),this}setOrientation(i){return typeof i=="string"&&(i=o2[i]),this.orientation=i,this}get face(){return this._face}set face(i){typeof i=="string"&&(i=h2[i]),this._face=i,i===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):i===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(i){return this.face=i,this}toggleFace(){var i=this.face===0?1:0;return this.setFace(i),this}setFrontFace(i,t){return this.frontFaceCallback=rf(i,t,this.parent),this}setBackFace(i,t){return this.backFaceCallback=rf(i,t,this.parent),this}start(){return this.timer.isRunning?this:(this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this)}flip(i){return this.isRunning?this:(i!==void 0&&this.setDuration(i),this.start(),this)}updateGameObject(i,t){t.justRestart&&this.toggleFace();var f=t.t;t.isOddIteration&&(f=1-f),f=this.easeFn(f);var e=a2(1,0,f);this.orientation===0?i.scaleX=e:i.scaleY=e}}const o2={x:0,horizontal:0,y:1,vertical:1},h2={front:0,back:1};tt.register("flip",function(p,i){return new lc(p,i)});st(window,"RexPlugins.UI.Flip",lc);tt.register("shake",function(p,i){return new Go(p,i)});st(window,"RexPlugins.UI.Shake",Go);tt.register("touchEventStop",function(p,i){return new Ko(p,i)});st(window,"RexPlugins.UI.TouchEventStop",Ko);const uc=Phaser.Math.Vector3,l2=Phaser.Math.Matrix4;var af=new uc,of=new uc,hf=new l2,u2=function(p,i,t,f,e,s,l){i===void 0&&(i=0),t===void 0&&(t=0),f===void 0&&(f=0),e===void 0&&(e=0),s===void 0&&(s=0),l===void 0&&(l=0),af.set(i,t,f),of.set(e,s,l),hf.fromRotationXYTranslation(of,af,!0);for(var n=0,o=p.vertices.length;n<o;n++)p.vertices[n].transformMat4(hf)};const f2=Phaser.GameObjects.Mesh,d2=Phaser.Utils.Objects.IsPlainObject,Fi=Phaser.Utils.Objects.GetValue,v2=Phaser.Geom.Mesh.GenerateGridVerts,ya=Phaser.Math.RadToDeg,Gn=Phaser.Math.DegToRad,fc=45,c2=1+1/Math.sin(Gn(fc));class p2 extends f2{constructor(i,t,f,e,s,l){d2(t)&&(l=t,t=Fi(l,"x",0),f=Fi(l,"y",0),e=Fi(l,"key",null),s=Fi(l,"frame",null)),super(i,t,f,e,s),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(c2),this.hideCCW=Fi(l,"hideCCW",!0);var n=Fi(l,"gridWidth",32),o=Fi(l,"gridHeight",n);this.resetVerts(n,o)}resetPerspective(){return this.setPerspective(this.width,this.height,fc),this}resetVerts(i,t){if(i!==void 0&&(this.gridWidth=i),t!==void 0&&(this.gridHeight=t),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var f=this.frame.cutWidth,e=this.frame.cutHeight;return v2({mesh:this,texture:this.texture.key,frame:this.frame.name,width:f/this.height,height:e/this.height,widthSegments:Math.ceil(f/this.gridWidth),heightSegments:Math.ceil(e/this.gridHeight),flipY:this.frame.source.isRenderTexture}),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(i){this.modelRotation.x=i}get angleX(){return ya(this.rotationX)}set angleX(i){this.rotationX=Gn(i)}get rotationY(){return this.modelRotation.y}set rotationY(i){this.modelRotation.y=i}get angleY(){return ya(this.rotationY)}set angleY(i){this.rotationY=Gn(i)}get rotationZ(){return this.modelRotation.z}set rotationZ(i){this.modelRotation.z=i}get angleZ(){return ya(this.rotationZ)}set angleZ(i){this.rotationZ=Gn(i)}transformVerts(i,t,f,e,s,l){return u2(this,i,t,f,e,s,l),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(i){for(var t=this.vertices,f=0,e=t.length;f<e;f++)t[f].color=i}setTint(i){return this.tint=i,this}}const g2=Phaser.GameObjects.RenderTexture,m2=Phaser.Utils.Objects.IsPlainObject,En=Phaser.Utils.Objects.GetValue;class x2 extends p2{constructor(i,t,f,e,s,l){m2(t)&&(l=t,t=En(l,"x",0),f=En(l,"y",0),e=En(l,"width",32),s=En(l,"height",32));var n=new g2(i,t,f,e,s).setOrigin(.5);super(i,t,f,n.texture.key,null,l),this.type="rexPerspectiveRenderTexture",this.rt=n}destroy(i){super.destroy(i),this.rt.destroy(),this.rt=null}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Utils.Objects.IsPlainObject;const y2=Phaser.Math.DegToRad;y2(180);Phaser.Utils.Objects.GetValue;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const lf=Phaser.Geom.Rectangle,T2=Phaser.Geom.Rectangle.Union;var S2=function(p,i){i===void 0?i=new lf:i===!0&&(Ta===void 0&&(Ta=new lf),i=Ta);for(var t,f=!0,e=0,s=p.length;e<s;e++)if(t=p[e],!!t.getBounds){var l=Io(t,!0);f?(i.setTo(l.x,l.y,l.width,l.height),f=!1):T2(l,i,i)}return i},Ta,Zi=Phaser.Utils.Objects.GetValue,C2=function(p){var i=p.gameObjects,t=p.renderTexture;if(i.length===0)return t&&t.setSize(1,1).clear(),t;var f=Zi(p,"x",void 0),e=Zi(p,"y",void 0),s=Zi(p,"width",void 0),l=Zi(p,"height",void 0),n=Zi(p,"originX",0),o=Zi(p,"originY",0),h,r;if(s===void 0||l===void 0||f===void 0||e===void 0){var a=S2(i,!0),v=f!==void 0&&e!==void 0;v?(s=Math.max(f-a.left,a.right-f)*2,l=Math.max(e-a.top,a.bottom-e)*2,n=.5,o=.5):(f=a.x,e=a.y,s=a.width,l=a.height,n=0,o=0),h=a.x,r=a.y}else h=f+(0-n)*s,r=e+(0-o)*l;if(t)t.setPosition(f,e),(t.width!==s||t.height!==l)&&t.setSize(s,l);else{var u=i[0].scene;t=u.add.renderTexture(f,e,s,l)}return t.setOrigin(n,o),t.camera.setScroll(h,r),i=Nn(is(i)),t.draw(i),t};const E2=xe.prototype.add,P2=Phaser.Utils.Objects.GetValue;class dc extends x2{constructor(i,t){var f=i.scene;super(f,i.x,i.y,1,1,t),f.add.existing(this),this.setVisible(!1),E2.call(i,this),this.visibleSibling=[],this.perspectiveState=!1,this.useParentBounds=P2(t,"useParentBounds",!1),this.boot()}boot(){this.rexContainer.parent.once("destroy",this.onParentDestroy,this)}destroy(i){!this.scene||(this.exit(),this.rexContainer.parent.off("destroy",this.onParentDestroy,this),super.destroy(i))}onParentDestroy(i,t){this.destroy(t)}enter(){this.exit();var i=this.rexContainer.parent;return C2({gameObjects:i.getAllVisibleChildren(),renderTexture:this.rt,x:this.x,y:this.y,width:this.useParentBounds?i.displayWidth:void 0,height:this.useParentBounds?i.displayHeighth:void 0,originX:this.useParentBounds?i.originX:void 0,originY:this.useParentBounds?i.originY:void 0}),this.syncSize(),i.setChildVisible(this,!0),i.children.forEach(function(t){t!==this&&(i.setChildVisible(t,!1),this.visibleSibling.push(t))},this),this.perspectiveState=!0,this}exit(){var i=this.rexContainer.parent;return this.visibleSibling.forEach(function(t){i.setChildVisible(t,!0)},this),this.visibleSibling.length=0,i.setChildVisible(this,!1),this.perspectiveState=!1,this}}tt.register("perspective",function(p,i){return new dc(p,i)});st(window,"RexPlugins.UI.Perspective",dc);tt.register("anchor",function(p,i){return new wo(p,i)});st(window,"RexPlugins.UI.Anchor",wo);const ke=Phaser.Utils.Objects.GetValue;var M2=function(p,i){i===void 0&&(i={});var t=p.scene,f=p.style,e=ke(i,"backgroundColor",f.backgroundColor);e===null&&(e="transparent"),i.text=ke(i,"text",p.text),i.fontFamily=ke(i,"fontFamily",f.fontFamily),i.fontSize=ke(i,"fontSize",f.fontSize),i.color=ke(i,"color",f.color),i.backgroundColor=e,i.direction=ke(i,"rtl",f.rtl)?"rtl":"ltr",i.align=ke(i,"align",A2(f)),i.direction==="rtl"&&rh(p)&&(i.align="right");var s=new lo(t,p.x,p.y,ke(i,"width",p.width),ke(i,"height",p.height),i);return s.setOrigin(p.originX,p.originY),t.add.existing(s),s},A2=function(p){return p.hasOwnProperty("align")?p.align:p.hasOwnProperty("halign")?p.halign:"left"};const Pn=Phaser.Utils.Objects.GetValue;var Qi=void 0;class R2 extends Yt{constructor(i){super(i,{eventEmitter:!1}),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0}shutdown(i){this.isShutdown||(this.close(),Qi===this&&(Qi=void 0),super.shutdown(i))}open(i,t){Qi!==void 0&&Qi.close(),Qi=this,or(i)&&(t=i,i=void 0),t===void 0&&(t=Pn(i,"onClose",void 0));var f=Pn(i,"onOpen",void 0),e=Pn(i,"onTextChanged",void 0);return this.inputText=M2(this.parent,i).on("textchange",function(s){var l=s.text;e?e(this.parent,l):this.parent.text=l},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,Pn(i,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),f&&f(this.parent)},[],this),this}close(){return Qi=void 0,this.inputText?(this.parent.setVisible(!0),this.inputText.destroy(),this.inputText=void 0,this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this):this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}var O2=function(p,i,t){return p._edit||(p._edit=new R2(p)),p._edit.open(i,t),p._edit},L2=function(p){var i=function(t){var f=p.padding,e=t-f.left-f.right,s=p.style;return rh(p)?(s.wordWrapWidth=e,s.maxLines=0):(s.wrapMode===0&&(s.wrapMode=1),s.wrapWidth=e,s.maxLines=0),p.setFixedSize(t,0),p};return i},F2=function(p){var i=function(t){return p.setFixedSize(t,0).runWordWrap(),p};return i},I2=function(p){var i=function(t){return p.setMaxWidth(t),p};return i},D2=function(p){return p instanceof bs},B2=function(p,i){return i===void 0&&(i=0),p._minWidth=i,p.runWidthWrap=D2(p)?F2(p):Hv(p)?I2(p):L2(p),p},w2=function(p,i){return p===void 0&&(p=0),new Promise(function(t,f){setTimeout(function(){t(i)},p)})},G2=function(p,i){var t=p.scene,f=new Jo(t,i);return t.add.existing(f),p.isRexContainerLite?p.moveDepthBelow(f):t.children.moveBelow(f,p),f},Mn={popUp:function(p,i){uv(p,i)},scaleDown:function(p,i){fv(p,i,void 0,void 0,!1)},fadeIn:function(p,i){rr(p,i)},fadeOut:function(p,i){ar(p,i,!1)}};class N2 extends Ue{constructor(i,t){super(t),this.parent=i,this.init()}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var i=this.parent;i.transitionIn(),i.delayCall(i.transitInTime,this.next,this)}exit_TRANS_OPNE(){var i=this.parent;i.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var i=this.parent,t=i.displayTime;t>=0&&i.delayCall(t,i.requestClose,i),i.onOpen()}exit_OPEN(){var i=this.parent;i.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var i=this.parent;i.transitionOut(),i.delayCall(i.transitOutTime,this.next,this)}exit_TRANS_CLOSE(){var i=this.parent;i.removeDelayCall()}next_CLOSE(){}enter_CLOSE(){var i=this.parent;i.onClose()}exit_CLOSE(){}}const je=Phaser.Utils.Objects.GetValue,b2=Phaser.Time.TimerEvent;class V2 extends Yt{constructor(i,t){super(i,t);var f=je(t,"cover");this.cover=f!==!1?G2(i,f):void 0;var e=je(t,"manualClose",!0);if(e)this.setDisplayTime(-1);else{this.setDisplayTime(je(t,"duration.hold",2e3));var s=je(t,"anyTouchClose",!0);s&&this.anyTouchClose()}this.setTransitInTime(je(t,"duration.in",200)),this.setTransitOutTime(je(t,"duration.out",200)),this.setTransitInCallback(je(t,"transitIn",hi.popUp)),this.setTransitOutCallback(je(t,"transitOut",hi.scaleDown)),this.destroyParent=je(t,"destroy",!0),this.timer=new b2,this._state=new N2(this,{eventEmitter:!1}),this.closeEventData=void 0,this._state.next()}get state(){return this._state.state}shutdown(i){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.requestClose,this),this.cover&&!i&&(this.cover.destroy(),this.cover=void 0),this.transitInCallback=void 0,this.transitOutCallback=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(i))}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.requestClose,this):this.scene.input.once("pointerup",this.requestClose,this),this}transitionIn(){var i=this.transitInTime;this.transitInCallback(this.parent,i);var t=this.cover;return t&&rr(t,i,t.alpha),this}transitionOut(){var i=this.transitOutTime;this.transitOutCallback(this.parent,i);var t=this.cover;return t&&ar(t,i,!1),this}onOpen(){this.emit("open",this.parent,this)}onClose(){this.emit("close",this.closeEventData),this.destroyParent?this.parent.destroy():this.destroy()}delayCall(i,t,f){var e=this.scene.sys.events;return this.timer=this.scene.time.delayedCall(i,e.once,["postupdate",t,f],e),this}removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}setTransitInTime(i){return this.transitInTime=i,this}setDisplayTime(i){return this.displayTime=i,this}setTransitOutTime(i){return this.transitOutTime=i,this}setTransitInCallback(i){switch(typeof i=="string"&&(i=hi[i]),i){case hi.popUp:i=Mn.popUp;break;case hi.fadeIn:i=Mn.fadeIn;break}return i||(i=te),this.transitInCallback=i,this}setTransitOutCallback(i){switch(typeof i=="string"&&(i=hi[i]),i){case hi.scaleDown:i=Mn.scaleDown;break;case hi.fadeOut:i=Mn.fadeOut;break}return i==null&&(i=te),this.transitOutCallback=i,this}requestClose(i){return this._state.state==="OPEN"&&(this.closeEventData=arguments.length>0?i:this.parent,this._state.next()),this}}const hi={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var vc=function(p,i){var t=new V2(p,i);return t.on("open",function(){p.emit("modal.open",t)}),t.on("close",function(f){p.emit("modal.close",f,t)}),p.on("modal.requestClose",t.requestClose,t),t.on("close",function(){p.off("modal.requestClose",t.requestClose,t)}),t},z2=function(p,i){var t=vc(p,i);return new Promise(function(f,e){t.once("close",function(s){f(s)})})},Y2=function(p,i){p.emit("modal.requestClose",i)};class cc extends Phaser.Plugins.ScenePlugin{constructor(i,t){super(i,t),this.add=new tt(i)}start(){var i=this.scene.events;i.on("destroy",this.destroy,this)}isInTouching(i,t,f,e){return i.visible?pv(i,t,f,e):!1}get viewport(){return er(this.scene,!0)}}var U2={getParentSizer:_e,getTopmostSizer:Ud,hide:di,show:fi,isShown:No,edit:O2,wrapExpandText:B2,waitEvent:co,waitComplete:zt,delayPromise:w2,setChildrenInteractive:zo,fadeIn:rr,fadeOutDestroy:ar,easeMoveTo:dv,easeMoveFrom:vv,modal:vc,modalPromise:z2,modalClose:Y2,requestDrag:oc};Object.assign(cc.prototype,U2);const X2={title:"Happy Hospital",type:Phaser.WEBGL,parent:"game",backgroundColor:"#777",dom:{createContainer:!0},scale:{mode:Phaser.Scale.ScaleModes.NONE,width:window.innerWidth,height:window.innerHeight},physics:{default:"arcade",arcade:{debug:!1}},render:{antialiasGL:!1,pixelArt:!0},callbacks:{postBoot:()=>{window.sizeChanged()}},canvasStyle:"display: block; width: 100%; height: 100%;",autoFocus:!0,audio:{disableWebAudio:!1},scene:[Ht],plugins:{scene:[{key:"rexUI",plugin:cc,mapping:"rexUI"}]}};window.sizeChanged=()=>{window.game.isBooted&&setTimeout(()=>{window.game.scale.resize(window.innerWidth,window.innerHeight),window.game.canvas.setAttribute("style",`display: block; width: ${window.innerWidth}px; height: ${window.innerHeight}px;`)},100)};window.onresize=()=>window.sizeChanged();window.game=new Ds.exports.Game(X2);setTimeout(()=>{window.snene=window.game.scene.scenes[0]},1e3);
